{
  "version": 3,
  "sources": ["../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/formatActions.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/documentSymbols/browser/outlineModel.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/documentSymbols/browser/documentSymbols.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inPlaceReplace/browser/inPlaceReplaceCommand.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inPlaceReplace/browser/inPlaceReplace.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/viewportSemanticTokens/browser/viewportSemanticTokens.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/standalone/browser/accessibilityHelp/accessibilityHelp.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/standalone/browser/inspectTokens/inspectTokens.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/_.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/typescript/typescript.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/anchorSelect/browser/anchorSelect.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/bracketMatching/browser/bracketMatching.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/caretOperations.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/moveCaretCommand.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/transpose.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/clipboard/browser/clipboard.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionContributions.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionCommands.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeAction.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/types.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionUi.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/message/browser/messageController.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionMenu.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/lightBulbWidget.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionModel.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensController.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelens.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codeLensCache.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensWidget.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorContributions.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorDetector.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/color.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorHoverParticipant.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerModel.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerWidget.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/hover.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/clickLinkGesture.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/peekView/browser/peekView.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/browser/widget/embeddedCodeEditorWidget.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/zoneWidget/browser/zoneWidget.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/platform/actions/browser/menuEntryActionViewItem.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/base/browser/ui/dropdown/dropdownActionViewItem.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/base/browser/ui/dropdown/dropdown.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToCommands.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesController.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/referencesModel.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesWidget.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesTree.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/base/common/labels.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/symbolNavigation.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToSymbol.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/contentHover.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/base/browser/ui/hover/hoverWidget.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/hoverOperation.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/hoverTypes.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggest.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetParser.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/findInput.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/base/browser/ui/checkbox/checkbox.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/findInputCheckboxes.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/replaceInput.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/platform/history/browser/contextScopedHistoryWidget.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/marginHover.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/base/browser/markdownRenderer.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/base/browser/dompurify/dompurify.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/base/common/marked/marked.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/markdownRenderer/browser/markdownRenderer.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/markdownHoverParticipant.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/getHover.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/markerHoverParticipant.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoError.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/markerNavigationService.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoErrorWidget.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/platform/severityIcon/common/severityIcon.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/comment.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/blockCommentCommand.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/lineCommentCommand.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/contextmenu/browser/contextmenu.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/cursorUndo/browser/cursorUndo.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/dnd/browser/dnd.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/dnd/browser/dragAndDropCommand.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findController.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findModel.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findDecorations.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/replaceAllCommand.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/base/common/search.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/replacePattern.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findOptionsWidget.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findState.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findWidget.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/platform/history/browser/historyWidgetKeybindingHint.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/folding.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/foldingModel.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/foldingRanges.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/hiddenRangeModel.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/indentRangeProvider.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/syntaxRangeProvider.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/intializingRangeProvider.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/foldingDecorations.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/fontZoom/browser/fontZoom.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/editor.all.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionsContribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostTextController.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/consts.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostTextModel.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionsModel.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostText.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionToGhostText.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/fixBrackets.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/suggestWidgetPreviewModel.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/suggestWidgetInlineCompletionProvider.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetSession.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetVariables.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/base/common/uuid.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestController.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetController2.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestMemory.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordContextKey.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestAlternatives.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestCommitCharacters.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestModel.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordDistance.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/bracketSelections.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/completionModel.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestOvertypingCapturer.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidget.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetStatus.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/symbolIcons/browser/symbolIcons.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/resizable.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetDetails.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetRenderer.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/common/services/getIconClasses.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/platform/files/common/files.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/utils.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostTextWidget.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionsHoverParticipant.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/indentation/browser/indentation.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/indentation/browser/indentUtils.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsContribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsController.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHints.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsLocations.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsHover.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/lineSelection/browser/lineSelection.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/linesOperations.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/common/commands/trimTrailingWhitespaceCommand.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/copyLinesCommand.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/moveLinesCommand.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/sortLinesCommand.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/linkedEditing/browser/linkedEditing.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/links/browser/links.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/links/browser/getLinks.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/multicursor/browser/multicursor.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHints.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/provideSignatureHelp.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHintsWidget.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHintsModel.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/rename.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/renameInputField.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/smartSelect.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/wordSelections.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/tokenization/browser/tokenization.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/unicodeHighlighter/browser/unicodeHighlighter.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/unicodeHighlighter/browser/bannerController.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/platform/opener/browser/link.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/unusualLineTerminators/browser/unusualLineTerminators.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/wordHighlighter/browser/wordHighlighter.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/wordOperations/browser/wordOperations.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/wordPartOperations/browser/wordPartOperations.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneCommandsQuickAccess.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/base/common/errorMessage.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/platform/quickinput/browser/commandsQuickAccess.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/platform/quickinput/browser/pickerQuickAccess.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/commandsQuickAccess.js", "../../node_modules/.pnpm/@okikio+sharedworker@1.0.4/node_modules/@okikio/sharedworker/lib/index.mjs", "../../node_modules/.pnpm/@okikio+emitter@2.1.7/node_modules/@okikio/emitter/lib/api.es.js", "worker:../editor/workers/empty.ts", "worker:../editor/workers/build.ts", "../../src/utils/WebWorker.ts", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/abap/abap.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/apex/apex.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/azcli/azcli.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/bat/bat.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/bicep/bicep.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/cameligo/cameligo.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/clojure/clojure.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/coffee/coffee.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/cpp/cpp.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/csharp/csharp.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/csp/csp.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/css/css.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/dart/dart.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/dockerfile/dockerfile.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/ecl/ecl.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/elixir/elixir.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/flow9/flow9.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/fsharp/fsharp.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/freemarker2/freemarker2.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/go/go.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/graphql/graphql.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/handlebars/handlebars.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/hcl/hcl.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/html/html.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/ini/ini.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/java/java.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/javascript/javascript.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/julia/julia.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/kotlin/kotlin.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/less/less.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/lexon/lexon.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/lua/lua.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/liquid/liquid.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/m3/m3.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/markdown/markdown.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/mips/mips.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/msdax/msdax.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/mysql/mysql.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/objective-c/objective-c.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/pascal/pascal.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/pascaligo/pascaligo.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/perl/perl.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/pgsql/pgsql.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/php/php.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/pla/pla.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/postiats/postiats.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/powerquery/powerquery.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/powershell/powershell.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/protobuf/protobuf.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/pug/pug.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/python/python.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/qsharp/qsharp.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/r/r.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/razor/razor.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/redis/redis.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/redshift/redshift.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/restructuredtext/restructuredtext.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/ruby/ruby.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/rust/rust.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/sb/sb.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/scala/scala.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/scheme/scheme.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/scss/scss.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/shell/shell.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/solidity/solidity.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/sophia/sophia.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/sparql/sparql.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/sql/sql.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/st/st.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/swift/swift.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/systemverilog/systemverilog.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/tcl/tcl.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/twig/twig.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/vb/vb.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/xml/xml.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/yaml/yaml.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/basic-languages/monaco.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/language/css/monaco.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/language/html/monaco.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/language/json/monaco.contribution.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/edcore.main.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneHelpQuickAccess.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/platform/quickinput/browser/helpQuickAccess.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoLineQuickAccess.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/editorNavigationQuickAccess.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneGotoLineQuickAccess.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoSymbolQuickAccess.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/base/common/fuzzyScorer.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneGotoSymbolQuickAccess.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/standalone/browser/referenceSearch/standaloneReferenceSearch.js", "../../node_modules/.pnpm/monaco-editor@0.33.0/node_modules/monaco-editor/esm/vs/editor/standalone/browser/toggleHighContrast/toggleHighContrast.js"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { alertFormattingEdits, formatDocumentRangesWithSelectedProvider, formatDocumentWithSelectedProvider, getOnTypeFormattingEdits } from './format.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorProgressService, Progress } from '../../../../platform/progress/common/progress.js';\nlet FormatOnType = class FormatOnType {\n    constructor(_editor, _languageFeaturesService, _workerService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._workerService = _workerService;\n        this._disposables = new DisposableStore();\n        this._sessionDisposables = new DisposableStore();\n        this._disposables.add(_languageFeaturesService.onTypeFormattingEditProvider.onDidChange(this._update, this));\n        this._disposables.add(_editor.onDidChangeModel(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\n        this._disposables.add(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(49 /* formatOnType */)) {\n                this._update();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._sessionDisposables.dispose();\n    }\n    _update() {\n        // clean up\n        this._sessionDisposables.clear();\n        // we are disabled\n        if (!this._editor.getOption(49 /* formatOnType */)) {\n            return;\n        }\n        // no model\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        // no support\n        const [support] = this._languageFeaturesService.onTypeFormattingEditProvider.ordered(model);\n        if (!support || !support.autoFormatTriggerCharacters) {\n            return;\n        }\n        // register typing listeners that will trigger the format\n        let triggerChars = new CharacterSet();\n        for (let ch of support.autoFormatTriggerCharacters) {\n            triggerChars.add(ch.charCodeAt(0));\n        }\n        this._sessionDisposables.add(this._editor.onDidType((text) => {\n            let lastCharCode = text.charCodeAt(text.length - 1);\n            if (triggerChars.has(lastCharCode)) {\n                this._trigger(String.fromCharCode(lastCharCode));\n            }\n        }));\n    }\n    _trigger(ch) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (this._editor.getSelections().length > 1 || !this._editor.getSelection().isEmpty()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const position = this._editor.getPosition();\n        const cts = new CancellationTokenSource();\n        // install a listener that checks if edits happens before the\n        // position on which we format right now. If so, we won't\n        // apply the format edits\n        const unbind = this._editor.onDidChangeModelContent((e) => {\n            if (e.isFlush) {\n                // a model.setValue() was called\n                // cancel only once\n                cts.cancel();\n                unbind.dispose();\n                return;\n            }\n            for (let i = 0, len = e.changes.length; i < len; i++) {\n                const change = e.changes[i];\n                if (change.range.endLineNumber <= position.lineNumber) {\n                    // cancel only once\n                    cts.cancel();\n                    unbind.dispose();\n                    return;\n                }\n            }\n        });\n        getOnTypeFormattingEdits(this._workerService, this._languageFeaturesService, model, position, ch, model.getFormattingOptions(), cts.token).then(edits => {\n            if (cts.token.isCancellationRequested) {\n                return;\n            }\n            if (isNonEmptyArray(edits)) {\n                FormattingEdit.execute(this._editor, edits, true);\n                alertFormattingEdits(edits);\n            }\n        }).finally(() => {\n            unbind.dispose();\n        });\n    }\n};\nFormatOnType.ID = 'editor.contrib.autoFormat';\nFormatOnType = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IEditorWorkerService)\n], FormatOnType);\nlet FormatOnPaste = class FormatOnPaste {\n    constructor(editor, _languageFeaturesService, _instantiationService) {\n        this.editor = editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._instantiationService = _instantiationService;\n        this._callOnDispose = new DisposableStore();\n        this._callOnModel = new DisposableStore();\n        this._callOnDispose.add(editor.onDidChangeConfiguration(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModel(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModelLanguage(() => this._update()));\n        this._callOnDispose.add(_languageFeaturesService.documentRangeFormattingEditProvider.onDidChange(this._update, this));\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        this._callOnModel.dispose();\n    }\n    _update() {\n        // clean up\n        this._callOnModel.clear();\n        // we are disabled\n        if (!this.editor.getOption(48 /* formatOnPaste */)) {\n            return;\n        }\n        // no model\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        // no formatter\n        if (!this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())) {\n            return;\n        }\n        this._callOnModel.add(this.editor.onDidPaste(({ range }) => this._trigger(range)));\n    }\n    _trigger(range) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (this.editor.getSelections().length > 1) {\n            return;\n        }\n        this._instantiationService.invokeFunction(formatDocumentRangesWithSelectedProvider, this.editor, range, 2 /* Silent */, Progress.None, CancellationToken.None).catch(onUnexpectedError);\n    }\n};\nFormatOnPaste.ID = 'editor.contrib.formatOnPaste';\nFormatOnPaste = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IInstantiationService)\n], FormatOnPaste);\nclass FormatDocumentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatDocument',\n            label: nls.localize('formatDocument.label', \"Format Document\"),\n            alias: 'Format Document',\n            precondition: ContextKeyExpr.and(EditorContextKeys.notInCompositeEditor, EditorContextKeys.writable, EditorContextKeys.hasDocumentFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 36 /* KeyF */,\n                linux: { primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 39 /* KeyI */ },\n                weight: 100 /* EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.3\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                const instaService = accessor.get(IInstantiationService);\n                const progressService = accessor.get(IEditorProgressService);\n                yield progressService.showWhile(instaService.invokeFunction(formatDocumentWithSelectedProvider, editor, 1 /* Explicit */, Progress.None, CancellationToken.None), 250);\n            }\n        });\n    }\n}\nclass FormatSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatSelection',\n            label: nls.localize('formatSelection.label', \"Format Selection\"),\n            alias: 'Format Selection',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasDocumentSelectionFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 36 /* KeyF */),\n                weight: 100 /* EditorContrib */\n            },\n            contextMenuOpts: {\n                when: EditorContextKeys.hasNonEmptySelection,\n                group: '1_modification',\n                order: 1.31\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const instaService = accessor.get(IInstantiationService);\n            const model = editor.getModel();\n            const ranges = editor.getSelections().map(range => {\n                return range.isEmpty()\n                    ? new Range(range.startLineNumber, 1, range.startLineNumber, model.getLineMaxColumn(range.startLineNumber))\n                    : range;\n            });\n            const progressService = accessor.get(IEditorProgressService);\n            yield progressService.showWhile(instaService.invokeFunction(formatDocumentRangesWithSelectedProvider, editor, ranges, 1 /* Explicit */, Progress.None, CancellationToken.None), 250);\n        });\n    }\n}\nregisterEditorContribution(FormatOnType.ID, FormatOnType);\nregisterEditorContribution(FormatOnPaste.ID, FormatOnPaste);\nregisterEditorAction(FormatDocumentAction);\nregisterEditorAction(FormatSelectionAction);\n// this is the old format action that does both (format document OR format selection)\n// and we keep it here such that existing keybinding configurations etc will still work\nCommandsRegistry.registerCommand('editor.action.format', (accessor) => __awaiter(void 0, void 0, void 0, function* () {\n    const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (!editor || !editor.hasModel()) {\n        return;\n    }\n    const commandService = accessor.get(ICommandService);\n    if (editor.getSelection().isEmpty()) {\n        yield commandService.executeCommand('editor.action.formatDocument');\n    }\n    else {\n        yield commandService.executeCommand('editor.action.formatSelection');\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { equals } from '../../../../base/common/arrays.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class TreeElement {\n    remove() {\n        if (this.parent) {\n            this.parent.children.delete(this.id);\n        }\n    }\n    static findId(candidate, container) {\n        // complex id-computation which contains the origin/extension,\n        // the parent path, and some dedupe logic when names collide\n        let candidateId;\n        if (typeof candidate === 'string') {\n            candidateId = `${container.id}/${candidate}`;\n        }\n        else {\n            candidateId = `${container.id}/${candidate.name}`;\n            if (container.children.get(candidateId) !== undefined) {\n                candidateId = `${container.id}/${candidate.name}_${candidate.range.startLineNumber}_${candidate.range.startColumn}`;\n            }\n        }\n        let id = candidateId;\n        for (let i = 0; container.children.get(id) !== undefined; i++) {\n            id = `${candidateId}_${i}`;\n        }\n        return id;\n    }\n    static empty(element) {\n        return element.children.size === 0;\n    }\n}\nexport class OutlineElement extends TreeElement {\n    constructor(id, parent, symbol) {\n        super();\n        this.id = id;\n        this.parent = parent;\n        this.symbol = symbol;\n        this.children = new Map();\n    }\n}\nexport class OutlineGroup extends TreeElement {\n    constructor(id, parent, label, order) {\n        super();\n        this.id = id;\n        this.parent = parent;\n        this.label = label;\n        this.order = order;\n        this.children = new Map();\n    }\n}\nexport class OutlineModel extends TreeElement {\n    constructor(uri) {\n        super();\n        this.uri = uri;\n        this.id = 'root';\n        this.parent = undefined;\n        this._groups = new Map();\n        this.children = new Map();\n        this.id = 'root';\n        this.parent = undefined;\n    }\n    static create(registry, textModel, token) {\n        const cts = new CancellationTokenSource(token);\n        const result = new OutlineModel(textModel.uri);\n        const provider = registry.ordered(textModel);\n        const promises = provider.map((provider, index) => {\n            var _a;\n            let id = TreeElement.findId(`provider_${index}`, result);\n            let group = new OutlineGroup(id, result, (_a = provider.displayName) !== null && _a !== void 0 ? _a : 'Unknown Outline Provider', index);\n            return Promise.resolve(provider.provideDocumentSymbols(textModel, cts.token)).then(result => {\n                for (const info of result || []) {\n                    OutlineModel._makeOutlineElement(info, group);\n                }\n                return group;\n            }, err => {\n                onUnexpectedExternalError(err);\n                return group;\n            }).then(group => {\n                if (!TreeElement.empty(group)) {\n                    result._groups.set(id, group);\n                }\n                else {\n                    group.remove();\n                }\n            });\n        });\n        const listener = registry.onDidChange(() => {\n            const newProvider = registry.ordered(textModel);\n            if (!equals(newProvider, provider)) {\n                cts.cancel();\n            }\n        });\n        return Promise.all(promises).then(() => {\n            if (cts.token.isCancellationRequested && !token.isCancellationRequested) {\n                return OutlineModel.create(registry, textModel, token);\n            }\n            else {\n                return result._compact();\n            }\n        }).finally(() => {\n            listener.dispose();\n        });\n    }\n    static _makeOutlineElement(info, container) {\n        let id = TreeElement.findId(info, container);\n        let res = new OutlineElement(id, container, info);\n        if (info.children) {\n            for (const childInfo of info.children) {\n                OutlineModel._makeOutlineElement(childInfo, res);\n            }\n        }\n        container.children.set(res.id, res);\n    }\n    _compact() {\n        let count = 0;\n        for (const [key, group] of this._groups) {\n            if (group.children.size === 0) { // empty\n                this._groups.delete(key);\n            }\n            else {\n                count += 1;\n            }\n        }\n        if (count !== 1) {\n            //\n            this.children = this._groups;\n        }\n        else {\n            // adopt all elements of the first group\n            let group = Iterable.first(this._groups.values());\n            for (let [, child] of group.children) {\n                child.parent = this;\n                this.children.set(child.id, child);\n            }\n        }\n        return this;\n    }\n    getTopLevelSymbols() {\n        const roots = [];\n        for (const child of this.children.values()) {\n            if (child instanceof OutlineElement) {\n                roots.push(child.symbol);\n            }\n            else {\n                roots.push(...Iterable.map(child.children.values(), child => child.symbol));\n            }\n        }\n        return roots.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n    }\n    asListOfDocumentSymbols() {\n        const roots = this.getTopLevelSymbols();\n        const bucket = [];\n        OutlineModel._flattenDocumentSymbols(bucket, roots, '');\n        return bucket.sort((a, b) => Position.compare(Range.getStartPosition(a.range), Range.getStartPosition(b.range)) || Position.compare(Range.getEndPosition(b.range), Range.getEndPosition(a.range)));\n    }\n    static _flattenDocumentSymbols(bucket, entries, overrideContainerLabel) {\n        for (const entry of entries) {\n            bucket.push({\n                kind: entry.kind,\n                tags: entry.tags,\n                name: entry.name,\n                detail: entry.detail,\n                containerName: entry.containerName || overrideContainerLabel,\n                range: entry.range,\n                selectionRange: entry.selectionRange,\n                children: undefined, // we flatten it...\n            });\n            // Recurse over children\n            if (entry.children) {\n                OutlineModel._flattenDocumentSymbols(bucket, entry.children, entry.name);\n            }\n        }\n    }\n}\nexport const IOutlineModelService = createDecorator('IOutlineModelService');\nlet OutlineModelService = class OutlineModelService {\n    constructor(_languageFeaturesService, debounces, modelService) {\n        this._languageFeaturesService = _languageFeaturesService;\n        this._disposables = new DisposableStore();\n        this._cache = new LRUCache(10, 0.7);\n        this._debounceInformation = debounces.for(_languageFeaturesService.documentSymbolProvider, 'DocumentSymbols', { min: 350 });\n        // don't cache outline models longer than their text model\n        this._disposables.add(modelService.onModelRemoved(textModel => {\n            this._cache.delete(textModel.id);\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    getOrCreate(textModel, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const registry = this._languageFeaturesService.documentSymbolProvider;\n            const provider = registry.ordered(textModel);\n            let data = this._cache.get(textModel.id);\n            if (!data || data.versionId !== textModel.getVersionId() || !equals(data.provider, provider)) {\n                let source = new CancellationTokenSource();\n                data = {\n                    versionId: textModel.getVersionId(),\n                    provider,\n                    promiseCnt: 0,\n                    source,\n                    promise: OutlineModel.create(registry, textModel, source.token),\n                    model: undefined,\n                };\n                this._cache.set(textModel.id, data);\n                const now = Date.now();\n                data.promise.then(outlineModel => {\n                    data.model = outlineModel;\n                    this._debounceInformation.update(textModel, Date.now() - now);\n                }).catch(_err => {\n                    this._cache.delete(textModel.id);\n                });\n            }\n            if (data.model) {\n                // resolved -> return data\n                return data.model;\n            }\n            // increase usage counter\n            data.promiseCnt += 1;\n            const listener = token.onCancellationRequested(() => {\n                // last -> cancel provider request, remove cached promise\n                if (--data.promiseCnt === 0) {\n                    data.source.cancel();\n                    this._cache.delete(textModel.id);\n                }\n            });\n            try {\n                return yield data.promise;\n            }\n            finally {\n                listener.dispose();\n            }\n        });\n    }\n};\nOutlineModelService = __decorate([\n    __param(0, ILanguageFeaturesService),\n    __param(1, ILanguageFeatureDebounceService),\n    __param(2, IModelService)\n], OutlineModelService);\nexport { OutlineModelService };\nregisterSingleton(IOutlineModelService, OutlineModelService, true);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { IOutlineModelService } from './outlineModel.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nCommandsRegistry.registerCommand('_executeDocumentSymbolProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource] = args;\n        assertType(URI.isUri(resource));\n        const outlineService = accessor.get(IOutlineModelService);\n        const modelService = accessor.get(ITextModelService);\n        const reference = yield modelService.createModelReference(resource);\n        try {\n            return (yield outlineService.getOrCreate(reference.object.textEditorModel, CancellationToken.None)).getTopLevelSymbols();\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Selection } from '../../../common/core/selection.js';\nexport class InPlaceReplaceCommand {\n    constructor(editRange, originalSelection, text) {\n        this._editRange = editRange;\n        this._originalSelection = originalSelection;\n        this._text = text;\n    }\n    getEditOperations(model, builder) {\n        builder.addTrackedEditOperation(this._editRange, this._text);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        const srcRange = inverseEditOperations[0].range;\n        if (!this._originalSelection.isEmpty()) {\n            // Preserve selection and extends to typed text\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn - this._text.length, srcRange.endLineNumber, srcRange.endColumn);\n        }\n        return new Selection(srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn), srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn));\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise, timeout } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { EditorState } from '../../editorState/browser/editorState.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { editorBracketMatchBorder } from '../../../common/core/editorColorRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { InPlaceReplaceCommand } from './inPlaceReplaceCommand.js';\nlet InPlaceReplaceController = class InPlaceReplaceController {\n    constructor(editor, editorWorkerService) {\n        this.decorationIds = [];\n        this.editor = editor;\n        this.editorWorkerService = editorWorkerService;\n    }\n    static get(editor) {\n        return editor.getContribution(InPlaceReplaceController.ID);\n    }\n    dispose() {\n    }\n    run(source, up) {\n        // cancel any pending request\n        if (this.currentRequest) {\n            this.currentRequest.cancel();\n        }\n        const editorSelection = this.editor.getSelection();\n        const model = this.editor.getModel();\n        if (!model || !editorSelection) {\n            return undefined;\n        }\n        let selection = editorSelection;\n        if (selection.startLineNumber !== selection.endLineNumber) {\n            // Can't accept multiline selection\n            return undefined;\n        }\n        const state = new EditorState(this.editor, 1 /* Value */ | 4 /* Position */);\n        const modelURI = model.uri;\n        if (!this.editorWorkerService.canNavigateValueSet(modelURI)) {\n            return Promise.resolve(undefined);\n        }\n        this.currentRequest = createCancelablePromise(token => this.editorWorkerService.navigateValueSet(modelURI, selection, up));\n        return this.currentRequest.then(result => {\n            if (!result || !result.range || !result.value) {\n                // No proper result\n                return;\n            }\n            if (!state.validate(this.editor)) {\n                // state has changed\n                return;\n            }\n            // Selection\n            let editRange = Range.lift(result.range);\n            let highlightRange = result.range;\n            let diff = result.value.length - (selection.endColumn - selection.startColumn);\n            // highlight\n            highlightRange = {\n                startLineNumber: highlightRange.startLineNumber,\n                startColumn: highlightRange.startColumn,\n                endLineNumber: highlightRange.endLineNumber,\n                endColumn: highlightRange.startColumn + result.value.length\n            };\n            if (diff > 1) {\n                selection = new Selection(selection.startLineNumber, selection.startColumn, selection.endLineNumber, selection.endColumn + diff - 1);\n            }\n            // Insert new text\n            const command = new InPlaceReplaceCommand(editRange, selection, result.value);\n            this.editor.pushUndoStop();\n            this.editor.executeCommand(source, command);\n            this.editor.pushUndoStop();\n            // add decoration\n            this.decorationIds = this.editor.deltaDecorations(this.decorationIds, [{\n                    range: highlightRange,\n                    options: InPlaceReplaceController.DECORATION\n                }]);\n            // remove decoration after delay\n            if (this.decorationRemover) {\n                this.decorationRemover.cancel();\n            }\n            this.decorationRemover = timeout(350);\n            this.decorationRemover.then(() => this.decorationIds = this.editor.deltaDecorations(this.decorationIds, [])).catch(onUnexpectedError);\n        }).catch(onUnexpectedError);\n    }\n};\nInPlaceReplaceController.ID = 'editor.contrib.inPlaceReplaceController';\nInPlaceReplaceController.DECORATION = ModelDecorationOptions.register({\n    description: 'in-place-replace',\n    className: 'valueSetReplacement'\n});\nInPlaceReplaceController = __decorate([\n    __param(1, IEditorWorkerService)\n], InPlaceReplaceController);\nclass InPlaceReplaceUp extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inPlaceReplace.up',\n            label: nls.localize('InPlaceReplaceAction.previous.label', \"Replace with Previous Value\"),\n            alias: 'Replace with Previous Value',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 82 /* Comma */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = InPlaceReplaceController.get(editor);\n        if (!controller) {\n            return Promise.resolve(undefined);\n        }\n        return controller.run(this.id, true);\n    }\n}\nclass InPlaceReplaceDown extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inPlaceReplace.down',\n            label: nls.localize('InPlaceReplaceAction.next.label', \"Replace with Next Value\"),\n            alias: 'Replace with Next Value',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 84 /* Period */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = InPlaceReplaceController.get(editor);\n        if (!controller) {\n            return Promise.resolve(undefined);\n        }\n        return controller.run(this.id, false);\n    }\n}\nregisterEditorContribution(InPlaceReplaceController.ID, InPlaceReplaceController);\nregisterEditorAction(InPlaceReplaceUp);\nregisterEditorAction(InPlaceReplaceDown);\nregisterThemingParticipant((theme, collector) => {\n    const border = theme.getColor(editorBracketMatchBorder);\n    if (border) {\n        collector.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${border}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { TabFocus } from '../../../browser/config/tabFocus.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport * as nls from '../../../../nls.js';\nexport class ToggleTabFocusModeAction extends EditorAction {\n    constructor() {\n        super({\n            id: ToggleTabFocusModeAction.ID,\n            label: nls.localize({ key: 'toggle.tabMovesFocus', comment: ['Turn on/off use of tab key for moving focus around VS Code'] }, \"Toggle Tab Key Moves Focus\"),\n            alias: 'Toggle Tab Key Moves Focus',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: null,\n                primary: 2048 /* CtrlCmd */ | 43 /* KeyM */,\n                mac: { primary: 256 /* WinCtrl */ | 1024 /* Shift */ | 43 /* KeyM */ },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const oldValue = TabFocus.getTabFocusMode();\n        const newValue = !oldValue;\n        TabFocus.setTabFocusMode(newValue);\n        if (newValue) {\n            alert(nls.localize('toggle.tabMovesFocus.on', \"Pressing Tab will now move focus to the next focusable element\"));\n        }\n        else {\n            alert(nls.localize('toggle.tabMovesFocus.off', \"Pressing Tab will now insert the tab character\"));\n        }\n    }\n}\nToggleTabFocusModeAction.ID = 'editor.action.toggleTabFocusMode';\nregisterEditorAction(ToggleTabFocusModeAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { getDocumentRangeSemanticTokens, hasDocumentRangeSemanticTokensProvider } from '../../../common/services/getSemanticTokens.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { isSemanticColoringEnabled, SEMANTIC_HIGHLIGHTING_SETTING_ID } from '../../../common/services/modelService.js';\nimport { toMultilineTokens2 } from '../../../common/services/semanticTokensProviderStyling.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet ViewportSemanticTokensContribution = class ViewportSemanticTokensContribution extends Disposable {\n    constructor(editor, _modelService, _themeService, _configurationService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this._modelService = _modelService;\n        this._themeService = _themeService;\n        this._configurationService = _configurationService;\n        this._editor = editor;\n        this._provider = languageFeaturesService.documentRangeSemanticTokensProvider;\n        this._debounceInformation = languageFeatureDebounceService.for(this._provider, 'DocumentRangeSemanticTokens', { min: 100, max: 500 });\n        this._tokenizeViewport = this._register(new RunOnceScheduler(() => this._tokenizeViewportNow(), 100));\n        this._outstandingRequests = [];\n        const scheduleTokenizeViewport = () => {\n            if (this._editor.hasModel()) {\n                this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()));\n            }\n        };\n        this._register(this._editor.onDidScrollChange(() => {\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._editor.onDidChangeModelContent((e) => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._provider.onDidChange(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration(SEMANTIC_HIGHLIGHTING_SETTING_ID)) {\n                this._cancelAll();\n                scheduleTokenizeViewport();\n            }\n        }));\n        this._register(this._themeService.onDidColorThemeChange(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n    }\n    _cancelAll() {\n        for (const request of this._outstandingRequests) {\n            request.cancel();\n        }\n        this._outstandingRequests = [];\n    }\n    _removeOutstandingRequest(req) {\n        for (let i = 0, len = this._outstandingRequests.length; i < len; i++) {\n            if (this._outstandingRequests[i] === req) {\n                this._outstandingRequests.splice(i, 1);\n                return;\n            }\n        }\n    }\n    _tokenizeViewportNow() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (model.hasCompleteSemanticTokens()) {\n            return;\n        }\n        if (!isSemanticColoringEnabled(model, this._themeService, this._configurationService)) {\n            if (model.hasSomeSemanticTokens()) {\n                model.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        if (!hasDocumentRangeSemanticTokensProvider(this._provider, model)) {\n            if (model.hasSomeSemanticTokens()) {\n                model.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        const visibleRanges = this._editor.getVisibleRangesPlusViewportAboveBelow();\n        this._outstandingRequests = this._outstandingRequests.concat(visibleRanges.map(range => this._requestRange(model, range)));\n    }\n    _requestRange(model, range) {\n        const requestVersionId = model.getVersionId();\n        const request = createCancelablePromise(token => Promise.resolve(getDocumentRangeSemanticTokens(this._provider, model, range, token)));\n        const sw = new StopWatch(false);\n        request.then((r) => {\n            this._debounceInformation.update(model, sw.elapsed());\n            if (!r || !r.tokens || model.isDisposed() || model.getVersionId() !== requestVersionId) {\n                return;\n            }\n            const { provider, tokens: result } = r;\n            const styling = this._modelService.getSemanticTokensProviderStyling(provider);\n            model.setPartialSemanticTokens(range, toMultilineTokens2(result, styling, model.getLanguageId()));\n        }).then(() => this._removeOutstandingRequest(request), () => this._removeOutstandingRequest(request));\n        return request;\n    }\n};\nViewportSemanticTokensContribution.ID = 'editor.contrib.viewportSemanticTokens';\nViewportSemanticTokensContribution = __decorate([\n    __param(1, IModelService),\n    __param(2, IThemeService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeatureDebounceService),\n    __param(5, ILanguageFeaturesService)\n], ViewportSemanticTokensContribution);\nregisterEditorContribution(ViewportSemanticTokensContribution.ID, ViewportSemanticTokensContribution);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './accessibilityHelp.css';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\nimport { renderFormattedText } from '../../../../base/browser/formattedTextRenderer.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ToggleTabFocusModeAction } from '../../../contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { contrastBorder, editorWidgetBackground, widgetShadow, editorWidgetForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { AccessibilityHelpNLS } from '../../../common/standaloneStrings.js';\nconst CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE = new RawContextKey('accessibilityHelpWidgetVisible', false);\nlet AccessibilityHelpController = class AccessibilityHelpController extends Disposable {\n    constructor(editor, instantiationService) {\n        super();\n        this._editor = editor;\n        this._widget = this._register(instantiationService.createInstance(AccessibilityHelpWidget, this._editor));\n    }\n    static get(editor) {\n        return editor.getContribution(AccessibilityHelpController.ID);\n    }\n    show() {\n        this._widget.show();\n    }\n    hide() {\n        this._widget.hide();\n    }\n};\nAccessibilityHelpController.ID = 'editor.contrib.accessibilityHelpController';\nAccessibilityHelpController = __decorate([\n    __param(1, IInstantiationService)\n], AccessibilityHelpController);\nfunction getSelectionLabel(selections, charactersSelected) {\n    if (!selections || selections.length === 0) {\n        return AccessibilityHelpNLS.noSelection;\n    }\n    if (selections.length === 1) {\n        if (charactersSelected) {\n            return strings.format(AccessibilityHelpNLS.singleSelectionRange, selections[0].positionLineNumber, selections[0].positionColumn, charactersSelected);\n        }\n        return strings.format(AccessibilityHelpNLS.singleSelection, selections[0].positionLineNumber, selections[0].positionColumn);\n    }\n    if (charactersSelected) {\n        return strings.format(AccessibilityHelpNLS.multiSelectionRange, selections.length, charactersSelected);\n    }\n    if (selections.length > 0) {\n        return strings.format(AccessibilityHelpNLS.multiSelection, selections.length);\n    }\n    return '';\n}\nlet AccessibilityHelpWidget = class AccessibilityHelpWidget extends Widget {\n    constructor(editor, _contextKeyService, _keybindingService, _openerService) {\n        super();\n        this._contextKeyService = _contextKeyService;\n        this._keybindingService = _keybindingService;\n        this._openerService = _openerService;\n        this._editor = editor;\n        this._isVisibleKey = CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE.bindTo(this._contextKeyService);\n        this._domNode = createFastDomNode(document.createElement('div'));\n        this._domNode.setClassName('accessibilityHelpWidget');\n        this._domNode.setDisplay('none');\n        this._domNode.setAttribute('role', 'dialog');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        this._contentDomNode = createFastDomNode(document.createElement('div'));\n        this._contentDomNode.setAttribute('role', 'document');\n        this._domNode.appendChild(this._contentDomNode);\n        this._isVisible = false;\n        this._register(this._editor.onDidLayoutChange(() => {\n            if (this._isVisible) {\n                this._layout();\n            }\n        }));\n        // Intentionally not configurable!\n        this._register(dom.addStandardDisposableListener(this._contentDomNode.domNode, 'keydown', (e) => {\n            if (!this._isVisible) {\n                return;\n            }\n            if (e.equals(2048 /* CtrlCmd */ | 35 /* KeyE */)) {\n                alert(AccessibilityHelpNLS.emergencyConfOn);\n                this._editor.updateOptions({\n                    accessibilitySupport: 'on'\n                });\n                dom.clearNode(this._contentDomNode.domNode);\n                this._buildContent();\n                this._contentDomNode.domNode.focus();\n                e.preventDefault();\n                e.stopPropagation();\n            }\n            if (e.equals(2048 /* CtrlCmd */ | 38 /* KeyH */)) {\n                alert(AccessibilityHelpNLS.openingDocs);\n                let url = this._editor.getRawOptions().accessibilityHelpUrl;\n                if (typeof url === 'undefined') {\n                    url = 'https://go.microsoft.com/fwlink/?linkid=852450';\n                }\n                this._openerService.open(URI.parse(url));\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }));\n        this.onblur(this._contentDomNode.domNode, () => {\n            this.hide();\n        });\n        this._editor.addOverlayWidget(this);\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    getId() {\n        return AccessibilityHelpWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode.domNode;\n    }\n    getPosition() {\n        return {\n            preference: null\n        };\n    }\n    show() {\n        if (this._isVisible) {\n            return;\n        }\n        this._isVisible = true;\n        this._isVisibleKey.set(true);\n        this._layout();\n        this._domNode.setDisplay('block');\n        this._domNode.setAttribute('aria-hidden', 'false');\n        this._contentDomNode.domNode.tabIndex = 0;\n        this._buildContent();\n        this._contentDomNode.domNode.focus();\n    }\n    _descriptionForCommand(commandId, msg, noKbMsg) {\n        const kb = this._keybindingService.lookupKeybinding(commandId);\n        if (kb) {\n            return strings.format(msg, kb.getAriaLabel());\n        }\n        return strings.format(noKbMsg, commandId);\n    }\n    _buildContent() {\n        const options = this._editor.getOptions();\n        const selections = this._editor.getSelections();\n        let charactersSelected = 0;\n        if (selections) {\n            const model = this._editor.getModel();\n            if (model) {\n                selections.forEach((selection) => {\n                    charactersSelected += model.getValueLengthInRange(selection);\n                });\n            }\n        }\n        let text = getSelectionLabel(selections, charactersSelected);\n        if (options.get(54 /* inDiffEditor */)) {\n            if (options.get(81 /* readOnly */)) {\n                text += AccessibilityHelpNLS.readonlyDiffEditor;\n            }\n            else {\n                text += AccessibilityHelpNLS.editableDiffEditor;\n            }\n        }\n        else {\n            if (options.get(81 /* readOnly */)) {\n                text += AccessibilityHelpNLS.readonlyEditor;\n            }\n            else {\n                text += AccessibilityHelpNLS.editableEditor;\n            }\n        }\n        const turnOnMessage = (platform.isMacintosh\n            ? AccessibilityHelpNLS.changeConfigToOnMac\n            : AccessibilityHelpNLS.changeConfigToOnWinLinux);\n        switch (options.get(2 /* accessibilitySupport */)) {\n            case 0 /* Unknown */:\n                text += '\\n\\n - ' + turnOnMessage;\n                break;\n            case 2 /* Enabled */:\n                text += '\\n\\n - ' + AccessibilityHelpNLS.auto_on;\n                break;\n            case 1 /* Disabled */:\n                text += '\\n\\n - ' + AccessibilityHelpNLS.auto_off;\n                text += ' ' + turnOnMessage;\n                break;\n        }\n        if (options.get(130 /* tabFocusMode */)) {\n            text += '\\n\\n - ' + this._descriptionForCommand(ToggleTabFocusModeAction.ID, AccessibilityHelpNLS.tabFocusModeOnMsg, AccessibilityHelpNLS.tabFocusModeOnMsgNoKb);\n        }\n        else {\n            text += '\\n\\n - ' + this._descriptionForCommand(ToggleTabFocusModeAction.ID, AccessibilityHelpNLS.tabFocusModeOffMsg, AccessibilityHelpNLS.tabFocusModeOffMsgNoKb);\n        }\n        const openDocMessage = (platform.isMacintosh\n            ? AccessibilityHelpNLS.openDocMac\n            : AccessibilityHelpNLS.openDocWinLinux);\n        text += '\\n\\n - ' + openDocMessage;\n        text += '\\n\\n' + AccessibilityHelpNLS.outroMsg;\n        this._contentDomNode.domNode.appendChild(renderFormattedText(text));\n        // Per https://www.w3.org/TR/wai-aria/roles#document, Authors SHOULD provide a title or label for documents\n        this._contentDomNode.domNode.setAttribute('aria-label', text);\n    }\n    hide() {\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this._isVisibleKey.reset();\n        this._domNode.setDisplay('none');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        this._contentDomNode.domNode.tabIndex = -1;\n        dom.clearNode(this._contentDomNode.domNode);\n        this._editor.focus();\n    }\n    _layout() {\n        const editorLayout = this._editor.getLayoutInfo();\n        const w = Math.max(5, Math.min(AccessibilityHelpWidget.WIDTH, editorLayout.width - 40));\n        const h = Math.max(5, Math.min(AccessibilityHelpWidget.HEIGHT, editorLayout.height - 40));\n        this._domNode.setWidth(w);\n        this._domNode.setHeight(h);\n        const top = Math.round((editorLayout.height - h) / 2);\n        this._domNode.setTop(top);\n        const left = Math.round((editorLayout.width - w) / 2);\n        this._domNode.setLeft(left);\n    }\n};\nAccessibilityHelpWidget.ID = 'editor.contrib.accessibilityHelpWidget';\nAccessibilityHelpWidget.WIDTH = 500;\nAccessibilityHelpWidget.HEIGHT = 300;\nAccessibilityHelpWidget = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IKeybindingService),\n    __param(3, IOpenerService)\n], AccessibilityHelpWidget);\nclass ShowAccessibilityHelpAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showAccessibilityHelp',\n            label: AccessibilityHelpNLS.showAccessibilityHelpAction,\n            alias: 'Show Accessibility Help',\n            precondition: undefined,\n            kbOpts: {\n                primary: 512 /* Alt */ | 59 /* F1 */,\n                weight: 100 /* EditorContrib */,\n                linux: {\n                    primary: 512 /* Alt */ | 1024 /* Shift */ | 59 /* F1 */,\n                    secondary: [512 /* Alt */ | 59 /* F1 */]\n                }\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = AccessibilityHelpController.get(editor);\n        if (controller) {\n            controller.show();\n        }\n    }\n}\nregisterEditorContribution(AccessibilityHelpController.ID, AccessibilityHelpController);\nregisterEditorAction(ShowAccessibilityHelpAction);\nconst AccessibilityHelpCommand = EditorCommand.bindToContribution(AccessibilityHelpController.get);\nregisterEditorCommand(new AccessibilityHelpCommand({\n    id: 'closeAccessibilityHelp',\n    precondition: CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE,\n    handler: x => x.hide(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 100,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* Escape */,\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\n    }\n}));\nregisterThemingParticipant((theme, collector) => {\n    const widgetBackground = theme.getColor(editorWidgetBackground);\n    if (widgetBackground) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${widgetBackground}; }`);\n    }\n    const widgetForeground = theme.getColor(editorWidgetForeground);\n    if (widgetForeground) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${widgetForeground}; }`);\n    }\n    const widgetShadowColor = theme.getColor(widgetShadow);\n    if (widgetShadowColor) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${widgetShadowColor}; }`);\n    }\n    const hcBorder = theme.getColor(contrastBorder);\n    if (hcBorder) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${hcBorder}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './inspectTokens.css';\nimport { $, append, reset } from '../../../../base/browser/dom.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { TokenMetadata, TokenizationRegistry } from '../../../common/languages.js';\nimport { NullState, nullTokenize, nullTokenizeEncoded } from '../../../common/languages/nullTokenize.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { InspectTokensNLS } from '../../../common/standaloneStrings.js';\nimport { ColorScheme } from '../../../../platform/theme/common/theme.js';\nlet InspectTokensController = class InspectTokensController extends Disposable {\n    constructor(editor, standaloneColorService, languageService) {\n        super();\n        this._editor = editor;\n        this._languageService = languageService;\n        this._widget = null;\n        this._register(this._editor.onDidChangeModel((e) => this.stop()));\n        this._register(this._editor.onDidChangeModelLanguage((e) => this.stop()));\n        this._register(TokenizationRegistry.onDidChange((e) => this.stop()));\n        this._register(this._editor.onKeyUp((e) => e.keyCode === 9 /* Escape */ && this.stop()));\n    }\n    static get(editor) {\n        return editor.getContribution(InspectTokensController.ID);\n    }\n    dispose() {\n        this.stop();\n        super.dispose();\n    }\n    launch() {\n        if (this._widget) {\n            return;\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._widget = new InspectTokensWidget(this._editor, this._languageService);\n    }\n    stop() {\n        if (this._widget) {\n            this._widget.dispose();\n            this._widget = null;\n        }\n    }\n};\nInspectTokensController.ID = 'editor.contrib.inspectTokens';\nInspectTokensController = __decorate([\n    __param(1, IStandaloneThemeService),\n    __param(2, ILanguageService)\n], InspectTokensController);\nclass InspectTokens extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inspectTokens',\n            label: InspectTokensNLS.inspectTokensAction,\n            alias: 'Developer: Inspect Tokens',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const controller = InspectTokensController.get(editor);\n        if (controller) {\n            controller.launch();\n        }\n    }\n}\nfunction renderTokenText(tokenText) {\n    let result = '';\n    for (let charIndex = 0, len = tokenText.length; charIndex < len; charIndex++) {\n        const charCode = tokenText.charCodeAt(charIndex);\n        switch (charCode) {\n            case 9 /* Tab */:\n                result += '\\u2192'; // &rarr;\n                break;\n            case 32 /* Space */:\n                result += '\\u00B7'; // &middot;\n                break;\n            default:\n                result += String.fromCharCode(charCode);\n        }\n    }\n    return result;\n}\nfunction getSafeTokenizationSupport(languageIdCodec, languageId) {\n    const tokenizationSupport = TokenizationRegistry.get(languageId);\n    if (tokenizationSupport) {\n        return tokenizationSupport;\n    }\n    const encodedLanguageId = languageIdCodec.encodeLanguageId(languageId);\n    return {\n        getInitialState: () => NullState,\n        tokenize: (line, hasEOL, state) => nullTokenize(languageId, state),\n        tokenizeEncoded: (line, hasEOL, state) => nullTokenizeEncoded(encodedLanguageId, state)\n    };\n}\nclass InspectTokensWidget extends Disposable {\n    constructor(editor, languageService) {\n        super();\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this._editor = editor;\n        this._languageService = languageService;\n        this._model = this._editor.getModel();\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'tokens-inspect-widget';\n        this._tokenizationSupport = getSafeTokenizationSupport(this._languageService.languageIdCodec, this._model.getLanguageId());\n        this._compute(this._editor.getPosition());\n        this._register(this._editor.onDidChangeCursorPosition((e) => this._compute(this._editor.getPosition())));\n        this._editor.addContentWidget(this);\n    }\n    dispose() {\n        this._editor.removeContentWidget(this);\n        super.dispose();\n    }\n    getId() {\n        return InspectTokensWidget._ID;\n    }\n    _compute(position) {\n        const data = this._getTokensAtLine(position.lineNumber);\n        let token1Index = 0;\n        for (let i = data.tokens1.length - 1; i >= 0; i--) {\n            const t = data.tokens1[i];\n            if (position.column - 1 >= t.offset) {\n                token1Index = i;\n                break;\n            }\n        }\n        let token2Index = 0;\n        for (let i = (data.tokens2.length >>> 1); i >= 0; i--) {\n            if (position.column - 1 >= data.tokens2[(i << 1)]) {\n                token2Index = i;\n                break;\n            }\n        }\n        const lineContent = this._model.getLineContent(position.lineNumber);\n        let tokenText = '';\n        if (token1Index < data.tokens1.length) {\n            const tokenStartIndex = data.tokens1[token1Index].offset;\n            const tokenEndIndex = token1Index + 1 < data.tokens1.length ? data.tokens1[token1Index + 1].offset : lineContent.length;\n            tokenText = lineContent.substring(tokenStartIndex, tokenEndIndex);\n        }\n        reset(this._domNode, $('h2.tm-token', undefined, renderTokenText(tokenText), $('span.tm-token-length', undefined, `${tokenText.length} ${tokenText.length === 1 ? 'char' : 'chars'}`)));\n        append(this._domNode, $('hr.tokens-inspect-separator', { 'style': 'clear:both' }));\n        const metadata = (token2Index << 1) + 1 < data.tokens2.length ? this._decodeMetadata(data.tokens2[(token2Index << 1) + 1]) : null;\n        append(this._domNode, $('table.tm-metadata-table', undefined, $('tbody', undefined, $('tr', undefined, $('td.tm-metadata-key', undefined, 'language'), $('td.tm-metadata-value', undefined, `${metadata ? metadata.languageId : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'token type'), $('td.tm-metadata-value', undefined, `${metadata ? this._tokenTypeToString(metadata.tokenType) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'font style'), $('td.tm-metadata-value', undefined, `${metadata ? this._fontStyleToString(metadata.fontStyle) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'foreground'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.foreground) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'background'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.background) : '-?-'}`)))));\n        append(this._domNode, $('hr.tokens-inspect-separator'));\n        if (token1Index < data.tokens1.length) {\n            append(this._domNode, $('span.tm-token-type', undefined, data.tokens1[token1Index].type));\n        }\n        this._editor.layoutContentWidget(this);\n    }\n    _decodeMetadata(metadata) {\n        const colorMap = TokenizationRegistry.getColorMap();\n        const languageId = TokenMetadata.getLanguageId(metadata);\n        const tokenType = TokenMetadata.getTokenType(metadata);\n        const fontStyle = TokenMetadata.getFontStyle(metadata);\n        const foreground = TokenMetadata.getForeground(metadata);\n        const background = TokenMetadata.getBackground(metadata);\n        return {\n            languageId: this._languageService.languageIdCodec.decodeLanguageId(languageId),\n            tokenType: tokenType,\n            fontStyle: fontStyle,\n            foreground: colorMap[foreground],\n            background: colorMap[background]\n        };\n    }\n    _tokenTypeToString(tokenType) {\n        switch (tokenType) {\n            case 0 /* Other */: return 'Other';\n            case 1 /* Comment */: return 'Comment';\n            case 2 /* String */: return 'String';\n            case 3 /* RegEx */: return 'RegEx';\n            default: return '??';\n        }\n    }\n    _fontStyleToString(fontStyle) {\n        let r = '';\n        if (fontStyle & 1 /* Italic */) {\n            r += 'italic ';\n        }\n        if (fontStyle & 2 /* Bold */) {\n            r += 'bold ';\n        }\n        if (fontStyle & 4 /* Underline */) {\n            r += 'underline ';\n        }\n        if (fontStyle & 8 /* Strikethrough */) {\n            r += 'strikethrough ';\n        }\n        if (r.length === 0) {\n            r = '---';\n        }\n        return r;\n    }\n    _getTokensAtLine(lineNumber) {\n        const stateBeforeLine = this._getStateBeforeLine(lineNumber);\n        const tokenizationResult1 = this._tokenizationSupport.tokenize(this._model.getLineContent(lineNumber), true, stateBeforeLine);\n        const tokenizationResult2 = this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(lineNumber), true, stateBeforeLine);\n        return {\n            startState: stateBeforeLine,\n            tokens1: tokenizationResult1.tokens,\n            tokens2: tokenizationResult2.tokens,\n            endState: tokenizationResult1.endState\n        };\n    }\n    _getStateBeforeLine(lineNumber) {\n        let state = this._tokenizationSupport.getInitialState();\n        for (let i = 1; i < lineNumber; i++) {\n            const tokenizationResult = this._tokenizationSupport.tokenize(this._model.getLineContent(i), true, state);\n            state = tokenizationResult.endState;\n        }\n        return state;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            position: this._editor.getPosition(),\n            preference: [2 /* BELOW */, 1 /* ABOVE */]\n        };\n    }\n}\nInspectTokensWidget._ID = 'editor.contrib.inspectTokensWidget';\nregisterEditorContribution(InspectTokensController.ID, InspectTokensController);\nregisterEditorAction(InspectTokens);\nregisterThemingParticipant((theme, collector) => {\n    const border = theme.getColor(editorHoverBorder);\n    if (border) {\n        const borderWidth = theme.type === ColorScheme.HIGH_CONTRAST ? 2 : 1;\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { border: ${borderWidth}px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${border}; }`);\n    }\n    const background = theme.getColor(editorHoverBackground);\n    if (background) {\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${background}; }`);\n    }\n    const foreground = theme.getColor(editorHoverForeground);\n    if (foreground) {\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { color: ${foreground}; }`);\n    }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __reExport = (target, module, copyDefault, desc) => {\n  if (module && typeof module === \"object\" || typeof module === \"function\") {\n    for (let key of __getOwnPropNames(module))\n      if (!__hasOwnProp.call(target, key) && (copyDefault || key !== \"default\"))\n        __defProp(target, key, { get: () => module[key], enumerable: !(desc = __getOwnPropDesc(module, key)) || desc.enumerable });\n  }\n  return target;\n};\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../editor/editor.api.js\";\n\n// src/basic-languages/_.contribution.ts\nvar languageDefinitions = {};\nvar lazyLanguageLoaders = {};\nvar LazyLanguageLoader = class {\n  static getOrCreate(languageId) {\n    if (!lazyLanguageLoaders[languageId]) {\n      lazyLanguageLoaders[languageId] = new LazyLanguageLoader(languageId);\n    }\n    return lazyLanguageLoaders[languageId];\n  }\n  _languageId;\n  _loadingTriggered;\n  _lazyLoadPromise;\n  _lazyLoadPromiseResolve;\n  _lazyLoadPromiseReject;\n  constructor(languageId) {\n    this._languageId = languageId;\n    this._loadingTriggered = false;\n    this._lazyLoadPromise = new Promise((resolve, reject) => {\n      this._lazyLoadPromiseResolve = resolve;\n      this._lazyLoadPromiseReject = reject;\n    });\n  }\n  load() {\n    if (!this._loadingTriggered) {\n      this._loadingTriggered = true;\n      languageDefinitions[this._languageId].loader().then((mod) => this._lazyLoadPromiseResolve(mod), (err) => this._lazyLoadPromiseReject(err));\n    }\n    return this._lazyLoadPromise;\n  }\n};\nasync function loadLanguage(languageId) {\n  await LazyLanguageLoader.getOrCreate(languageId).load();\n  const model = monaco_editor_core_exports.editor.createModel(\"\", languageId);\n  model.dispose();\n}\nfunction registerLanguage(def) {\n  const languageId = def.id;\n  languageDefinitions[languageId] = def;\n  monaco_editor_core_exports.languages.register(def);\n  const lazyLanguageLoader = LazyLanguageLoader.getOrCreate(languageId);\n  monaco_editor_core_exports.languages.registerTokensProviderFactory(languageId, {\n    create: async () => {\n      const mod = await lazyLanguageLoader.load();\n      return mod.language;\n    }\n  });\n  monaco_editor_core_exports.languages.onLanguage(languageId, async () => {\n    const mod = await lazyLanguageLoader.load();\n    monaco_editor_core_exports.languages.setLanguageConfiguration(languageId, mod.conf);\n  });\n}\nexport {\n  loadLanguage,\n  registerLanguage\n};\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/typescript/typescript.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"typescript\",\n  extensions: [\".ts\", \".tsx\"],\n  aliases: [\"TypeScript\", \"ts\", \"typescript\"],\n  mimetypes: [\"text/typescript\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/typescript/typescript\"], resolve, reject);\n      });\n    } else {\n      return import(\"./typescript.js\");\n    }\n  }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport './anchorSelect.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const SelectionAnchorSet = new RawContextKey('selectionAnchorSet', false);\nlet SelectionAnchorController = class SelectionAnchorController {\n    constructor(editor, contextKeyService) {\n        this.editor = editor;\n        this.selectionAnchorSetContextKey = SelectionAnchorSet.bindTo(contextKeyService);\n        this.modelChangeListener = editor.onDidChangeModel(() => this.selectionAnchorSetContextKey.reset());\n    }\n    static get(editor) {\n        return editor.getContribution(SelectionAnchorController.ID);\n    }\n    setSelectionAnchor() {\n        if (this.editor.hasModel()) {\n            const position = this.editor.getPosition();\n            const previousDecorations = this.decorationId ? [this.decorationId] : [];\n            const newDecorationId = this.editor.deltaDecorations(previousDecorations, [{\n                    range: Selection.fromPositions(position, position),\n                    options: {\n                        description: 'selection-anchor',\n                        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n                        hoverMessage: new MarkdownString().appendText(localize('selectionAnchor', \"Selection Anchor\")),\n                        className: 'selection-anchor'\n                    }\n                }]);\n            this.decorationId = newDecorationId[0];\n            this.selectionAnchorSetContextKey.set(!!this.decorationId);\n            alert(localize('anchorSet', \"Anchor set at {0}:{1}\", position.lineNumber, position.column));\n        }\n    }\n    goToSelectionAnchor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const anchorPosition = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (anchorPosition) {\n                this.editor.setPosition(anchorPosition.getStartPosition());\n            }\n        }\n    }\n    selectFromAnchorToCursor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const start = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (start) {\n                const end = this.editor.getPosition();\n                this.editor.setSelection(Selection.fromPositions(start.getStartPosition(), end));\n                this.cancelSelectionAnchor();\n            }\n        }\n    }\n    cancelSelectionAnchor() {\n        if (this.decorationId) {\n            this.editor.deltaDecorations([this.decorationId], []);\n            this.decorationId = undefined;\n            this.selectionAnchorSetContextKey.set(false);\n        }\n    }\n    dispose() {\n        this.cancelSelectionAnchor();\n        this.modelChangeListener.dispose();\n    }\n};\nSelectionAnchorController.ID = 'editor.contrib.selectionAnchorController';\nSelectionAnchorController = __decorate([\n    __param(1, IContextKeyService)\n], SelectionAnchorController);\nclass SetSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.setSelectionAnchor',\n            label: localize('setSelectionAnchor', \"Set Selection Anchor\"),\n            alias: 'Set Selection Anchor',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 32 /* KeyB */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.setSelectionAnchor();\n        });\n    }\n}\nclass GoToSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.goToSelectionAnchor',\n            label: localize('goToSelectionAnchor', \"Go to Selection Anchor\"),\n            alias: 'Go to Selection Anchor',\n            precondition: SelectionAnchorSet,\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.goToSelectionAnchor();\n        });\n    }\n}\nclass SelectFromAnchorToCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectFromAnchorToCursor',\n            label: localize('selectFromAnchorToCursor', \"Select from Anchor to Cursor\"),\n            alias: 'Select from Anchor to Cursor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 41 /* KeyK */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectFromAnchorToCursor();\n        });\n    }\n}\nclass CancelSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.cancelSelectionAnchor',\n            label: localize('cancelSelectionAnchor', \"Cancel Selection Anchor\"),\n            alias: 'Cancel Selection Anchor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 9 /* Escape */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.cancelSelectionAnchor();\n        });\n    }\n}\nregisterEditorContribution(SelectionAnchorController.ID, SelectionAnchorController);\nregisterEditorAction(SetSelectionAnchor);\nregisterEditorAction(GoToSelectionAnchor);\nregisterEditorAction(SelectFromAnchorToCursor);\nregisterEditorAction(CancelSelectionAnchor);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './bracketMatching.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { editorBracketMatchBackground, editorBracketMatchBorder } from '../../../common/core/editorColorRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nconst overviewRulerBracketMatchForeground = registerColor('editorOverviewRuler.bracketMatchForeground', { dark: '#A0A0A0', light: '#A0A0A0', hc: '#A0A0A0' }, nls.localize('overviewRulerBracketMatchForeground', 'Overview ruler marker color for matching brackets.'));\nclass JumpToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.jumpToBracket',\n            label: nls.localize('smartSelect.jumpBracket', \"Go to Bracket\"),\n            alias: 'Go to Bracket',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 88 /* Backslash */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.jumpToBracket();\n    }\n}\nclass SelectToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectToBracket',\n            label: nls.localize('smartSelect.selectToBracket', \"Select to Bracket\"),\n            alias: 'Select to Bracket',\n            precondition: undefined,\n            description: {\n                description: `Select to Bracket`,\n                args: [{\n                        name: 'args',\n                        schema: {\n                            type: 'object',\n                            properties: {\n                                'selectBrackets': {\n                                    type: 'boolean',\n                                    default: true\n                                }\n                            },\n                        }\n                    }]\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        let selectBrackets = true;\n        if (args && args.selectBrackets === false) {\n            selectBrackets = false;\n        }\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectToBracket(selectBrackets);\n    }\n}\nclass BracketsData {\n    constructor(position, brackets, options) {\n        this.position = position;\n        this.brackets = brackets;\n        this.options = options;\n    }\n}\nexport class BracketMatchingController extends Disposable {\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._lastBracketsData = [];\n        this._lastVersionId = 0;\n        this._decorations = [];\n        this._updateBracketsSoon = this._register(new RunOnceScheduler(() => this._updateBrackets(), 50));\n        this._matchBrackets = this._editor.getOption(64 /* matchBrackets */);\n        this._updateBracketsSoon.schedule();\n        this._register(editor.onDidChangeCursorPosition((e) => {\n            if (this._matchBrackets === 'never') {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._lastBracketsData = [];\n            this._decorations = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelLanguageConfiguration((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(64 /* matchBrackets */)) {\n                this._matchBrackets = this._editor.getOption(64 /* matchBrackets */);\n                this._decorations = this._editor.deltaDecorations(this._decorations, []);\n                this._lastBracketsData = [];\n                this._lastVersionId = 0;\n                this._updateBracketsSoon.schedule();\n            }\n        }));\n        this._register(editor.onDidBlurEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidFocusEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(BracketMatchingController.ID);\n    }\n    jumpToBracket() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = this._editor.getSelections().map(selection => {\n            const position = selection.getStartPosition();\n            // find matching brackets if position is on a bracket\n            const brackets = model.bracketPairs.matchBracket(position);\n            let newCursorPosition = null;\n            if (brackets) {\n                if (brackets[0].containsPosition(position)) {\n                    newCursorPosition = brackets[1].getStartPosition();\n                }\n                else if (brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[0].getStartPosition();\n                }\n            }\n            else {\n                // find the enclosing brackets if the position isn't on a matching bracket\n                const enclosingBrackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (enclosingBrackets) {\n                    newCursorPosition = enclosingBrackets[0].getStartPosition();\n                }\n                else {\n                    // no enclosing brackets, try the very first next bracket\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        newCursorPosition = nextBracket.range.getStartPosition();\n                    }\n                }\n            }\n            if (newCursorPosition) {\n                return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n            }\n            return new Selection(position.lineNumber, position.column, position.lineNumber, position.column);\n        });\n        this._editor.setSelections(newSelections);\n        this._editor.revealRange(newSelections[0]);\n    }\n    selectToBracket(selectBrackets) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = [];\n        this._editor.getSelections().forEach(selection => {\n            const position = selection.getStartPosition();\n            let brackets = model.bracketPairs.matchBracket(position);\n            if (!brackets) {\n                brackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (!brackets) {\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        brackets = model.bracketPairs.matchBracket(nextBracket.range.getStartPosition());\n                    }\n                }\n            }\n            let selectFrom = null;\n            let selectTo = null;\n            if (brackets) {\n                brackets.sort(Range.compareRangesUsingStarts);\n                const [open, close] = brackets;\n                selectFrom = selectBrackets ? open.getStartPosition() : open.getEndPosition();\n                selectTo = selectBrackets ? close.getEndPosition() : close.getStartPosition();\n                if (close.containsPosition(position)) {\n                    // select backwards if the cursor was on the closing bracket\n                    const tmp = selectFrom;\n                    selectFrom = selectTo;\n                    selectTo = tmp;\n                }\n            }\n            if (selectFrom && selectTo) {\n                newSelections.push(new Selection(selectFrom.lineNumber, selectFrom.column, selectTo.lineNumber, selectTo.column));\n            }\n        });\n        if (newSelections.length > 0) {\n            this._editor.setSelections(newSelections);\n            this._editor.revealRange(newSelections[0]);\n        }\n    }\n    _updateBrackets() {\n        if (this._matchBrackets === 'never') {\n            return;\n        }\n        this._recomputeBrackets();\n        let newDecorations = [], newDecorationsLen = 0;\n        for (const bracketData of this._lastBracketsData) {\n            let brackets = bracketData.brackets;\n            if (brackets) {\n                newDecorations[newDecorationsLen++] = { range: brackets[0], options: bracketData.options };\n                newDecorations[newDecorationsLen++] = { range: brackets[1], options: bracketData.options };\n            }\n        }\n        this._decorations = this._editor.deltaDecorations(this._decorations, newDecorations);\n    }\n    _recomputeBrackets() {\n        if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n            // no model or no focus => no brackets!\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length > 100) {\n            // no bracket matching for high numbers of selections\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const model = this._editor.getModel();\n        const versionId = model.getVersionId();\n        let previousData = [];\n        if (this._lastVersionId === versionId) {\n            // use the previous data only if the model is at the same version id\n            previousData = this._lastBracketsData;\n        }\n        let positions = [], positionsLen = 0;\n        for (let i = 0, len = selections.length; i < len; i++) {\n            let selection = selections[i];\n            if (selection.isEmpty()) {\n                // will bracket match a cursor only if the selection is collapsed\n                positions[positionsLen++] = selection.getStartPosition();\n            }\n        }\n        // sort positions for `previousData` cache hits\n        if (positions.length > 1) {\n            positions.sort(Position.compare);\n        }\n        let newData = [], newDataLen = 0;\n        let previousIndex = 0, previousLen = previousData.length;\n        for (let i = 0, len = positions.length; i < len; i++) {\n            let position = positions[i];\n            while (previousIndex < previousLen && previousData[previousIndex].position.isBefore(position)) {\n                previousIndex++;\n            }\n            if (previousIndex < previousLen && previousData[previousIndex].position.equals(position)) {\n                newData[newDataLen++] = previousData[previousIndex];\n            }\n            else {\n                let brackets = model.bracketPairs.matchBracket(position, 20 /* give at most 20ms to compute */);\n                let options = BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;\n                if (!brackets && this._matchBrackets === 'always') {\n                    brackets = model.bracketPairs.findEnclosingBrackets(position, 20 /* give at most 20ms to compute */);\n                    options = BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER;\n                }\n                newData[newDataLen++] = new BracketsData(position, brackets, options);\n            }\n        }\n        this._lastBracketsData = newData;\n        this._lastVersionId = versionId;\n    }\n}\nBracketMatchingController.ID = 'editor.contrib.bracketMatchingController';\nBracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-overview',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerBracketMatchForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nBracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-no-overview',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match'\n});\nregisterEditorContribution(BracketMatchingController.ID, BracketMatchingController);\nregisterEditorAction(SelectToBracketAction);\nregisterEditorAction(JumpToBracketAction);\nregisterThemingParticipant((theme, collector) => {\n    const bracketMatchBackground = theme.getColor(editorBracketMatchBackground);\n    if (bracketMatchBackground) {\n        collector.addRule(`.monaco-editor .bracket-match { background-color: ${bracketMatchBackground}; }`);\n    }\n    const bracketMatchBorder = theme.getColor(editorBracketMatchBorder);\n    if (bracketMatchBorder) {\n        collector.addRule(`.monaco-editor .bracket-match { border: 1px solid ${bracketMatchBorder}; }`);\n    }\n});\n// Go to menu\nMenuRegistry.appendMenuItem(MenuId.MenubarGoMenu, {\n    group: '5_infile_nav',\n    command: {\n        id: 'editor.action.jumpToBracket',\n        title: nls.localize({ key: 'miGoToBracket', comment: ['&& denotes a mnemonic'] }, \"Go to &&Bracket\")\n    },\n    order: 2\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MoveCaretCommand } from './moveCaretCommand.js';\nimport * as nls from '../../../../nls.js';\nclass MoveCaretAction extends EditorAction {\n    constructor(left, opts) {\n        super(opts);\n        this.left = left;\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new MoveCaretCommand(selection, this.left));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass MoveCaretLeftAction extends MoveCaretAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.moveCarretLeftAction',\n            label: nls.localize('caret.moveLeft', \"Move Selected Text Left\"),\n            alias: 'Move Selected Text Left',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nclass MoveCaretRightAction extends MoveCaretAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.moveCarretRightAction',\n            label: nls.localize('caret.moveRight', \"Move Selected Text Right\"),\n            alias: 'Move Selected Text Right',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nregisterEditorAction(MoveCaretLeftAction);\nregisterEditorAction(MoveCaretRightAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class MoveCaretCommand {\n    constructor(selection, isMovingLeft) {\n        this._selection = selection;\n        this._isMovingLeft = isMovingLeft;\n    }\n    getEditOperations(model, builder) {\n        if (this._selection.startLineNumber !== this._selection.endLineNumber || this._selection.isEmpty()) {\n            return;\n        }\n        const lineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        const endColumn = this._selection.endColumn;\n        if (this._isMovingLeft && startColumn === 1) {\n            return;\n        }\n        if (!this._isMovingLeft && endColumn === model.getLineMaxColumn(lineNumber)) {\n            return;\n        }\n        if (this._isMovingLeft) {\n            const rangeBefore = new Range(lineNumber, startColumn - 1, lineNumber, startColumn);\n            const charBefore = model.getValueInRange(rangeBefore);\n            builder.addEditOperation(rangeBefore, null);\n            builder.addEditOperation(new Range(lineNumber, endColumn, lineNumber, endColumn), charBefore);\n        }\n        else {\n            const rangeAfter = new Range(lineNumber, endColumn, lineNumber, endColumn + 1);\n            const charAfter = model.getValueInRange(rangeAfter);\n            builder.addEditOperation(rangeAfter, null);\n            builder.addEditOperation(new Range(lineNumber, startColumn, lineNumber, startColumn), charAfter);\n        }\n    }\n    computeCursorState(model, helper) {\n        if (this._isMovingLeft) {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn - 1, this._selection.endLineNumber, this._selection.endColumn - 1);\n        }\n        else {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn + 1, this._selection.endLineNumber, this._selection.endColumn + 1);\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\nimport { MoveOperations } from '../../../common/cursor/cursorMoveOperations.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass TransposeLettersAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.transposeLetters',\n            label: nls.localize('transposeLetters.label', \"Transpose Letters\"),\n            alias: 'Transpose Letters',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: {\n                    primary: 256 /* WinCtrl */ | 50 /* KeyT */\n                },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let model = editor.getModel();\n        let commands = [];\n        let selections = editor.getSelections();\n        for (let selection of selections) {\n            if (!selection.isEmpty()) {\n                continue;\n            }\n            let lineNumber = selection.startLineNumber;\n            let column = selection.startColumn;\n            let lastColumn = model.getLineMaxColumn(lineNumber);\n            if (lineNumber === 1 && (column === 1 || (column === 2 && lastColumn === 2))) {\n                // at beginning of file, nothing to do\n                continue;\n            }\n            // handle special case: when at end of line, transpose left two chars\n            // otherwise, transpose left and right chars\n            let endPosition = (column === lastColumn) ?\n                selection.getPosition() :\n                MoveOperations.rightPosition(model, selection.getPosition().lineNumber, selection.getPosition().column);\n            let middlePosition = MoveOperations.leftPosition(model, endPosition);\n            let beginPosition = MoveOperations.leftPosition(model, middlePosition);\n            let leftChar = model.getValueInRange(Range.fromPositions(beginPosition, middlePosition));\n            let rightChar = model.getValueInRange(Range.fromPositions(middlePosition, endPosition));\n            let replaceRange = Range.fromPositions(beginPosition, endPosition);\n            commands.push(new ReplaceCommand(replaceRange, rightChar + leftChar));\n        }\n        if (commands.length > 0) {\n            editor.pushUndoStop();\n            editor.executeCommands(this.id, commands);\n            editor.pushUndoStop();\n        }\n    }\n}\nregisterEditorAction(TransposeLettersAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as browser from '../../../../base/browser/browser.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { CopyOptions, InMemoryClipboardMetadataManager } from '../../../browser/controller/textAreaInput.js';\nimport { EditorAction, MultiCommand, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nconst CLIPBOARD_CONTEXT_MENU_GROUP = '9_cutcopypaste';\nconst supportsCut = (platform.isNative || document.queryCommandSupported('cut'));\nconst supportsCopy = (platform.isNative || document.queryCommandSupported('copy'));\n// Firefox only supports navigator.clipboard.readText() in browser extensions.\n// See https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/readText#Browser_compatibility\n// When loading over http, navigator.clipboard can be undefined. See https://github.com/microsoft/monaco-editor/issues/2313\nconst supportsPaste = (typeof navigator.clipboard === 'undefined' || browser.isFirefox) ? document.queryCommandSupported('paste') : true;\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport const CutAction = supportsCut ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCutAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind cut keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* CtrlCmd */ | 54 /* KeyX */,\n        win: { primary: 2048 /* CtrlCmd */ | 54 /* KeyX */, secondary: [1024 /* Shift */ | 20 /* Delete */] },\n        weight: 100 /* EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCut', comment: ['&& denotes a mnemonic'] }, \"Cu&&t\"),\n            order: 1\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }]\n})) : undefined;\nexport const CopyAction = supportsCopy ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCopyAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind copy keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* CtrlCmd */ | 33 /* KeyC */,\n        win: { primary: 2048 /* CtrlCmd */ | 33 /* KeyC */, secondary: [2048 /* CtrlCmd */ | 19 /* Insert */] },\n        weight: 100 /* EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCopy', comment: ['&& denotes a mnemonic'] }, \"&&Copy\"),\n            order: 2\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }]\n})) : undefined;\nMenuRegistry.appendMenuItem(MenuId.MenubarEditMenu, { submenu: MenuId.MenubarCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: '2_ccp', order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: CLIPBOARD_CONTEXT_MENU_GROUP, order: 3 });\nexport const PasteAction = supportsPaste ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardPasteAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind paste keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* CtrlCmd */ | 52 /* KeyV */,\n        win: { primary: 2048 /* CtrlCmd */ | 52 /* KeyV */, secondary: [1024 /* Shift */ | 19 /* Insert */] },\n        linux: { primary: 2048 /* CtrlCmd */ | 52 /* KeyV */, secondary: [1024 /* Shift */ | 19 /* Insert */] },\n        weight: 100 /* EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miPaste', comment: ['&& denotes a mnemonic'] }, \"&&Paste\"),\n            order: 4\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }]\n})) : undefined;\nclass ExecCommandCopyWithSyntaxHighlightingAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.clipboardCopyWithSyntaxHighlightingAction',\n            label: nls.localize('actions.clipboard.copyWithSyntaxHighlightingLabel', \"Copy With Syntax Highlighting\"),\n            alias: 'Copy With Syntax Highlighting',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const emptySelectionClipboard = editor.getOption(32 /* emptySelectionClipboard */);\n        if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\n            return;\n        }\n        CopyOptions.forceCopyWithSyntaxHighlighting = true;\n        editor.focus();\n        document.execCommand('copy');\n        CopyOptions.forceCopyWithSyntaxHighlighting = false;\n    }\n}\nfunction registerExecCommandImpl(target, browserCommand) {\n    if (!target) {\n        return;\n    }\n    // 1. handle case when focus is in editor.\n    target.addImplementation(10000, 'code-editor', (accessor, args) => {\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            // Do not execute if there is no selection and empty selection clipboard is off\n            const emptySelectionClipboard = focusedEditor.getOption(32 /* emptySelectionClipboard */);\n            const selection = focusedEditor.getSelection();\n            if (selection && selection.isEmpty() && !emptySelectionClipboard) {\n                return true;\n            }\n            document.execCommand(browserCommand);\n            return true;\n        }\n        return false;\n    });\n    // 2. (default) handle case when focus is somewhere else.\n    target.addImplementation(0, 'generic-dom', (accessor, args) => {\n        document.execCommand(browserCommand);\n        return true;\n    });\n}\nregisterExecCommandImpl(CutAction, 'cut');\nregisterExecCommandImpl(CopyAction, 'copy');\nif (PasteAction) {\n    // 1. Paste: handle case when focus is in editor.\n    PasteAction.addImplementation(10000, 'code-editor', (accessor, args) => {\n        const codeEditorService = accessor.get(ICodeEditorService);\n        const clipboardService = accessor.get(IClipboardService);\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = codeEditorService.getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            const result = document.execCommand('paste');\n            // Use the clipboard service if document.execCommand('paste') was not successful\n            if (!result && platform.isWeb) {\n                return (() => __awaiter(void 0, void 0, void 0, function* () {\n                    const clipboardText = yield clipboardService.readText();\n                    if (clipboardText !== '') {\n                        const metadata = InMemoryClipboardMetadataManager.INSTANCE.get(clipboardText);\n                        let pasteOnNewLine = false;\n                        let multicursorText = null;\n                        let mode = null;\n                        if (metadata) {\n                            pasteOnNewLine = (focusedEditor.getOption(32 /* emptySelectionClipboard */) && !!metadata.isFromEmptySelection);\n                            multicursorText = (typeof metadata.multicursorText !== 'undefined' ? metadata.multicursorText : null);\n                            mode = metadata.mode;\n                        }\n                        focusedEditor.trigger('keyboard', \"paste\" /* Paste */, {\n                            text: clipboardText,\n                            pasteOnNewLine,\n                            multicursorText,\n                            mode\n                        });\n                    }\n                }))();\n            }\n            return true;\n        }\n        return false;\n    });\n    // 2. Paste: (default) handle case when focus is somewhere else.\n    PasteAction.addImplementation(0, 'generic-dom', (accessor, args) => {\n        document.execCommand('paste');\n        return true;\n    });\n}\nif (supportsCopy) {\n    registerEditorAction(ExecCommandCopyWithSyntaxHighlightingAction);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { AutoFixAction, CodeActionCommand, FixAllAction, OrganizeImportsAction, QuickFixAction, QuickFixController, RefactorAction, SourceAction } from './codeActionCommands.js';\nregisterEditorContribution(QuickFixController.ID, QuickFixController);\nregisterEditorAction(QuickFixAction);\nregisterEditorAction(RefactorAction);\nregisterEditorAction(SourceAction);\nregisterEditorAction(OrganizeImportsAction);\nregisterEditorAction(AutoFixAction);\nregisterEditorAction(FixAllAction);\nregisterEditorCommand(new CodeActionCommand());\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { codeActionCommandId, fixAllCommandId, organizeImportsCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionUi } from './codeActionUi.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService } from '../../../../platform/markers/common/markers.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CodeActionModel, SUPPORTED_CODE_ACTIONS } from './codeActionModel.js';\nimport { CodeActionCommandArgs, CodeActionKind } from './types.js';\nfunction contextKeyForSupportedActions(kind) {\n    return ContextKeyExpr.regex(SUPPORTED_CODE_ACTIONS.keys()[0], new RegExp('(\\\\s|^)' + escapeRegExpCharacters(kind.value) + '\\\\b'));\n}\nconst argsSchema = {\n    type: 'object',\n    defaultSnippets: [{ body: { kind: '' } }],\n    properties: {\n        'kind': {\n            type: 'string',\n            description: nls.localize('args.schema.kind', \"Kind of the code action to run.\"),\n        },\n        'apply': {\n            type: 'string',\n            description: nls.localize('args.schema.apply', \"Controls when the returned actions are applied.\"),\n            default: \"ifSingle\" /* IfSingle */,\n            enum: [\"first\" /* First */, \"ifSingle\" /* IfSingle */, \"never\" /* Never */],\n            enumDescriptions: [\n                nls.localize('args.schema.apply.first', \"Always apply the first returned code action.\"),\n                nls.localize('args.schema.apply.ifSingle', \"Apply the first returned code action if it is the only one.\"),\n                nls.localize('args.schema.apply.never', \"Do not apply the returned code actions.\"),\n            ]\n        },\n        'preferred': {\n            type: 'boolean',\n            default: false,\n            description: nls.localize('args.schema.preferred', \"Controls if only preferred code actions should be returned.\"),\n        }\n    }\n};\nlet QuickFixController = class QuickFixController extends Disposable {\n    constructor(editor, markerService, contextKeyService, progressService, _instantiationService, languageFeaturesService) {\n        super();\n        this._instantiationService = _instantiationService;\n        this._editor = editor;\n        this._model = this._register(new CodeActionModel(this._editor, languageFeaturesService.codeActionProvider, markerService, contextKeyService, progressService));\n        this._register(this._model.onDidChangeState(newState => this.update(newState)));\n        this._ui = new Lazy(() => this._register(new CodeActionUi(editor, QuickFixAction.Id, AutoFixAction.Id, {\n            applyCodeAction: (action, retrigger) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    yield this._applyCodeAction(action);\n                }\n                finally {\n                    if (retrigger) {\n                        this._trigger({ type: 2 /* Auto */, filter: {} });\n                    }\n                }\n            })\n        }, this._instantiationService)));\n    }\n    static get(editor) {\n        return editor.getContribution(QuickFixController.ID);\n    }\n    update(newState) {\n        this._ui.getValue().update(newState);\n    }\n    showCodeActions(trigger, actions, at) {\n        return this._ui.getValue().showCodeActionList(trigger, actions, at, { includeDisabledActions: false });\n    }\n    manualTriggerAtCurrentPosition(notAvailableMessage, filter, autoApply) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        (_a = MessageController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.closeMessage();\n        const triggerPosition = this._editor.getPosition();\n        this._trigger({ type: 1 /* Invoke */, filter, autoApply, context: { notAvailableMessage, position: triggerPosition } });\n    }\n    _trigger(trigger) {\n        return this._model.trigger(trigger);\n    }\n    _applyCodeAction(action) {\n        return this._instantiationService.invokeFunction(applyCodeAction, action, this._editor);\n    }\n};\nQuickFixController.ID = 'editor.contrib.quickFixController';\nQuickFixController = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IContextKeyService),\n    __param(3, IEditorProgressService),\n    __param(4, IInstantiationService),\n    __param(5, ILanguageFeaturesService)\n], QuickFixController);\nexport { QuickFixController };\nexport function applyCodeAction(accessor, item, editor) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const bulkEditService = accessor.get(IBulkEditService);\n        const commandService = accessor.get(ICommandService);\n        const telemetryService = accessor.get(ITelemetryService);\n        const notificationService = accessor.get(INotificationService);\n        telemetryService.publicLog2('codeAction.applyCodeAction', {\n            codeActionTitle: item.action.title,\n            codeActionKind: item.action.kind,\n            codeActionIsPreferred: !!item.action.isPreferred,\n        });\n        yield item.resolve(CancellationToken.None);\n        if (item.action.edit) {\n            yield bulkEditService.apply(ResourceEdit.convert(item.action.edit), { editor, label: item.action.title });\n        }\n        if (item.action.command) {\n            try {\n                yield commandService.executeCommand(item.action.command.id, ...(item.action.command.arguments || []));\n            }\n            catch (err) {\n                const message = asMessage(err);\n                notificationService.error(typeof message === 'string'\n                    ? message\n                    : nls.localize('applyCodeActionFailed', \"An unknown error occurred while applying the code action\"));\n            }\n        }\n    });\n}\nfunction asMessage(err) {\n    if (typeof err === 'string') {\n        return err;\n    }\n    else if (err instanceof Error && typeof err.message === 'string') {\n        return err.message;\n    }\n    else {\n        return undefined;\n    }\n}\nfunction triggerCodeActionsForEditorSelection(editor, notAvailableMessage, filter, autoApply) {\n    if (editor.hasModel()) {\n        const controller = QuickFixController.get(editor);\n        if (controller) {\n            controller.manualTriggerAtCurrentPosition(notAvailableMessage, filter, autoApply);\n        }\n    }\n}\nexport class QuickFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: QuickFixAction.Id,\n            label: nls.localize('quickfix.trigger.label', \"Quick Fix...\"),\n            alias: 'Quick Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 84 /* Period */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.quickFix.noneMessage', \"No code actions available\"), undefined, undefined);\n    }\n}\nQuickFixAction.Id = 'editor.action.quickFix';\nexport class CodeActionCommand extends EditorCommand {\n    constructor() {\n        super({\n            id: codeActionCommandId,\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            description: {\n                description: 'Trigger a code action',\n                args: [{ name: 'args', schema: argsSchema, }]\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Empty,\n            apply: \"ifSingle\" /* IfSingle */,\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred.kind', \"No preferred code actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.codeAction.noneMessage.kind', \"No code actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred', \"No preferred code actions available\")\n                : nls.localize('editor.action.codeAction.noneMessage', \"No code actions available\"), {\n            include: args.kind,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply);\n    }\n}\nexport class RefactorAction extends EditorAction {\n    constructor() {\n        super({\n            id: refactorCommandId,\n            label: nls.localize('refactor.label', \"Refactor...\"),\n            alias: 'Refactor...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 48 /* KeyR */,\n                mac: {\n                    primary: 256 /* WinCtrl */ | 1024 /* Shift */ | 48 /* KeyR */\n                },\n                weight: 100 /* EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Refactor)),\n            },\n            description: {\n                description: 'Refactor...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Refactor,\n            apply: \"never\" /* Never */\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.refactor.noneMessage.preferred.kind', \"No preferred refactorings for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.refactor.noneMessage.kind', \"No refactorings for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.refactor.noneMessage.preferred', \"No preferred refactorings available\")\n                : nls.localize('editor.action.refactor.noneMessage', \"No refactorings available\"), {\n            include: CodeActionKind.Refactor.contains(args.kind) ? args.kind : CodeActionKind.None,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply);\n    }\n}\nexport class SourceAction extends EditorAction {\n    constructor() {\n        super({\n            id: sourceActionCommandId,\n            label: nls.localize('source.label', \"Source Action...\"),\n            alias: 'Source Action...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2.1,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Source)),\n            },\n            description: {\n                description: 'Source Action...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Source,\n            apply: \"never\" /* Never */\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred.kind', \"No preferred source actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.source.noneMessage.kind', \"No source actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred', \"No preferred source actions available\")\n                : nls.localize('editor.action.source.noneMessage', \"No source actions available\"), {\n            include: CodeActionKind.Source.contains(args.kind) ? args.kind : CodeActionKind.None,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply);\n    }\n}\nexport class OrganizeImportsAction extends EditorAction {\n    constructor() {\n        super({\n            id: organizeImportsCommandId,\n            label: nls.localize('organizeImports.label', \"Organize Imports\"),\n            alias: 'Organize Imports',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceOrganizeImports)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 45 /* KeyO */,\n                weight: 100 /* EditorContrib */\n            },\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.organize.noneMessage', \"No organize imports action available\"), { include: CodeActionKind.SourceOrganizeImports, includeSourceActions: true }, \"ifSingle\" /* IfSingle */);\n    }\n}\nexport class FixAllAction extends EditorAction {\n    constructor() {\n        super({\n            id: fixAllCommandId,\n            label: nls.localize('fixAll.label', \"Fix All\"),\n            alias: 'Fix All',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceFixAll))\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('fixAll.noneMessage', \"No fix all action available\"), { include: CodeActionKind.SourceFixAll, includeSourceActions: true }, \"ifSingle\" /* IfSingle */);\n    }\n}\nexport class AutoFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: AutoFixAction.Id,\n            label: nls.localize('autoFix.label', \"Auto Fix...\"),\n            alias: 'Auto Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.QuickFix)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* Alt */ | 1024 /* Shift */ | 84 /* Period */,\n                mac: {\n                    primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 84 /* Period */\n                },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.autoFix.noneMessage', \"No auto fixes available\"), {\n            include: CodeActionKind.QuickFix,\n            onlyIncludePreferredActions: true\n        }, \"ifSingle\" /* IfSingle */);\n    }\n}\nAutoFixAction.Id = 'editor.action.autoFix';\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce, equals, flatten, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { CodeActionKind, filtersAction, mayIncludeActionsOfKind } from './types.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport const codeActionCommandId = 'editor.action.codeAction';\nexport const refactorCommandId = 'editor.action.refactor';\nexport const sourceActionCommandId = 'editor.action.sourceAction';\nexport const organizeImportsCommandId = 'editor.action.organizeImports';\nexport const fixAllCommandId = 'editor.action.fixAll';\nexport class CodeActionItem {\n    constructor(action, provider) {\n        this.action = action;\n        this.provider = provider;\n    }\n    resolve(token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (((_a = this.provider) === null || _a === void 0 ? void 0 : _a.resolveCodeAction) && !this.action.edit) {\n                let action;\n                try {\n                    action = yield this.provider.resolveCodeAction(this.action, token);\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n                if (action) {\n                    this.action.edit = action.edit;\n                }\n            }\n            return this;\n        });\n    }\n}\nclass ManagedCodeActionSet extends Disposable {\n    constructor(actions, documentation, disposables) {\n        super();\n        this.documentation = documentation;\n        this._register(disposables);\n        this.allActions = [...actions].sort(ManagedCodeActionSet.codeActionsComparator);\n        this.validActions = this.allActions.filter(({ action }) => !action.disabled);\n    }\n    static codeActionsComparator({ action: a }, { action: b }) {\n        if (a.isPreferred && !b.isPreferred) {\n            return -1;\n        }\n        else if (!a.isPreferred && b.isPreferred) {\n            return 1;\n        }\n        if (isNonEmptyArray(a.diagnostics)) {\n            if (isNonEmptyArray(b.diagnostics)) {\n                return a.diagnostics[0].message.localeCompare(b.diagnostics[0].message);\n            }\n            else {\n                return -1;\n            }\n        }\n        else if (isNonEmptyArray(b.diagnostics)) {\n            return 1;\n        }\n        else {\n            return 0; // both have no diagnostics\n        }\n    }\n    get hasAutoFix() {\n        return this.validActions.some(({ action: fix }) => !!fix.kind && CodeActionKind.QuickFix.contains(new CodeActionKind(fix.kind)) && !!fix.isPreferred);\n    }\n}\nconst emptyCodeActionsResponse = { actions: [], documentation: undefined };\nexport function getCodeActions(registry, model, rangeOrSelection, trigger, progress, token) {\n    var _a;\n    const filter = trigger.filter || {};\n    const codeActionContext = {\n        only: (_a = filter.include) === null || _a === void 0 ? void 0 : _a.value,\n        trigger: trigger.type,\n    };\n    const cts = new TextModelCancellationTokenSource(model, token);\n    const providers = getCodeActionProviders(registry, model, filter);\n    const disposables = new DisposableStore();\n    const promises = providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n        try {\n            progress.report(provider);\n            const providedCodeActions = yield provider.provideCodeActions(model, rangeOrSelection, codeActionContext, cts.token);\n            if (providedCodeActions) {\n                disposables.add(providedCodeActions);\n            }\n            if (cts.token.isCancellationRequested) {\n                return emptyCodeActionsResponse;\n            }\n            const filteredActions = ((providedCodeActions === null || providedCodeActions === void 0 ? void 0 : providedCodeActions.actions) || []).filter(action => action && filtersAction(filter, action));\n            const documentation = getDocumentation(provider, filteredActions, filter.include);\n            return {\n                actions: filteredActions.map(action => new CodeActionItem(action, provider)),\n                documentation\n            };\n        }\n        catch (err) {\n            if (isCancellationError(err)) {\n                throw err;\n            }\n            onUnexpectedExternalError(err);\n            return emptyCodeActionsResponse;\n        }\n    }));\n    const listener = registry.onDidChange(() => {\n        const newProviders = registry.all(model);\n        if (!equals(newProviders, providers)) {\n            cts.cancel();\n        }\n    });\n    return Promise.all(promises).then(actions => {\n        const allActions = flatten(actions.map(x => x.actions));\n        const allDocumentation = coalesce(actions.map(x => x.documentation));\n        return new ManagedCodeActionSet(allActions, allDocumentation, disposables);\n    })\n        .finally(() => {\n        listener.dispose();\n        cts.dispose();\n    });\n}\nfunction getCodeActionProviders(registry, model, filter) {\n    return registry.all(model)\n        // Don't include providers that we know will not return code actions of interest\n        .filter(provider => {\n        if (!provider.providedCodeActionKinds) {\n            // We don't know what type of actions this provider will return.\n            return true;\n        }\n        return provider.providedCodeActionKinds.some(kind => mayIncludeActionsOfKind(filter, new CodeActionKind(kind)));\n    });\n}\nfunction getDocumentation(provider, providedCodeActions, only) {\n    if (!provider.documentation) {\n        return undefined;\n    }\n    const documentation = provider.documentation.map(entry => ({ kind: new CodeActionKind(entry.kind), command: entry.command }));\n    if (only) {\n        let currentBest;\n        for (const entry of documentation) {\n            if (entry.kind.contains(only)) {\n                if (!currentBest) {\n                    currentBest = entry;\n                }\n                else {\n                    // Take best match\n                    if (currentBest.kind.contains(entry.kind)) {\n                        currentBest = entry;\n                    }\n                }\n            }\n        }\n        if (currentBest) {\n            return currentBest === null || currentBest === void 0 ? void 0 : currentBest.command;\n        }\n    }\n    // Otherwise, check to see if any of the provided actions match.\n    for (const action of providedCodeActions) {\n        if (!action.kind) {\n            continue;\n        }\n        for (const entry of documentation) {\n            if (entry.kind.contains(new CodeActionKind(action.kind))) {\n                return entry.command;\n            }\n        }\n    }\n    return undefined;\n}\nCommandsRegistry.registerCommand('_executeCodeActionProvider', function (accessor, resource, rangeOrSelection, kind, itemResolveCount) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!(resource instanceof URI)) {\n            throw illegalArgument();\n        }\n        const { codeActionProvider } = accessor.get(ILanguageFeaturesService);\n        const model = accessor.get(IModelService).getModel(resource);\n        if (!model) {\n            throw illegalArgument();\n        }\n        const validatedRangeOrSelection = Selection.isISelection(rangeOrSelection)\n            ? Selection.liftSelection(rangeOrSelection)\n            : Range.isIRange(rangeOrSelection)\n                ? model.validateRange(rangeOrSelection)\n                : undefined;\n        if (!validatedRangeOrSelection) {\n            throw illegalArgument();\n        }\n        const include = typeof kind === 'string' ? new CodeActionKind(kind) : undefined;\n        const codeActionSet = yield getCodeActions(codeActionProvider, model, validatedRangeOrSelection, { type: 1 /* Invoke */, filter: { includeSourceActions: true, include } }, Progress.None, CancellationToken.None);\n        const resolving = [];\n        const resolveCount = Math.min(codeActionSet.validActions.length, typeof itemResolveCount === 'number' ? itemResolveCount : 0);\n        for (let i = 0; i < resolveCount; i++) {\n            resolving.push(codeActionSet.validActions[i].resolve(CancellationToken.None));\n        }\n        try {\n            yield Promise.all(resolving);\n            return codeActionSet.validActions.map(item => item.action);\n        }\n        finally {\n            setTimeout(() => codeActionSet.dispose(), 100);\n        }\n    });\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class CodeActionKind {\n    constructor(value) {\n        this.value = value;\n    }\n    equals(other) {\n        return this.value === other.value;\n    }\n    contains(other) {\n        return this.equals(other) || this.value === '' || other.value.startsWith(this.value + CodeActionKind.sep);\n    }\n    intersects(other) {\n        return this.contains(other) || other.contains(this);\n    }\n    append(part) {\n        return new CodeActionKind(this.value + CodeActionKind.sep + part);\n    }\n}\nCodeActionKind.sep = '.';\nCodeActionKind.None = new CodeActionKind('@@none@@'); // Special code action that contains nothing\nCodeActionKind.Empty = new CodeActionKind('');\nCodeActionKind.QuickFix = new CodeActionKind('quickfix');\nCodeActionKind.Refactor = new CodeActionKind('refactor');\nCodeActionKind.Source = new CodeActionKind('source');\nCodeActionKind.SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\nCodeActionKind.SourceFixAll = CodeActionKind.Source.append('fixAll');\nexport function mayIncludeActionsOfKind(filter, providedKind) {\n    // A provided kind may be a subset or superset of our filtered kind.\n    if (filter.include && !filter.include.intersects(providedKind)) {\n        return false;\n    }\n    if (filter.excludes) {\n        if (filter.excludes.some(exclude => excludesAction(providedKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions && CodeActionKind.Source.contains(providedKind)) {\n        return false;\n    }\n    return true;\n}\nexport function filtersAction(filter, action) {\n    const actionKind = action.kind ? new CodeActionKind(action.kind) : undefined;\n    // Filter out actions by kind\n    if (filter.include) {\n        if (!actionKind || !filter.include.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.excludes) {\n        if (actionKind && filter.excludes.some(exclude => excludesAction(actionKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions) {\n        if (actionKind && CodeActionKind.Source.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.onlyIncludePreferredActions) {\n        if (!action.isPreferred) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction excludesAction(providedKind, exclude, include) {\n    if (!exclude.contains(providedKind)) {\n        return false;\n    }\n    if (include && exclude.contains(include)) {\n        // The include is more specific, don't filter out\n        return false;\n    }\n    return true;\n}\nexport class CodeActionCommandArgs {\n    constructor(kind, apply, preferred) {\n        this.kind = kind;\n        this.apply = apply;\n        this.preferred = preferred;\n    }\n    static fromUser(arg, defaults) {\n        if (!arg || typeof arg !== 'object') {\n            return new CodeActionCommandArgs(defaults.kind, defaults.apply, false);\n        }\n        return new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(arg, defaults.kind), CodeActionCommandArgs.getApplyFromUser(arg, defaults.apply), CodeActionCommandArgs.getPreferredUser(arg));\n    }\n    static getApplyFromUser(arg, defaultAutoApply) {\n        switch (typeof arg.apply === 'string' ? arg.apply.toLowerCase() : '') {\n            case 'first': return \"first\" /* First */;\n            case 'never': return \"never\" /* Never */;\n            case 'ifsingle': return \"ifSingle\" /* IfSingle */;\n            default: return defaultAutoApply;\n        }\n    }\n    static getKindFromUser(arg, defaultKind) {\n        return typeof arg.kind === 'string'\n            ? new CodeActionKind(arg.kind)\n            : defaultKind;\n    }\n    static getPreferredUser(arg) {\n        return typeof arg.preferred === 'boolean'\n            ? arg.preferred\n            : false;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _CodeActionUi_disposed;\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { CodeActionMenu } from './codeActionMenu.js';\nimport { LightBulbWidget } from './lightBulbWidget.js';\nlet CodeActionUi = class CodeActionUi extends Disposable {\n    constructor(_editor, quickFixActionId, preferredFixActionId, delegate, instantiationService) {\n        super();\n        this._editor = _editor;\n        this.delegate = delegate;\n        this._activeCodeActions = this._register(new MutableDisposable());\n        _CodeActionUi_disposed.set(this, false);\n        this._codeActionWidget = new Lazy(() => {\n            return this._register(instantiationService.createInstance(CodeActionMenu, this._editor, {\n                onSelectCodeAction: (action) => __awaiter(this, void 0, void 0, function* () {\n                    this.delegate.applyCodeAction(action, /* retrigger */ true);\n                })\n            }));\n        });\n        this._lightBulbWidget = new Lazy(() => {\n            const widget = this._register(instantiationService.createInstance(LightBulbWidget, this._editor, quickFixActionId, preferredFixActionId));\n            this._register(widget.onClick(e => this.showCodeActionList(e.trigger, e.actions, e, { includeDisabledActions: false })));\n            return widget;\n        });\n    }\n    dispose() {\n        __classPrivateFieldSet(this, _CodeActionUi_disposed, true, \"f\");\n        super.dispose();\n    }\n    update(newState) {\n        var _a, _b, _c, _d, _e;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (newState.type !== 1 /* Triggered */) {\n                (_a = this._lightBulbWidget.rawValue) === null || _a === void 0 ? void 0 : _a.hide();\n                return;\n            }\n            let actions;\n            try {\n                actions = yield newState.actions;\n            }\n            catch (e) {\n                onUnexpectedError(e);\n                return;\n            }\n            if (__classPrivateFieldGet(this, _CodeActionUi_disposed, \"f\")) {\n                return;\n            }\n            this._lightBulbWidget.getValue().update(actions, newState.trigger, newState.position);\n            if (newState.trigger.type === 1 /* Invoke */) {\n                if ((_b = newState.trigger.filter) === null || _b === void 0 ? void 0 : _b.include) { // Triggered for specific scope\n                    // Check to see if we want to auto apply.\n                    const validActionToApply = this.tryGetValidActionToApply(newState.trigger, actions);\n                    if (validActionToApply) {\n                        try {\n                            this._lightBulbWidget.getValue().hide();\n                            yield this.delegate.applyCodeAction(validActionToApply, false);\n                        }\n                        finally {\n                            actions.dispose();\n                        }\n                        return;\n                    }\n                    // Check to see if there is an action that we would have applied were it not invalid\n                    if (newState.trigger.context) {\n                        const invalidAction = this.getInvalidActionThatWouldHaveBeenApplied(newState.trigger, actions);\n                        if (invalidAction && invalidAction.action.disabled) {\n                            (_c = MessageController.get(this._editor)) === null || _c === void 0 ? void 0 : _c.showMessage(invalidAction.action.disabled, newState.trigger.context.position);\n                            actions.dispose();\n                            return;\n                        }\n                    }\n                }\n                const includeDisabledActions = !!((_d = newState.trigger.filter) === null || _d === void 0 ? void 0 : _d.include);\n                if (newState.trigger.context) {\n                    if (!actions.allActions.length || !includeDisabledActions && !actions.validActions.length) {\n                        (_e = MessageController.get(this._editor)) === null || _e === void 0 ? void 0 : _e.showMessage(newState.trigger.context.notAvailableMessage, newState.trigger.context.position);\n                        this._activeCodeActions.value = actions;\n                        actions.dispose();\n                        return;\n                    }\n                }\n                this._activeCodeActions.value = actions;\n                this._codeActionWidget.getValue().show(newState.trigger, actions, newState.position, { includeDisabledActions });\n            }\n            else {\n                // auto magically triggered\n                if (this._codeActionWidget.getValue().isVisible) {\n                    // TODO: Figure out if we should update the showing menu?\n                    actions.dispose();\n                }\n                else {\n                    this._activeCodeActions.value = actions;\n                }\n            }\n        });\n    }\n    getInvalidActionThatWouldHaveBeenApplied(trigger, actions) {\n        if (!actions.allActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* First */ && actions.validActions.length === 0)\n            || (trigger.autoApply === \"ifSingle\" /* IfSingle */ && actions.allActions.length === 1)) {\n            return actions.allActions.find(({ action }) => action.disabled);\n        }\n        return undefined;\n    }\n    tryGetValidActionToApply(trigger, actions) {\n        if (!actions.validActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* First */ && actions.validActions.length > 0)\n            || (trigger.autoApply === \"ifSingle\" /* IfSingle */ && actions.validActions.length === 1)) {\n            return actions.validActions[0];\n        }\n        return undefined;\n    }\n    showCodeActionList(trigger, actions, at, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._codeActionWidget.getValue().show(trigger, actions, at, options);\n        });\n    }\n};\n_CodeActionUi_disposed = new WeakMap();\nCodeActionUi = __decorate([\n    __param(4, IInstantiationService)\n], CodeActionUi);\nexport { CodeActionUi };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport './messageController.css';\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet MessageController = class MessageController {\n    constructor(editor, contextKeyService) {\n        this._messageWidget = new MutableDisposable();\n        this._messageListeners = new DisposableStore();\n        this._editor = editor;\n        this._visible = MessageController.MESSAGE_VISIBLE.bindTo(contextKeyService);\n        this._editorListener = this._editor.onDidAttemptReadOnlyEdit(() => this._onDidAttemptReadOnlyEdit());\n    }\n    static get(editor) {\n        return editor.getContribution(MessageController.ID);\n    }\n    dispose() {\n        this._editorListener.dispose();\n        this._messageListeners.dispose();\n        this._messageWidget.dispose();\n        this._visible.reset();\n    }\n    showMessage(message, position) {\n        alert(message);\n        this._visible.set(true);\n        this._messageWidget.clear();\n        this._messageListeners.clear();\n        this._messageWidget.value = new MessageWidget(this._editor, position, message);\n        // close on blur, cursor, model change, dispose\n        this._messageListeners.add(this._editor.onDidBlurEditorText(() => this.closeMessage()));\n        this._messageListeners.add(this._editor.onDidChangeCursorPosition(() => this.closeMessage()));\n        this._messageListeners.add(this._editor.onDidDispose(() => this.closeMessage()));\n        this._messageListeners.add(this._editor.onDidChangeModel(() => this.closeMessage()));\n        // 3sec\n        this._messageListeners.add(new TimeoutTimer(() => this.closeMessage(), 3000));\n        // close on mouse move\n        let bounds;\n        this._messageListeners.add(this._editor.onMouseMove(e => {\n            // outside the text area\n            if (!e.target.position) {\n                return;\n            }\n            if (!bounds) {\n                // define bounding box around position and first mouse occurance\n                bounds = new Range(position.lineNumber - 3, 1, e.target.position.lineNumber + 3, 1);\n            }\n            else if (!bounds.containsPosition(e.target.position)) {\n                // check if position is still in bounds\n                this.closeMessage();\n            }\n        }));\n    }\n    closeMessage() {\n        this._visible.reset();\n        this._messageListeners.clear();\n        if (this._messageWidget.value) {\n            this._messageListeners.add(MessageWidget.fadeOut(this._messageWidget.value));\n        }\n    }\n    _onDidAttemptReadOnlyEdit() {\n        if (this._editor.hasModel()) {\n            this.showMessage(nls.localize('editor.readonly', \"Cannot edit in read-only editor\"), this._editor.getPosition());\n        }\n    }\n};\nMessageController.ID = 'editor.contrib.messageController';\nMessageController.MESSAGE_VISIBLE = new RawContextKey('messageVisible', false, nls.localize('messageVisible', 'Whether the editor is currently showing an inline message'));\nMessageController = __decorate([\n    __param(1, IContextKeyService)\n], MessageController);\nexport { MessageController };\nconst MessageCommand = EditorCommand.bindToContribution(MessageController.get);\nregisterEditorCommand(new MessageCommand({\n    id: 'leaveEditorMessage',\n    precondition: MessageController.MESSAGE_VISIBLE,\n    handler: c => c.closeMessage(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 30,\n        primary: 9 /* Escape */\n    }\n}));\nclass MessageWidget {\n    constructor(editor, { lineNumber, column }, text) {\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._editor = editor;\n        this._editor.revealLinesInCenterIfOutsideViewport(lineNumber, lineNumber, 0 /* Smooth */);\n        this._position = { lineNumber, column: column - 1 };\n        this._domNode = document.createElement('div');\n        this._domNode.classList.add('monaco-editor-overlaymessage');\n        const anchorTop = document.createElement('div');\n        anchorTop.classList.add('anchor', 'top');\n        this._domNode.appendChild(anchorTop);\n        const message = document.createElement('div');\n        message.classList.add('message');\n        message.textContent = text;\n        this._domNode.appendChild(message);\n        const anchorBottom = document.createElement('div');\n        anchorBottom.classList.add('anchor', 'below');\n        this._domNode.appendChild(anchorBottom);\n        this._editor.addContentWidget(this);\n        this._domNode.classList.add('fadeIn');\n    }\n    static fadeOut(messageWidget) {\n        let handle;\n        const dispose = () => {\n            messageWidget.dispose();\n            clearTimeout(handle);\n            messageWidget.getDomNode().removeEventListener('animationend', dispose);\n        };\n        handle = setTimeout(dispose, 110);\n        messageWidget.getDomNode().addEventListener('animationend', dispose);\n        messageWidget.getDomNode().classList.add('fadeOut');\n        return { dispose };\n    }\n    dispose() {\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return 'messageoverlay';\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return { position: this._position, preference: [1 /* ABOVE */, 2 /* BELOW */] };\n    }\n    afterRender(position) {\n        this._domNode.classList.toggle('below', position === 2 /* BELOW */);\n    }\n}\nregisterEditorContribution(MessageController.ID, MessageController);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { getDomNodePagePosition } from '../../../../base/browser/dom.js';\nimport { Action, Separator } from '../../../../base/common/actions.js';\nimport { canceled } from '../../../../base/common/errors.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { codeActionCommandId, CodeActionItem, fixAllCommandId, organizeImportsCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionCommandArgs, CodeActionKind } from './types.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nclass CodeActionAction extends Action {\n    constructor(action, callback) {\n        super(action.command ? action.command.id : action.title, stripNewlines(action.title), undefined, !action.disabled, callback);\n        this.action = action;\n    }\n}\nfunction stripNewlines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, ' ');\n}\nlet CodeActionMenu = class CodeActionMenu extends Disposable {\n    constructor(_editor, _delegate, _contextMenuService, keybindingService, _languageFeaturesService) {\n        super();\n        this._editor = _editor;\n        this._delegate = _delegate;\n        this._contextMenuService = _contextMenuService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._visible = false;\n        this._showingActions = this._register(new MutableDisposable());\n        this._keybindingResolver = new CodeActionKeybindingResolver({\n            getKeybindings: () => keybindingService.getKeybindings()\n        });\n    }\n    get isVisible() {\n        return this._visible;\n    }\n    show(trigger, codeActions, at, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const actionsToShow = options.includeDisabledActions ? codeActions.allActions : codeActions.validActions;\n            if (!actionsToShow.length) {\n                this._visible = false;\n                return;\n            }\n            if (!this._editor.getDomNode()) {\n                // cancel when editor went off-dom\n                this._visible = false;\n                throw canceled();\n            }\n            this._visible = true;\n            this._showingActions.value = codeActions;\n            const menuActions = this.getMenuActions(trigger, actionsToShow, codeActions.documentation);\n            const anchor = Position.isIPosition(at) ? this._toCoords(at) : at || { x: 0, y: 0 };\n            const resolver = this._keybindingResolver.getResolver();\n            const useShadowDOM = this._editor.getOption(115 /* useShadowDOM */);\n            this._contextMenuService.showContextMenu({\n                domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n                getAnchor: () => anchor,\n                getActions: () => menuActions,\n                onHide: () => {\n                    this._visible = false;\n                    this._editor.focus();\n                },\n                autoSelectFirstItem: true,\n                getKeyBinding: action => action instanceof CodeActionAction ? resolver(action.action) : undefined,\n            });\n        });\n    }\n    getMenuActions(trigger, actionsToShow, documentation) {\n        var _a, _b;\n        const toCodeActionAction = (item) => new CodeActionAction(item.action, () => this._delegate.onSelectCodeAction(item));\n        const result = actionsToShow\n            .map(toCodeActionAction);\n        const allDocumentation = [...documentation];\n        const model = this._editor.getModel();\n        if (model && result.length) {\n            for (const provider of this._languageFeaturesService.codeActionProvider.all(model)) {\n                if (provider._getAdditionalMenuItems) {\n                    allDocumentation.push(...provider._getAdditionalMenuItems({ trigger: trigger.type, only: (_b = (_a = trigger.filter) === null || _a === void 0 ? void 0 : _a.include) === null || _b === void 0 ? void 0 : _b.value }, actionsToShow.map(item => item.action)));\n                }\n            }\n        }\n        if (allDocumentation.length) {\n            result.push(new Separator(), ...allDocumentation.map(command => toCodeActionAction(new CodeActionItem({\n                title: command.title,\n                command: command,\n            }, undefined))));\n        }\n        return result;\n    }\n    _toCoords(position) {\n        if (!this._editor.hasModel()) {\n            return { x: 0, y: 0 };\n        }\n        this._editor.revealPosition(position, 1 /* Immediate */);\n        this._editor.render();\n        // Translate to absolute editor position\n        const cursorCoords = this._editor.getScrolledVisiblePosition(position);\n        const editorCoords = getDomNodePagePosition(this._editor.getDomNode());\n        const x = editorCoords.left + cursorCoords.left;\n        const y = editorCoords.top + cursorCoords.top + cursorCoords.height;\n        return { x, y };\n    }\n};\nCodeActionMenu = __decorate([\n    __param(2, IContextMenuService),\n    __param(3, IKeybindingService),\n    __param(4, ILanguageFeaturesService)\n], CodeActionMenu);\nexport { CodeActionMenu };\nexport class CodeActionKeybindingResolver {\n    constructor(_keybindingProvider) {\n        this._keybindingProvider = _keybindingProvider;\n    }\n    getResolver() {\n        // Lazy since we may not actually ever read the value\n        const allCodeActionBindings = new Lazy(() => this._keybindingProvider.getKeybindings()\n            .filter(item => CodeActionKeybindingResolver.codeActionCommands.indexOf(item.command) >= 0)\n            .filter(item => item.resolvedKeybinding)\n            .map((item) => {\n            // Special case these commands since they come built-in with VS Code and don't use 'commandArgs'\n            let commandArgs = item.commandArgs;\n            if (item.command === organizeImportsCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceOrganizeImports.value };\n            }\n            else if (item.command === fixAllCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceFixAll.value };\n            }\n            return Object.assign({ resolvedKeybinding: item.resolvedKeybinding }, CodeActionCommandArgs.fromUser(commandArgs, {\n                kind: CodeActionKind.None,\n                apply: \"never\" /* Never */\n            }));\n        }));\n        return (action) => {\n            if (action.kind) {\n                const binding = this.bestKeybindingForCodeAction(action, allCodeActionBindings.getValue());\n                return binding === null || binding === void 0 ? void 0 : binding.resolvedKeybinding;\n            }\n            return undefined;\n        };\n    }\n    bestKeybindingForCodeAction(action, candidates) {\n        if (!action.kind) {\n            return undefined;\n        }\n        const kind = new CodeActionKind(action.kind);\n        return candidates\n            .filter(candidate => candidate.kind.contains(kind))\n            .filter(candidate => {\n            if (candidate.preferred) {\n                // If the candidate keybinding only applies to preferred actions, the this action must also be preferred\n                return action.isPreferred;\n            }\n            return true;\n        })\n            .reduceRight((currentBest, candidate) => {\n            if (!currentBest) {\n                return candidate;\n            }\n            // Select the more specific binding\n            return currentBest.kind.contains(candidate.kind) ? candidate : currentBest;\n        }, undefined);\n    }\n}\nCodeActionKeybindingResolver.codeActionCommands = [\n    refactorCommandId,\n    codeActionCommandId,\n    sourceActionCommandId,\n    organizeImportsCommandId,\n    fixAllCommandId\n];\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { GlobalMouseMoveMonitor, standardMouseMoveMerger } from '../../../../base/browser/globalMouseMoveMonitor.js';\nimport { Gesture } from '../../../../base/browser/touch.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './lightBulbWidget.css';\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport * as nls from '../../../../nls.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { editorBackground, editorLightBulbAutoFixForeground, editorLightBulbForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nvar LightBulbState;\n(function (LightBulbState) {\n    LightBulbState.Hidden = { type: 0 /* Hidden */ };\n    class Showing {\n        constructor(actions, trigger, editorPosition, widgetPosition) {\n            this.actions = actions;\n            this.trigger = trigger;\n            this.editorPosition = editorPosition;\n            this.widgetPosition = widgetPosition;\n            this.type = 1 /* Showing */;\n        }\n    }\n    LightBulbState.Showing = Showing;\n})(LightBulbState || (LightBulbState = {}));\nlet LightBulbWidget = class LightBulbWidget extends Disposable {\n    constructor(_editor, _quickFixActionId, _preferredFixActionId, _keybindingService) {\n        super();\n        this._editor = _editor;\n        this._quickFixActionId = _quickFixActionId;\n        this._preferredFixActionId = _preferredFixActionId;\n        this._keybindingService = _keybindingService;\n        this._onClick = this._register(new Emitter());\n        this.onClick = this._onClick.event;\n        this._state = LightBulbState.Hidden;\n        this._domNode = document.createElement('div');\n        this._domNode.className = Codicon.lightBulb.classNames;\n        this._editor.addContentWidget(this);\n        this._register(this._editor.onDidChangeModelContent(_ => {\n            // cancel when the line in question has been removed\n            const editorModel = this._editor.getModel();\n            if (this.state.type !== 1 /* Showing */ || !editorModel || this.state.editorPosition.lineNumber >= editorModel.getLineCount()) {\n                this.hide();\n            }\n        }));\n        Gesture.ignoreTarget(this._domNode);\n        this._register(dom.addStandardDisposableGenericMouseDownListener(this._domNode, e => {\n            if (this.state.type !== 1 /* Showing */) {\n                return;\n            }\n            // Make sure that focus / cursor location is not lost when clicking widget icon\n            this._editor.focus();\n            e.preventDefault();\n            // a bit of extra work to make sure the menu\n            // doesn't cover the line-text\n            const { top, height } = dom.getDomNodePagePosition(this._domNode);\n            const lineHeight = this._editor.getOption(59 /* lineHeight */);\n            let pad = Math.floor(lineHeight / 3);\n            if (this.state.widgetPosition.position !== null && this.state.widgetPosition.position.lineNumber < this.state.editorPosition.lineNumber) {\n                pad += lineHeight;\n            }\n            this._onClick.fire({\n                x: e.posx,\n                y: top + height + pad,\n                actions: this.state.actions,\n                trigger: this.state.trigger,\n            });\n        }));\n        this._register(dom.addDisposableListener(this._domNode, 'mouseenter', (e) => {\n            if ((e.buttons & 1) !== 1) {\n                return;\n            }\n            // mouse enters lightbulb while the primary/left button\n            // is being pressed -> hide the lightbulb and block future\n            // showings until mouse is released\n            this.hide();\n            const monitor = new GlobalMouseMoveMonitor();\n            monitor.startMonitoring(e.target, e.buttons, standardMouseMoveMerger, () => { }, () => {\n                monitor.dispose();\n            });\n        }));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            // hide when told to do so\n            if (e.hasChanged(57 /* lightbulb */) && !this._editor.getOption(57 /* lightbulb */).enabled) {\n                this.hide();\n            }\n        }));\n        this._updateLightBulbTitleAndIcon();\n        this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon, this));\n    }\n    dispose() {\n        super.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return 'LightBulbWidget';\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return this._state.type === 1 /* Showing */ ? this._state.widgetPosition : null;\n    }\n    update(actions, trigger, atPosition) {\n        if (actions.validActions.length <= 0) {\n            return this.hide();\n        }\n        const options = this._editor.getOptions();\n        if (!options.get(57 /* lightbulb */).enabled) {\n            return this.hide();\n        }\n        const model = this._editor.getModel();\n        if (!model) {\n            return this.hide();\n        }\n        const { lineNumber, column } = model.validatePosition(atPosition);\n        const tabSize = model.getOptions().tabSize;\n        const fontInfo = options.get(44 /* fontInfo */);\n        const lineContent = model.getLineContent(lineNumber);\n        const indent = computeIndentLevel(lineContent, tabSize);\n        const lineHasSpace = fontInfo.spaceWidth * indent > 22;\n        const isFolded = (lineNumber) => {\n            return lineNumber > 2 && this._editor.getTopForLineNumber(lineNumber) === this._editor.getTopForLineNumber(lineNumber - 1);\n        };\n        let effectiveLineNumber = lineNumber;\n        if (!lineHasSpace) {\n            if (lineNumber > 1 && !isFolded(lineNumber - 1)) {\n                effectiveLineNumber -= 1;\n            }\n            else if (!isFolded(lineNumber + 1)) {\n                effectiveLineNumber += 1;\n            }\n            else if (column * fontInfo.spaceWidth < 22) {\n                // cannot show lightbulb above/below and showing\n                // it inline would overlay the cursor...\n                return this.hide();\n            }\n        }\n        this.state = new LightBulbState.Showing(actions, trigger, atPosition, {\n            position: { lineNumber: effectiveLineNumber, column: 1 },\n            preference: LightBulbWidget._posPref\n        });\n        this._editor.layoutContentWidget(this);\n    }\n    hide() {\n        this.state = LightBulbState.Hidden;\n        this._editor.layoutContentWidget(this);\n    }\n    get state() { return this._state; }\n    set state(value) {\n        this._state = value;\n        this._updateLightBulbTitleAndIcon();\n    }\n    _updateLightBulbTitleAndIcon() {\n        if (this.state.type === 1 /* Showing */ && this.state.actions.hasAutoFix) {\n            // update icon\n            this._domNode.classList.remove(...Codicon.lightBulb.classNamesArray);\n            this._domNode.classList.add(...Codicon.lightbulbAutofix.classNamesArray);\n            const preferredKb = this._keybindingService.lookupKeybinding(this._preferredFixActionId);\n            if (preferredKb) {\n                this.title = nls.localize('preferredcodeActionWithKb', \"Show Code Actions. Preferred Quick Fix Available ({0})\", preferredKb.getLabel());\n                return;\n            }\n        }\n        // update icon\n        this._domNode.classList.remove(...Codicon.lightbulbAutofix.classNamesArray);\n        this._domNode.classList.add(...Codicon.lightBulb.classNamesArray);\n        const kb = this._keybindingService.lookupKeybinding(this._quickFixActionId);\n        if (kb) {\n            this.title = nls.localize('codeActionWithKb', \"Show Code Actions ({0})\", kb.getLabel());\n        }\n        else {\n            this.title = nls.localize('codeAction', \"Show Code Actions\");\n        }\n    }\n    set title(value) {\n        this._domNode.title = value;\n    }\n};\nLightBulbWidget._posPref = [0 /* EXACT */];\nLightBulbWidget = __decorate([\n    __param(3, IKeybindingService)\n], LightBulbWidget);\nexport { LightBulbWidget };\nregisterThemingParticipant((theme, collector) => {\n    var _a;\n    const editorBackgroundColor = (_a = theme.getColor(editorBackground)) === null || _a === void 0 ? void 0 : _a.transparent(0.7);\n    // Lightbulb Icon\n    const editorLightBulbForegroundColor = theme.getColor(editorLightBulbForeground);\n    if (editorLightBulbForegroundColor) {\n        collector.addRule(`\n\t\t.monaco-editor .contentWidgets ${Codicon.lightBulb.cssSelector} {\n\t\t\tcolor: ${editorLightBulbForegroundColor};\n\t\t\tbackground-color: ${editorBackgroundColor};\n\t\t}`);\n    }\n    // Lightbulb Auto Fix Icon\n    const editorLightBulbAutoFixForegroundColor = theme.getColor(editorLightBulbAutoFixForeground);\n    if (editorLightBulbAutoFixForegroundColor) {\n        collector.addRule(`\n\t\t.monaco-editor .contentWidgets ${Codicon.lightbulbAutofix.cssSelector} {\n\t\t\tcolor: ${editorLightBulbAutoFixForegroundColor};\n\t\t\tbackground-color: ${editorBackgroundColor};\n\t\t}`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _CodeActionModel_isDisposed;\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { isCancellationError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { Range } from '../../../common/core/range.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { getCodeActions } from './codeAction.js';\nexport const SUPPORTED_CODE_ACTIONS = new RawContextKey('supportedCodeAction', '');\nclass CodeActionOracle extends Disposable {\n    constructor(_editor, _markerService, _signalChange, _delay = 250) {\n        super();\n        this._editor = _editor;\n        this._markerService = _markerService;\n        this._signalChange = _signalChange;\n        this._delay = _delay;\n        this._autoTriggerTimer = this._register(new TimeoutTimer());\n        this._register(this._markerService.onMarkerChanged(e => this._onMarkerChanges(e)));\n        this._register(this._editor.onDidChangeCursorPosition(() => this._onCursorChange()));\n    }\n    trigger(trigger) {\n        const selection = this._getRangeOfSelectionUnlessWhitespaceEnclosed(trigger);\n        return this._createEventAndSignalChange(trigger, selection);\n    }\n    _onMarkerChanges(resources) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (resources.some(resource => isEqual(resource, model.uri))) {\n            this._autoTriggerTimer.cancelAndSet(() => {\n                this.trigger({ type: 2 /* Auto */ });\n            }, this._delay);\n        }\n    }\n    _onCursorChange() {\n        this._autoTriggerTimer.cancelAndSet(() => {\n            this.trigger({ type: 2 /* Auto */ });\n        }, this._delay);\n    }\n    _getRangeOfMarker(selection) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return undefined;\n        }\n        for (const marker of this._markerService.read({ resource: model.uri })) {\n            const markerRange = model.validateRange(marker);\n            if (Range.intersectRanges(markerRange, selection)) {\n                return Range.lift(markerRange);\n            }\n        }\n        return undefined;\n    }\n    _getRangeOfSelectionUnlessWhitespaceEnclosed(trigger) {\n        if (!this._editor.hasModel()) {\n            return undefined;\n        }\n        const model = this._editor.getModel();\n        const selection = this._editor.getSelection();\n        if (selection.isEmpty() && trigger.type === 2 /* Auto */) {\n            const { lineNumber, column } = selection.getPosition();\n            const line = model.getLineContent(lineNumber);\n            if (line.length === 0) {\n                // empty line\n                return undefined;\n            }\n            else if (column === 1) {\n                // look only right\n                if (/\\s/.test(line[0])) {\n                    return undefined;\n                }\n            }\n            else if (column === model.getLineMaxColumn(lineNumber)) {\n                // look only left\n                if (/\\s/.test(line[line.length - 1])) {\n                    return undefined;\n                }\n            }\n            else {\n                // look left and right\n                if (/\\s/.test(line[column - 2]) && /\\s/.test(line[column - 1])) {\n                    return undefined;\n                }\n            }\n        }\n        return selection;\n    }\n    _createEventAndSignalChange(trigger, selection) {\n        const model = this._editor.getModel();\n        if (!selection || !model) {\n            // cancel\n            this._signalChange(undefined);\n            return undefined;\n        }\n        const markerRange = this._getRangeOfMarker(selection);\n        const position = markerRange ? markerRange.getStartPosition() : selection.getStartPosition();\n        const e = {\n            trigger,\n            selection,\n            position\n        };\n        this._signalChange(e);\n        return e;\n    }\n}\nexport var CodeActionsState;\n(function (CodeActionsState) {\n    CodeActionsState.Empty = { type: 0 /* Empty */ };\n    class Triggered {\n        constructor(trigger, rangeOrSelection, position, _cancellablePromise) {\n            this.trigger = trigger;\n            this.rangeOrSelection = rangeOrSelection;\n            this.position = position;\n            this._cancellablePromise = _cancellablePromise;\n            this.type = 1 /* Triggered */;\n            this.actions = _cancellablePromise.catch((e) => {\n                if (isCancellationError(e)) {\n                    return emptyCodeActionSet;\n                }\n                throw e;\n            });\n        }\n        cancel() {\n            this._cancellablePromise.cancel();\n        }\n    }\n    CodeActionsState.Triggered = Triggered;\n})(CodeActionsState || (CodeActionsState = {}));\nconst emptyCodeActionSet = {\n    allActions: [],\n    validActions: [],\n    dispose: () => { },\n    documentation: [],\n    hasAutoFix: false\n};\nexport class CodeActionModel extends Disposable {\n    constructor(_editor, _registry, _markerService, contextKeyService, _progressService) {\n        super();\n        this._editor = _editor;\n        this._registry = _registry;\n        this._markerService = _markerService;\n        this._progressService = _progressService;\n        this._codeActionOracle = this._register(new MutableDisposable());\n        this._state = CodeActionsState.Empty;\n        this._onDidChangeState = this._register(new Emitter());\n        this.onDidChangeState = this._onDidChangeState.event;\n        _CodeActionModel_isDisposed.set(this, false);\n        this._supportedCodeActions = SUPPORTED_CODE_ACTIONS.bindTo(contextKeyService);\n        this._register(this._editor.onDidChangeModel(() => this._update()));\n        this._register(this._editor.onDidChangeModelLanguage(() => this._update()));\n        this._register(this._registry.onDidChange(() => this._update()));\n        this._update();\n    }\n    dispose() {\n        if (__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            return;\n        }\n        __classPrivateFieldSet(this, _CodeActionModel_isDisposed, true, \"f\");\n        super.dispose();\n        this.setState(CodeActionsState.Empty, true);\n    }\n    _update() {\n        if (__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            return;\n        }\n        this._codeActionOracle.value = undefined;\n        this.setState(CodeActionsState.Empty);\n        const model = this._editor.getModel();\n        if (model\n            && this._registry.has(model)\n            && !this._editor.getOption(81 /* readOnly */)) {\n            const supportedActions = [];\n            for (const provider of this._registry.all(model)) {\n                if (Array.isArray(provider.providedCodeActionKinds)) {\n                    supportedActions.push(...provider.providedCodeActionKinds);\n                }\n            }\n            this._supportedCodeActions.set(supportedActions.join(' '));\n            this._codeActionOracle.value = new CodeActionOracle(this._editor, this._markerService, trigger => {\n                var _a;\n                if (!trigger) {\n                    this.setState(CodeActionsState.Empty);\n                    return;\n                }\n                const actions = createCancelablePromise(token => getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token));\n                if (trigger.trigger.type === 1 /* Invoke */) {\n                    (_a = this._progressService) === null || _a === void 0 ? void 0 : _a.showWhile(actions, 250);\n                }\n                this.setState(new CodeActionsState.Triggered(trigger.trigger, trigger.selection, trigger.position, actions));\n            }, undefined);\n            this._codeActionOracle.value.trigger({ type: 2 /* Auto */ });\n        }\n        else {\n            this._supportedCodeActions.reset();\n        }\n    }\n    trigger(trigger) {\n        if (this._codeActionOracle.value) {\n            this._codeActionOracle.value.trigger(trigger);\n        }\n    }\n    setState(newState, skipNotify) {\n        if (newState === this._state) {\n            return;\n        }\n        // Cancel old request\n        if (this._state.type === 1 /* Triggered */) {\n            this._state.cancel();\n        }\n        this._state = newState;\n        if (!skipNotify && !__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            this._onDidChangeState.fire(newState);\n        }\n    }\n}\n_CodeActionModel_isDisposed = new WeakMap();\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createCancelablePromise, disposableTimeout, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { hash } from '../../../../base/common/hash.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { getCodeLensModel } from './codelens.js';\nimport { ICodeLensCache } from './codeLensCache.js';\nimport { CodeLensHelper, CodeLensWidget } from './codelensWidget.js';\nimport { localize } from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet CodeLensContribution = class CodeLensContribution {\n    constructor(_editor, _languageFeaturesService, debounceService, _commandService, _notificationService, _codeLensCache) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._commandService = _commandService;\n        this._notificationService = _notificationService;\n        this._codeLensCache = _codeLensCache;\n        this._disposables = new DisposableStore();\n        this._localToDispose = new DisposableStore();\n        this._lenses = [];\n        this._oldCodeLensModels = new DisposableStore();\n        this._provideCodeLensDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensProvide', { min: 250 });\n        this._resolveCodeLensesDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensResolve', { min: 250, salt: 'resolve' });\n        this._resolveCodeLensesScheduler = new RunOnceScheduler(() => this._resolveCodeLensesInViewport(), this._resolveCodeLensesDebounce.default());\n        this._disposables.add(this._editor.onDidChangeModel(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(44 /* fontInfo */) || e.hasChanged(16 /* codeLensFontSize */) || e.hasChanged(15 /* codeLensFontFamily */)) {\n                this._updateLensStyle();\n            }\n            if (e.hasChanged(14 /* codeLens */)) {\n                this._onModelChange();\n            }\n        }));\n        this._disposables.add(_languageFeaturesService.codeLensProvider.onDidChange(this._onModelChange, this));\n        this._onModelChange();\n        this._styleClassName = '_' + hash(this._editor.getId()).toString(16);\n        this._styleElement = dom.createStyleSheet(dom.isInShadowDOM(this._editor.getContainerDomNode())\n            ? this._editor.getContainerDomNode()\n            : undefined);\n        this._updateLensStyle();\n    }\n    dispose() {\n        var _a;\n        this._localDispose();\n        this._disposables.dispose();\n        this._oldCodeLensModels.dispose();\n        (_a = this._currentCodeLensModel) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._styleElement.remove();\n    }\n    _getLayoutInfo() {\n        let fontSize = this._editor.getOption(16 /* codeLensFontSize */);\n        let codeLensHeight;\n        if (!fontSize || fontSize < 5) {\n            fontSize = (this._editor.getOption(46 /* fontSize */) * .9) | 0;\n            codeLensHeight = this._editor.getOption(59 /* lineHeight */);\n        }\n        else {\n            codeLensHeight = (fontSize * Math.max(1.3, this._editor.getOption(59 /* lineHeight */) / this._editor.getOption(46 /* fontSize */))) | 0;\n        }\n        return { codeLensHeight, fontSize };\n    }\n    _updateLensStyle() {\n        const { codeLensHeight, fontSize } = this._getLayoutInfo();\n        const fontFamily = this._editor.getOption(15 /* codeLensFontFamily */);\n        const editorFontInfo = this._editor.getOption(44 /* fontInfo */);\n        const fontFamilyVar = `--codelens-font-family${this._styleClassName}`;\n        const fontFeaturesVar = `--codelens-font-features${this._styleClassName}`;\n        let newStyle = `\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${codeLensHeight}px; font-size: ${fontSize}px; padding-right: ${Math.round(fontSize * 0.5)}px; font-feature-settings: var(${fontFeaturesVar}) }\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${codeLensHeight}px; font-size: ${fontSize}px; }\n\t\t`;\n        if (fontFamily) {\n            newStyle += `.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${fontFamilyVar}), ${EDITOR_FONT_DEFAULTS.fontFamily}}`;\n        }\n        this._styleElement.textContent = newStyle;\n        this._editor.getContainerDomNode().style.setProperty(fontFamilyVar, fontFamily !== null && fontFamily !== void 0 ? fontFamily : 'inherit');\n        this._editor.getContainerDomNode().style.setProperty(fontFeaturesVar, editorFontInfo.fontFeatureSettings);\n        //\n        this._editor.changeViewZones(accessor => {\n            for (let lens of this._lenses) {\n                lens.updateHeight(codeLensHeight, accessor);\n            }\n        });\n    }\n    _localDispose() {\n        var _a, _b, _c;\n        (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._getCodeLensModelPromise = undefined;\n        (_b = this._resolveCodeLensesPromise) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        this._localToDispose.clear();\n        this._oldCodeLensModels.clear();\n        (_c = this._currentCodeLensModel) === null || _c === void 0 ? void 0 : _c.dispose();\n    }\n    _onModelChange() {\n        this._localDispose();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (!this._editor.getOption(14 /* codeLens */)) {\n            return;\n        }\n        const cachedLenses = this._codeLensCache.get(model);\n        if (cachedLenses) {\n            this._renderCodeLensSymbols(cachedLenses);\n        }\n        if (!this._languageFeaturesService.codeLensProvider.has(model)) {\n            // no provider -> return but check with\n            // cached lenses. they expire after 30 seconds\n            if (cachedLenses) {\n                this._localToDispose.add(disposableTimeout(() => {\n                    const cachedLensesNow = this._codeLensCache.get(model);\n                    if (cachedLenses === cachedLensesNow) {\n                        this._codeLensCache.delete(model);\n                        this._onModelChange();\n                    }\n                }, 30 * 1000));\n            }\n            return;\n        }\n        for (const provider of this._languageFeaturesService.codeLensProvider.all(model)) {\n            if (typeof provider.onDidChange === 'function') {\n                let registration = provider.onDidChange(() => scheduler.schedule());\n                this._localToDispose.add(registration);\n            }\n        }\n        const scheduler = new RunOnceScheduler(() => {\n            var _a;\n            const t1 = Date.now();\n            (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._getCodeLensModelPromise = createCancelablePromise(token => getCodeLensModel(this._languageFeaturesService.codeLensProvider, model, token));\n            this._getCodeLensModelPromise.then(result => {\n                if (this._currentCodeLensModel) {\n                    this._oldCodeLensModels.add(this._currentCodeLensModel);\n                }\n                this._currentCodeLensModel = result;\n                // cache model to reduce flicker\n                this._codeLensCache.put(model, result);\n                // update moving average\n                const newDelay = this._provideCodeLensDebounce.update(model, Date.now() - t1);\n                scheduler.delay = newDelay;\n                // render lenses\n                this._renderCodeLensSymbols(result);\n                // dom.scheduleAtNextAnimationFrame(() => this._resolveCodeLensesInViewport());\n                this._resolveCodeLensesInViewportSoon();\n            }, onUnexpectedError);\n        }, this._provideCodeLensDebounce.get(model));\n        this._localToDispose.add(scheduler);\n        this._localToDispose.add(toDisposable(() => this._resolveCodeLensesScheduler.cancel()));\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            this._editor.changeDecorations(decorationsAccessor => {\n                this._editor.changeViewZones(viewZonesAccessor => {\n                    let toDispose = [];\n                    let lastLensLineNumber = -1;\n                    this._lenses.forEach((lens) => {\n                        if (!lens.isValid() || lastLensLineNumber === lens.getLineNumber()) {\n                            // invalid -> lens collapsed, attach range doesn't exist anymore\n                            // line_number -> lenses should never be on the same line\n                            toDispose.push(lens);\n                        }\n                        else {\n                            lens.update(viewZonesAccessor);\n                            lastLensLineNumber = lens.getLineNumber();\n                        }\n                    });\n                    let helper = new CodeLensHelper();\n                    toDispose.forEach((l) => {\n                        l.dispose(helper, viewZonesAccessor);\n                        this._lenses.splice(this._lenses.indexOf(l), 1);\n                    });\n                    helper.commit(decorationsAccessor);\n                });\n            });\n            // Ask for all references again\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidFocusEditorWidget(() => {\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidScrollChange(e => {\n            if (e.scrollTopChanged && this._lenses.length > 0) {\n                this._resolveCodeLensesInViewportSoon();\n            }\n        }));\n        this._localToDispose.add(this._editor.onDidLayoutChange(() => {\n            this._resolveCodeLensesInViewportSoon();\n        }));\n        this._localToDispose.add(toDisposable(() => {\n            if (this._editor.getModel()) {\n                const scrollState = StableEditorScrollState.capture(this._editor);\n                this._editor.changeDecorations(decorationsAccessor => {\n                    this._editor.changeViewZones(viewZonesAccessor => {\n                        this._disposeAllLenses(decorationsAccessor, viewZonesAccessor);\n                    });\n                });\n                scrollState.restore(this._editor);\n            }\n            else {\n                // No accessors available\n                this._disposeAllLenses(undefined, undefined);\n            }\n        }));\n        this._localToDispose.add(this._editor.onMouseDown(e => {\n            if (e.target.type !== 9 /* CONTENT_WIDGET */) {\n                return;\n            }\n            let target = e.target.element;\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'SPAN') {\n                target = target.parentElement;\n            }\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'A') {\n                for (const lens of this._lenses) {\n                    let command = lens.getCommand(target);\n                    if (command) {\n                        this._commandService.executeCommand(command.id, ...(command.arguments || [])).catch(err => this._notificationService.error(err));\n                        break;\n                    }\n                }\n            }\n        }));\n        scheduler.schedule();\n    }\n    _disposeAllLenses(decChangeAccessor, viewZoneChangeAccessor) {\n        const helper = new CodeLensHelper();\n        for (const lens of this._lenses) {\n            lens.dispose(helper, viewZoneChangeAccessor);\n        }\n        if (decChangeAccessor) {\n            helper.commit(decChangeAccessor);\n        }\n        this._lenses.length = 0;\n    }\n    _renderCodeLensSymbols(symbols) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        let maxLineNumber = this._editor.getModel().getLineCount();\n        let groups = [];\n        let lastGroup;\n        for (let symbol of symbols.lenses) {\n            let line = symbol.symbol.range.startLineNumber;\n            if (line < 1 || line > maxLineNumber) {\n                // invalid code lens\n                continue;\n            }\n            else if (lastGroup && lastGroup[lastGroup.length - 1].symbol.range.startLineNumber === line) {\n                // on same line as previous\n                lastGroup.push(symbol);\n            }\n            else {\n                // on later line as previous\n                lastGroup = [symbol];\n                groups.push(lastGroup);\n            }\n        }\n        const scrollState = StableEditorScrollState.capture(this._editor);\n        const layoutInfo = this._getLayoutInfo();\n        this._editor.changeDecorations(decorationsAccessor => {\n            this._editor.changeViewZones(viewZoneAccessor => {\n                const helper = new CodeLensHelper();\n                let codeLensIndex = 0;\n                let groupsIndex = 0;\n                while (groupsIndex < groups.length && codeLensIndex < this._lenses.length) {\n                    let symbolsLineNumber = groups[groupsIndex][0].symbol.range.startLineNumber;\n                    let codeLensLineNumber = this._lenses[codeLensIndex].getLineNumber();\n                    if (codeLensLineNumber < symbolsLineNumber) {\n                        this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                        this._lenses.splice(codeLensIndex, 1);\n                    }\n                    else if (codeLensLineNumber === symbolsLineNumber) {\n                        this._lenses[codeLensIndex].updateCodeLensSymbols(groups[groupsIndex], helper);\n                        groupsIndex++;\n                        codeLensIndex++;\n                    }\n                    else {\n                        this._lenses.splice(codeLensIndex, 0, new CodeLensWidget(groups[groupsIndex], this._editor, this._styleClassName, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                        codeLensIndex++;\n                        groupsIndex++;\n                    }\n                }\n                // Delete extra code lenses\n                while (codeLensIndex < this._lenses.length) {\n                    this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                    this._lenses.splice(codeLensIndex, 1);\n                }\n                // Create extra symbols\n                while (groupsIndex < groups.length) {\n                    this._lenses.push(new CodeLensWidget(groups[groupsIndex], this._editor, this._styleClassName, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                    groupsIndex++;\n                }\n                helper.commit(decorationsAccessor);\n            });\n        });\n        scrollState.restore(this._editor);\n    }\n    _resolveCodeLensesInViewportSoon() {\n        const model = this._editor.getModel();\n        if (model) {\n            this._resolveCodeLensesScheduler.schedule();\n        }\n    }\n    _resolveCodeLensesInViewport() {\n        var _a;\n        (_a = this._resolveCodeLensesPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        const toResolve = [];\n        const lenses = [];\n        this._lenses.forEach((lens) => {\n            const request = lens.computeIfNecessary(model);\n            if (request) {\n                toResolve.push(request);\n                lenses.push(lens);\n            }\n        });\n        if (toResolve.length === 0) {\n            return;\n        }\n        const t1 = Date.now();\n        const resolvePromise = createCancelablePromise(token => {\n            const promises = toResolve.map((request, i) => {\n                const resolvedSymbols = new Array(request.length);\n                const promises = request.map((request, i) => {\n                    if (!request.symbol.command && typeof request.provider.resolveCodeLens === 'function') {\n                        return Promise.resolve(request.provider.resolveCodeLens(model, request.symbol, token)).then(symbol => {\n                            resolvedSymbols[i] = symbol;\n                        }, onUnexpectedExternalError);\n                    }\n                    else {\n                        resolvedSymbols[i] = request.symbol;\n                        return Promise.resolve(undefined);\n                    }\n                });\n                return Promise.all(promises).then(() => {\n                    if (!token.isCancellationRequested && !lenses[i].isDisposed()) {\n                        lenses[i].updateCommands(resolvedSymbols);\n                    }\n                });\n            });\n            return Promise.all(promises);\n        });\n        this._resolveCodeLensesPromise = resolvePromise;\n        this._resolveCodeLensesPromise.then(() => {\n            // update moving average\n            const newDelay = this._resolveCodeLensesDebounce.update(model, Date.now() - t1);\n            this._resolveCodeLensesScheduler.delay = newDelay;\n            if (this._currentCodeLensModel) { // update the cached state with new resolved items\n                this._codeLensCache.put(model, this._currentCodeLensModel);\n            }\n            this._oldCodeLensModels.clear(); // dispose old models once we have updated the UI with the current model\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        }, err => {\n            onUnexpectedError(err); // can also be cancellation!\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        });\n    }\n    getModel() {\n        return this._currentCodeLensModel;\n    }\n};\nCodeLensContribution.ID = 'css.editor.codeLens';\nCodeLensContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageFeatureDebounceService),\n    __param(3, ICommandService),\n    __param(4, INotificationService),\n    __param(5, ICodeLensCache)\n], CodeLensContribution);\nexport { CodeLensContribution };\nregisterEditorContribution(CodeLensContribution.ID, CodeLensContribution);\nregisterEditorAction(class ShowLensesInCurrentLine extends EditorAction {\n    constructor() {\n        super({\n            id: 'codelens.showLensesInCurrentLine',\n            precondition: EditorContextKeys.hasCodeLensProvider,\n            label: localize('showLensOnLine', \"Show CodeLens Commands For Current Line\"),\n            alias: 'Show CodeLens Commands For Current Line',\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const quickInputService = accessor.get(IQuickInputService);\n            const commandService = accessor.get(ICommandService);\n            const notificationService = accessor.get(INotificationService);\n            const lineNumber = editor.getSelection().positionLineNumber;\n            const codelensController = editor.getContribution(CodeLensContribution.ID);\n            if (!codelensController) {\n                return;\n            }\n            const model = codelensController.getModel();\n            if (!model) {\n                // nothing\n                return;\n            }\n            const items = [];\n            for (const lens of model.lenses) {\n                if (lens.symbol.command && lens.symbol.range.startLineNumber === lineNumber) {\n                    items.push({\n                        label: lens.symbol.command.title,\n                        command: lens.symbol.command\n                    });\n                }\n            }\n            if (items.length === 0) {\n                // We dont want an empty picker\n                return;\n            }\n            const item = yield quickInputService.pick(items, { canPickMany: false });\n            if (!item) {\n                // Nothing picked\n                return;\n            }\n            if (model.isDisposed) {\n                // retry whenever the model has been disposed\n                return yield commandService.executeCommand(this.id);\n            }\n            try {\n                yield commandService.executeCommand(item.command.id, ...(item.command.arguments || []));\n            }\n            catch (err) {\n                notificationService.error(err);\n            }\n        });\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class CodeLensModel {\n    constructor() {\n        this.lenses = [];\n        this._disposables = new DisposableStore();\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    get isDisposed() {\n        return this._disposables.isDisposed;\n    }\n    add(list, provider) {\n        this._disposables.add(list);\n        for (const symbol of list.lenses) {\n            this.lenses.push({ symbol, provider });\n        }\n    }\n}\nexport function getCodeLensModel(registry, model, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const provider = registry.ordered(model);\n        const providerRanks = new Map();\n        const result = new CodeLensModel();\n        const promises = provider.map((provider, i) => __awaiter(this, void 0, void 0, function* () {\n            providerRanks.set(provider, i);\n            try {\n                const list = yield Promise.resolve(provider.provideCodeLenses(model, token));\n                if (list) {\n                    result.add(list, provider);\n                }\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n            }\n        }));\n        yield Promise.all(promises);\n        result.lenses = result.lenses.sort((a, b) => {\n            // sort by lineNumber, provider-rank, and column\n            if (a.symbol.range.startLineNumber < b.symbol.range.startLineNumber) {\n                return -1;\n            }\n            else if (a.symbol.range.startLineNumber > b.symbol.range.startLineNumber) {\n                return 1;\n            }\n            else if ((providerRanks.get(a.provider)) < (providerRanks.get(b.provider))) {\n                return -1;\n            }\n            else if ((providerRanks.get(a.provider)) > (providerRanks.get(b.provider))) {\n                return 1;\n            }\n            else if (a.symbol.range.startColumn < b.symbol.range.startColumn) {\n                return -1;\n            }\n            else if (a.symbol.range.startColumn > b.symbol.range.startColumn) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        });\n        return result;\n    });\n}\nCommandsRegistry.registerCommand('_executeCodeLensProvider', function (accessor, ...args) {\n    let [uri, itemResolveCount] = args;\n    assertType(URI.isUri(uri));\n    assertType(typeof itemResolveCount === 'number' || !itemResolveCount);\n    const { codeLensProvider } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const result = [];\n    const disposables = new DisposableStore();\n    return getCodeLensModel(codeLensProvider, model, CancellationToken.None).then(value => {\n        disposables.add(value);\n        let resolve = [];\n        for (const item of value.lenses) {\n            if (itemResolveCount === undefined || itemResolveCount === null || Boolean(item.symbol.command)) {\n                result.push(item.symbol);\n            }\n            else if (itemResolveCount-- > 0 && item.provider.resolveCodeLens) {\n                resolve.push(Promise.resolve(item.provider.resolveCodeLens(model, item.symbol, CancellationToken.None)).then(symbol => result.push(symbol || item.symbol)));\n            }\n        }\n        return Promise.all(resolve);\n    }).then(() => {\n        return result;\n    }).finally(() => {\n        // make sure to return results, then (on next tick)\n        // dispose the results\n        setTimeout(() => disposables.dispose(), 100);\n    });\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { runWhenIdle } from '../../../../base/common/async.js';\nimport { once } from '../../../../base/common/functional.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CodeLensModel } from './codelens.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport const ICodeLensCache = createDecorator('ICodeLensCache');\nclass CacheItem {\n    constructor(lineCount, data) {\n        this.lineCount = lineCount;\n        this.data = data;\n    }\n}\nlet CodeLensCache = class CodeLensCache {\n    constructor(storageService) {\n        this._fakeProvider = new class {\n            provideCodeLenses() {\n                throw new Error('not supported');\n            }\n        };\n        this._cache = new LRUCache(20, 0.75);\n        // remove old data\n        const oldkey = 'codelens/cache';\n        runWhenIdle(() => storageService.remove(oldkey, 1 /* WORKSPACE */));\n        // restore lens data on start\n        const key = 'codelens/cache2';\n        const raw = storageService.get(key, 1 /* WORKSPACE */, '{}');\n        this._deserialize(raw);\n        // store lens data on shutdown\n        once(storageService.onWillSaveState)(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                storageService.store(key, this._serialize(), 1 /* WORKSPACE */, 1 /* MACHINE */);\n            }\n        });\n    }\n    put(model, data) {\n        // create a copy of the model that is without command-ids\n        // but with comand-labels\n        const copyItems = data.lenses.map(item => {\n            var _a;\n            return {\n                range: item.symbol.range,\n                command: item.symbol.command && { id: '', title: (_a = item.symbol.command) === null || _a === void 0 ? void 0 : _a.title },\n            };\n        });\n        const copyModel = new CodeLensModel();\n        copyModel.add({ lenses: copyItems, dispose: () => { } }, this._fakeProvider);\n        const item = new CacheItem(model.getLineCount(), copyModel);\n        this._cache.set(model.uri.toString(), item);\n    }\n    get(model) {\n        const item = this._cache.get(model.uri.toString());\n        return item && item.lineCount === model.getLineCount() ? item.data : undefined;\n    }\n    delete(model) {\n        this._cache.delete(model.uri.toString());\n    }\n    // --- persistence\n    _serialize() {\n        const data = Object.create(null);\n        for (const [key, value] of this._cache) {\n            const lines = new Set();\n            for (const d of value.data.lenses) {\n                lines.add(d.symbol.range.startLineNumber);\n            }\n            data[key] = {\n                lineCount: value.lineCount,\n                lines: [...lines.values()]\n            };\n        }\n        return JSON.stringify(data);\n    }\n    _deserialize(raw) {\n        try {\n            const data = JSON.parse(raw);\n            for (const key in data) {\n                const element = data[key];\n                const lenses = [];\n                for (const line of element.lines) {\n                    lenses.push({ range: new Range(line, 1, line, 11) });\n                }\n                const model = new CodeLensModel();\n                model.add({ lenses, dispose() { } }, this._fakeProvider);\n                this._cache.set(key, new CacheItem(element.lineCount, model));\n            }\n        }\n        catch (_a) {\n            // ignore...\n        }\n    }\n};\nCodeLensCache = __decorate([\n    __param(0, IStorageService)\n], CodeLensCache);\nexport { CodeLensCache };\nregisterSingleton(ICodeLensCache, CodeLensCache);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport './codelensWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nclass CodeLensViewZone {\n    constructor(afterLineNumber, heightInPx, onHeight) {\n        /**\n         * We want that this view zone, which reserves space for a code lens appears\n         * as close as possible to the next line, so we use a very large value here.\n         */\n        this.afterColumn = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\n        this.afterLineNumber = afterLineNumber;\n        this.heightInPx = heightInPx;\n        this._onHeight = onHeight;\n        this.suppressMouseDown = true;\n        this.domNode = document.createElement('div');\n    }\n    onComputedHeight(height) {\n        if (this._lastHeight === undefined) {\n            this._lastHeight = height;\n        }\n        else if (this._lastHeight !== height) {\n            this._lastHeight = height;\n            this._onHeight();\n        }\n    }\n    isVisible() {\n        return this._lastHeight !== 0\n            && this.domNode.hasAttribute('monaco-visible-view-zone');\n    }\n}\nclass CodeLensContentWidget {\n    constructor(editor, className, line) {\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = false;\n        this.suppressMouseDown = true;\n        this._commands = new Map();\n        this._isEmpty = true;\n        this._editor = editor;\n        this._id = `codelens.widget-${(CodeLensContentWidget._idPool++)}`;\n        this.updatePosition(line);\n        this._domNode = document.createElement('span');\n        this._domNode.className = `codelens-decoration ${className}`;\n    }\n    withCommands(lenses, animate) {\n        this._commands.clear();\n        let children = [];\n        let hasSymbol = false;\n        for (let i = 0; i < lenses.length; i++) {\n            const lens = lenses[i];\n            if (!lens) {\n                continue;\n            }\n            hasSymbol = true;\n            if (lens.command) {\n                const title = renderLabelWithIcons(lens.command.title.trim());\n                if (lens.command.id) {\n                    children.push(dom.$('a', { id: String(i), title: lens.command.tooltip }, ...title));\n                    this._commands.set(String(i), lens.command);\n                }\n                else {\n                    children.push(dom.$('span', { title: lens.command.tooltip }, ...title));\n                }\n                if (i + 1 < lenses.length) {\n                    children.push(dom.$('span', undefined, '\\u00a0|\\u00a0'));\n                }\n            }\n        }\n        if (!hasSymbol) {\n            // symbols but no commands\n            dom.reset(this._domNode, dom.$('span', undefined, 'no commands'));\n        }\n        else {\n            // symbols and commands\n            dom.reset(this._domNode, ...children);\n            if (this._isEmpty && animate) {\n                this._domNode.classList.add('fadein');\n            }\n            this._isEmpty = false;\n        }\n    }\n    getCommand(link) {\n        return link.parentElement === this._domNode\n            ? this._commands.get(link.id)\n            : undefined;\n    }\n    getId() {\n        return this._id;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    updatePosition(line) {\n        const column = this._editor.getModel().getLineFirstNonWhitespaceColumn(line);\n        this._widgetPosition = {\n            position: { lineNumber: line, column: column },\n            preference: [1 /* ABOVE */]\n        };\n    }\n    getPosition() {\n        return this._widgetPosition || null;\n    }\n}\nCodeLensContentWidget._idPool = 0;\nexport class CodeLensHelper {\n    constructor() {\n        this._removeDecorations = [];\n        this._addDecorations = [];\n        this._addDecorationsCallbacks = [];\n    }\n    addDecoration(decoration, callback) {\n        this._addDecorations.push(decoration);\n        this._addDecorationsCallbacks.push(callback);\n    }\n    removeDecoration(decorationId) {\n        this._removeDecorations.push(decorationId);\n    }\n    commit(changeAccessor) {\n        let resultingDecorations = changeAccessor.deltaDecorations(this._removeDecorations, this._addDecorations);\n        for (let i = 0, len = resultingDecorations.length; i < len; i++) {\n            this._addDecorationsCallbacks[i](resultingDecorations[i]);\n        }\n    }\n}\nexport class CodeLensWidget {\n    constructor(data, editor, className, helper, viewZoneChangeAccessor, heightInPx, updateCallback) {\n        this._isDisposed = false;\n        this._editor = editor;\n        this._className = className;\n        this._data = data;\n        // create combined range, track all ranges with decorations,\n        // check if there is already something to render\n        this._decorationIds = [];\n        let range;\n        let lenses = [];\n        this._data.forEach((codeLensData, i) => {\n            if (codeLensData.symbol.command) {\n                lenses.push(codeLensData.symbol);\n            }\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: ModelDecorationOptions.EMPTY\n            }, id => this._decorationIds[i] = id);\n            // the range contains all lenses on this line\n            if (!range) {\n                range = Range.lift(codeLensData.symbol.range);\n            }\n            else {\n                range = Range.plusRange(range, codeLensData.symbol.range);\n            }\n        });\n        this._viewZone = new CodeLensViewZone(range.startLineNumber - 1, heightInPx, updateCallback);\n        this._viewZoneId = viewZoneChangeAccessor.addZone(this._viewZone);\n        if (lenses.length > 0) {\n            this._createContentWidgetIfNecessary();\n            this._contentWidget.withCommands(lenses, false);\n        }\n    }\n    _createContentWidgetIfNecessary() {\n        if (!this._contentWidget) {\n            this._contentWidget = new CodeLensContentWidget(this._editor, this._className, this._viewZone.afterLineNumber + 1);\n            this._editor.addContentWidget(this._contentWidget);\n        }\n        else {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    dispose(helper, viewZoneChangeAccessor) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        if (viewZoneChangeAccessor) {\n            viewZoneChangeAccessor.removeZone(this._viewZoneId);\n        }\n        if (this._contentWidget) {\n            this._editor.removeContentWidget(this._contentWidget);\n            this._contentWidget = undefined;\n        }\n        this._isDisposed = true;\n    }\n    isDisposed() {\n        return this._isDisposed;\n    }\n    isValid() {\n        return this._decorationIds.some((id, i) => {\n            const range = this._editor.getModel().getDecorationRange(id);\n            const symbol = this._data[i].symbol;\n            return !!(range && Range.isEmpty(symbol.range) === range.isEmpty());\n        });\n    }\n    updateCodeLensSymbols(data, helper) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        this._data = data;\n        this._data.forEach((codeLensData, i) => {\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: ModelDecorationOptions.EMPTY\n            }, id => this._decorationIds[i] = id);\n        });\n    }\n    updateHeight(height, viewZoneChangeAccessor) {\n        this._viewZone.heightInPx = height;\n        viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    computeIfNecessary(model) {\n        if (!this._viewZone.isVisible()) {\n            return null;\n        }\n        // Read editor current state\n        for (let i = 0; i < this._decorationIds.length; i++) {\n            const range = model.getDecorationRange(this._decorationIds[i]);\n            if (range) {\n                this._data[i].symbol.range = range;\n            }\n        }\n        return this._data;\n    }\n    updateCommands(symbols) {\n        this._createContentWidgetIfNecessary();\n        this._contentWidget.withCommands(symbols, true);\n        for (let i = 0; i < this._data.length; i++) {\n            const resolved = symbols[i];\n            if (resolved) {\n                const { symbol } = this._data[i];\n                symbol.command = resolved.command || symbol.command;\n            }\n        }\n    }\n    getCommand(link) {\n        var _a;\n        return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.getCommand(link);\n    }\n    getLineNumber() {\n        const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n        if (range) {\n            return range.startLineNumber;\n        }\n        return -1;\n    }\n    update(viewZoneChangeAccessor) {\n        if (this.isValid()) {\n            const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n            if (range) {\n                this._viewZone.afterLineNumber = range.startLineNumber - 1;\n                viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n                if (this._contentWidget) {\n                    this._contentWidget.updatePosition(range.startLineNumber);\n                    this._editor.layoutContentWidget(this._contentWidget);\n                }\n            }\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ColorDecorationInjectedTextMarker } from './colorDetector.js';\nimport { ColorHoverParticipant } from './colorHoverParticipant.js';\nimport { ModesHoverController } from '../../hover/browser/hover.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nexport class ColorContribution extends Disposable {\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._register(_editor.onMouseDown((e) => this.onMouseDown(e)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    onMouseDown(mouseEvent) {\n        const target = mouseEvent.target;\n        if (target.type !== 6 /* CONTENT_TEXT */) {\n            return;\n        }\n        if (!target.detail.injectedText) {\n            return;\n        }\n        if (target.detail.injectedText.options.attachedData !== ColorDecorationInjectedTextMarker) {\n            return;\n        }\n        if (!target.range) {\n            return;\n        }\n        const hoverController = this._editor.getContribution(ModesHoverController.ID);\n        if (!hoverController) {\n            return;\n        }\n        if (!hoverController.isColorPickerVisible()) {\n            const range = new Range(target.range.startLineNumber, target.range.startColumn + 1, target.range.endLineNumber, target.range.endColumn + 1);\n            hoverController.showContentHover(range, 1 /* Immediate */, false);\n        }\n    }\n}\nColorContribution.ID = 'editor.contrib.colorContribution'; // ms\nregisterEditorContribution(ColorContribution.ID, ColorContribution);\nHoverParticipantRegistry.register(ColorHoverParticipant);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { RGBA } from '../../../../base/common/color.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { noBreakWhitespace } from '../../../../base/common/strings.js';\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { getColors } from './color.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport const ColorDecorationInjectedTextMarker = Object.create({});\nconst MAX_DECORATORS = 500;\nlet ColorDetector = class ColorDetector extends Disposable {\n    constructor(_editor, _configurationService, _languageFeaturesService, languageFeatureDebounceService) {\n        super();\n        this._editor = _editor;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._localToDispose = this._register(new DisposableStore());\n        this._decorationsIds = [];\n        this._colorDatas = new Map();\n        this._colorDecoratorIds = new Set();\n        this._ruleFactory = new DynamicCssRules(this._editor);\n        this._colorDecorationClassRefs = this._register(new DisposableStore());\n        this._debounceInformation = languageFeatureDebounceService.for(_languageFeaturesService.colorProvider, 'Document Colors', { min: ColorDetector.RECOMPUTE_TIME });\n        this._register(_editor.onDidChangeModel(() => {\n            this._isEnabled = this.isEnabled();\n            this.onModelChanged();\n        }));\n        this._register(_editor.onDidChangeModelLanguage(() => this.onModelChanged()));\n        this._register(_languageFeaturesService.colorProvider.onDidChange(() => this.onModelChanged()));\n        this._register(_editor.onDidChangeConfiguration(() => {\n            let prevIsEnabled = this._isEnabled;\n            this._isEnabled = this.isEnabled();\n            if (prevIsEnabled !== this._isEnabled) {\n                if (this._isEnabled) {\n                    this.onModelChanged();\n                }\n                else {\n                    this.removeAllDecorations();\n                }\n            }\n        }));\n        this._timeoutTimer = null;\n        this._computePromise = null;\n        this._isEnabled = this.isEnabled();\n        this.onModelChanged();\n    }\n    isEnabled() {\n        const model = this._editor.getModel();\n        if (!model) {\n            return false;\n        }\n        const languageId = model.getLanguageId();\n        // handle deprecated settings. [languageId].colorDecorators.enable\n        const deprecatedConfig = this._configurationService.getValue(languageId);\n        if (deprecatedConfig && typeof deprecatedConfig === 'object') {\n            const colorDecorators = deprecatedConfig['colorDecorators']; // deprecatedConfig.valueOf('.colorDecorators.enable');\n            if (colorDecorators && colorDecorators['enable'] !== undefined && !colorDecorators['enable']) {\n                return colorDecorators['enable'];\n            }\n        }\n        return this._editor.getOption(17 /* colorDecorators */);\n    }\n    static get(editor) {\n        return editor.getContribution(this.ID);\n    }\n    dispose() {\n        this.stop();\n        this.removeAllDecorations();\n        super.dispose();\n    }\n    onModelChanged() {\n        this.stop();\n        if (!this._isEnabled) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (!model || !this._languageFeaturesService.colorProvider.has(model)) {\n            return;\n        }\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            if (!this._timeoutTimer) {\n                this._timeoutTimer = new TimeoutTimer();\n                this._timeoutTimer.cancelAndSet(() => {\n                    this._timeoutTimer = null;\n                    this.beginCompute();\n                }, this._debounceInformation.get(model));\n            }\n        }));\n        this.beginCompute();\n    }\n    beginCompute() {\n        this._computePromise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n            const model = this._editor.getModel();\n            if (!model) {\n                return Promise.resolve([]);\n            }\n            const sw = new StopWatch(false);\n            const colors = yield getColors(this._languageFeaturesService.colorProvider, model, token);\n            this._debounceInformation.update(model, sw.elapsed());\n            return colors;\n        }));\n        this._computePromise.then((colorInfos) => {\n            this.updateDecorations(colorInfos);\n            this.updateColorDecorators(colorInfos);\n            this._computePromise = null;\n        }, onUnexpectedError);\n    }\n    stop() {\n        if (this._timeoutTimer) {\n            this._timeoutTimer.cancel();\n            this._timeoutTimer = null;\n        }\n        if (this._computePromise) {\n            this._computePromise.cancel();\n            this._computePromise = null;\n        }\n        this._localToDispose.clear();\n    }\n    updateDecorations(colorDatas) {\n        const decorations = colorDatas.map(c => ({\n            range: {\n                startLineNumber: c.colorInfo.range.startLineNumber,\n                startColumn: c.colorInfo.range.startColumn,\n                endLineNumber: c.colorInfo.range.endLineNumber,\n                endColumn: c.colorInfo.range.endColumn\n            },\n            options: ModelDecorationOptions.EMPTY\n        }));\n        this._decorationsIds = this._editor.deltaDecorations(this._decorationsIds, decorations);\n        this._colorDatas = new Map();\n        this._decorationsIds.forEach((id, i) => this._colorDatas.set(id, colorDatas[i]));\n    }\n    updateColorDecorators(colorData) {\n        this._colorDecorationClassRefs.clear();\n        let decorations = [];\n        for (let i = 0; i < colorData.length && decorations.length < MAX_DECORATORS; i++) {\n            const { red, green, blue, alpha } = colorData[i].colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            let color = `rgba(${rgba.r}, ${rgba.g}, ${rgba.b}, ${rgba.a})`;\n            const ref = this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({\n                backgroundColor: color\n            }));\n            decorations.push({\n                range: {\n                    startLineNumber: colorData[i].colorInfo.range.startLineNumber,\n                    startColumn: colorData[i].colorInfo.range.startColumn,\n                    endLineNumber: colorData[i].colorInfo.range.endLineNumber,\n                    endColumn: colorData[i].colorInfo.range.endColumn\n                },\n                options: {\n                    description: 'colorDetector',\n                    before: {\n                        content: noBreakWhitespace,\n                        inlineClassName: `${ref.className} colorpicker-color-decoration`,\n                        inlineClassNameAffectsLetterSpacing: true,\n                        attachedData: ColorDecorationInjectedTextMarker\n                    }\n                }\n            });\n        }\n        this._colorDecoratorIds = new Set(this._editor.deltaDecorations([...this._colorDecoratorIds], decorations));\n    }\n    removeAllDecorations() {\n        this._decorationsIds = this._editor.deltaDecorations(this._decorationsIds, []);\n        this._colorDecoratorIds = new Set(this._editor.deltaDecorations([...this._colorDecoratorIds], []));\n        this._colorDecorationClassRefs.clear();\n    }\n    getColorData(position) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return null;\n        }\n        const decorations = model\n            .getDecorationsInRange(Range.fromPositions(position, position))\n            .filter(d => this._colorDatas.has(d.id));\n        if (decorations.length === 0) {\n            return null;\n        }\n        return this._colorDatas.get(decorations[0].id);\n    }\n    isColorDecorationId(decorationId) {\n        return this._colorDecoratorIds.has(decorationId);\n    }\n};\nColorDetector.ID = 'editor.contrib.colorDetector';\nColorDetector.RECOMPUTE_TIME = 1000; // ms\nColorDetector = __decorate([\n    __param(1, IConfigurationService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, ILanguageFeatureDebounceService)\n], ColorDetector);\nexport { ColorDetector };\nregisterEditorContribution(ColorDetector.ID, ColorDetector);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport function getColors(registry, model, token) {\n    const colors = [];\n    const providers = registry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideDocumentColors(model, token)).then(result => {\n        if (Array.isArray(result)) {\n            for (let colorInfo of result) {\n                colors.push({ colorInfo, provider });\n            }\n        }\n    }));\n    return Promise.all(promises).then(() => colors);\n}\nexport function getColorPresentations(model, colorInfo, provider, token) {\n    return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\n}\nCommandsRegistry.registerCommand('_executeDocumentColorProvider', function (accessor, ...args) {\n    const [resource] = args;\n    if (!(resource instanceof URI)) {\n        throw illegalArgument();\n    }\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(resource);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const rawCIs = [];\n    const providers = colorProviderRegistry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideDocumentColors(model, CancellationToken.None)).then(result => {\n        if (Array.isArray(result)) {\n            for (let ci of result) {\n                rawCIs.push({ range: ci.range, color: [ci.color.red, ci.color.green, ci.color.blue, ci.color.alpha] });\n            }\n        }\n    }));\n    return Promise.all(promises).then(() => rawCIs);\n});\nCommandsRegistry.registerCommand('_executeColorPresentationProvider', function (accessor, ...args) {\n    const [color, context] = args;\n    const { uri, range } = context;\n    if (!(uri instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\n        throw illegalArgument();\n    }\n    const [red, green, blue, alpha] = color;\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const colorInfo = {\n        range,\n        color: { red, green, blue, alpha }\n    };\n    const presentations = [];\n    const providers = colorProviderRegistry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideColorPresentations(model, colorInfo, CancellationToken.None)).then(result => {\n        if (Array.isArray(result)) {\n            presentations.push(...result);\n        }\n    }));\n    return Promise.all(promises).then(() => presentations);\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getColorPresentations } from './color.js';\nimport { ColorDetector } from './colorDetector.js';\nimport { ColorPickerModel } from './colorPickerModel.js';\nimport { ColorPickerWidget } from './colorPickerWidget.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport class ColorHover {\n    constructor(owner, range, model, provider) {\n        this.owner = owner;\n        this.range = range;\n        this.model = model;\n        this.provider = provider;\n        /**\n         * Force the hover to always be rendered at this specific range,\n         * even in the case of multiple hover parts.\n         */\n        this.forceShowAtRange = true;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet ColorHoverParticipant = class ColorHoverParticipant {\n    constructor(_editor, _themeService) {\n        this._editor = _editor;\n        this._themeService = _themeService;\n        this.hoverOrdinal = 1;\n    }\n    computeSync(anchor, lineDecorations) {\n        return [];\n    }\n    computeAsync(anchor, lineDecorations, token) {\n        return AsyncIterableObject.fromPromise(this._computeAsync(anchor, lineDecorations, token));\n    }\n    _computeAsync(anchor, lineDecorations, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return [];\n            }\n            const colorDetector = ColorDetector.get(this._editor);\n            if (!colorDetector) {\n                return [];\n            }\n            for (const d of lineDecorations) {\n                if (!colorDetector.isColorDecorationId(d.id)) {\n                    continue;\n                }\n                const colorData = colorDetector.getColorData(d.range.getStartPosition());\n                if (colorData) {\n                    const colorHover = yield this._createColorHover(this._editor.getModel(), colorData.colorInfo, colorData.provider);\n                    return [colorHover];\n                }\n            }\n            return [];\n        });\n    }\n    _createColorHover(editorModel, colorInfo, provider) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const originalText = editorModel.getValueInRange(colorInfo.range);\n            const { red, green, blue, alpha } = colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            const color = new Color(rgba);\n            const colorPresentations = yield getColorPresentations(editorModel, colorInfo, provider, CancellationToken.None);\n            const model = new ColorPickerModel(color, [], 0);\n            model.colorPresentations = colorPresentations || [];\n            model.guessColorPresentation(color, originalText);\n            return new ColorHover(this, Range.lift(colorInfo.range), model, provider);\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        if (hoverParts.length === 0 || !this._editor.hasModel()) {\n            return Disposable.None;\n        }\n        const disposables = new DisposableStore();\n        const colorHover = hoverParts[0];\n        const editorModel = this._editor.getModel();\n        const model = colorHover.model;\n        const widget = disposables.add(new ColorPickerWidget(context.fragment, model, this._editor.getOption(129 /* pixelRatio */), this._themeService));\n        context.setColorPicker(widget);\n        let range = new Range(colorHover.range.startLineNumber, colorHover.range.startColumn, colorHover.range.endLineNumber, colorHover.range.endColumn);\n        const updateEditorModel = () => {\n            let textEdits;\n            let newRange;\n            if (model.presentation.textEdit) {\n                textEdits = [model.presentation.textEdit];\n                newRange = new Range(model.presentation.textEdit.range.startLineNumber, model.presentation.textEdit.range.startColumn, model.presentation.textEdit.range.endLineNumber, model.presentation.textEdit.range.endColumn);\n                const trackedRange = this._editor.getModel()._setTrackedRange(null, newRange, 3 /* GrowsOnlyWhenTypingAfter */);\n                this._editor.pushUndoStop();\n                this._editor.executeEdits('colorpicker', textEdits);\n                newRange = this._editor.getModel()._getTrackedRange(trackedRange) || newRange;\n            }\n            else {\n                textEdits = [{ range, text: model.presentation.label, forceMoveMarkers: false }];\n                newRange = range.setEndPosition(range.endLineNumber, range.startColumn + model.presentation.label.length);\n                this._editor.pushUndoStop();\n                this._editor.executeEdits('colorpicker', textEdits);\n            }\n            if (model.presentation.additionalTextEdits) {\n                textEdits = [...model.presentation.additionalTextEdits];\n                this._editor.executeEdits('colorpicker', textEdits);\n                context.hide();\n            }\n            this._editor.pushUndoStop();\n            range = newRange;\n        };\n        const updateColorPresentations = (color) => {\n            return getColorPresentations(editorModel, {\n                range: range,\n                color: {\n                    red: color.rgba.r / 255,\n                    green: color.rgba.g / 255,\n                    blue: color.rgba.b / 255,\n                    alpha: color.rgba.a\n                }\n            }, colorHover.provider, CancellationToken.None).then((colorPresentations) => {\n                model.colorPresentations = colorPresentations || [];\n            });\n        };\n        disposables.add(model.onColorFlushed((color) => {\n            updateColorPresentations(color).then(updateEditorModel);\n        }));\n        disposables.add(model.onDidChangeColor(updateColorPresentations));\n        return disposables;\n    }\n};\nColorHoverParticipant = __decorate([\n    __param(1, IThemeService)\n], ColorHoverParticipant);\nexport { ColorHoverParticipant };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nexport class ColorPickerModel {\n    constructor(color, availableColorPresentations, presentationIndex) {\n        this.presentationIndex = presentationIndex;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this._onDidChangeColor = new Emitter();\n        this.onDidChangeColor = this._onDidChangeColor.event;\n        this._onDidChangePresentation = new Emitter();\n        this.onDidChangePresentation = this._onDidChangePresentation.event;\n        this.originalColor = color;\n        this._color = color;\n        this._colorPresentations = availableColorPresentations;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(color) {\n        if (this._color.equals(color)) {\n            return;\n        }\n        this._color = color;\n        this._onDidChangeColor.fire(color);\n    }\n    get presentation() { return this.colorPresentations[this.presentationIndex]; }\n    get colorPresentations() {\n        return this._colorPresentations;\n    }\n    set colorPresentations(colorPresentations) {\n        this._colorPresentations = colorPresentations;\n        if (this.presentationIndex > colorPresentations.length - 1) {\n            this.presentationIndex = 0;\n        }\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    selectNextColorPresentation() {\n        this.presentationIndex = (this.presentationIndex + 1) % this.colorPresentations.length;\n        this.flushColor();\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    guessColorPresentation(color, originalText) {\n        for (let i = 0; i < this.colorPresentations.length; i++) {\n            if (originalText.toLowerCase() === this.colorPresentations[i].label) {\n                this.presentationIndex = i;\n                this._onDidChangePresentation.fire(this.presentation);\n                break;\n            }\n        }\n    }\n    flushColor() {\n        this._onColorFlushed.fire(this._color);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { PixelRatio } from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { GlobalMouseMoveMonitor, standardMouseMoveMerger } from '../../../../base/browser/globalMouseMoveMonitor.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Color, HSVA, RGBA } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './colorPicker.css';\nimport { localize } from '../../../../nls.js';\nimport { editorHoverBackground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nconst $ = dom.$;\nexport class ColorPickerHeader extends Disposable {\n    constructor(container, model, themeService) {\n        super();\n        this.model = model;\n        this.domNode = $('.colorpicker-header');\n        dom.append(container, this.domNode);\n        this.pickedColorNode = dom.append(this.domNode, $('.picked-color'));\n        const tooltip = localize('clickToToggleColorOptions', \"Click to toggle color options (rgb/hsl/hex)\");\n        this.pickedColorNode.setAttribute('title', tooltip);\n        const colorBox = dom.append(this.domNode, $('.original-color'));\n        colorBox.style.backgroundColor = Color.Format.CSS.format(this.model.originalColor) || '';\n        this.backgroundColor = themeService.getColorTheme().getColor(editorHoverBackground) || Color.white;\n        this._register(registerThemingParticipant((theme, collector) => {\n            this.backgroundColor = theme.getColor(editorHoverBackground) || Color.white;\n        }));\n        this._register(dom.addDisposableListener(this.pickedColorNode, dom.EventType.CLICK, () => this.model.selectNextColorPresentation()));\n        this._register(dom.addDisposableListener(colorBox, dom.EventType.CLICK, () => {\n            this.model.color = this.model.originalColor;\n            this.model.flushColor();\n        }));\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this._register(model.onDidChangePresentation(this.onDidChangePresentation, this));\n        this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(model.color) || '';\n        this.pickedColorNode.classList.toggle('light', model.color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : model.color.isLighter());\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(color) || '';\n        this.pickedColorNode.classList.toggle('light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\n        this.onDidChangePresentation();\n    }\n    onDidChangePresentation() {\n        this.pickedColorNode.textContent = this.model.presentation ? this.model.presentation.label : '';\n        this.pickedColorNode.prepend($('.codicon.codicon-color-mode'));\n    }\n}\nexport class ColorPickerBody extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this.domNode = $('.colorpicker-body');\n        dom.append(container, this.domNode);\n        this.saturationBox = new SaturationBox(this.domNode, this.model, this.pixelRatio);\n        this._register(this.saturationBox);\n        this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange, this));\n        this._register(this.saturationBox.onColorFlushed(this.flushColor, this));\n        this.opacityStrip = new OpacityStrip(this.domNode, this.model);\n        this._register(this.opacityStrip);\n        this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange, this));\n        this._register(this.opacityStrip.onColorFlushed(this.flushColor, this));\n        this.hueStrip = new HueStrip(this.domNode, this.model);\n        this._register(this.hueStrip);\n        this._register(this.hueStrip.onDidChange(this.onDidHueChange, this));\n        this._register(this.hueStrip.onColorFlushed(this.flushColor, this));\n    }\n    flushColor() {\n        this.model.flushColor();\n    }\n    onDidSaturationValueChange({ s, v }) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, s, v, hsva.a));\n    }\n    onDidOpacityChange(a) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, hsva.s, hsva.v, a));\n    }\n    onDidHueChange(value) {\n        const hsva = this.model.color.hsva;\n        const h = (1 - value) * 360;\n        this.model.color = new Color(new HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\n    }\n    layout() {\n        this.saturationBox.layout();\n        this.opacityStrip.layout();\n        this.hueStrip.layout();\n    }\n}\nclass SaturationBox extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this.domNode = $('.saturation-wrap');\n        dom.append(container, this.domNode);\n        // Create canvas, draw selected color\n        this.canvas = document.createElement('canvas');\n        this.canvas.className = 'saturation-box';\n        dom.append(this.domNode, this.canvas);\n        // Add selection circle\n        this.selection = $('.saturation-selection');\n        dom.append(this.domNode, this.selection);\n        this.layout();\n        this._register(dom.addDisposableGenericMouseDownListener(this.domNode, e => this.onMouseDown(e)));\n        this._register(this.model.onDidChangeColor(this.onDidChangeColor, this));\n        this.monitor = null;\n    }\n    onMouseDown(e) {\n        this.monitor = this._register(new GlobalMouseMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        if (e.target !== this.selection) {\n            this.onDidChangePosition(e.offsetX, e.offsetY);\n        }\n        this.monitor.startMonitoring(e.target, e.buttons, standardMouseMoveMerger, event => this.onDidChangePosition(event.posx - origin.left, event.posy - origin.top), () => null);\n        const mouseUpListener = dom.addDisposableGenericMouseUpListener(document, () => {\n            this._onColorFlushed.fire();\n            mouseUpListener.dispose();\n            if (this.monitor) {\n                this.monitor.stopMonitoring(true);\n                this.monitor = null;\n            }\n        }, true);\n    }\n    onDidChangePosition(left, top) {\n        const s = Math.max(0, Math.min(1, left / this.width));\n        const v = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.paintSelection(s, v);\n        this._onDidChange.fire({ s, v });\n    }\n    layout() {\n        this.width = this.domNode.offsetWidth;\n        this.height = this.domNode.offsetHeight;\n        this.canvas.width = this.width * this.pixelRatio;\n        this.canvas.height = this.height * this.pixelRatio;\n        this.paint();\n        const hsva = this.model.color.hsva;\n        this.paintSelection(hsva.s, hsva.v);\n    }\n    paint() {\n        const hsva = this.model.color.hsva;\n        const saturatedColor = new Color(new HSVA(hsva.h, 1, 1, 1));\n        const ctx = this.canvas.getContext('2d');\n        const whiteGradient = ctx.createLinearGradient(0, 0, this.canvas.width, 0);\n        whiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\n        whiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\n        whiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n        const blackGradient = ctx.createLinearGradient(0, 0, 0, this.canvas.height);\n        blackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\n        blackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\n        ctx.rect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.fillStyle = Color.Format.CSS.format(saturatedColor);\n        ctx.fill();\n        ctx.fillStyle = whiteGradient;\n        ctx.fill();\n        ctx.fillStyle = blackGradient;\n        ctx.fill();\n    }\n    paintSelection(s, v) {\n        this.selection.style.left = `${s * this.width}px`;\n        this.selection.style.top = `${this.height - v * this.height}px`;\n    }\n    onDidChangeColor() {\n        if (this.monitor && this.monitor.isMonitoring()) {\n            return;\n        }\n        this.paint();\n    }\n}\nclass Strip extends Disposable {\n    constructor(container, model) {\n        super();\n        this.model = model;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this.domNode = dom.append(container, $('.strip'));\n        this.overlay = dom.append(this.domNode, $('.overlay'));\n        this.slider = dom.append(this.domNode, $('.slider'));\n        this.slider.style.top = `0px`;\n        this._register(dom.addDisposableGenericMouseDownListener(this.domNode, e => this.onMouseDown(e)));\n        this.layout();\n    }\n    layout() {\n        this.height = this.domNode.offsetHeight - this.slider.offsetHeight;\n        const value = this.getValue(this.model.color);\n        this.updateSliderPosition(value);\n    }\n    onMouseDown(e) {\n        const monitor = this._register(new GlobalMouseMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        this.domNode.classList.add('grabbing');\n        if (e.target !== this.slider) {\n            this.onDidChangeTop(e.offsetY);\n        }\n        monitor.startMonitoring(e.target, e.buttons, standardMouseMoveMerger, event => this.onDidChangeTop(event.posy - origin.top), () => null);\n        const mouseUpListener = dom.addDisposableGenericMouseUpListener(document, () => {\n            this._onColorFlushed.fire();\n            mouseUpListener.dispose();\n            monitor.stopMonitoring(true);\n            this.domNode.classList.remove('grabbing');\n        }, true);\n    }\n    onDidChangeTop(top) {\n        const value = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.updateSliderPosition(value);\n        this._onDidChange.fire(value);\n    }\n    updateSliderPosition(value) {\n        this.slider.style.top = `${(1 - value) * this.height}px`;\n    }\n}\nclass OpacityStrip extends Strip {\n    constructor(container, model) {\n        super(container, model);\n        this.domNode.classList.add('opacity-strip');\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        const { r, g, b } = color.rgba;\n        const opaque = new Color(new RGBA(r, g, b, 1));\n        const transparent = new Color(new RGBA(r, g, b, 0));\n        this.overlay.style.background = `linear-gradient(to bottom, ${opaque} 0%, ${transparent} 100%)`;\n    }\n    getValue(color) {\n        return color.hsva.a;\n    }\n}\nclass HueStrip extends Strip {\n    constructor(container, model) {\n        super(container, model);\n        this.domNode.classList.add('hue-strip');\n    }\n    getValue(color) {\n        return 1 - (color.hsva.h / 360);\n    }\n}\nexport class ColorPickerWidget extends Widget {\n    constructor(container, model, pixelRatio, themeService) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._register(PixelRatio.onDidChange(() => this.layout()));\n        const element = $('.colorpicker-widget');\n        container.appendChild(element);\n        const header = new ColorPickerHeader(element, this.model, themeService);\n        this.body = new ColorPickerBody(element, this.model, this.pixelRatio);\n        this._register(header);\n        this._register(this.body);\n    }\n    layout() {\n        this.body.layout();\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { GotoDefinitionAtPositionEditorContribution } from '../../gotoSymbol/browser/link/goToDefinitionAtPosition.js';\nimport { ContentHoverWidget, ContentHoverController } from './contentHover.js';\nimport { MarginHoverWidget } from './marginHover.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground, editorHoverHighlight, editorHoverStatusBarBackground, textCodeBlockBackground, textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { HoverParticipantRegistry } from './hoverTypes.js';\nimport { MarkdownHoverParticipant } from './markdownHoverParticipant.js';\nimport { MarkerHoverParticipant } from './markerHoverParticipant.js';\nlet ModesHoverController = class ModesHoverController {\n    constructor(_editor, _instantiationService, _openerService, _languageService, _contextKeyService) {\n        this._editor = _editor;\n        this._instantiationService = _instantiationService;\n        this._openerService = _openerService;\n        this._languageService = _languageService;\n        this._toUnhook = new DisposableStore();\n        this._isMouseDown = false;\n        this._hoverClicked = false;\n        this._contentWidget = null;\n        this._glyphWidget = null;\n        this._hookEvents();\n        this._didChangeConfigurationHandler = this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(53 /* hover */)) {\n                this._unhookEvents();\n                this._hookEvents();\n            }\n        });\n    }\n    static get(editor) {\n        return editor.getContribution(ModesHoverController.ID);\n    }\n    _hookEvents() {\n        const hideWidgetsEventHandler = () => this._hideWidgets();\n        const hoverOpts = this._editor.getOption(53 /* hover */);\n        this._isHoverEnabled = hoverOpts.enabled;\n        this._isHoverSticky = hoverOpts.sticky;\n        if (this._isHoverEnabled) {\n            this._toUnhook.add(this._editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n            this._toUnhook.add(this._editor.onMouseUp((e) => this._onEditorMouseUp(e)));\n            this._toUnhook.add(this._editor.onMouseMove((e) => this._onEditorMouseMove(e)));\n            this._toUnhook.add(this._editor.onKeyDown((e) => this._onKeyDown(e)));\n        }\n        else {\n            this._toUnhook.add(this._editor.onMouseMove((e) => this._onEditorMouseMove(e)));\n            this._toUnhook.add(this._editor.onKeyDown((e) => this._onKeyDown(e)));\n        }\n        this._toUnhook.add(this._editor.onMouseLeave(hideWidgetsEventHandler));\n        this._toUnhook.add(this._editor.onDidChangeModel(hideWidgetsEventHandler));\n        this._toUnhook.add(this._editor.onDidScrollChange((e) => this._onEditorScrollChanged(e)));\n    }\n    _unhookEvents() {\n        this._toUnhook.clear();\n    }\n    _onEditorScrollChanged(e) {\n        if (e.scrollTopChanged || e.scrollLeftChanged) {\n            this._hideWidgets();\n        }\n    }\n    _onEditorMouseDown(mouseEvent) {\n        this._isMouseDown = true;\n        const target = mouseEvent.target;\n        if (target.type === 9 /* CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID) {\n            this._hoverClicked = true;\n            // mouse down on top of content hover widget\n            return;\n        }\n        if (target.type === 12 /* OVERLAY_WIDGET */ && target.detail === MarginHoverWidget.ID) {\n            // mouse down on top of overlay hover widget\n            return;\n        }\n        if (target.type !== 12 /* OVERLAY_WIDGET */) {\n            this._hoverClicked = false;\n        }\n        this._hideWidgets();\n    }\n    _onEditorMouseUp(mouseEvent) {\n        this._isMouseDown = false;\n    }\n    _onEditorMouseMove(mouseEvent) {\n        var _a, _b, _c, _d, _e;\n        const target = mouseEvent.target;\n        if (this._isMouseDown && this._hoverClicked) {\n            return;\n        }\n        if (this._isHoverSticky && target.type === 9 /* CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID) {\n            // mouse moved on top of content hover widget\n            return;\n        }\n        if (this._isHoverSticky && !((_b = (_a = mouseEvent.event.browserEvent.view) === null || _a === void 0 ? void 0 : _a.getSelection()) === null || _b === void 0 ? void 0 : _b.isCollapsed)) {\n            // selected text within content hover widget\n            return;\n        }\n        if (!this._isHoverSticky && target.type === 9 /* CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID\n            && ((_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.isColorPickerVisible())) {\n            // though the hover is not sticky, the color picker needs to.\n            return;\n        }\n        if (this._isHoverSticky && target.type === 12 /* OVERLAY_WIDGET */ && target.detail === MarginHoverWidget.ID) {\n            // mouse moved on top of overlay hover widget\n            return;\n        }\n        if (!this._isHoverEnabled) {\n            this._hideWidgets();\n            return;\n        }\n        const contentWidget = this._getOrCreateContentWidget();\n        if (contentWidget.maybeShowAt(mouseEvent)) {\n            (_d = this._glyphWidget) === null || _d === void 0 ? void 0 : _d.hide();\n            return;\n        }\n        if (target.type === 2 /* GUTTER_GLYPH_MARGIN */ && target.position) {\n            (_e = this._contentWidget) === null || _e === void 0 ? void 0 : _e.hide();\n            if (!this._glyphWidget) {\n                this._glyphWidget = new MarginHoverWidget(this._editor, this._languageService, this._openerService);\n            }\n            this._glyphWidget.startShowingAt(target.position.lineNumber);\n            return;\n        }\n        this._hideWidgets();\n    }\n    _onKeyDown(e) {\n        if (e.keyCode !== 5 /* Ctrl */ && e.keyCode !== 6 /* Alt */ && e.keyCode !== 57 /* Meta */ && e.keyCode !== 4 /* Shift */) {\n            // Do not hide hover when a modifier key is pressed\n            this._hideWidgets();\n        }\n    }\n    _hideWidgets() {\n        var _a, _b, _c;\n        if ((this._isMouseDown && this._hoverClicked && ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible()))) {\n            return;\n        }\n        this._hoverClicked = false;\n        (_b = this._glyphWidget) === null || _b === void 0 ? void 0 : _b.hide();\n        (_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.hide();\n    }\n    _getOrCreateContentWidget() {\n        if (!this._contentWidget) {\n            this._contentWidget = this._instantiationService.createInstance(ContentHoverController, this._editor);\n        }\n        return this._contentWidget;\n    }\n    isColorPickerVisible() {\n        var _a;\n        return ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible()) || false;\n    }\n    showContentHover(range, mode, focus) {\n        this._getOrCreateContentWidget().startShowingAtRange(range, mode, focus);\n    }\n    dispose() {\n        var _a, _b;\n        this._unhookEvents();\n        this._toUnhook.dispose();\n        this._didChangeConfigurationHandler.dispose();\n        (_a = this._glyphWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._contentWidget) === null || _b === void 0 ? void 0 : _b.dispose();\n    }\n};\nModesHoverController.ID = 'editor.contrib.hover';\nModesHoverController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IOpenerService),\n    __param(3, ILanguageService),\n    __param(4, IContextKeyService)\n], ModesHoverController);\nexport { ModesHoverController };\nclass ShowHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showHover',\n            label: nls.localize({\n                key: 'showHover',\n                comment: [\n                    'Label for action that will trigger the showing of a hover in the editor.',\n                    'This allows for users to show the hover without using the mouse.'\n                ]\n            }, \"Show Hover\"),\n            alias: 'Show Hover',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 39 /* KeyI */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        const position = editor.getPosition();\n        const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n        const focus = editor.getOption(2 /* accessibilitySupport */) === 2 /* Enabled */;\n        controller.showContentHover(range, 1 /* Immediate */, focus);\n    }\n}\nclass ShowDefinitionPreviewHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showDefinitionPreviewHover',\n            label: nls.localize({\n                key: 'showDefinitionPreviewHover',\n                comment: [\n                    'Label for action that will trigger the showing of definition preview hover in the editor.',\n                    'This allows for users to show the definition preview hover without using the mouse.'\n                ]\n            }, \"Show Definition Preview Hover\"),\n            alias: 'Show Definition Preview Hover',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        const position = editor.getPosition();\n        if (!position) {\n            return;\n        }\n        const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n        const goto = GotoDefinitionAtPositionEditorContribution.get(editor);\n        if (!goto) {\n            return;\n        }\n        const promise = goto.startFindDefinitionFromCursor(position);\n        promise.then(() => {\n            controller.showContentHover(range, 1 /* Immediate */, true);\n        });\n    }\n}\nregisterEditorContribution(ModesHoverController.ID, ModesHoverController);\nregisterEditorAction(ShowHoverAction);\nregisterEditorAction(ShowDefinitionPreviewHoverAction);\nHoverParticipantRegistry.register(MarkdownHoverParticipant);\nHoverParticipantRegistry.register(MarkerHoverParticipant);\n// theming\nregisterThemingParticipant((theme, collector) => {\n    const editorHoverHighlightColor = theme.getColor(editorHoverHighlight);\n    if (editorHoverHighlightColor) {\n        collector.addRule(`.monaco-editor .hoverHighlight { background-color: ${editorHoverHighlightColor}; }`);\n    }\n    const hoverBackground = theme.getColor(editorHoverBackground);\n    if (hoverBackground) {\n        collector.addRule(`.monaco-editor .monaco-hover { background-color: ${hoverBackground}; }`);\n    }\n    const hoverBorder = theme.getColor(editorHoverBorder);\n    if (hoverBorder) {\n        collector.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${hoverBorder}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${hoverBorder.transparent(0.5)}; }`);\n    }\n    const link = theme.getColor(textLinkForeground);\n    if (link) {\n        collector.addRule(`.monaco-editor .monaco-hover a { color: ${link}; }`);\n    }\n    const linkHover = theme.getColor(textLinkActiveForeground);\n    if (linkHover) {\n        collector.addRule(`.monaco-editor .monaco-hover a:hover { color: ${linkHover}; }`);\n    }\n    const hoverForeground = theme.getColor(editorHoverForeground);\n    if (hoverForeground) {\n        collector.addRule(`.monaco-editor .monaco-hover { color: ${hoverForeground}; }`);\n    }\n    const actionsBackground = theme.getColor(editorHoverStatusBarBackground);\n    if (actionsBackground) {\n        collector.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${actionsBackground}; }`);\n    }\n    const codeBackground = theme.getColor(textCodeBlockBackground);\n    if (codeBackground) {\n        collector.addRule(`.monaco-editor .monaco-hover code { background-color: ${codeBackground}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { withNullAsUndefined } from '../../../../../base/common/types.js';\nimport './goToDefinitionAtPosition.css';\nimport { EditorState } from '../../../editorState/browser/editorState.js';\nimport { registerEditorContribution } from '../../../../browser/editorExtensions.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from './clickLinkGesture.js';\nimport { PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { editorActiveLinkForeground } from '../../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../../platform/theme/common/themeService.js';\nimport { DefinitionAction } from '../goToCommands.js';\nimport { getDefinitionsAtPosition } from '../goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nlet GotoDefinitionAtPositionEditorContribution = class GotoDefinitionAtPositionEditorContribution {\n    constructor(editor, textModelResolverService, languageService, languageFeaturesService) {\n        this.textModelResolverService = textModelResolverService;\n        this.languageService = languageService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.toUnhook = new DisposableStore();\n        this.toUnhookForKeyboard = new DisposableStore();\n        this.linkDecorations = [];\n        this.currentWordAtPosition = null;\n        this.previousPromise = null;\n        this.editor = editor;\n        let linkGesture = new ClickLinkGesture(editor);\n        this.toUnhook.add(linkGesture);\n        this.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n            this.startFindDefinitionFromMouse(mouseEvent, withNullAsUndefined(keyboardEvent));\n        }));\n        this.toUnhook.add(linkGesture.onExecute((mouseEvent) => {\n            if (this.isEnabled(mouseEvent)) {\n                this.gotoDefinition(mouseEvent.target.position, mouseEvent.hasSideBySideModifier).then(() => {\n                    this.removeLinkDecorations();\n                }, (error) => {\n                    this.removeLinkDecorations();\n                    onUnexpectedError(error);\n                });\n            }\n        }));\n        this.toUnhook.add(linkGesture.onCancel(() => {\n            this.removeLinkDecorations();\n            this.currentWordAtPosition = null;\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(GotoDefinitionAtPositionEditorContribution.ID);\n    }\n    startFindDefinitionFromCursor(position) {\n        // For issue: https://github.com/microsoft/vscode/issues/46257\n        // equivalent to mouse move with meta/ctrl key\n        // First find the definition and add decorations\n        // to the editor to be shown with the content hover widget\n        return this.startFindDefinition(position).then(() => {\n            // Add listeners for editor cursor move and key down events\n            // Dismiss the \"extended\" editor decorations when the user hides\n            // the hover widget. There is no event for the widget itself so these\n            // serve as a best effort. After removing the link decorations, the hover\n            // widget is clean and will only show declarations per next request.\n            this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(() => {\n                this.currentWordAtPosition = null;\n                this.removeLinkDecorations();\n                this.toUnhookForKeyboard.clear();\n            }));\n            this.toUnhookForKeyboard.add(this.editor.onKeyDown((e) => {\n                if (e) {\n                    this.currentWordAtPosition = null;\n                    this.removeLinkDecorations();\n                    this.toUnhookForKeyboard.clear();\n                }\n            }));\n        });\n    }\n    startFindDefinitionFromMouse(mouseEvent, withKey) {\n        // check if we are active and on a content widget\n        if (mouseEvent.target.type === 9 /* CONTENT_WIDGET */ && this.linkDecorations.length > 0) {\n            return;\n        }\n        if (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            return;\n        }\n        const position = mouseEvent.target.position;\n        this.startFindDefinition(position);\n    }\n    startFindDefinition(position) {\n        var _a;\n        // Dispose listeners for updating decorations when using keyboard to show definition hover\n        this.toUnhookForKeyboard.clear();\n        // Find word at mouse position\n        const word = position ? (_a = this.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition(position) : null;\n        if (!word) {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            return Promise.resolve(0);\n        }\n        // Return early if word at position is still the same\n        if (this.currentWordAtPosition && this.currentWordAtPosition.startColumn === word.startColumn && this.currentWordAtPosition.endColumn === word.endColumn && this.currentWordAtPosition.word === word.word) {\n            return Promise.resolve(0);\n        }\n        this.currentWordAtPosition = word;\n        // Find definition and decorate word if found\n        let state = new EditorState(this.editor, 4 /* Position */ | 1 /* Value */ | 2 /* Selection */ | 8 /* Scroll */);\n        if (this.previousPromise) {\n            this.previousPromise.cancel();\n            this.previousPromise = null;\n        }\n        this.previousPromise = createCancelablePromise(token => this.findDefinition(position, token));\n        return this.previousPromise.then(results => {\n            if (!results || !results.length || !state.validate(this.editor)) {\n                this.removeLinkDecorations();\n                return;\n            }\n            // Multiple results\n            if (results.length > 1) {\n                this.addDecoration(new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn), new MarkdownString().appendText(nls.localize('multipleResults', \"Click to show {0} definitions.\", results.length)));\n            }\n            // Single result\n            else {\n                let result = results[0];\n                if (!result.uri) {\n                    return;\n                }\n                this.textModelResolverService.createModelReference(result.uri).then(ref => {\n                    if (!ref.object || !ref.object.textEditorModel) {\n                        ref.dispose();\n                        return;\n                    }\n                    const { object: { textEditorModel } } = ref;\n                    const { startLineNumber } = result.range;\n                    if (startLineNumber < 1 || startLineNumber > textEditorModel.getLineCount()) {\n                        // invalid range\n                        ref.dispose();\n                        return;\n                    }\n                    const previewValue = this.getPreviewValue(textEditorModel, startLineNumber, result);\n                    let wordRange;\n                    if (result.originSelectionRange) {\n                        wordRange = Range.lift(result.originSelectionRange);\n                    }\n                    else {\n                        wordRange = new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n                    }\n                    const languageId = this.languageService.guessLanguageIdByFilepathOrFirstLine(textEditorModel.uri);\n                    this.addDecoration(wordRange, new MarkdownString().appendCodeblock(languageId ? languageId : '', previewValue));\n                    ref.dispose();\n                });\n            }\n        }).then(undefined, onUnexpectedError);\n    }\n    getPreviewValue(textEditorModel, startLineNumber, result) {\n        let rangeToUse = result.targetSelectionRange ? result.range : this.getPreviewRangeBasedOnBrackets(textEditorModel, startLineNumber);\n        const numberOfLinesInRange = rangeToUse.endLineNumber - rangeToUse.startLineNumber;\n        if (numberOfLinesInRange >= GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES) {\n            rangeToUse = this.getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber);\n        }\n        const previewValue = this.stripIndentationFromPreviewRange(textEditorModel, startLineNumber, rangeToUse);\n        return previewValue;\n    }\n    stripIndentationFromPreviewRange(textEditorModel, startLineNumber, previewRange) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        let minIndent = startIndent;\n        for (let endLineNumber = startLineNumber + 1; endLineNumber < previewRange.endLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            minIndent = Math.min(minIndent, endIndent);\n        }\n        const previewValue = textEditorModel.getValueInRange(previewRange).replace(new RegExp(`^\\\\s{${minIndent - 1}}`, 'gm'), '').trim();\n        return previewValue;\n    }\n    getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        const maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES);\n        let endLineNumber = startLineNumber + 1;\n        for (; endLineNumber < maxLineNumber; endLineNumber++) {\n            let endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            if (startIndent === endIndent) {\n                break;\n            }\n        }\n        return new Range(startLineNumber, 1, endLineNumber + 1, 1);\n    }\n    getPreviewRangeBasedOnBrackets(textEditorModel, startLineNumber) {\n        const maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES);\n        const brackets = [];\n        let ignoreFirstEmpty = true;\n        let currentBracket = textEditorModel.bracketPairs.findNextBracket(new Position(startLineNumber, 1));\n        while (currentBracket !== null) {\n            if (brackets.length === 0) {\n                brackets.push(currentBracket);\n            }\n            else {\n                const lastBracket = brackets[brackets.length - 1];\n                if (lastBracket.open[0] === currentBracket.open[0] && lastBracket.isOpen && !currentBracket.isOpen) {\n                    brackets.pop();\n                }\n                else {\n                    brackets.push(currentBracket);\n                }\n                if (brackets.length === 0) {\n                    if (ignoreFirstEmpty) {\n                        ignoreFirstEmpty = false;\n                    }\n                    else {\n                        return new Range(startLineNumber, 1, currentBracket.range.endLineNumber + 1, 1);\n                    }\n                }\n            }\n            const maxColumn = textEditorModel.getLineMaxColumn(startLineNumber);\n            let nextLineNumber = currentBracket.range.endLineNumber;\n            let nextColumn = currentBracket.range.endColumn;\n            if (maxColumn === currentBracket.range.endColumn) {\n                nextLineNumber++;\n                nextColumn = 1;\n            }\n            if (nextLineNumber > maxLineNumber) {\n                return new Range(startLineNumber, 1, maxLineNumber + 1, 1);\n            }\n            currentBracket = textEditorModel.bracketPairs.findNextBracket(new Position(nextLineNumber, nextColumn));\n        }\n        return new Range(startLineNumber, 1, maxLineNumber + 1, 1);\n    }\n    addDecoration(range, hoverMessage) {\n        const newDecorations = {\n            range: range,\n            options: {\n                description: 'goto-definition-link',\n                inlineClassName: 'goto-definition-link',\n                hoverMessage\n            }\n        };\n        this.linkDecorations = this.editor.deltaDecorations(this.linkDecorations, [newDecorations]);\n    }\n    removeLinkDecorations() {\n        if (this.linkDecorations.length > 0) {\n            this.linkDecorations = this.editor.deltaDecorations(this.linkDecorations, []);\n        }\n    }\n    isEnabled(mouseEvent, withKey) {\n        return this.editor.hasModel() &&\n            mouseEvent.isNoneOrSingleMouseDown &&\n            (mouseEvent.target.type === 6 /* CONTENT_TEXT */) &&\n            (mouseEvent.hasTriggerModifier || (withKey ? withKey.keyCodeIsTriggerKey : false)) &&\n            this.languageFeaturesService.definitionProvider.has(this.editor.getModel());\n    }\n    findDefinition(position, token) {\n        const model = this.editor.getModel();\n        if (!model) {\n            return Promise.resolve(null);\n        }\n        return getDefinitionsAtPosition(this.languageFeaturesService.definitionProvider, model, position, token);\n    }\n    gotoDefinition(position, openToSide) {\n        this.editor.setPosition(position);\n        return this.editor.invokeWithinContext((accessor) => {\n            const canPeek = !openToSide && this.editor.getOption(78 /* definitionLinkOpensInPeek */) && !this.isInPeekEditor(accessor);\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { alias: '', label: '', id: '', precondition: undefined });\n            return action.run(accessor, this.editor);\n        });\n    }\n    isInPeekEditor(accessor) {\n        const contextKeyService = accessor.get(IContextKeyService);\n        return PeekContext.inPeekEditor.getValue(contextKeyService);\n    }\n    dispose() {\n        this.toUnhook.dispose();\n    }\n};\nGotoDefinitionAtPositionEditorContribution.ID = 'editor.contrib.gotodefinitionatposition';\nGotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES = 8;\nGotoDefinitionAtPositionEditorContribution = __decorate([\n    __param(1, ITextModelService),\n    __param(2, ILanguageService),\n    __param(3, ILanguageFeaturesService)\n], GotoDefinitionAtPositionEditorContribution);\nexport { GotoDefinitionAtPositionEditorContribution };\nregisterEditorContribution(GotoDefinitionAtPositionEditorContribution.ID, GotoDefinitionAtPositionEditorContribution);\nregisterThemingParticipant((theme, collector) => {\n    const activeLinkForeground = theme.getColor(editorActiveLinkForeground);\n    if (activeLinkForeground) {\n        collector.addRule(`.monaco-editor .goto-definition-link { color: ${activeLinkForeground} !important; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../../base/common/platform.js';\nfunction hasModifier(e, modifier) {\n    return !!e[modifier];\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\nexport class ClickLinkMouseEvent {\n    constructor(source, opts) {\n        this.target = source.target;\n        this.hasTriggerModifier = hasModifier(source.event, opts.triggerModifier);\n        this.hasSideBySideModifier = hasModifier(source.event, opts.triggerSideBySideModifier);\n        this.isNoneOrSingleMouseDown = (source.event.detail <= 1);\n    }\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\nexport class ClickLinkKeyboardEvent {\n    constructor(source, opts) {\n        this.keyCodeIsTriggerKey = (source.keyCode === opts.triggerKey);\n        this.keyCodeIsSideBySideKey = (source.keyCode === opts.triggerSideBySideKey);\n        this.hasTriggerModifier = hasModifier(source, opts.triggerModifier);\n    }\n}\nexport class ClickLinkOptions {\n    constructor(triggerKey, triggerModifier, triggerSideBySideKey, triggerSideBySideModifier) {\n        this.triggerKey = triggerKey;\n        this.triggerModifier = triggerModifier;\n        this.triggerSideBySideKey = triggerSideBySideKey;\n        this.triggerSideBySideModifier = triggerSideBySideModifier;\n    }\n    equals(other) {\n        return (this.triggerKey === other.triggerKey\n            && this.triggerModifier === other.triggerModifier\n            && this.triggerSideBySideKey === other.triggerSideBySideKey\n            && this.triggerSideBySideModifier === other.triggerSideBySideModifier);\n    }\n}\nfunction createOptions(multiCursorModifier) {\n    if (multiCursorModifier === 'altKey') {\n        if (platform.isMacintosh) {\n            return new ClickLinkOptions(57 /* Meta */, 'metaKey', 6 /* Alt */, 'altKey');\n        }\n        return new ClickLinkOptions(5 /* Ctrl */, 'ctrlKey', 6 /* Alt */, 'altKey');\n    }\n    if (platform.isMacintosh) {\n        return new ClickLinkOptions(6 /* Alt */, 'altKey', 57 /* Meta */, 'metaKey');\n    }\n    return new ClickLinkOptions(6 /* Alt */, 'altKey', 5 /* Ctrl */, 'ctrlKey');\n}\nexport class ClickLinkGesture extends Disposable {\n    constructor(editor) {\n        super();\n        this._onMouseMoveOrRelevantKeyDown = this._register(new Emitter());\n        this.onMouseMoveOrRelevantKeyDown = this._onMouseMoveOrRelevantKeyDown.event;\n        this._onExecute = this._register(new Emitter());\n        this.onExecute = this._onExecute.event;\n        this._onCancel = this._register(new Emitter());\n        this.onCancel = this._onCancel.event;\n        this._editor = editor;\n        this._opts = createOptions(this._editor.getOption(70 /* multiCursorModifier */));\n        this._lastMouseMoveEvent = null;\n        this._hasTriggerKeyOnMouseDown = false;\n        this._lineNumberOnMouseDown = 0;\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(70 /* multiCursorModifier */)) {\n                const newOpts = createOptions(this._editor.getOption(70 /* multiCursorModifier */));\n                if (this._opts.equals(newOpts)) {\n                    return;\n                }\n                this._opts = newOpts;\n                this._lastMouseMoveEvent = null;\n                this._hasTriggerKeyOnMouseDown = false;\n                this._lineNumberOnMouseDown = 0;\n                this._onCancel.fire();\n            }\n        }));\n        this._register(this._editor.onMouseMove((e) => this._onEditorMouseMove(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onMouseDown((e) => this._onEditorMouseDown(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onMouseUp((e) => this._onEditorMouseUp(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onKeyDown((e) => this._onEditorKeyDown(new ClickLinkKeyboardEvent(e, this._opts))));\n        this._register(this._editor.onKeyUp((e) => this._onEditorKeyUp(new ClickLinkKeyboardEvent(e, this._opts))));\n        this._register(this._editor.onMouseDrag(() => this._resetHandler()));\n        this._register(this._editor.onDidChangeCursorSelection((e) => this._onDidChangeCursorSelection(e)));\n        this._register(this._editor.onDidChangeModel((e) => this._resetHandler()));\n        this._register(this._editor.onDidChangeModelContent(() => this._resetHandler()));\n        this._register(this._editor.onDidScrollChange((e) => {\n            if (e.scrollTopChanged || e.scrollLeftChanged) {\n                this._resetHandler();\n            }\n        }));\n    }\n    _onDidChangeCursorSelection(e) {\n        if (e.selection && e.selection.startColumn !== e.selection.endColumn) {\n            this._resetHandler(); // immediately stop this feature if the user starts to select (https://github.com/microsoft/vscode/issues/7827)\n        }\n    }\n    _onEditorMouseMove(mouseEvent) {\n        this._lastMouseMoveEvent = mouseEvent;\n        this._onMouseMoveOrRelevantKeyDown.fire([mouseEvent, null]);\n    }\n    _onEditorMouseDown(mouseEvent) {\n        // We need to record if we had the trigger key on mouse down because someone might select something in the editor\n        // holding the mouse down and then while mouse is down start to press Ctrl/Cmd to start a copy operation and then\n        // release the mouse button without wanting to do the navigation.\n        // With this flag we prevent goto definition if the mouse was down before the trigger key was pressed.\n        this._hasTriggerKeyOnMouseDown = mouseEvent.hasTriggerModifier;\n        this._lineNumberOnMouseDown = mouseEvent.target.position ? mouseEvent.target.position.lineNumber : 0;\n    }\n    _onEditorMouseUp(mouseEvent) {\n        const currentLineNumber = mouseEvent.target.position ? mouseEvent.target.position.lineNumber : 0;\n        if (this._hasTriggerKeyOnMouseDown && this._lineNumberOnMouseDown && this._lineNumberOnMouseDown === currentLineNumber) {\n            this._onExecute.fire(mouseEvent);\n        }\n    }\n    _onEditorKeyDown(e) {\n        if (this._lastMouseMoveEvent\n            && (e.keyCodeIsTriggerKey // User just pressed Ctrl/Cmd (normal goto definition)\n                || (e.keyCodeIsSideBySideKey && e.hasTriggerModifier) // User pressed Ctrl/Cmd+Alt (goto definition to the side)\n            )) {\n            this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent, e]);\n        }\n        else if (e.hasTriggerModifier) {\n            this._onCancel.fire(); // remove decorations if user holds another key with ctrl/cmd to prevent accident goto declaration\n        }\n    }\n    _onEditorKeyUp(e) {\n        if (e.keyCodeIsTriggerKey) {\n            this._onCancel.fire();\n        }\n    }\n    _resetHandler() {\n        this._lastMouseMoveEvent = null;\n        this._hasTriggerKeyOnMouseDown = false;\n        this._onCancel.fire();\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport * as objects from '../../../../base/common/objects.js';\nimport './media/peekViewWidget.css';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { ZoneWidget } from '../../zoneWidget/browser/zoneWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { createActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator, IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { activeContrastBorder, contrastBorder, editorInfoForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nexport const IPeekViewService = createDecorator('IPeekViewService');\nregisterSingleton(IPeekViewService, class {\n    constructor() {\n        this._widgets = new Map();\n    }\n    addExclusiveWidget(editor, widget) {\n        const existing = this._widgets.get(editor);\n        if (existing) {\n            existing.listener.dispose();\n            existing.widget.dispose();\n        }\n        const remove = () => {\n            const data = this._widgets.get(editor);\n            if (data && data.widget === widget) {\n                data.listener.dispose();\n                this._widgets.delete(editor);\n            }\n        };\n        this._widgets.set(editor, { widget, listener: widget.onDidClose(remove) });\n    }\n});\nexport var PeekContext;\n(function (PeekContext) {\n    PeekContext.inPeekEditor = new RawContextKey('inReferenceSearchEditor', true, nls.localize('inReferenceSearchEditor', \"Whether the current code editor is embedded inside peek\"));\n    PeekContext.notInPeekEditor = PeekContext.inPeekEditor.toNegated();\n})(PeekContext || (PeekContext = {}));\nlet PeekContextController = class PeekContextController {\n    constructor(editor, contextKeyService) {\n        if (editor instanceof EmbeddedCodeEditorWidget) {\n            PeekContext.inPeekEditor.bindTo(contextKeyService);\n        }\n    }\n    dispose() { }\n};\nPeekContextController.ID = 'editor.contrib.referenceController';\nPeekContextController = __decorate([\n    __param(1, IContextKeyService)\n], PeekContextController);\nregisterEditorContribution(PeekContextController.ID, PeekContextController);\nexport function getOuterEditor(accessor) {\n    let editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (editor instanceof EmbeddedCodeEditorWidget) {\n        return editor.getParentEditor();\n    }\n    return editor;\n}\nconst defaultOptions = {\n    headerBackgroundColor: Color.white,\n    primaryHeadingColor: Color.fromHex('#333333'),\n    secondaryHeadingColor: Color.fromHex('#6c6c6cb3')\n};\nlet PeekViewWidget = class PeekViewWidget extends ZoneWidget {\n    constructor(editor, options, instantiationService) {\n        super(editor, options);\n        this.instantiationService = instantiationService;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        objects.mixin(this.options, defaultOptions, false);\n    }\n    dispose() {\n        if (!this.disposed) {\n            this.disposed = true; // prevent consumers who dispose on onDidClose from looping\n            super.dispose();\n            this._onDidClose.fire(this);\n        }\n    }\n    style(styles) {\n        let options = this.options;\n        if (styles.headerBackgroundColor) {\n            options.headerBackgroundColor = styles.headerBackgroundColor;\n        }\n        if (styles.primaryHeadingColor) {\n            options.primaryHeadingColor = styles.primaryHeadingColor;\n        }\n        if (styles.secondaryHeadingColor) {\n            options.secondaryHeadingColor = styles.secondaryHeadingColor;\n        }\n        super.style(styles);\n    }\n    _applyStyles() {\n        super._applyStyles();\n        let options = this.options;\n        if (this._headElement && options.headerBackgroundColor) {\n            this._headElement.style.backgroundColor = options.headerBackgroundColor.toString();\n        }\n        if (this._primaryHeading && options.primaryHeadingColor) {\n            this._primaryHeading.style.color = options.primaryHeadingColor.toString();\n        }\n        if (this._secondaryHeading && options.secondaryHeadingColor) {\n            this._secondaryHeading.style.color = options.secondaryHeadingColor.toString();\n        }\n        if (this._bodyElement && options.frameColor) {\n            this._bodyElement.style.borderColor = options.frameColor.toString();\n        }\n    }\n    _fillContainer(container) {\n        this.setCssClass('peekview-widget');\n        this._headElement = dom.$('.head');\n        this._bodyElement = dom.$('.body');\n        this._fillHead(this._headElement);\n        this._fillBody(this._bodyElement);\n        container.appendChild(this._headElement);\n        container.appendChild(this._bodyElement);\n    }\n    _fillHead(container, noCloseAction) {\n        const titleElement = dom.$('.peekview-title');\n        if (this.options.supportOnTitleClick) {\n            titleElement.classList.add('clickable');\n            dom.addStandardDisposableListener(titleElement, 'click', event => this._onTitleClick(event));\n        }\n        dom.append(this._headElement, titleElement);\n        this._fillTitleIcon(titleElement);\n        this._primaryHeading = dom.$('span.filename');\n        this._secondaryHeading = dom.$('span.dirname');\n        this._metaHeading = dom.$('span.meta');\n        dom.append(titleElement, this._primaryHeading, this._secondaryHeading, this._metaHeading);\n        const actionsContainer = dom.$('.peekview-actions');\n        dom.append(this._headElement, actionsContainer);\n        const actionBarOptions = this._getActionBarOptions();\n        this._actionbarWidget = new ActionBar(actionsContainer, actionBarOptions);\n        this._disposables.add(this._actionbarWidget);\n        if (!noCloseAction) {\n            this._actionbarWidget.push(new Action('peekview.close', nls.localize('label.close', \"Close\"), Codicon.close.classNames, true, () => {\n                this.dispose();\n                return Promise.resolve();\n            }), { label: false, icon: true });\n        }\n    }\n    _fillTitleIcon(container) {\n    }\n    _getActionBarOptions() {\n        return {\n            actionViewItemProvider: createActionViewItem.bind(undefined, this.instantiationService),\n            orientation: 0 /* HORIZONTAL */\n        };\n    }\n    _onTitleClick(event) {\n        // implement me if supportOnTitleClick option is set\n    }\n    setTitle(primaryHeading, secondaryHeading) {\n        if (this._primaryHeading && this._secondaryHeading) {\n            this._primaryHeading.innerText = primaryHeading;\n            this._primaryHeading.setAttribute('title', primaryHeading);\n            if (secondaryHeading) {\n                this._secondaryHeading.innerText = secondaryHeading;\n            }\n            else {\n                dom.clearNode(this._secondaryHeading);\n            }\n        }\n    }\n    setMetaTitle(value) {\n        if (this._metaHeading) {\n            if (value) {\n                this._metaHeading.innerText = value;\n                dom.show(this._metaHeading);\n            }\n            else {\n                dom.hide(this._metaHeading);\n            }\n        }\n    }\n    _doLayout(heightInPixel, widthInPixel) {\n        if (!this._isShowing && heightInPixel < 0) {\n            // Looks like the view zone got folded away!\n            this.dispose();\n            return;\n        }\n        const headHeight = Math.ceil(this.editor.getOption(59 /* lineHeight */) * 1.2);\n        const bodyHeight = Math.round(heightInPixel - (headHeight + 2 /* the border-top/bottom width*/));\n        this._doLayoutHead(headHeight, widthInPixel);\n        this._doLayoutBody(bodyHeight, widthInPixel);\n    }\n    _doLayoutHead(heightInPixel, widthInPixel) {\n        if (this._headElement) {\n            this._headElement.style.height = `${heightInPixel}px`;\n            this._headElement.style.lineHeight = this._headElement.style.height;\n        }\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        if (this._bodyElement) {\n            this._bodyElement.style.height = `${heightInPixel}px`;\n        }\n    }\n};\nPeekViewWidget = __decorate([\n    __param(2, IInstantiationService)\n], PeekViewWidget);\nexport { PeekViewWidget };\nexport const peekViewTitleBackground = registerColor('peekViewTitle.background', { dark: transparent(editorInfoForeground, .1), light: transparent(editorInfoForeground, .1), hc: null }, nls.localize('peekViewTitleBackground', 'Background color of the peek view title area.'));\nexport const peekViewTitleForeground = registerColor('peekViewTitleLabel.foreground', { dark: Color.white, light: Color.black, hc: Color.white }, nls.localize('peekViewTitleForeground', 'Color of the peek view title.'));\nexport const peekViewTitleInfoForeground = registerColor('peekViewTitleDescription.foreground', { dark: '#ccccccb3', light: '#616161', hc: '#FFFFFF99' }, nls.localize('peekViewTitleInfoForeground', 'Color of the peek view title info.'));\nexport const peekViewBorder = registerColor('peekView.border', { dark: editorInfoForeground, light: editorInfoForeground, hc: contrastBorder }, nls.localize('peekViewBorder', 'Color of the peek view borders and arrow.'));\nexport const peekViewResultsBackground = registerColor('peekViewResult.background', { dark: '#252526', light: '#F3F3F3', hc: Color.black }, nls.localize('peekViewResultsBackground', 'Background color of the peek view result list.'));\nexport const peekViewResultsMatchForeground = registerColor('peekViewResult.lineForeground', { dark: '#bbbbbb', light: '#646465', hc: Color.white }, nls.localize('peekViewResultsMatchForeground', 'Foreground color for line nodes in the peek view result list.'));\nexport const peekViewResultsFileForeground = registerColor('peekViewResult.fileForeground', { dark: Color.white, light: '#1E1E1E', hc: Color.white }, nls.localize('peekViewResultsFileForeground', 'Foreground color for file nodes in the peek view result list.'));\nexport const peekViewResultsSelectionBackground = registerColor('peekViewResult.selectionBackground', { dark: '#3399ff33', light: '#3399ff33', hc: null }, nls.localize('peekViewResultsSelectionBackground', 'Background color of the selected entry in the peek view result list.'));\nexport const peekViewResultsSelectionForeground = registerColor('peekViewResult.selectionForeground', { dark: Color.white, light: '#6C6C6C', hc: Color.white }, nls.localize('peekViewResultsSelectionForeground', 'Foreground color of the selected entry in the peek view result list.'));\nexport const peekViewEditorBackground = registerColor('peekViewEditor.background', { dark: '#001F33', light: '#F2F8FC', hc: Color.black }, nls.localize('peekViewEditorBackground', 'Background color of the peek view editor.'));\nexport const peekViewEditorGutterBackground = registerColor('peekViewEditorGutter.background', { dark: peekViewEditorBackground, light: peekViewEditorBackground, hc: peekViewEditorBackground }, nls.localize('peekViewEditorGutterBackground', 'Background color of the gutter in the peek view editor.'));\nexport const peekViewResultsMatchHighlight = registerColor('peekViewResult.matchHighlightBackground', { dark: '#ea5c004d', light: '#ea5c004d', hc: null }, nls.localize('peekViewResultsMatchHighlight', 'Match highlight color in the peek view result list.'));\nexport const peekViewEditorMatchHighlight = registerColor('peekViewEditor.matchHighlightBackground', { dark: '#ff8f0099', light: '#f5d802de', hc: null }, nls.localize('peekViewEditorMatchHighlight', 'Match highlight color in the peek view editor.'));\nexport const peekViewEditorMatchHighlightBorder = registerColor('peekViewEditor.matchHighlightBorder', { dark: null, light: null, hc: activeContrastBorder }, nls.localize('peekViewEditorMatchHighlightBorder', 'Match highlight border in the peek view editor.'));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as objects from '../../../base/common/objects.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { CodeEditorWidget } from './codeEditorWidget.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nlet EmbeddedCodeEditorWidget = class EmbeddedCodeEditorWidget extends CodeEditorWidget {\n    constructor(domElement, options, parentEditor, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n        super(domElement, Object.assign(Object.assign({}, parentEditor.getRawOptions()), { overflowWidgetsDomNode: parentEditor.getOverflowWidgetsDomNode() }), {}, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n        this._parentEditor = parentEditor;\n        this._overwriteOptions = options;\n        // Overwrite parent's options\n        super.updateOptions(this._overwriteOptions);\n        this._register(parentEditor.onDidChangeConfiguration((e) => this._onParentConfigurationChanged(e)));\n    }\n    getParentEditor() {\n        return this._parentEditor;\n    }\n    _onParentConfigurationChanged(e) {\n        super.updateOptions(this._parentEditor.getRawOptions());\n        super.updateOptions(this._overwriteOptions);\n    }\n    updateOptions(newOptions) {\n        objects.mixin(this._overwriteOptions, newOptions, true);\n        super.updateOptions(this._overwriteOptions);\n    }\n};\nEmbeddedCodeEditorWidget = __decorate([\n    __param(3, IInstantiationService),\n    __param(4, ICodeEditorService),\n    __param(5, ICommandService),\n    __param(6, IContextKeyService),\n    __param(7, IThemeService),\n    __param(8, INotificationService),\n    __param(9, IAccessibilityService),\n    __param(10, ILanguageConfigurationService),\n    __param(11, ILanguageFeaturesService)\n], EmbeddedCodeEditorWidget);\nexport { EmbeddedCodeEditorWidget };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { IdGenerator } from '../../../../base/common/idGenerator.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as objects from '../../../../base/common/objects.js';\nimport './zoneWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nconst defaultColor = new Color(new RGBA(0, 122, 204));\nconst defaultOptions = {\n    showArrow: true,\n    showFrame: true,\n    className: '',\n    frameColor: defaultColor,\n    arrowColor: defaultColor,\n    keepEditorSelection: false\n};\nconst WIDGET_ID = 'vs.editor.contrib.zoneWidget';\nexport class ViewZoneDelegate {\n    constructor(domNode, afterLineNumber, afterColumn, heightInLines, onDomNodeTop, onComputedHeight) {\n        this.id = ''; // A valid zone id should be greater than 0\n        this.domNode = domNode;\n        this.afterLineNumber = afterLineNumber;\n        this.afterColumn = afterColumn;\n        this.heightInLines = heightInLines;\n        this._onDomNodeTop = onDomNodeTop;\n        this._onComputedHeight = onComputedHeight;\n    }\n    onDomNodeTop(top) {\n        this._onDomNodeTop(top);\n    }\n    onComputedHeight(height) {\n        this._onComputedHeight(height);\n    }\n}\nexport class OverlayWidgetDelegate {\n    constructor(id, domNode) {\n        this._id = id;\n        this._domNode = domNode;\n    }\n    getId() {\n        return this._id;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return null;\n    }\n}\nclass Arrow {\n    constructor(_editor) {\n        this._editor = _editor;\n        this._ruleName = Arrow._IdGenerator.nextId();\n        this._decorations = [];\n        this._color = null;\n        this._height = -1;\n        //\n    }\n    dispose() {\n        this.hide();\n        dom.removeCSSRulesContainingSelector(this._ruleName);\n    }\n    set color(value) {\n        if (this._color !== value) {\n            this._color = value;\n            this._updateStyle();\n        }\n    }\n    set height(value) {\n        if (this._height !== value) {\n            this._height = value;\n            this._updateStyle();\n        }\n    }\n    _updateStyle() {\n        dom.removeCSSRulesContainingSelector(this._ruleName);\n        dom.createCSSRule(`.monaco-editor ${this._ruleName}`, `border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `);\n    }\n    show(where) {\n        if (where.column === 1) {\n            // the arrow isn't pretty at column 1 and we need to push it out a little\n            where = { lineNumber: where.lineNumber, column: 2 };\n        }\n        this._decorations = this._editor.deltaDecorations(this._decorations, [{ range: Range.fromPositions(where), options: { description: 'zone-widget-arrow', className: this._ruleName, stickiness: 1 /* NeverGrowsWhenTypingAtEdges */ } }]);\n    }\n    hide() {\n        this._editor.deltaDecorations(this._decorations, []);\n    }\n}\nArrow._IdGenerator = new IdGenerator('.arrow-decoration-');\nexport class ZoneWidget {\n    constructor(editor, options = {}) {\n        this._arrow = null;\n        this._overlayWidget = null;\n        this._resizeSash = null;\n        this._positionMarkerId = [];\n        this._viewZone = null;\n        this._disposables = new DisposableStore();\n        this.container = null;\n        this._isShowing = false;\n        this.editor = editor;\n        this.options = objects.deepClone(options);\n        objects.mixin(this.options, defaultOptions, false);\n        this.domNode = document.createElement('div');\n        if (!this.options.isAccessible) {\n            this.domNode.setAttribute('aria-hidden', 'true');\n            this.domNode.setAttribute('role', 'presentation');\n        }\n        this._disposables.add(this.editor.onDidLayoutChange((info) => {\n            const width = this._getWidth(info);\n            this.domNode.style.width = width + 'px';\n            this.domNode.style.left = this._getLeft(info) + 'px';\n            this._onWidth(width);\n        }));\n    }\n    dispose() {\n        if (this._overlayWidget) {\n            this.editor.removeOverlayWidget(this._overlayWidget);\n            this._overlayWidget = null;\n        }\n        if (this._viewZone) {\n            this.editor.changeViewZones(accessor => {\n                if (this._viewZone) {\n                    accessor.removeZone(this._viewZone.id);\n                }\n                this._viewZone = null;\n            });\n        }\n        this.editor.deltaDecorations(this._positionMarkerId, []);\n        this._positionMarkerId = [];\n        this._disposables.dispose();\n    }\n    create() {\n        this.domNode.classList.add('zone-widget');\n        if (this.options.className) {\n            this.domNode.classList.add(this.options.className);\n        }\n        this.container = document.createElement('div');\n        this.container.classList.add('zone-widget-container');\n        this.domNode.appendChild(this.container);\n        if (this.options.showArrow) {\n            this._arrow = new Arrow(this.editor);\n            this._disposables.add(this._arrow);\n        }\n        this._fillContainer(this.container);\n        this._initSash();\n        this._applyStyles();\n    }\n    style(styles) {\n        if (styles.frameColor) {\n            this.options.frameColor = styles.frameColor;\n        }\n        if (styles.arrowColor) {\n            this.options.arrowColor = styles.arrowColor;\n        }\n        this._applyStyles();\n    }\n    _applyStyles() {\n        if (this.container && this.options.frameColor) {\n            let frameColor = this.options.frameColor.toString();\n            this.container.style.borderTopColor = frameColor;\n            this.container.style.borderBottomColor = frameColor;\n        }\n        if (this._arrow && this.options.arrowColor) {\n            let arrowColor = this.options.arrowColor.toString();\n            this._arrow.color = arrowColor;\n        }\n    }\n    _getWidth(info) {\n        return info.width - info.minimap.minimapWidth - info.verticalScrollbarWidth;\n    }\n    _getLeft(info) {\n        // If minimap is to the left, we move beyond it\n        if (info.minimap.minimapWidth > 0 && info.minimap.minimapLeft === 0) {\n            return info.minimap.minimapWidth;\n        }\n        return 0;\n    }\n    _onViewZoneTop(top) {\n        this.domNode.style.top = top + 'px';\n    }\n    _onViewZoneHeight(height) {\n        this.domNode.style.height = `${height}px`;\n        if (this.container) {\n            let containerHeight = height - this._decoratingElementsHeight();\n            this.container.style.height = `${containerHeight}px`;\n            const layoutInfo = this.editor.getLayoutInfo();\n            this._doLayout(containerHeight, this._getWidth(layoutInfo));\n        }\n        if (this._resizeSash) {\n            this._resizeSash.layout();\n        }\n    }\n    get position() {\n        const [id] = this._positionMarkerId;\n        if (!id) {\n            return undefined;\n        }\n        const model = this.editor.getModel();\n        if (!model) {\n            return undefined;\n        }\n        const range = model.getDecorationRange(id);\n        if (!range) {\n            return undefined;\n        }\n        return range.getStartPosition();\n    }\n    show(rangeOrPos, heightInLines) {\n        const range = Range.isIRange(rangeOrPos) ? Range.lift(rangeOrPos) : Range.fromPositions(rangeOrPos);\n        this._isShowing = true;\n        this._showImpl(range, heightInLines);\n        this._isShowing = false;\n        this._positionMarkerId = this.editor.deltaDecorations(this._positionMarkerId, [{ range, options: ModelDecorationOptions.EMPTY }]);\n    }\n    hide() {\n        if (this._viewZone) {\n            this.editor.changeViewZones(accessor => {\n                if (this._viewZone) {\n                    accessor.removeZone(this._viewZone.id);\n                }\n            });\n            this._viewZone = null;\n        }\n        if (this._overlayWidget) {\n            this.editor.removeOverlayWidget(this._overlayWidget);\n            this._overlayWidget = null;\n        }\n        if (this._arrow) {\n            this._arrow.hide();\n        }\n    }\n    _decoratingElementsHeight() {\n        let lineHeight = this.editor.getOption(59 /* lineHeight */);\n        let result = 0;\n        if (this.options.showArrow) {\n            let arrowHeight = Math.round(lineHeight / 3);\n            result += 2 * arrowHeight;\n        }\n        if (this.options.showFrame) {\n            let frameThickness = Math.round(lineHeight / 9);\n            result += 2 * frameThickness;\n        }\n        return result;\n    }\n    _showImpl(where, heightInLines) {\n        const position = where.getStartPosition();\n        const layoutInfo = this.editor.getLayoutInfo();\n        const width = this._getWidth(layoutInfo);\n        this.domNode.style.width = `${width}px`;\n        this.domNode.style.left = this._getLeft(layoutInfo) + 'px';\n        // Render the widget as zone (rendering) and widget (lifecycle)\n        const viewZoneDomNode = document.createElement('div');\n        viewZoneDomNode.style.overflow = 'hidden';\n        const lineHeight = this.editor.getOption(59 /* lineHeight */);\n        // adjust heightInLines to viewport\n        const maxHeightInLines = Math.max(12, (this.editor.getLayoutInfo().height / lineHeight) * 0.8);\n        heightInLines = Math.min(heightInLines, maxHeightInLines);\n        let arrowHeight = 0;\n        let frameThickness = 0;\n        // Render the arrow one 1/3 of an editor line height\n        if (this._arrow && this.options.showArrow) {\n            arrowHeight = Math.round(lineHeight / 3);\n            this._arrow.height = arrowHeight;\n            this._arrow.show(position);\n        }\n        // Render the frame as 1/9 of an editor line height\n        if (this.options.showFrame) {\n            frameThickness = Math.round(lineHeight / 9);\n        }\n        // insert zone widget\n        this.editor.changeViewZones((accessor) => {\n            if (this._viewZone) {\n                accessor.removeZone(this._viewZone.id);\n            }\n            if (this._overlayWidget) {\n                this.editor.removeOverlayWidget(this._overlayWidget);\n                this._overlayWidget = null;\n            }\n            this.domNode.style.top = '-1000px';\n            this._viewZone = new ViewZoneDelegate(viewZoneDomNode, position.lineNumber, position.column, heightInLines, (top) => this._onViewZoneTop(top), (height) => this._onViewZoneHeight(height));\n            this._viewZone.id = accessor.addZone(this._viewZone);\n            this._overlayWidget = new OverlayWidgetDelegate(WIDGET_ID + this._viewZone.id, this.domNode);\n            this.editor.addOverlayWidget(this._overlayWidget);\n        });\n        if (this.container && this.options.showFrame) {\n            const width = this.options.frameWidth ? this.options.frameWidth : frameThickness;\n            this.container.style.borderTopWidth = width + 'px';\n            this.container.style.borderBottomWidth = width + 'px';\n        }\n        let containerHeight = heightInLines * lineHeight - this._decoratingElementsHeight();\n        if (this.container) {\n            this.container.style.top = arrowHeight + 'px';\n            this.container.style.height = containerHeight + 'px';\n            this.container.style.overflow = 'hidden';\n        }\n        this._doLayout(containerHeight, width);\n        if (!this.options.keepEditorSelection) {\n            this.editor.setSelection(where);\n        }\n        const model = this.editor.getModel();\n        if (model) {\n            const revealLine = where.endLineNumber + 1;\n            if (revealLine <= model.getLineCount()) {\n                // reveal line below the zone widget\n                this.revealLine(revealLine, false);\n            }\n            else {\n                // reveal last line atop\n                this.revealLine(model.getLineCount(), true);\n            }\n        }\n    }\n    revealLine(lineNumber, isLastLine) {\n        if (isLastLine) {\n            this.editor.revealLineInCenter(lineNumber, 0 /* Smooth */);\n        }\n        else {\n            this.editor.revealLine(lineNumber, 0 /* Smooth */);\n        }\n    }\n    setCssClass(className, classToReplace) {\n        if (!this.container) {\n            return;\n        }\n        if (classToReplace) {\n            this.container.classList.remove(classToReplace);\n        }\n        this.container.classList.add(className);\n    }\n    _onWidth(widthInPixel) {\n        // implement in subclass\n    }\n    _doLayout(heightInPixel, widthInPixel) {\n        // implement in subclass\n    }\n    _relayout(newHeightInLines) {\n        if (this._viewZone && this._viewZone.heightInLines !== newHeightInLines) {\n            this.editor.changeViewZones(accessor => {\n                if (this._viewZone) {\n                    this._viewZone.heightInLines = newHeightInLines;\n                    accessor.layoutZone(this._viewZone.id);\n                }\n            });\n        }\n    }\n    // --- sash\n    _initSash() {\n        if (this._resizeSash) {\n            return;\n        }\n        this._resizeSash = this._disposables.add(new Sash(this.domNode, this, { orientation: 1 /* HORIZONTAL */ }));\n        if (!this.options.isResizeable) {\n            this._resizeSash.state = 0 /* Disabled */;\n        }\n        let data;\n        this._disposables.add(this._resizeSash.onDidStart((e) => {\n            if (this._viewZone) {\n                data = {\n                    startY: e.startY,\n                    heightInLines: this._viewZone.heightInLines,\n                };\n            }\n        }));\n        this._disposables.add(this._resizeSash.onDidEnd(() => {\n            data = undefined;\n        }));\n        this._disposables.add(this._resizeSash.onDidChange((evt) => {\n            if (data) {\n                let lineDelta = (evt.currentY - data.startY) / this.editor.getOption(59 /* lineHeight */);\n                let roundedLineDelta = lineDelta < 0 ? Math.ceil(lineDelta) : Math.floor(lineDelta);\n                let newHeightInLines = data.heightInLines + roundedLineDelta;\n                if (newHeightInLines > 5 && newHeightInLines < 35) {\n                    this._relayout(newHeightInLines);\n                }\n            }\n        }));\n    }\n    getHorizontalSashLeft() {\n        return 0;\n    }\n    getHorizontalSashTop() {\n        return (this.domNode.style.height === null ? 0 : parseInt(this.domNode.style.height)) - (this._decoratingElementsHeight() / 2);\n    }\n    getHorizontalSashWidth() {\n        const layoutInfo = this.editor.getLayoutInfo();\n        return layoutInfo.width - layoutInfo.minimap.minimapWidth;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { $, addDisposableListener, append, asCSSUrl, EventType, ModifierKeyEmitter, prepend } from '../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { ActionViewItem, BaseActionViewItem } from '../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { DropdownMenuActionViewItem } from '../../../base/browser/ui/dropdown/dropdownActionViewItem.js';\nimport { ActionRunner, Separator, SubmenuAction } from '../../../base/common/actions.js';\nimport { UILabelProvider } from '../../../base/common/keybindingLabels.js';\nimport { DisposableStore, MutableDisposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { isLinux, isWindows, OS } from '../../../base/common/platform.js';\nimport './menuEntryActionViewItem.css';\nimport { localize } from '../../../nls.js';\nimport { IMenuService, MenuItemAction, SubmenuItemAction } from '../common/actions.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { INotificationService } from '../../notification/common/notification.js';\nimport { IStorageService } from '../../storage/common/storage.js';\nimport { ThemeIcon } from '../../theme/common/themeService.js';\nexport function createAndFillInActionBarActions(menu, options, target, primaryGroup, primaryMaxCount, shouldInlineSubmenu, useSeparatorsInPrimaryActions) {\n    const groups = menu.getActions(options);\n    const isPrimaryAction = typeof primaryGroup === 'string' ? (actionGroup) => actionGroup === primaryGroup : primaryGroup;\n    // Action bars handle alternative actions on their own so the alternative actions should be ignored\n    fillInActions(groups, target, false, isPrimaryAction, primaryMaxCount, shouldInlineSubmenu, useSeparatorsInPrimaryActions);\n    return asDisposable(groups);\n}\nfunction asDisposable(groups) {\n    const disposables = new DisposableStore();\n    for (const [, actions] of groups) {\n        for (const action of actions) {\n            disposables.add(action);\n        }\n    }\n    return disposables;\n}\nfunction fillInActions(groups, target, useAlternativeActions, isPrimaryAction = actionGroup => actionGroup === 'navigation', primaryMaxCount = Number.MAX_SAFE_INTEGER, shouldInlineSubmenu = () => false, useSeparatorsInPrimaryActions = false) {\n    let primaryBucket;\n    let secondaryBucket;\n    if (Array.isArray(target)) {\n        primaryBucket = target;\n        secondaryBucket = target;\n    }\n    else {\n        primaryBucket = target.primary;\n        secondaryBucket = target.secondary;\n    }\n    const submenuInfo = new Set();\n    for (const [group, actions] of groups) {\n        let target;\n        if (isPrimaryAction(group)) {\n            target = primaryBucket;\n            if (target.length > 0 && useSeparatorsInPrimaryActions) {\n                target.push(new Separator());\n            }\n        }\n        else {\n            target = secondaryBucket;\n            if (target.length > 0) {\n                target.push(new Separator());\n            }\n        }\n        for (let action of actions) {\n            if (useAlternativeActions) {\n                action = action instanceof MenuItemAction && action.alt ? action.alt : action;\n            }\n            const newLen = target.push(action);\n            // keep submenu info for later inlining\n            if (action instanceof SubmenuAction) {\n                submenuInfo.add({ group, action, index: newLen - 1 });\n            }\n        }\n    }\n    // ask the outside if submenu should be inlined or not. only ask when\n    // there would be enough space\n    for (const { group, action, index } of submenuInfo) {\n        const target = isPrimaryAction(group) ? primaryBucket : secondaryBucket;\n        // inlining submenus with length 0 or 1 is easy,\n        // larger submenus need to be checked with the overall limit\n        const submenuActions = action.actions;\n        if ((submenuActions.length <= 1 || target.length + submenuActions.length - 2 <= primaryMaxCount) && shouldInlineSubmenu(action, group, target.length)) {\n            target.splice(index, 1, ...submenuActions);\n        }\n    }\n    // overflow items from the primary group into the secondary bucket\n    if (primaryBucket !== secondaryBucket && primaryBucket.length > primaryMaxCount) {\n        const overflow = primaryBucket.splice(primaryMaxCount, primaryBucket.length - primaryMaxCount);\n        secondaryBucket.unshift(...overflow, new Separator());\n    }\n}\nlet MenuEntryActionViewItem = class MenuEntryActionViewItem extends ActionViewItem {\n    constructor(_action, options, _keybindingService, _notificationService, _contextKeyService) {\n        super(undefined, _action, { icon: !!(_action.class || _action.item.icon), label: !_action.class && !_action.item.icon, draggable: options === null || options === void 0 ? void 0 : options.draggable });\n        this._keybindingService = _keybindingService;\n        this._notificationService = _notificationService;\n        this._contextKeyService = _contextKeyService;\n        this._wantsAltCommand = false;\n        this._itemClassDispose = this._register(new MutableDisposable());\n        this._altKey = ModifierKeyEmitter.getInstance();\n    }\n    get _menuItemAction() {\n        return this._action;\n    }\n    get _commandAction() {\n        return this._wantsAltCommand && this._menuItemAction.alt || this._menuItemAction;\n    }\n    onClick(event) {\n        return __awaiter(this, void 0, void 0, function* () {\n            event.preventDefault();\n            event.stopPropagation();\n            try {\n                yield this.actionRunner.run(this._commandAction, this._context);\n            }\n            catch (err) {\n                this._notificationService.error(err);\n            }\n        });\n    }\n    render(container) {\n        super.render(container);\n        container.classList.add('menu-entry');\n        this._updateItemClass(this._menuItemAction.item);\n        let mouseOver = false;\n        let alternativeKeyDown = this._altKey.keyStatus.altKey || ((isWindows || isLinux) && this._altKey.keyStatus.shiftKey);\n        const updateAltState = () => {\n            const wantsAltCommand = mouseOver && alternativeKeyDown;\n            if (wantsAltCommand !== this._wantsAltCommand) {\n                this._wantsAltCommand = wantsAltCommand;\n                this.updateLabel();\n                this.updateTooltip();\n                this.updateClass();\n            }\n        };\n        if (this._menuItemAction.alt) {\n            this._register(this._altKey.event(value => {\n                alternativeKeyDown = value.altKey || ((isWindows || isLinux) && value.shiftKey);\n                updateAltState();\n            }));\n        }\n        this._register(addDisposableListener(container, 'mouseleave', _ => {\n            mouseOver = false;\n            updateAltState();\n        }));\n        this._register(addDisposableListener(container, 'mouseenter', _ => {\n            mouseOver = true;\n            updateAltState();\n        }));\n    }\n    updateLabel() {\n        if (this.options.label && this.label) {\n            this.label.textContent = this._commandAction.label;\n        }\n    }\n    updateTooltip() {\n        if (this.label) {\n            const keybinding = this._keybindingService.lookupKeybinding(this._commandAction.id, this._contextKeyService);\n            const keybindingLabel = keybinding && keybinding.getLabel();\n            const tooltip = this._commandAction.tooltip || this._commandAction.label;\n            let title = keybindingLabel\n                ? localize('titleAndKb', \"{0} ({1})\", tooltip, keybindingLabel)\n                : tooltip;\n            if (!this._wantsAltCommand && this._menuItemAction.alt) {\n                const altTooltip = this._menuItemAction.alt.tooltip || this._menuItemAction.alt.label;\n                const altKeybinding = this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id, this._contextKeyService);\n                const altKeybindingLabel = altKeybinding && altKeybinding.getLabel();\n                const altTitleSection = altKeybindingLabel\n                    ? localize('titleAndKb', \"{0} ({1})\", altTooltip, altKeybindingLabel)\n                    : altTooltip;\n                title += `\\n[${UILabelProvider.modifierLabels[OS].altKey}] ${altTitleSection}`;\n            }\n            this.label.title = title;\n        }\n    }\n    updateClass() {\n        if (this.options.icon) {\n            if (this._commandAction !== this._menuItemAction) {\n                if (this._menuItemAction.alt) {\n                    this._updateItemClass(this._menuItemAction.alt.item);\n                }\n            }\n            else if (this._menuItemAction.alt) {\n                this._updateItemClass(this._menuItemAction.item);\n            }\n        }\n    }\n    _updateItemClass(item) {\n        var _a;\n        this._itemClassDispose.value = undefined;\n        const { element, label } = this;\n        if (!element || !label) {\n            return;\n        }\n        const icon = this._commandAction.checked && ((_a = item.toggled) === null || _a === void 0 ? void 0 : _a.icon) ? item.toggled.icon : item.icon;\n        if (!icon) {\n            return;\n        }\n        if (ThemeIcon.isThemeIcon(icon)) {\n            // theme icons\n            const iconClasses = ThemeIcon.asClassNameArray(icon);\n            label.classList.add(...iconClasses);\n            this._itemClassDispose.value = toDisposable(() => {\n                label.classList.remove(...iconClasses);\n            });\n        }\n        else {\n            // icon path/url\n            if (icon.light) {\n                label.style.setProperty('--menu-entry-icon-light', asCSSUrl(icon.light));\n            }\n            if (icon.dark) {\n                label.style.setProperty('--menu-entry-icon-dark', asCSSUrl(icon.dark));\n            }\n            label.classList.add('icon');\n            this._itemClassDispose.value = toDisposable(() => {\n                label.classList.remove('icon');\n                label.style.removeProperty('--menu-entry-icon-light');\n                label.style.removeProperty('--menu-entry-icon-dark');\n            });\n        }\n    }\n};\nMenuEntryActionViewItem = __decorate([\n    __param(2, IKeybindingService),\n    __param(3, INotificationService),\n    __param(4, IContextKeyService)\n], MenuEntryActionViewItem);\nexport { MenuEntryActionViewItem };\nlet SubmenuEntryActionViewItem = class SubmenuEntryActionViewItem extends DropdownMenuActionViewItem {\n    constructor(action, options, contextMenuService) {\n        var _a, _b;\n        const dropdownOptions = Object.assign({}, options !== null && options !== void 0 ? options : Object.create(null), {\n            menuAsChild: (_a = options === null || options === void 0 ? void 0 : options.menuAsChild) !== null && _a !== void 0 ? _a : false,\n            classNames: (_b = options === null || options === void 0 ? void 0 : options.classNames) !== null && _b !== void 0 ? _b : (ThemeIcon.isThemeIcon(action.item.icon) ? ThemeIcon.asClassName(action.item.icon) : undefined),\n        });\n        super(action, { getActions: () => action.actions }, contextMenuService, dropdownOptions);\n    }\n    render(container) {\n        super.render(container);\n        if (this.element) {\n            container.classList.add('menu-entry');\n            const { icon } = this._action.item;\n            if (icon && !ThemeIcon.isThemeIcon(icon)) {\n                this.element.classList.add('icon');\n                if (icon.light) {\n                    this.element.style.setProperty('--menu-entry-icon-light', asCSSUrl(icon.light));\n                }\n                if (icon.dark) {\n                    this.element.style.setProperty('--menu-entry-icon-dark', asCSSUrl(icon.dark));\n                }\n            }\n        }\n    }\n};\nSubmenuEntryActionViewItem = __decorate([\n    __param(2, IContextMenuService)\n], SubmenuEntryActionViewItem);\nexport { SubmenuEntryActionViewItem };\nlet DropdownWithDefaultActionViewItem = class DropdownWithDefaultActionViewItem extends BaseActionViewItem {\n    constructor(submenuAction, options, _keybindingService, _notificationService, _contextMenuService, _menuService, _instaService, _storageService) {\n        var _a, _b, _c;\n        super(null, submenuAction);\n        this._keybindingService = _keybindingService;\n        this._notificationService = _notificationService;\n        this._contextMenuService = _contextMenuService;\n        this._menuService = _menuService;\n        this._instaService = _instaService;\n        this._storageService = _storageService;\n        this._container = null;\n        this._storageKey = `${submenuAction.item.submenu._debugName}_lastActionId`;\n        // determine default action\n        let defaultAction;\n        let defaultActionId = _storageService.get(this._storageKey, 1 /* WORKSPACE */);\n        if (defaultActionId) {\n            defaultAction = submenuAction.actions.find(a => defaultActionId === a.id);\n        }\n        if (!defaultAction) {\n            defaultAction = submenuAction.actions[0];\n        }\n        this._defaultAction = this._instaService.createInstance(MenuEntryActionViewItem, defaultAction, undefined);\n        const dropdownOptions = Object.assign({}, options !== null && options !== void 0 ? options : Object.create(null), {\n            menuAsChild: (_a = options === null || options === void 0 ? void 0 : options.menuAsChild) !== null && _a !== void 0 ? _a : true,\n            classNames: (_b = options === null || options === void 0 ? void 0 : options.classNames) !== null && _b !== void 0 ? _b : ['codicon', 'codicon-chevron-down'],\n            actionRunner: (_c = options === null || options === void 0 ? void 0 : options.actionRunner) !== null && _c !== void 0 ? _c : new ActionRunner()\n        });\n        this._dropdown = new DropdownMenuActionViewItem(submenuAction, submenuAction.actions, this._contextMenuService, dropdownOptions);\n        this._dropdown.actionRunner.onDidRun((e) => {\n            if (e.action instanceof MenuItemAction) {\n                this.update(e.action);\n            }\n        });\n    }\n    update(lastAction) {\n        this._storageService.store(this._storageKey, lastAction.id, 1 /* WORKSPACE */, 0 /* USER */);\n        this._defaultAction.dispose();\n        this._defaultAction = this._instaService.createInstance(MenuEntryActionViewItem, lastAction, undefined);\n        this._defaultAction.actionRunner = new class extends ActionRunner {\n            runAction(action, context) {\n                return __awaiter(this, void 0, void 0, function* () {\n                    yield action.run(undefined);\n                });\n            }\n        }();\n        if (this._container) {\n            this._defaultAction.render(prepend(this._container, $('.action-container')));\n        }\n    }\n    setActionContext(newContext) {\n        super.setActionContext(newContext);\n        this._defaultAction.setActionContext(newContext);\n        this._dropdown.setActionContext(newContext);\n    }\n    render(container) {\n        this._container = container;\n        super.render(this._container);\n        this._container.classList.add('monaco-dropdown-with-default');\n        const primaryContainer = $('.action-container');\n        this._defaultAction.render(append(this._container, primaryContainer));\n        this._register(addDisposableListener(primaryContainer, EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(17 /* RightArrow */)) {\n                this._defaultAction.element.tabIndex = -1;\n                this._dropdown.focus();\n                event.stopPropagation();\n            }\n        }));\n        const dropdownContainer = $('.dropdown-action-container');\n        this._dropdown.render(append(this._container, dropdownContainer));\n        this._register(addDisposableListener(dropdownContainer, EventType.KEY_DOWN, (e) => {\n            var _a;\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(15 /* LeftArrow */)) {\n                this._defaultAction.element.tabIndex = 0;\n                this._dropdown.setFocusable(false);\n                (_a = this._defaultAction.element) === null || _a === void 0 ? void 0 : _a.focus();\n                event.stopPropagation();\n            }\n        }));\n    }\n    focus(fromRight) {\n        if (fromRight) {\n            this._dropdown.focus();\n        }\n        else {\n            this._defaultAction.element.tabIndex = 0;\n            this._defaultAction.element.focus();\n        }\n    }\n    blur() {\n        this._defaultAction.element.tabIndex = -1;\n        this._dropdown.blur();\n        this._container.blur();\n    }\n    setFocusable(focusable) {\n        if (focusable) {\n            this._defaultAction.element.tabIndex = 0;\n        }\n        else {\n            this._defaultAction.element.tabIndex = -1;\n            this._dropdown.setFocusable(false);\n        }\n    }\n    dispose() {\n        this._defaultAction.dispose();\n        this._dropdown.dispose();\n        super.dispose();\n    }\n};\nDropdownWithDefaultActionViewItem = __decorate([\n    __param(2, IKeybindingService),\n    __param(3, INotificationService),\n    __param(4, IContextMenuService),\n    __param(5, IMenuService),\n    __param(6, IInstantiationService),\n    __param(7, IStorageService)\n], DropdownWithDefaultActionViewItem);\n/**\n * Creates action view items for menu actions or submenu actions.\n */\nexport function createActionViewItem(instaService, action, options) {\n    if (action instanceof MenuItemAction) {\n        return instaService.createInstance(MenuEntryActionViewItem, action, undefined);\n    }\n    else if (action instanceof SubmenuItemAction) {\n        if (action.item.rememberDefaultAction) {\n            return instaService.createInstance(DropdownWithDefaultActionViewItem, action, options);\n        }\n        else {\n            return instaService.createInstance(SubmenuEntryActionViewItem, action, options);\n        }\n    }\n    else {\n        return undefined;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, append } from '../../dom.js';\nimport { BaseActionViewItem } from '../actionbar/actionViewItems.js';\nimport { DropdownMenu } from './dropdown.js';\nimport { Emitter } from '../../../common/event.js';\nimport './dropdown.css';\nexport class DropdownMenuActionViewItem extends BaseActionViewItem {\n    constructor(action, menuActionsOrProvider, contextMenuProvider, options = Object.create(null)) {\n        super(null, action, options);\n        this.actionItem = null;\n        this._onDidChangeVisibility = this._register(new Emitter());\n        this.menuActionsOrProvider = menuActionsOrProvider;\n        this.contextMenuProvider = contextMenuProvider;\n        this.options = options;\n        if (this.options.actionRunner) {\n            this.actionRunner = this.options.actionRunner;\n        }\n    }\n    render(container) {\n        this.actionItem = container;\n        const labelRenderer = (el) => {\n            this.element = append(el, $('a.action-label'));\n            let classNames = [];\n            if (typeof this.options.classNames === 'string') {\n                classNames = this.options.classNames.split(/\\s+/g).filter(s => !!s);\n            }\n            else if (this.options.classNames) {\n                classNames = this.options.classNames;\n            }\n            // todo@aeschli: remove codicon, should come through `this.options.classNames`\n            if (!classNames.find(c => c === 'icon')) {\n                classNames.push('codicon');\n            }\n            this.element.classList.add(...classNames);\n            this.element.setAttribute('role', 'button');\n            this.element.setAttribute('aria-haspopup', 'true');\n            this.element.setAttribute('aria-expanded', 'false');\n            this.element.title = this._action.label || '';\n            return null;\n        };\n        const isActionsArray = Array.isArray(this.menuActionsOrProvider);\n        const options = {\n            contextMenuProvider: this.contextMenuProvider,\n            labelRenderer: labelRenderer,\n            menuAsChild: this.options.menuAsChild,\n            actions: isActionsArray ? this.menuActionsOrProvider : undefined,\n            actionProvider: isActionsArray ? undefined : this.menuActionsOrProvider\n        };\n        this.dropdownMenu = this._register(new DropdownMenu(container, options));\n        this._register(this.dropdownMenu.onDidChangeVisibility(visible => {\n            var _a;\n            (_a = this.element) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', `${visible}`);\n            this._onDidChangeVisibility.fire(visible);\n        }));\n        this.dropdownMenu.menuOptions = {\n            actionViewItemProvider: this.options.actionViewItemProvider,\n            actionRunner: this.actionRunner,\n            getKeyBinding: this.options.keybindingProvider,\n            context: this._context\n        };\n        if (this.options.anchorAlignmentProvider) {\n            const that = this;\n            this.dropdownMenu.menuOptions = Object.assign(Object.assign({}, this.dropdownMenu.menuOptions), { get anchorAlignment() {\n                    return that.options.anchorAlignmentProvider();\n                } });\n        }\n        this.updateEnabled();\n    }\n    setActionContext(newContext) {\n        super.setActionContext(newContext);\n        if (this.dropdownMenu) {\n            if (this.dropdownMenu.menuOptions) {\n                this.dropdownMenu.menuOptions.context = newContext;\n            }\n            else {\n                this.dropdownMenu.menuOptions = { context: newContext };\n            }\n        }\n    }\n    updateEnabled() {\n        var _a, _b;\n        const disabled = !this.getAction().enabled;\n        (_a = this.actionItem) === null || _a === void 0 ? void 0 : _a.classList.toggle('disabled', disabled);\n        (_b = this.element) === null || _b === void 0 ? void 0 : _b.classList.toggle('disabled', disabled);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, EventHelper, EventType } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { EventType as GestureEventType, Gesture } from '../../touch.js';\nimport { ActionRunner } from '../../../common/actions.js';\nimport { Emitter } from '../../../common/event.js';\nimport './dropdown.css';\nexport class BaseDropdown extends ActionRunner {\n    constructor(container, options) {\n        super();\n        this._onDidChangeVisibility = this._register(new Emitter());\n        this.onDidChangeVisibility = this._onDidChangeVisibility.event;\n        this._element = append(container, $('.monaco-dropdown'));\n        this._label = append(this._element, $('.dropdown-label'));\n        let labelRenderer = options.labelRenderer;\n        if (!labelRenderer) {\n            labelRenderer = (container) => {\n                container.textContent = options.label || '';\n                return null;\n            };\n        }\n        for (const event of [EventType.CLICK, EventType.MOUSE_DOWN, GestureEventType.Tap]) {\n            this._register(addDisposableListener(this.element, event, e => EventHelper.stop(e, true))); // prevent default click behaviour to trigger\n        }\n        for (const event of [EventType.MOUSE_DOWN, GestureEventType.Tap]) {\n            this._register(addDisposableListener(this._label, event, e => {\n                if (e instanceof MouseEvent && e.detail > 1) {\n                    return; // prevent multiple clicks to open multiple context menus (https://github.com/microsoft/vscode/issues/41363)\n                }\n                if (this.visible) {\n                    this.hide();\n                }\n                else {\n                    this.show();\n                }\n            }));\n        }\n        this._register(addDisposableListener(this._label, EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(3 /* Enter */) || event.equals(10 /* Space */)) {\n                EventHelper.stop(e, true); // https://github.com/microsoft/vscode/issues/57997\n                if (this.visible) {\n                    this.hide();\n                }\n                else {\n                    this.show();\n                }\n            }\n        }));\n        const cleanupFn = labelRenderer(this._label);\n        if (cleanupFn) {\n            this._register(cleanupFn);\n        }\n        this._register(Gesture.addTarget(this._label));\n    }\n    get element() {\n        return this._element;\n    }\n    show() {\n        if (!this.visible) {\n            this.visible = true;\n            this._onDidChangeVisibility.fire(true);\n        }\n    }\n    hide() {\n        if (this.visible) {\n            this.visible = false;\n            this._onDidChangeVisibility.fire(false);\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.hide();\n        if (this.boxContainer) {\n            this.boxContainer.remove();\n            this.boxContainer = undefined;\n        }\n        if (this.contents) {\n            this.contents.remove();\n            this.contents = undefined;\n        }\n        if (this._label) {\n            this._label.remove();\n            this._label = undefined;\n        }\n    }\n}\nexport class DropdownMenu extends BaseDropdown {\n    constructor(container, options) {\n        super(container, options);\n        this._actions = [];\n        this._contextMenuProvider = options.contextMenuProvider;\n        this.actions = options.actions || [];\n        this.actionProvider = options.actionProvider;\n        this.menuClassName = options.menuClassName || '';\n        this.menuAsChild = !!options.menuAsChild;\n    }\n    set menuOptions(options) {\n        this._menuOptions = options;\n    }\n    get menuOptions() {\n        return this._menuOptions;\n    }\n    get actions() {\n        if (this.actionProvider) {\n            return this.actionProvider.getActions();\n        }\n        return this._actions;\n    }\n    set actions(actions) {\n        this._actions = actions;\n    }\n    show() {\n        super.show();\n        this.element.classList.add('active');\n        this._contextMenuProvider.showContextMenu({\n            getAnchor: () => this.element,\n            getActions: () => this.actions,\n            getActionsContext: () => this.menuOptions ? this.menuOptions.context : null,\n            getActionViewItem: action => this.menuOptions && this.menuOptions.actionViewItemProvider ? this.menuOptions.actionViewItemProvider(action) : undefined,\n            getKeyBinding: action => this.menuOptions && this.menuOptions.getKeyBinding ? this.menuOptions.getKeyBinding(action) : undefined,\n            getMenuClassName: () => this.menuClassName,\n            onHide: () => this.onHide(),\n            actionRunner: this.menuOptions ? this.menuOptions.actionRunner : undefined,\n            anchorAlignment: this.menuOptions ? this.menuOptions.anchorAlignment : 0 /* LEFT */,\n            domForShadowRoot: this.menuAsChild ? this.element : undefined\n        });\n    }\n    hide() {\n        super.hide();\n    }\n    onHide() {\n        this.hide();\n        this.element.classList.remove('active');\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a, _b, _c, _d, _e, _f, _g, _h;\nimport { isStandalone } from '../../../../base/browser/browser.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { isWeb } from '../../../../base/common/platform.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\nimport { EditorAction, registerInstantiatedEditorAction } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport * as corePosition from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { isLocationLink } from '../../../common/languages.js';\nimport { ReferencesController } from './peek/referencesController.js';\nimport { ReferencesModel } from './referencesModel.js';\nimport { ISymbolNavigationService } from './symbolNavigation.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { PeekContext } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { getDeclarationsAtPosition, getDefinitionsAtPosition, getImplementationsAtPosition, getReferencesAtPosition, getTypeDefinitionsAtPosition } from './goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nMenuRegistry.appendMenuItem(MenuId.EditorContext, {\n    submenu: MenuId.EditorContextPeek,\n    title: nls.localize('peek.submenu', \"Peek\"),\n    group: 'navigation',\n    order: 100\n});\nconst _goToActionIds = new Set();\nfunction registerGoToAction(ctor) {\n    const result = new ctor();\n    registerInstantiatedEditorAction(result);\n    _goToActionIds.add(result.id);\n    return result;\n}\nexport class SymbolNavigationAnchor {\n    constructor(model, position) {\n        this.model = model;\n        this.position = position;\n    }\n    static is(thing) {\n        if (!thing || typeof thing !== 'object') {\n            return false;\n        }\n        if (thing instanceof SymbolNavigationAnchor) {\n            return true;\n        }\n        if (corePosition.Position.isIPosition(thing.position) && thing.model) {\n            return true;\n        }\n        return false;\n    }\n}\nexport class SymbolNavigationAction extends EditorAction {\n    constructor(configuration, opts) {\n        super(opts);\n        this.configuration = configuration;\n    }\n    run(accessor, editor, arg) {\n        if (!editor.hasModel()) {\n            return Promise.resolve(undefined);\n        }\n        const notificationService = accessor.get(INotificationService);\n        const editorService = accessor.get(ICodeEditorService);\n        const progressService = accessor.get(IEditorProgressService);\n        const symbolNavService = accessor.get(ISymbolNavigationService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const model = editor.getModel();\n        const position = editor.getPosition();\n        const anchor = SymbolNavigationAnchor.is(arg) ? arg : new SymbolNavigationAnchor(model, position);\n        const cts = new EditorStateCancellationTokenSource(editor, 1 /* Value */ | 4 /* Position */);\n        const promise = raceCancellation(this._getLocationModel(languageFeaturesService, anchor.model, anchor.position, cts.token), cts.token).then((references) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            if (!references || cts.token.isCancellationRequested) {\n                return;\n            }\n            alert(references.ariaMessage);\n            let altAction;\n            if (references.referenceAt(model.uri, position)) {\n                const altActionId = this._getAlternativeCommand(editor);\n                if (altActionId !== this.id && _goToActionIds.has(altActionId)) {\n                    altAction = editor.getAction(altActionId);\n                }\n            }\n            const referenceCount = references.references.length;\n            if (referenceCount === 0) {\n                // no result -> show message\n                if (!this.configuration.muteMessage) {\n                    const info = model.getWordAtPosition(position);\n                    (_a = MessageController.get(editor)) === null || _a === void 0 ? void 0 : _a.showMessage(this._getNoResultFoundMessage(info), position);\n                }\n            }\n            else if (referenceCount === 1 && altAction) {\n                // already at the only result, run alternative\n                altAction.run();\n            }\n            else {\n                // normal results handling\n                return this._onResult(editorService, symbolNavService, editor, references);\n            }\n        }), (err) => {\n            // report an error\n            notificationService.error(err);\n        }).finally(() => {\n            cts.dispose();\n        });\n        progressService.showWhile(promise, 250);\n        return promise;\n    }\n    _onResult(editorService, symbolNavService, editor, model) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const gotoLocation = this._getGoToPreference(editor);\n            if (!(editor instanceof EmbeddedCodeEditorWidget) && (this.configuration.openInPeek || (gotoLocation === 'peek' && model.references.length > 1))) {\n                this._openInPeek(editor, model);\n            }\n            else {\n                const next = model.firstReference();\n                const peek = model.references.length > 1 && gotoLocation === 'gotoAndPeek';\n                const targetEditor = yield this._openReference(editor, editorService, next, this.configuration.openToSide, !peek);\n                if (peek && targetEditor) {\n                    this._openInPeek(targetEditor, model);\n                }\n                else {\n                    model.dispose();\n                }\n                // keep remaining locations around when using\n                // 'goto'-mode\n                if (gotoLocation === 'goto') {\n                    symbolNavService.put(next);\n                }\n            }\n        });\n    }\n    _openReference(editor, editorService, reference, sideBySide, highlight) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // range is the target-selection-range when we have one\n            // and the fallback is the 'full' range\n            let range = undefined;\n            if (isLocationLink(reference)) {\n                range = reference.targetSelectionRange;\n            }\n            if (!range) {\n                range = reference.range;\n            }\n            if (!range) {\n                return undefined;\n            }\n            const targetEditor = yield editorService.openCodeEditor({\n                resource: reference.uri,\n                options: {\n                    selection: Range.collapseToStart(range),\n                    selectionRevealType: 3 /* NearTopIfOutsideViewport */,\n                    selectionSource: \"code.jump\" /* JUMP */\n                }\n            }, editor, sideBySide);\n            if (!targetEditor) {\n                return undefined;\n            }\n            if (highlight) {\n                const modelNow = targetEditor.getModel();\n                const ids = targetEditor.deltaDecorations([], [{ range, options: { description: 'symbol-navigate-action-highlight', className: 'symbolHighlight' } }]);\n                setTimeout(() => {\n                    if (targetEditor.getModel() === modelNow) {\n                        targetEditor.deltaDecorations(ids, []);\n                    }\n                }, 350);\n            }\n            return targetEditor;\n        });\n    }\n    _openInPeek(target, model) {\n        const controller = ReferencesController.get(target);\n        if (controller && target.hasModel()) {\n            controller.toggleWidget(target.getSelection(), createCancelablePromise(_ => Promise.resolve(model)), this.configuration.openInPeek);\n        }\n        else {\n            model.dispose();\n        }\n    }\n}\n//#region --- DEFINITION\nexport class DefinitionAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, token), nls.localize('def.title', 'Definitions'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('noResultWord', \"No definition found for '{0}'\", info.word)\n            : nls.localize('generic.noResults', \"No definition found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(51 /* gotoLocation */).alternativeDefinitionCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(51 /* gotoLocation */).multipleDefinitions;\n    }\n}\nconst goToDefinitionKb = isWeb && !isStandalone\n    ? 2048 /* CtrlCmd */ | 70 /* F12 */\n    : 70 /* F12 */;\nregisterGoToAction((_a = class GoToDefinitionAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToDefinitionAction.id,\n                label: nls.localize('actions.goToDecl.label', \"Go to Definition\"),\n                alias: 'Go to Definition',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: goToDefinitionKb,\n                    weight: 100 /* EditorContrib */\n                },\n                contextMenuOpts: {\n                    group: 'navigation',\n                    order: 1.1\n                }\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.goToDeclaration', GoToDefinitionAction.id);\n        }\n    },\n    _a.id = 'editor.action.revealDefinition',\n    _a));\nregisterGoToAction((_b = class OpenDefinitionToSideAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: true,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: OpenDefinitionToSideAction.id,\n                label: nls.localize('actions.goToDeclToSide.label', \"Open Definition to the Side\"),\n                alias: 'Open Definition to the Side',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, goToDefinitionKb),\n                    weight: 100 /* EditorContrib */\n                }\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.openDeclarationToTheSide', OpenDefinitionToSideAction.id);\n        }\n    },\n    _b.id = 'editor.action.revealDefinitionAside',\n    _b));\nregisterGoToAction((_c = class PeekDefinitionAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: PeekDefinitionAction.id,\n                label: nls.localize('actions.previewDecl.label', \"Peek Definition\"),\n                alias: 'Peek Definition',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: 512 /* Alt */ | 70 /* F12 */,\n                    linux: { primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 68 /* F10 */ },\n                    weight: 100 /* EditorContrib */\n                },\n                contextMenuOpts: {\n                    menuId: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 2\n                }\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.previewDeclaration', PeekDefinitionAction.id);\n        }\n    },\n    _c.id = 'editor.action.peekDefinition',\n    _c));\n//#endregion\n//#region --- DECLARATION\nclass DeclarationAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, token), nls.localize('decl.title', 'Declarations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\n            : nls.localize('decl.generic.noResults', \"No declaration found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(51 /* gotoLocation */).alternativeDeclarationCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(51 /* gotoLocation */).multipleDeclarations;\n    }\n}\nregisterGoToAction((_d = class GoToDeclarationAction extends DeclarationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToDeclarationAction.id,\n                label: nls.localize('actions.goToDeclaration.label', \"Go to Declaration\"),\n                alias: 'Go to Declaration',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                contextMenuOpts: {\n                    group: 'navigation',\n                    order: 1.3\n                },\n            });\n        }\n        _getNoResultFoundMessage(info) {\n            return info && info.word\n                ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\n                : nls.localize('decl.generic.noResults', \"No declaration found\");\n        }\n    },\n    _d.id = 'editor.action.revealDeclaration',\n    _d));\nregisterGoToAction(class PeekDeclarationAction extends DeclarationAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: true,\n            muteMessage: false\n        }, {\n            id: 'editor.action.peekDeclaration',\n            label: nls.localize('actions.peekDecl.label', \"Peek Declaration\"),\n            alias: 'Peek Declaration',\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            contextMenuOpts: {\n                menuId: MenuId.EditorContextPeek,\n                group: 'peek',\n                order: 3\n            }\n        });\n    }\n});\n//#endregion\n//#region --- TYPE DEFINITION\nclass TypeDefinitionAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, token), nls.localize('typedef.title', 'Type Definitions'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('goToTypeDefinition.noResultWord', \"No type definition found for '{0}'\", info.word)\n            : nls.localize('goToTypeDefinition.generic.noResults', \"No type definition found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(51 /* gotoLocation */).alternativeTypeDefinitionCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(51 /* gotoLocation */).multipleTypeDefinitions;\n    }\n}\nregisterGoToAction((_e = class GoToTypeDefinitionAction extends TypeDefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToTypeDefinitionAction.ID,\n                label: nls.localize('actions.goToTypeDefinition.label', \"Go to Type Definition\"),\n                alias: 'Go to Type Definition',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: 0,\n                    weight: 100 /* EditorContrib */\n                },\n                contextMenuOpts: {\n                    group: 'navigation',\n                    order: 1.4\n                }\n            });\n        }\n    },\n    _e.ID = 'editor.action.goToTypeDefinition',\n    _e));\nregisterGoToAction((_f = class PeekTypeDefinitionAction extends TypeDefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: PeekTypeDefinitionAction.ID,\n                label: nls.localize('actions.peekTypeDefinition.label', \"Peek Type Definition\"),\n                alias: 'Peek Type Definition',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                contextMenuOpts: {\n                    menuId: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 4\n                }\n            });\n        }\n    },\n    _f.ID = 'editor.action.peekTypeDefinition',\n    _f));\n//#endregion\n//#region --- IMPLEMENTATION\nclass ImplementationAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, token), nls.localize('impl.title', 'Implementations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('goToImplementation.noResultWord', \"No implementation found for '{0}'\", info.word)\n            : nls.localize('goToImplementation.generic.noResults', \"No implementation found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(51 /* gotoLocation */).alternativeImplementationCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(51 /* gotoLocation */).multipleImplementations;\n    }\n}\nregisterGoToAction((_g = class GoToImplementationAction extends ImplementationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToImplementationAction.ID,\n                label: nls.localize('actions.goToImplementation.label', \"Go to Implementations\"),\n                alias: 'Go to Implementations',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: 2048 /* CtrlCmd */ | 70 /* F12 */,\n                    weight: 100 /* EditorContrib */\n                },\n                contextMenuOpts: {\n                    group: 'navigation',\n                    order: 1.45\n                }\n            });\n        }\n    },\n    _g.ID = 'editor.action.goToImplementation',\n    _g));\nregisterGoToAction((_h = class PeekImplementationAction extends ImplementationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: PeekImplementationAction.ID,\n                label: nls.localize('actions.peekImplementation.label', \"Peek Implementations\"),\n                alias: 'Peek Implementations',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 70 /* F12 */,\n                    weight: 100 /* EditorContrib */\n                },\n                contextMenuOpts: {\n                    menuId: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 5\n                }\n            });\n        }\n    },\n    _h.ID = 'editor.action.peekImplementation',\n    _h));\n//#endregion\n//#region --- REFERENCES\nclass ReferencesAction extends SymbolNavigationAction {\n    _getNoResultFoundMessage(info) {\n        return info\n            ? nls.localize('references.no', \"No references found for '{0}'\", info.word)\n            : nls.localize('references.noGeneric', \"No references found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(51 /* gotoLocation */).alternativeReferenceCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(51 /* gotoLocation */).multipleReferences;\n    }\n}\nregisterGoToAction(class GoToReferencesAction extends ReferencesAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: false,\n            muteMessage: false\n        }, {\n            id: 'editor.action.goToReferences',\n            label: nls.localize('goToReferences.label', \"Go to References\"),\n            alias: 'Go to References',\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* Shift */ | 70 /* F12 */,\n                weight: 100 /* EditorContrib */\n            },\n            contextMenuOpts: {\n                group: 'navigation',\n                order: 1.45\n            }\n        });\n    }\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, true, token), nls.localize('ref.title', 'References'));\n        });\n    }\n});\nregisterGoToAction(class PeekReferencesAction extends ReferencesAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: true,\n            muteMessage: false\n        }, {\n            id: 'editor.action.referenceSearch.trigger',\n            label: nls.localize('references.action.label', \"Peek References\"),\n            alias: 'Peek References',\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            contextMenuOpts: {\n                menuId: MenuId.EditorContextPeek,\n                group: 'peek',\n                order: 6\n            }\n        });\n    }\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, token), nls.localize('ref.title', 'References'));\n        });\n    }\n});\n//#endregion\n//#region --- GENERIC goto symbols command\nclass GenericGoToLocationAction extends SymbolNavigationAction {\n    constructor(config, _references, _gotoMultipleBehaviour) {\n        super(config, {\n            id: 'editor.action.goToLocation',\n            label: nls.localize('label.generic', \"Go to Any Symbol\"),\n            alias: 'Go to Any Symbol',\n            precondition: ContextKeyExpr.and(PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n        });\n        this._references = _references;\n        this._gotoMultipleBehaviour = _gotoMultipleBehaviour;\n    }\n    _getLocationModel(languageFeaturesService, _model, _position, _token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(this._references, nls.localize('generic.title', 'Locations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && nls.localize('generic.noResult', \"No results for '{0}'\", info.word) || '';\n    }\n    _getGoToPreference(editor) {\n        var _a;\n        return (_a = this._gotoMultipleBehaviour) !== null && _a !== void 0 ? _a : editor.getOption(51 /* gotoLocation */).multipleReferences;\n    }\n    _getAlternativeCommand() { return ''; }\n}\nCommandsRegistry.registerCommand({\n    id: 'editor.action.goToLocations',\n    description: {\n        description: 'Go to locations from a position in a file',\n        args: [\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\n            { name: 'noResultsMessage', description: 'Human readable message that shows when locations is empty.' },\n        ]\n    },\n    handler: (accessor, resource, position, references, multiple, noResultsMessage, openInPeek) => __awaiter(void 0, void 0, void 0, function* () {\n        assertType(URI.isUri(resource));\n        assertType(corePosition.Position.isIPosition(position));\n        assertType(Array.isArray(references));\n        assertType(typeof multiple === 'undefined' || typeof multiple === 'string');\n        assertType(typeof openInPeek === 'undefined' || typeof openInPeek === 'boolean');\n        const editorService = accessor.get(ICodeEditorService);\n        const editor = yield editorService.openCodeEditor({ resource }, editorService.getFocusedCodeEditor());\n        if (isCodeEditor(editor)) {\n            editor.setPosition(position);\n            editor.revealPositionInCenterIfOutsideViewport(position, 0 /* Smooth */);\n            return editor.invokeWithinContext(accessor => {\n                const command = new class extends GenericGoToLocationAction {\n                    _getNoResultFoundMessage(info) {\n                        return noResultsMessage || super._getNoResultFoundMessage(info);\n                    }\n                }({\n                    muteMessage: !Boolean(noResultsMessage),\n                    openInPeek: Boolean(openInPeek),\n                    openToSide: false\n                }, references, multiple);\n                accessor.get(IInstantiationService).invokeFunction(command.run.bind(command), editor);\n            });\n        }\n    })\n});\nCommandsRegistry.registerCommand({\n    id: 'editor.action.peekLocations',\n    description: {\n        description: 'Peek locations from a position in a file',\n        args: [\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\n        ]\n    },\n    handler: (accessor, resource, position, references, multiple) => __awaiter(void 0, void 0, void 0, function* () {\n        accessor.get(ICommandService).executeCommand('editor.action.goToLocations', resource, position, references, multiple, undefined, true);\n    })\n});\n//#endregion\n//#region --- REFERENCE search special commands\nCommandsRegistry.registerCommand({\n    id: 'editor.action.findReferences',\n    handler: (accessor, resource, position) => {\n        assertType(URI.isUri(resource));\n        assertType(corePosition.Position.isIPosition(position));\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const codeEditorService = accessor.get(ICodeEditorService);\n        return codeEditorService.openCodeEditor({ resource }, codeEditorService.getFocusedCodeEditor()).then(control => {\n            if (!isCodeEditor(control) || !control.hasModel()) {\n                return undefined;\n            }\n            const controller = ReferencesController.get(control);\n            if (!controller) {\n                return undefined;\n            }\n            const references = createCancelablePromise(token => getReferencesAtPosition(languageFeaturesService.referenceProvider, control.getModel(), corePosition.Position.lift(position), false, token).then(references => new ReferencesModel(references, nls.localize('ref.title', 'References'))));\n            const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n            return Promise.resolve(controller.toggleWidget(range, references, false));\n        });\n    }\n});\n// use NEW command\nCommandsRegistry.registerCommandAlias('editor.action.showReferences', 'editor.action.peekLocations');\n//#endregion\n// -- unconditionally register goto-action\nMenuRegistry.appendMenuItems([\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.revealDefinition',\n                title: nls.localize({ key: 'miGotoDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Definition\")\n            },\n            group: '4_symbol_nav',\n            order: 2,\n        },\n    },\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.revealDeclaration',\n                title: nls.localize({ key: 'miGotoDeclaration', comment: ['&& denotes a mnemonic'] }, \"Go to &&Declaration\")\n            },\n            group: '4_symbol_nav',\n            order: 3,\n        },\n    },\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.goToTypeDefinition',\n                title: nls.localize({ key: 'miGotoTypeDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Type Definition\")\n            },\n            group: '4_symbol_nav',\n            order: 3,\n        },\n    },\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.goToImplementation',\n                title: nls.localize({ key: 'miGotoImplementation', comment: ['&& denotes a mnemonic'] }, \"Go to &&Implementations\")\n            },\n            group: '4_symbol_nav',\n            order: 4,\n        },\n    },\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.goToReferences',\n                title: nls.localize({ key: 'miGotoReference', comment: ['&& denotes a mnemonic'] }, \"Go to &&References\")\n            },\n            group: '4_symbol_nav',\n            order: 5,\n        },\n    },\n]);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { getOuterEditor, PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { CommandsRegistry } from '../../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IListService, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse, WorkbenchTreeElementCanExpand } from '../../../../../platform/list/browser/listService.js';\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { OneReference } from '../referencesModel.js';\nimport { LayoutData, ReferenceWidget } from './referencesWidget.js';\nexport const ctxReferenceSearchVisible = new RawContextKey('referenceSearchVisible', false, nls.localize('referenceSearchVisible', \"Whether reference peek is visible, like 'Peek References' or 'Peek Definition'\"));\nlet ReferencesController = class ReferencesController {\n    constructor(_defaultTreeKeyboardSupport, _editor, contextKeyService, _editorService, _notificationService, _instantiationService, _storageService, _configurationService) {\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n        this._editor = _editor;\n        this._editorService = _editorService;\n        this._notificationService = _notificationService;\n        this._instantiationService = _instantiationService;\n        this._storageService = _storageService;\n        this._configurationService = _configurationService;\n        this._disposables = new DisposableStore();\n        this._requestIdPool = 0;\n        this._ignoreModelChangeEvent = false;\n        this._referenceSearchVisible = ctxReferenceSearchVisible.bindTo(contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(ReferencesController.ID);\n    }\n    dispose() {\n        var _a, _b;\n        this._referenceSearchVisible.reset();\n        this._disposables.dispose();\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    toggleWidget(range, modelPromise, peekMode) {\n        // close current widget and return early is position didn't change\n        let widgetPosition;\n        if (this._widget) {\n            widgetPosition = this._widget.position;\n        }\n        this.closeWidget();\n        if (!!widgetPosition && range.containsPosition(widgetPosition)) {\n            return;\n        }\n        this._peekMode = peekMode;\n        this._referenceSearchVisible.set(true);\n        // close the widget on model/mode changes\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => { this.closeWidget(); }));\n        this._disposables.add(this._editor.onDidChangeModel(() => {\n            if (!this._ignoreModelChangeEvent) {\n                this.closeWidget();\n            }\n        }));\n        const storageKey = 'peekViewLayout';\n        const data = LayoutData.fromJSON(this._storageService.get(storageKey, 0 /* GLOBAL */, '{}'));\n        this._widget = this._instantiationService.createInstance(ReferenceWidget, this._editor, this._defaultTreeKeyboardSupport, data);\n        this._widget.setTitle(nls.localize('labelLoading', \"Loading...\"));\n        this._widget.show(range);\n        this._disposables.add(this._widget.onDidClose(() => {\n            modelPromise.cancel();\n            if (this._widget) {\n                this._storageService.store(storageKey, JSON.stringify(this._widget.layoutData), 0 /* GLOBAL */, 1 /* MACHINE */);\n                this._widget = undefined;\n            }\n            this.closeWidget();\n        }));\n        this._disposables.add(this._widget.onDidSelectReference(event => {\n            let { element, kind } = event;\n            if (!element) {\n                return;\n            }\n            switch (kind) {\n                case 'open':\n                    if (event.source !== 'editor' || !this._configurationService.getValue('editor.stablePeek')) {\n                        // when stable peek is configured we don't close\n                        // the peek window on selecting the editor\n                        this.openReference(element, false, false);\n                    }\n                    break;\n                case 'side':\n                    this.openReference(element, true, false);\n                    break;\n                case 'goto':\n                    if (peekMode) {\n                        this._gotoReference(element);\n                    }\n                    else {\n                        this.openReference(element, false, true);\n                    }\n                    break;\n            }\n        }));\n        const requestId = ++this._requestIdPool;\n        modelPromise.then(model => {\n            var _a;\n            // still current request? widget still open?\n            if (requestId !== this._requestIdPool || !this._widget) {\n                model.dispose();\n                return undefined;\n            }\n            (_a = this._model) === null || _a === void 0 ? void 0 : _a.dispose();\n            this._model = model;\n            // show widget\n            return this._widget.setModel(this._model).then(() => {\n                if (this._widget && this._model && this._editor.hasModel()) { // might have been closed\n                    // set title\n                    if (!this._model.isEmpty) {\n                        this._widget.setMetaTitle(nls.localize('metaTitle.N', \"{0} ({1})\", this._model.title, this._model.references.length));\n                    }\n                    else {\n                        this._widget.setMetaTitle('');\n                    }\n                    // set 'best' selection\n                    let uri = this._editor.getModel().uri;\n                    let pos = new Position(range.startLineNumber, range.startColumn);\n                    let selection = this._model.nearestReference(uri, pos);\n                    if (selection) {\n                        return this._widget.setSelection(selection).then(() => {\n                            if (this._widget && this._editor.getOption(77 /* peekWidgetDefaultFocus */) === 'editor') {\n                                this._widget.focusOnPreviewEditor();\n                            }\n                        });\n                    }\n                }\n                return undefined;\n            });\n        }, error => {\n            this._notificationService.error(error);\n        });\n    }\n    changeFocusBetweenPreviewAndReferences() {\n        if (!this._widget) {\n            // can be called while still resolving...\n            return;\n        }\n        if (this._widget.isPreviewEditorFocused()) {\n            this._widget.focusOnReferenceTree();\n        }\n        else {\n            this._widget.focusOnPreviewEditor();\n        }\n    }\n    goToNextOrPreviousReference(fwd) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\n                // can be called while still resolving...\n                return;\n            }\n            const currentPosition = this._widget.position;\n            if (!currentPosition) {\n                return;\n            }\n            const source = this._model.nearestReference(this._editor.getModel().uri, currentPosition);\n            if (!source) {\n                return;\n            }\n            const target = this._model.nextOrPreviousReference(source, fwd);\n            const editorFocus = this._editor.hasTextFocus();\n            const previewEditorFocus = this._widget.isPreviewEditorFocused();\n            yield this._widget.setSelection(target);\n            yield this._gotoReference(target);\n            if (editorFocus) {\n                this._editor.focus();\n            }\n            else if (this._widget && previewEditorFocus) {\n                this._widget.focusOnPreviewEditor();\n            }\n        });\n    }\n    revealReference(reference) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\n                // can be called while still resolving...\n                return;\n            }\n            yield this._widget.revealReference(reference);\n        });\n    }\n    closeWidget(focusEditor = true) {\n        var _a, _b;\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._referenceSearchVisible.reset();\n        this._disposables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n        if (focusEditor) {\n            this._editor.focus();\n        }\n        this._requestIdPool += 1; // Cancel pending requests\n    }\n    _gotoReference(ref) {\n        if (this._widget) {\n            this._widget.hide();\n        }\n        this._ignoreModelChangeEvent = true;\n        const range = Range.lift(ref.range).collapseToStart();\n        return this._editorService.openCodeEditor({\n            resource: ref.uri,\n            options: { selection: range, selectionSource: \"code.jump\" /* JUMP */ }\n        }, this._editor).then(openedEditor => {\n            var _a;\n            this._ignoreModelChangeEvent = false;\n            if (!openedEditor || !this._widget) {\n                // something went wrong...\n                this.closeWidget();\n                return;\n            }\n            if (this._editor === openedEditor) {\n                //\n                this._widget.show(range);\n                this._widget.focusOnReferenceTree();\n            }\n            else {\n                // we opened a different editor instance which means a different controller instance.\n                // therefore we stop with this controller and continue with the other\n                const other = ReferencesController.get(openedEditor);\n                const model = this._model.clone();\n                this.closeWidget();\n                openedEditor.focus();\n                other === null || other === void 0 ? void 0 : other.toggleWidget(range, createCancelablePromise(_ => Promise.resolve(model)), (_a = this._peekMode) !== null && _a !== void 0 ? _a : false);\n            }\n        }, (err) => {\n            this._ignoreModelChangeEvent = false;\n            onUnexpectedError(err);\n        });\n    }\n    openReference(ref, sideBySide, pinned) {\n        // clear stage\n        if (!sideBySide) {\n            this.closeWidget();\n        }\n        const { uri, range } = ref;\n        this._editorService.openCodeEditor({\n            resource: uri,\n            options: { selection: range, selectionSource: \"code.jump\" /* JUMP */, pinned }\n        }, this._editor, sideBySide);\n    }\n};\nReferencesController.ID = 'editor.contrib.referencesController';\nReferencesController = __decorate([\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, INotificationService),\n    __param(5, IInstantiationService),\n    __param(6, IStorageService),\n    __param(7, IConfigurationService)\n], ReferencesController);\nexport { ReferencesController };\nfunction withController(accessor, fn) {\n    const outerEditor = getOuterEditor(accessor);\n    if (!outerEditor) {\n        return;\n    }\n    const controller = ReferencesController.get(outerEditor);\n    if (controller) {\n        fn(controller);\n    }\n}\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'togglePeekWidgetFocus',\n    weight: 100 /* EditorContrib */,\n    primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 60 /* F2 */),\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.changeFocusBetweenPreviewAndReferences();\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'goToNextReference',\n    weight: 100 /* EditorContrib */ - 10,\n    primary: 62 /* F4 */,\n    secondary: [70 /* F12 */],\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.goToNextOrPreviousReference(true);\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'goToPreviousReference',\n    weight: 100 /* EditorContrib */ - 10,\n    primary: 1024 /* Shift */ | 62 /* F4 */,\n    secondary: [1024 /* Shift */ | 70 /* F12 */],\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.goToNextOrPreviousReference(false);\n        });\n    }\n});\n// commands that aren't needed anymore because there is now ContextKeyExpr.OR\nCommandsRegistry.registerCommandAlias('goToNextReferenceFromEmbeddedEditor', 'goToNextReference');\nCommandsRegistry.registerCommandAlias('goToPreviousReferenceFromEmbeddedEditor', 'goToPreviousReference');\n// close\nCommandsRegistry.registerCommandAlias('closeReferenceSearchEditor', 'closeReferenceSearch');\nCommandsRegistry.registerCommand('closeReferenceSearch', accessor => withController(accessor, controller => controller.closeWidget()));\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'closeReferenceSearch',\n    weight: 100 /* EditorContrib */ - 101,\n    primary: 9 /* Escape */,\n    secondary: [1024 /* Shift */ | 9 /* Escape */],\n    when: ContextKeyExpr.and(PeekContext.inPeekEditor, ContextKeyExpr.not('config.editor.stablePeek'))\n});\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'closeReferenceSearch',\n    weight: 200 /* WorkbenchContrib */ + 50,\n    primary: 9 /* Escape */,\n    secondary: [1024 /* Shift */ | 9 /* Escape */],\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, ContextKeyExpr.not('config.editor.stablePeek'))\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'revealReference',\n    weight: 200 /* WorkbenchContrib */,\n    primary: 3 /* Enter */,\n    mac: {\n        primary: 3 /* Enter */,\n        secondary: [2048 /* CtrlCmd */ | 18 /* DownArrow */]\n    },\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\n    handler(accessor) {\n        var _a;\n        const listService = accessor.get(IListService);\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n            withController(accessor, controller => controller.revealReference(focus[0]));\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'openReferenceToSide',\n    weight: 100 /* EditorContrib */,\n    primary: 2048 /* CtrlCmd */ | 3 /* Enter */,\n    mac: {\n        primary: 256 /* WinCtrl */ | 3 /* Enter */\n    },\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\n    handler(accessor) {\n        var _a;\n        const listService = accessor.get(IListService);\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n            withController(accessor, controller => controller.openReference(focus[0], true, true));\n        }\n    }\n});\nCommandsRegistry.registerCommand('openReference', (accessor) => {\n    var _a;\n    const listService = accessor.get(IListService);\n    const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n    if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n        withController(accessor, controller => controller.openReference(focus[0], false, true));\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { defaultGenerator } from '../../../../base/common/idGenerator.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { basename, extUri } from '../../../../base/common/resources.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nexport class OneReference {\n    constructor(isProviderFirst, parent, link, _rangeCallback) {\n        this.isProviderFirst = isProviderFirst;\n        this.parent = parent;\n        this.link = link;\n        this._rangeCallback = _rangeCallback;\n        this.id = defaultGenerator.nextId();\n    }\n    get uri() {\n        return this.link.uri;\n    }\n    get range() {\n        var _a, _b;\n        return (_b = (_a = this._range) !== null && _a !== void 0 ? _a : this.link.targetSelectionRange) !== null && _b !== void 0 ? _b : this.link.range;\n    }\n    set range(value) {\n        this._range = value;\n        this._rangeCallback(this);\n    }\n    get ariaMessage() {\n        var _a;\n        const preview = (_a = this.parent.getPreview(this)) === null || _a === void 0 ? void 0 : _a.preview(this.range);\n        if (!preview) {\n            return localize('aria.oneReference', \"symbol in {0} on line {1} at column {2}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn);\n        }\n        else {\n            return localize({ key: 'aria.oneReference.preview', comment: ['Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code'] }, \"symbol in {0} on line {1} at column {2}, {3}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn, preview.value);\n        }\n    }\n}\nexport class FilePreview {\n    constructor(_modelReference) {\n        this._modelReference = _modelReference;\n    }\n    dispose() {\n        this._modelReference.dispose();\n    }\n    preview(range, n = 8) {\n        const model = this._modelReference.object.textEditorModel;\n        if (!model) {\n            return undefined;\n        }\n        const { startLineNumber, startColumn, endLineNumber, endColumn } = range;\n        const word = model.getWordUntilPosition({ lineNumber: startLineNumber, column: startColumn - n });\n        const beforeRange = new Range(startLineNumber, word.startColumn, startLineNumber, startColumn);\n        const afterRange = new Range(endLineNumber, endColumn, endLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\n        const before = model.getValueInRange(beforeRange).replace(/^\\s+/, '');\n        const inside = model.getValueInRange(range);\n        const after = model.getValueInRange(afterRange).replace(/\\s+$/, '');\n        return {\n            value: before + inside + after,\n            highlight: { start: before.length, end: before.length + inside.length }\n        };\n    }\n}\nexport class FileReferences {\n    constructor(parent, uri) {\n        this.parent = parent;\n        this.uri = uri;\n        this.children = [];\n        this._previews = new ResourceMap();\n    }\n    dispose() {\n        dispose(this._previews.values());\n        this._previews.clear();\n    }\n    getPreview(child) {\n        return this._previews.get(child.uri);\n    }\n    get ariaMessage() {\n        const len = this.children.length;\n        if (len === 1) {\n            return localize('aria.fileReferences.1', \"1 symbol in {0}, full path {1}\", basename(this.uri), this.uri.fsPath);\n        }\n        else {\n            return localize('aria.fileReferences.N', \"{0} symbols in {1}, full path {2}\", len, basename(this.uri), this.uri.fsPath);\n        }\n    }\n    resolve(textModelResolverService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._previews.size !== 0) {\n                return this;\n            }\n            for (let child of this.children) {\n                if (this._previews.has(child.uri)) {\n                    continue;\n                }\n                try {\n                    const ref = yield textModelResolverService.createModelReference(child.uri);\n                    this._previews.set(child.uri, new FilePreview(ref));\n                }\n                catch (err) {\n                    onUnexpectedError(err);\n                }\n            }\n            return this;\n        });\n    }\n}\nexport class ReferencesModel {\n    constructor(links, title) {\n        this.groups = [];\n        this.references = [];\n        this._onDidChangeReferenceRange = new Emitter();\n        this.onDidChangeReferenceRange = this._onDidChangeReferenceRange.event;\n        this._links = links;\n        this._title = title;\n        // grouping and sorting\n        const [providersFirst] = links;\n        links.sort(ReferencesModel._compareReferences);\n        let current;\n        for (let link of links) {\n            if (!current || !extUri.isEqual(current.uri, link.uri, true)) {\n                // new group\n                current = new FileReferences(this, link.uri);\n                this.groups.push(current);\n            }\n            // append, check for equality first!\n            if (current.children.length === 0 || ReferencesModel._compareReferences(link, current.children[current.children.length - 1]) !== 0) {\n                const oneRef = new OneReference(providersFirst === link, current, link, ref => this._onDidChangeReferenceRange.fire(ref));\n                this.references.push(oneRef);\n                current.children.push(oneRef);\n            }\n        }\n    }\n    dispose() {\n        dispose(this.groups);\n        this._onDidChangeReferenceRange.dispose();\n        this.groups.length = 0;\n    }\n    clone() {\n        return new ReferencesModel(this._links, this._title);\n    }\n    get title() {\n        return this._title;\n    }\n    get isEmpty() {\n        return this.groups.length === 0;\n    }\n    get ariaMessage() {\n        if (this.isEmpty) {\n            return localize('aria.result.0', \"No results found\");\n        }\n        else if (this.references.length === 1) {\n            return localize('aria.result.1', \"Found 1 symbol in {0}\", this.references[0].uri.fsPath);\n        }\n        else if (this.groups.length === 1) {\n            return localize('aria.result.n1', \"Found {0} symbols in {1}\", this.references.length, this.groups[0].uri.fsPath);\n        }\n        else {\n            return localize('aria.result.nm', \"Found {0} symbols in {1} files\", this.references.length, this.groups.length);\n        }\n    }\n    nextOrPreviousReference(reference, next) {\n        let { parent } = reference;\n        let idx = parent.children.indexOf(reference);\n        let childCount = parent.children.length;\n        let groupCount = parent.parent.groups.length;\n        if (groupCount === 1 || next && idx + 1 < childCount || !next && idx > 0) {\n            // cycling within one file\n            if (next) {\n                idx = (idx + 1) % childCount;\n            }\n            else {\n                idx = (idx + childCount - 1) % childCount;\n            }\n            return parent.children[idx];\n        }\n        idx = parent.parent.groups.indexOf(parent);\n        if (next) {\n            idx = (idx + 1) % groupCount;\n            return parent.parent.groups[idx].children[0];\n        }\n        else {\n            idx = (idx + groupCount - 1) % groupCount;\n            return parent.parent.groups[idx].children[parent.parent.groups[idx].children.length - 1];\n        }\n    }\n    nearestReference(resource, position) {\n        const nearest = this.references.map((ref, idx) => {\n            return {\n                idx,\n                prefixLen: strings.commonPrefixLength(ref.uri.toString(), resource.toString()),\n                offsetDist: Math.abs(ref.range.startLineNumber - position.lineNumber) * 100 + Math.abs(ref.range.startColumn - position.column)\n            };\n        }).sort((a, b) => {\n            if (a.prefixLen > b.prefixLen) {\n                return -1;\n            }\n            else if (a.prefixLen < b.prefixLen) {\n                return 1;\n            }\n            else if (a.offsetDist < b.offsetDist) {\n                return -1;\n            }\n            else if (a.offsetDist > b.offsetDist) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        })[0];\n        if (nearest) {\n            return this.references[nearest.idx];\n        }\n        return undefined;\n    }\n    referenceAt(resource, position) {\n        for (const ref of this.references) {\n            if (ref.uri.toString() === resource.toString()) {\n                if (Range.containsPosition(ref.range, position)) {\n                    return ref;\n                }\n            }\n        }\n        return undefined;\n    }\n    firstReference() {\n        for (const ref of this.references) {\n            if (ref.isProviderFirst) {\n                return ref;\n            }\n        }\n        return this.references[0];\n    }\n    static _compareReferences(a, b) {\n        return extUri.compare(a.uri, b.uri) || Range.compareRangesUsingStarts(a.range, b.range);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { Sizing, SplitView } from '../../../../../base/browser/ui/splitview/splitview.js';\nimport { Color } from '../../../../../base/common/color.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { basenameOrAuthority, dirname } from '../../../../../base/common/resources.js';\nimport './referencesWidget.css';\nimport { EmbeddedCodeEditorWidget } from '../../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ModelDecorationOptions, TextModel } from '../../../../common/model/textModel.js';\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../common/languages/modesRegistry.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { AccessibilityProvider, DataSource, Delegate, FileReferencesRenderer, IdentityProvider, OneReferenceRenderer, StringRepresentationProvider } from './referencesTree.js';\nimport * as peekView from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { WorkbenchAsyncDataTree } from '../../../../../platform/list/browser/listService.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { IUndoRedoService } from '../../../../../platform/undoRedo/common/undoRedo.js';\nimport { FileReferences, OneReference } from '../referencesModel.js';\nclass DecorationsManager {\n    constructor(_editor, _model) {\n        this._editor = _editor;\n        this._model = _model;\n        this._decorations = new Map();\n        this._decorationIgnoreSet = new Set();\n        this._callOnDispose = new DisposableStore();\n        this._callOnModelChange = new DisposableStore();\n        this._callOnDispose.add(this._editor.onDidChangeModel(() => this._onModelChanged()));\n        this._onModelChanged();\n    }\n    dispose() {\n        this._callOnModelChange.dispose();\n        this._callOnDispose.dispose();\n        this.removeDecorations();\n    }\n    _onModelChanged() {\n        this._callOnModelChange.clear();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (let ref of this._model.references) {\n            if (ref.uri.toString() === model.uri.toString()) {\n                this._addDecorations(ref.parent);\n                return;\n            }\n        }\n    }\n    _addDecorations(reference) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(() => this._onDecorationChanged()));\n        const newDecorations = [];\n        const newDecorationsActualIndex = [];\n        for (let i = 0, len = reference.children.length; i < len; i++) {\n            let oneReference = reference.children[i];\n            if (this._decorationIgnoreSet.has(oneReference.id)) {\n                continue;\n            }\n            if (oneReference.uri.toString() !== this._editor.getModel().uri.toString()) {\n                continue;\n            }\n            newDecorations.push({\n                range: oneReference.range,\n                options: DecorationsManager.DecorationOptions\n            });\n            newDecorationsActualIndex.push(i);\n        }\n        const decorations = this._editor.deltaDecorations([], newDecorations);\n        for (let i = 0; i < decorations.length; i++) {\n            this._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\n        }\n    }\n    _onDecorationChanged() {\n        const toRemove = [];\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (let [decorationId, reference] of this._decorations) {\n            const newRange = model.getDecorationRange(decorationId);\n            if (!newRange) {\n                continue;\n            }\n            let ignore = false;\n            if (Range.equalsRange(newRange, reference.range)) {\n                continue;\n            }\n            if (Range.spansMultipleLines(newRange)) {\n                ignore = true;\n            }\n            else {\n                const lineLength = reference.range.endColumn - reference.range.startColumn;\n                const newLineLength = newRange.endColumn - newRange.startColumn;\n                if (lineLength !== newLineLength) {\n                    ignore = true;\n                }\n            }\n            if (ignore) {\n                this._decorationIgnoreSet.add(reference.id);\n                toRemove.push(decorationId);\n            }\n            else {\n                reference.range = newRange;\n            }\n        }\n        for (let i = 0, len = toRemove.length; i < len; i++) {\n            this._decorations.delete(toRemove[i]);\n        }\n        this._editor.deltaDecorations(toRemove, []);\n    }\n    removeDecorations() {\n        this._editor.deltaDecorations([...this._decorations.keys()], []);\n        this._decorations.clear();\n    }\n}\nDecorationsManager.DecorationOptions = ModelDecorationOptions.register({\n    description: 'reference-decoration',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    className: 'reference-decoration'\n});\nexport class LayoutData {\n    constructor() {\n        this.ratio = 0.7;\n        this.heightInLines = 18;\n    }\n    static fromJSON(raw) {\n        let ratio;\n        let heightInLines;\n        try {\n            const data = JSON.parse(raw);\n            ratio = data.ratio;\n            heightInLines = data.heightInLines;\n        }\n        catch (_a) {\n            //\n        }\n        return {\n            ratio: ratio || 0.7,\n            heightInLines: heightInLines || 18\n        };\n    }\n}\nclass ReferencesTree extends WorkbenchAsyncDataTree {\n}\n/**\n * ZoneWidget that is shown inside the editor\n */\nlet ReferenceWidget = class ReferenceWidget extends peekView.PeekViewWidget {\n    constructor(editor, _defaultTreeKeyboardSupport, layoutData, themeService, _textModelResolverService, _instantiationService, _peekViewService, _uriLabel, _undoRedoService, _keybindingService, _languageService, _languageConfigurationService) {\n        super(editor, { showFrame: false, showArrow: true, isResizeable: true, isAccessible: true, supportOnTitleClick: true }, _instantiationService);\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n        this.layoutData = layoutData;\n        this._textModelResolverService = _textModelResolverService;\n        this._instantiationService = _instantiationService;\n        this._peekViewService = _peekViewService;\n        this._uriLabel = _uriLabel;\n        this._undoRedoService = _undoRedoService;\n        this._keybindingService = _keybindingService;\n        this._languageService = _languageService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._disposeOnNewModel = new DisposableStore();\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectReference = new Emitter();\n        this.onDidSelectReference = this._onDidSelectReference.event;\n        this._dim = new dom.Dimension(0, 0);\n        this._applyTheme(themeService.getColorTheme());\n        this._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this._peekViewService.addExclusiveWidget(editor, this);\n        this.create();\n    }\n    dispose() {\n        this.setModel(undefined);\n        this._callOnDispose.dispose();\n        this._disposeOnNewModel.dispose();\n        dispose(this._preview);\n        dispose(this._previewNotAvailableMessage);\n        dispose(this._tree);\n        dispose(this._previewModelReference);\n        this._splitView.dispose();\n        super.dispose();\n    }\n    _applyTheme(theme) {\n        const borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\n        this.style({\n            arrowColor: borderColor,\n            frameColor: borderColor,\n            headerBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\n            primaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\n        });\n    }\n    show(where) {\n        this.editor.revealRangeInCenterIfOutsideViewport(where, 0 /* Smooth */);\n        super.show(where, this.layoutData.heightInLines || 18);\n    }\n    focusOnReferenceTree() {\n        this._tree.domFocus();\n    }\n    focusOnPreviewEditor() {\n        this._preview.focus();\n    }\n    isPreviewEditorFocused() {\n        return this._preview.hasTextFocus();\n    }\n    _onTitleClick(e) {\n        if (this._preview && this._preview.getModel()) {\n            this._onDidSelectReference.fire({\n                element: this._getFocusedReference(),\n                kind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\n                source: 'title'\n            });\n        }\n    }\n    _fillBody(containerElement) {\n        this.setCssClass('reference-zone-widget');\n        // message pane\n        this._messageContainer = dom.append(containerElement, dom.$('div.messages'));\n        dom.hide(this._messageContainer);\n        this._splitView = new SplitView(containerElement, { orientation: 1 /* HORIZONTAL */ });\n        // editor\n        this._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\n        let options = {\n            scrollBeyondLastLine: false,\n            scrollbar: {\n                verticalScrollbarSize: 14,\n                horizontal: 'auto',\n                useShadows: true,\n                verticalHasArrows: false,\n                horizontalHasArrows: false,\n                alwaysConsumeMouseWheel: false\n            },\n            overviewRulerLanes: 2,\n            fixedOverflowWidgets: true,\n            minimap: {\n                enabled: false\n            }\n        };\n        this._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, this.editor);\n        dom.hide(this._previewContainer);\n        this._previewNotAvailableMessage = new TextModel(nls.localize('missingPreviewMessage', \"no preview available\"), PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null, this._undoRedoService, this._languageService, this._languageConfigurationService);\n        // tree\n        this._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\n        const treeOptions = {\n            keyboardSupport: this._defaultTreeKeyboardSupport,\n            accessibilityProvider: new AccessibilityProvider(),\n            keyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\n            identityProvider: new IdentityProvider(),\n            openOnSingleClick: true,\n            selectionNavigation: true,\n            overrideStyles: {\n                listBackground: peekView.peekViewResultsBackground\n            }\n        };\n        if (this._defaultTreeKeyboardSupport) {\n            // the tree will consume `Escape` and prevent the widget from closing\n            this._callOnDispose.add(dom.addStandardDisposableListener(this._treeContainer, 'keydown', (e) => {\n                if (e.equals(9 /* Escape */)) {\n                    this._keybindingService.dispatchEvent(e, e.target);\n                    e.stopPropagation();\n                }\n            }, true));\n        }\n        this._tree = this._instantiationService.createInstance(ReferencesTree, 'ReferencesWidget', this._treeContainer, new Delegate(), [\n            this._instantiationService.createInstance(FileReferencesRenderer),\n            this._instantiationService.createInstance(OneReferenceRenderer),\n        ], this._instantiationService.createInstance(DataSource), treeOptions);\n        // split stuff\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: this._previewContainer,\n            minimumSize: 200,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                this._preview.layout({ height: this._dim.height, width });\n            }\n        }, Sizing.Distribute);\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: this._treeContainer,\n            minimumSize: 100,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                this._treeContainer.style.height = `${this._dim.height}px`;\n                this._treeContainer.style.width = `${width}px`;\n                this._tree.layout(this._dim.height, width);\n            }\n        }, Sizing.Distribute);\n        this._disposables.add(this._splitView.onDidSashChange(() => {\n            if (this._dim.width) {\n                this.layoutData.ratio = this._splitView.getViewSize(0) / this._dim.width;\n            }\n        }, undefined));\n        // listen on selection and focus\n        let onEvent = (element, kind) => {\n            if (element instanceof OneReference) {\n                if (kind === 'show') {\n                    this._revealReference(element, false);\n                }\n                this._onDidSelectReference.fire({ element, kind, source: 'tree' });\n            }\n        };\n        this._tree.onDidOpen(e => {\n            if (e.sideBySide) {\n                onEvent(e.element, 'side');\n            }\n            else if (e.editorOptions.pinned) {\n                onEvent(e.element, 'goto');\n            }\n            else {\n                onEvent(e.element, 'show');\n            }\n        });\n        dom.hide(this._treeContainer);\n    }\n    _onWidth(width) {\n        if (this._dim) {\n            this._doLayoutBody(this._dim.height, width);\n        }\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._dim = new dom.Dimension(widthInPixel, heightInPixel);\n        this.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\n        this._splitView.layout(widthInPixel);\n        this._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\n    }\n    setSelection(selection) {\n        return this._revealReference(selection, true).then(() => {\n            if (!this._model) {\n                // disposed\n                return;\n            }\n            // show in tree\n            this._tree.setSelection([selection]);\n            this._tree.setFocus([selection]);\n        });\n    }\n    setModel(newModel) {\n        // clean up\n        this._disposeOnNewModel.clear();\n        this._model = newModel;\n        if (this._model) {\n            return this._onNewModel();\n        }\n        return Promise.resolve();\n    }\n    _onNewModel() {\n        if (!this._model) {\n            return Promise.resolve(undefined);\n        }\n        if (this._model.isEmpty) {\n            this.setTitle('');\n            this._messageContainer.innerText = nls.localize('noResults', \"No results\");\n            dom.show(this._messageContainer);\n            return Promise.resolve(undefined);\n        }\n        dom.hide(this._messageContainer);\n        this._decorationsManager = new DecorationsManager(this._preview, this._model);\n        this._disposeOnNewModel.add(this._decorationsManager);\n        // listen on model changes\n        this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(reference => this._tree.rerender(reference)));\n        // listen on editor\n        this._disposeOnNewModel.add(this._preview.onMouseDown(e => {\n            const { event, target } = e;\n            if (event.detail !== 2) {\n                return;\n            }\n            const element = this._getFocusedReference();\n            if (!element) {\n                return;\n            }\n            this._onDidSelectReference.fire({\n                element: { uri: element.uri, range: target.range },\n                kind: (event.ctrlKey || event.metaKey || event.altKey) ? 'side' : 'open',\n                source: 'editor'\n            });\n        }));\n        // make sure things are rendered\n        this.container.classList.add('results-loaded');\n        dom.show(this._treeContainer);\n        dom.show(this._previewContainer);\n        this._splitView.layout(this._dim.width);\n        this.focusOnReferenceTree();\n        // pick input and a reference to begin with\n        return this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\n    }\n    _getFocusedReference() {\n        const [element] = this._tree.getFocus();\n        if (element instanceof OneReference) {\n            return element;\n        }\n        else if (element instanceof FileReferences) {\n            if (element.children.length > 0) {\n                return element.children[0];\n            }\n        }\n        return undefined;\n    }\n    revealReference(reference) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._revealReference(reference, false);\n            this._onDidSelectReference.fire({ element: reference, kind: 'goto', source: 'tree' });\n        });\n    }\n    _revealReference(reference, revealParent) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // check if there is anything to do...\n            if (this._revealedReference === reference) {\n                return;\n            }\n            this._revealedReference = reference;\n            // Update widget header\n            if (reference.uri.scheme !== Schemas.inMemory) {\n                this.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\n            }\n            else {\n                this.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\n            }\n            const promise = this._textModelResolverService.createModelReference(reference.uri);\n            if (this._tree.getInput() === reference.parent) {\n                this._tree.reveal(reference);\n            }\n            else {\n                if (revealParent) {\n                    this._tree.reveal(reference.parent);\n                }\n                yield this._tree.expand(reference.parent);\n                this._tree.reveal(reference);\n            }\n            const ref = yield promise;\n            if (!this._model) {\n                // disposed\n                ref.dispose();\n                return;\n            }\n            dispose(this._previewModelReference);\n            // show in editor\n            const model = ref.object;\n            if (model) {\n                const scrollType = this._preview.getModel() === model.textEditorModel ? 0 /* Smooth */ : 1 /* Immediate */;\n                const sel = Range.lift(reference.range).collapseToStart();\n                this._previewModelReference = ref;\n                this._preview.setModel(model.textEditorModel);\n                this._preview.setSelection(sel);\n                this._preview.revealRangeInCenter(sel, scrollType);\n            }\n            else {\n                this._preview.setModel(this._previewNotAvailableMessage);\n                ref.dispose();\n            }\n        });\n    }\n};\nReferenceWidget = __decorate([\n    __param(3, IThemeService),\n    __param(4, ITextModelService),\n    __param(5, IInstantiationService),\n    __param(6, peekView.IPeekViewService),\n    __param(7, ILabelService),\n    __param(8, IUndoRedoService),\n    __param(9, IKeybindingService),\n    __param(10, ILanguageService),\n    __param(11, ILanguageConfigurationService)\n], ReferenceWidget);\nexport { ReferenceWidget };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { CountBadge } from '../../../../../base/browser/ui/countBadge/countBadge.js';\nimport { HighlightedLabel } from '../../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\nimport { IconLabel } from '../../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { createMatches, FuzzyScore } from '../../../../../base/common/filters.js';\nimport { getBaseLabel } from '../../../../../base/common/labels.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { basename, dirname } from '../../../../../base/common/resources.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { localize } from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { attachBadgeStyler } from '../../../../../platform/theme/common/styler.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { FileReferences, OneReference, ReferencesModel } from '../referencesModel.js';\nlet DataSource = class DataSource {\n    constructor(_resolverService) {\n        this._resolverService = _resolverService;\n    }\n    hasChildren(element) {\n        if (element instanceof ReferencesModel) {\n            return true;\n        }\n        if (element instanceof FileReferences) {\n            return true;\n        }\n        return false;\n    }\n    getChildren(element) {\n        if (element instanceof ReferencesModel) {\n            return element.groups;\n        }\n        if (element instanceof FileReferences) {\n            return element.resolve(this._resolverService).then(val => {\n                // if (element.failure) {\n                // \t// refresh the element on failure so that\n                // \t// we can update its rendering\n                // \treturn tree.refresh(element).then(() => val.children);\n                // }\n                return val.children;\n            });\n        }\n        throw new Error('bad tree');\n    }\n};\nDataSource = __decorate([\n    __param(0, ITextModelService)\n], DataSource);\nexport { DataSource };\n//#endregion\nexport class Delegate {\n    getHeight() {\n        return 23;\n    }\n    getTemplateId(element) {\n        if (element instanceof FileReferences) {\n            return FileReferencesRenderer.id;\n        }\n        else {\n            return OneReferenceRenderer.id;\n        }\n    }\n}\nlet StringRepresentationProvider = class StringRepresentationProvider {\n    constructor(_keybindingService) {\n        this._keybindingService = _keybindingService;\n    }\n    getKeyboardNavigationLabel(element) {\n        var _a;\n        if (element instanceof OneReference) {\n            const parts = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n            if (parts) {\n                return parts.value;\n            }\n        }\n        // FileReferences or unresolved OneReference\n        return basename(element.uri);\n    }\n};\nStringRepresentationProvider = __decorate([\n    __param(0, IKeybindingService)\n], StringRepresentationProvider);\nexport { StringRepresentationProvider };\nexport class IdentityProvider {\n    getId(element) {\n        return element instanceof OneReference ? element.id : element.uri;\n    }\n}\n//#region render: File\nlet FileReferencesTemplate = class FileReferencesTemplate extends Disposable {\n    constructor(container, _uriLabel, themeService) {\n        super();\n        this._uriLabel = _uriLabel;\n        const parent = document.createElement('div');\n        parent.classList.add('reference-file');\n        this.file = this._register(new IconLabel(parent, { supportHighlights: true }));\n        this.badge = new CountBadge(dom.append(parent, dom.$('.count')));\n        this._register(attachBadgeStyler(this.badge, themeService));\n        container.appendChild(parent);\n    }\n    set(element, matches) {\n        let parent = dirname(element.uri);\n        this.file.setLabel(getBaseLabel(element.uri), this._uriLabel.getUriLabel(parent, { relative: true }), { title: this._uriLabel.getUriLabel(element.uri), matches });\n        const len = element.children.length;\n        this.badge.setCount(len);\n        if (len > 1) {\n            this.badge.setTitleFormat(localize('referencesCount', \"{0} references\", len));\n        }\n        else {\n            this.badge.setTitleFormat(localize('referenceCount', \"{0} reference\", len));\n        }\n    }\n};\nFileReferencesTemplate = __decorate([\n    __param(1, ILabelService),\n    __param(2, IThemeService)\n], FileReferencesTemplate);\nlet FileReferencesRenderer = class FileReferencesRenderer {\n    constructor(_instantiationService) {\n        this._instantiationService = _instantiationService;\n        this.templateId = FileReferencesRenderer.id;\n    }\n    renderTemplate(container) {\n        return this._instantiationService.createInstance(FileReferencesTemplate, container);\n    }\n    renderElement(node, index, template) {\n        template.set(node.element, createMatches(node.filterData));\n    }\n    disposeTemplate(templateData) {\n        templateData.dispose();\n    }\n};\nFileReferencesRenderer.id = 'FileReferencesRenderer';\nFileReferencesRenderer = __decorate([\n    __param(0, IInstantiationService)\n], FileReferencesRenderer);\nexport { FileReferencesRenderer };\n//#endregion\n//#region render: Reference\nclass OneReferenceTemplate {\n    constructor(container) {\n        this.label = new HighlightedLabel(container);\n    }\n    set(element, score) {\n        var _a;\n        const preview = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n        if (!preview || !preview.value) {\n            // this means we FAILED to resolve the document or the value is the empty string\n            this.label.set(`${basename(element.uri)}:${element.range.startLineNumber + 1}:${element.range.startColumn + 1}`);\n        }\n        else {\n            // render search match as highlight unless\n            // we have score, then render the score\n            const { value, highlight } = preview;\n            if (score && !FuzzyScore.isDefault(score)) {\n                this.label.element.classList.toggle('referenceMatch', false);\n                this.label.set(value, createMatches(score));\n            }\n            else {\n                this.label.element.classList.toggle('referenceMatch', true);\n                this.label.set(value, [highlight]);\n            }\n        }\n    }\n}\nexport class OneReferenceRenderer {\n    constructor() {\n        this.templateId = OneReferenceRenderer.id;\n    }\n    renderTemplate(container) {\n        return new OneReferenceTemplate(container);\n    }\n    renderElement(node, index, templateData) {\n        templateData.set(node.element, node.filterData);\n    }\n    disposeTemplate() {\n    }\n}\nOneReferenceRenderer.id = 'OneReferenceRenderer';\n//#endregion\nexport class AccessibilityProvider {\n    getWidgetAriaLabel() {\n        return localize('treeAriaLabel', \"References\");\n    }\n    getAriaLabel(element) {\n        return element.ariaMessage;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { hasDriveLetter, isRootOrDriveLetter } from './extpath.js';\nimport { Schemas } from './network.js';\nimport { isWindows } from './platform.js';\nimport { basename } from './resources.js';\nimport { URI } from './uri.js';\nexport function getBaseLabel(resource) {\n    if (!resource) {\n        return undefined;\n    }\n    if (typeof resource === 'string') {\n        resource = URI.file(resource);\n    }\n    const base = basename(resource) || (resource.scheme === Schemas.file ? resource.fsPath : resource.path) /* can be empty string if '/' is passed in */;\n    // convert c: => C:\n    if (isWindows && isRootOrDriveLetter(base)) {\n        return normalizeDriveLetter(base);\n    }\n    return base;\n}\nexport function normalizeDriveLetter(path, continueAsWindows) {\n    if (hasDriveLetter(path, continueAsWindows)) {\n        return path.charAt(0).toUpperCase() + path.slice(1);\n    }\n    return path;\n}\nlet normalizedUserHomeCached = Object.create(null);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Emitter } from '../../../../base/common/event.js';\nimport { combinedDisposable, DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { EditorCommand, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nexport const ctxHasSymbols = new RawContextKey('hasSymbols', false, localize('hasSymbols', \"Whether there are symbol locations that can be navigated via keyboard-only.\"));\nexport const ISymbolNavigationService = createDecorator('ISymbolNavigationService');\nlet SymbolNavigationService = class SymbolNavigationService {\n    constructor(contextKeyService, _editorService, _notificationService, _keybindingService) {\n        this._editorService = _editorService;\n        this._notificationService = _notificationService;\n        this._keybindingService = _keybindingService;\n        this._currentModel = undefined;\n        this._currentIdx = -1;\n        this._ignoreEditorChange = false;\n        this._ctxHasSymbols = ctxHasSymbols.bindTo(contextKeyService);\n    }\n    reset() {\n        var _a, _b;\n        this._ctxHasSymbols.reset();\n        (_a = this._currentState) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentMessage) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._currentModel = undefined;\n        this._currentIdx = -1;\n    }\n    put(anchor) {\n        const refModel = anchor.parent.parent;\n        if (refModel.references.length <= 1) {\n            this.reset();\n            return;\n        }\n        this._currentModel = refModel;\n        this._currentIdx = refModel.references.indexOf(anchor);\n        this._ctxHasSymbols.set(true);\n        this._showMessage();\n        const editorState = new EditorState(this._editorService);\n        const listener = editorState.onDidChange(_ => {\n            if (this._ignoreEditorChange) {\n                return;\n            }\n            const editor = this._editorService.getActiveCodeEditor();\n            if (!editor) {\n                return;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!model || !position) {\n                return;\n            }\n            let seenUri = false;\n            let seenPosition = false;\n            for (const reference of refModel.references) {\n                if (isEqual(reference.uri, model.uri)) {\n                    seenUri = true;\n                    seenPosition = seenPosition || Range.containsPosition(reference.range, position);\n                }\n                else if (seenUri) {\n                    break;\n                }\n            }\n            if (!seenUri || !seenPosition) {\n                this.reset();\n            }\n        });\n        this._currentState = combinedDisposable(editorState, listener);\n    }\n    revealNext(source) {\n        if (!this._currentModel) {\n            return Promise.resolve();\n        }\n        // get next result and advance\n        this._currentIdx += 1;\n        this._currentIdx %= this._currentModel.references.length;\n        const reference = this._currentModel.references[this._currentIdx];\n        // status\n        this._showMessage();\n        // open editor, ignore events while that happens\n        this._ignoreEditorChange = true;\n        return this._editorService.openCodeEditor({\n            resource: reference.uri,\n            options: {\n                selection: Range.collapseToStart(reference.range),\n                selectionRevealType: 3 /* NearTopIfOutsideViewport */\n            }\n        }, source).finally(() => {\n            this._ignoreEditorChange = false;\n        });\n    }\n    _showMessage() {\n        var _a;\n        (_a = this._currentMessage) === null || _a === void 0 ? void 0 : _a.dispose();\n        const kb = this._keybindingService.lookupKeybinding('editor.gotoNextSymbolFromResult');\n        const message = kb\n            ? localize('location.kb', \"Symbol {0} of {1}, {2} for next\", this._currentIdx + 1, this._currentModel.references.length, kb.getLabel())\n            : localize('location', \"Symbol {0} of {1}\", this._currentIdx + 1, this._currentModel.references.length);\n        this._currentMessage = this._notificationService.status(message);\n    }\n};\nSymbolNavigationService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, ICodeEditorService),\n    __param(2, INotificationService),\n    __param(3, IKeybindingService)\n], SymbolNavigationService);\nregisterSingleton(ISymbolNavigationService, SymbolNavigationService, true);\nregisterEditorCommand(new class extends EditorCommand {\n    constructor() {\n        super({\n            id: 'editor.gotoNextSymbolFromResult',\n            precondition: ctxHasSymbols,\n            kbOpts: {\n                weight: 100 /* EditorContrib */,\n                primary: 70 /* F12 */\n            }\n        });\n    }\n    runEditorCommand(accessor, editor) {\n        return accessor.get(ISymbolNavigationService).revealNext(editor);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'editor.gotoNextSymbolFromResult.cancel',\n    weight: 100 /* EditorContrib */,\n    when: ctxHasSymbols,\n    primary: 9 /* Escape */,\n    handler(accessor) {\n        accessor.get(ISymbolNavigationService).reset();\n    }\n});\n//\nlet EditorState = class EditorState {\n    constructor(editorService) {\n        this._listener = new Map();\n        this._disposables = new DisposableStore();\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._disposables.add(editorService.onCodeEditorRemove(this._onDidRemoveEditor, this));\n        this._disposables.add(editorService.onCodeEditorAdd(this._onDidAddEditor, this));\n        editorService.listCodeEditors().forEach(this._onDidAddEditor, this);\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._onDidChange.dispose();\n        dispose(this._listener.values());\n    }\n    _onDidAddEditor(editor) {\n        this._listener.set(editor, combinedDisposable(editor.onDidChangeCursorPosition(_ => this._onDidChange.fire({ editor })), editor.onDidChangeModelContent(_ => this._onDidChange.fire({ editor }))));\n    }\n    _onDidRemoveEditor(editor) {\n        var _a;\n        (_a = this._listener.get(editor)) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._listener.delete(editor);\n    }\n};\nEditorState = __decorate([\n    __param(0, ICodeEditorService)\n], EditorState);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ReferencesModel } from './referencesModel.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nfunction getLocationLinks(model, position, registry, provide) {\n    const provider = registry.ordered(model);\n    // get results\n    const promises = provider.map((provider) => {\n        return Promise.resolve(provide(provider, model, position)).then(undefined, err => {\n            onUnexpectedExternalError(err);\n            return undefined;\n        });\n    });\n    return Promise.all(promises).then(values => {\n        const result = [];\n        for (let value of values) {\n            if (Array.isArray(value)) {\n                result.push(...value);\n            }\n            else if (value) {\n                result.push(value);\n            }\n        }\n        return result;\n    });\n}\nexport function getDefinitionsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideDefinition(model, position, token);\n    });\n}\nexport function getDeclarationsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideDeclaration(model, position, token);\n    });\n}\nexport function getImplementationsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideImplementation(model, position, token);\n    });\n}\nexport function getTypeDefinitionsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideTypeDefinition(model, position, token);\n    });\n}\nexport function getReferencesAtPosition(registry, model, position, compact, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => __awaiter(this, void 0, void 0, function* () {\n        const result = yield provider.provideReferences(model, position, { includeDeclaration: true }, token);\n        if (!compact || !result || result.length !== 2) {\n            return result;\n        }\n        const resultWithoutDeclaration = yield provider.provideReferences(model, position, { includeDeclaration: false }, token);\n        if (resultWithoutDeclaration && resultWithoutDeclaration.length === 1) {\n            return resultWithoutDeclaration;\n        }\n        return result;\n    }));\n}\n// -- API commands ----\nfunction _sortedAndDeduped(callback) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const rawLinks = yield callback();\n        const model = new ReferencesModel(rawLinks, '');\n        const modelLinks = model.references.map(ref => ref.link);\n        model.dispose();\n        return modelLinks;\n    });\n}\nregisterModelAndPositionCommand('_executeDefinitionProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeTypeDefinitionProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeDeclarationProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeReferenceProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeImplementationProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { HoverAction, HoverWidget } from '../../../../base/browser/ui/hover/hoverWidget.js';\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { TokenizationRegistry } from '../../../common/languages.js';\nimport { HoverOperation } from './hoverOperation.js';\nimport { HoverParticipantRegistry, HoverRangeAnchor } from './hoverTypes.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { Context as SuggestContext } from '../../suggest/browser/suggest.js';\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { Emitter } from '../../../../base/common/event.js';\nconst $ = dom.$;\nlet ContentHoverController = class ContentHoverController extends Disposable {\n    constructor(_editor, _instantiationService, _keybindingService) {\n        super();\n        this._editor = _editor;\n        this._instantiationService = _instantiationService;\n        this._keybindingService = _keybindingService;\n        this._widget = this._register(this._instantiationService.createInstance(ContentHoverWidget, this._editor));\n        this._decorationsChangerListener = this._register(new EditorDecorationsChangerListener(this._editor));\n        this._messages = [];\n        this._messagesAreComplete = false;\n        // Instantiate participants and sort them by `hoverOrdinal` which is relevant for rendering order.\n        this._participants = [];\n        for (const participant of HoverParticipantRegistry.getAll()) {\n            this._participants.push(this._instantiationService.createInstance(participant, this._editor));\n        }\n        this._participants.sort((p1, p2) => p1.hoverOrdinal - p2.hoverOrdinal);\n        this._computer = new ContentHoverComputer(this._editor, this._participants);\n        this._hoverOperation = this._register(new HoverOperation(this._editor, this._computer));\n        this._register(this._hoverOperation.onResult((result) => {\n            this._withResult(result.value, result.isComplete, result.hasLoadingMessage);\n        }));\n        this._register(this._decorationsChangerListener.onDidChangeModelDecorations(() => this._onModelDecorationsChanged()));\n        this._register(dom.addStandardDisposableListener(this._widget.getDomNode(), 'keydown', (e) => {\n            if (e.equals(9 /* Escape */)) {\n                this.hide();\n            }\n        }));\n        this._register(TokenizationRegistry.onDidChange(() => {\n            if (this._widget.position && this._computer.anchor && this._messages.length > 0) {\n                this._widget.clear();\n                this._renderMessages(this._computer.anchor, this._messages);\n            }\n        }));\n    }\n    _onModelDecorationsChanged() {\n        if (this._widget.position) {\n            // The decorations have changed and the hover is visible,\n            // we need to recompute the displayed text\n            this._hoverOperation.cancel();\n            if (!this._widget.isColorPickerVisible) { // TODO@Michel ensure that displayed text for other decorations is computed even if color picker is in place\n                this._hoverOperation.start(0 /* Delayed */);\n            }\n        }\n    }\n    maybeShowAt(mouseEvent) {\n        const anchorCandidates = [];\n        for (const participant of this._participants) {\n            if (participant.suggestHoverAnchor) {\n                const anchor = participant.suggestHoverAnchor(mouseEvent);\n                if (anchor) {\n                    anchorCandidates.push(anchor);\n                }\n            }\n        }\n        const target = mouseEvent.target;\n        if (target.type === 6 /* CONTENT_TEXT */) {\n            anchorCandidates.push(new HoverRangeAnchor(0, target.range));\n        }\n        if (target.type === 7 /* CONTENT_EMPTY */) {\n            const epsilon = this._editor.getOption(44 /* fontInfo */).typicalHalfwidthCharacterWidth / 2;\n            if (!target.detail.isAfterLines && typeof target.detail.horizontalDistanceToText === 'number' && target.detail.horizontalDistanceToText < epsilon) {\n                // Let hover kick in even when the mouse is technically in the empty area after a line, given the distance is small enough\n                anchorCandidates.push(new HoverRangeAnchor(0, target.range));\n            }\n        }\n        if (anchorCandidates.length === 0) {\n            return false;\n        }\n        anchorCandidates.sort((a, b) => b.priority - a.priority);\n        this._startShowingAt(anchorCandidates[0], 0 /* Delayed */, false);\n        return true;\n    }\n    startShowingAtRange(range, mode, focus) {\n        this._startShowingAt(new HoverRangeAnchor(0, range), mode, focus);\n    }\n    _startShowingAt(anchor, mode, focus) {\n        if (this._computer.anchor && this._computer.anchor.equals(anchor)) {\n            // We have to show the widget at the exact same range as before, so no work is needed\n            return;\n        }\n        this._hoverOperation.cancel();\n        if (this._widget.position) {\n            // The range might have changed, but the hover is visible\n            // Instead of hiding it completely, filter out messages that are still in the new range and\n            // kick off a new computation\n            if (!this._computer.anchor || !anchor.canAdoptVisibleHover(this._computer.anchor, this._widget.position)) {\n                this.hide();\n            }\n            else {\n                const filteredMessages = this._messages.filter((m) => m.isValidForHoverAnchor(anchor));\n                if (filteredMessages.length === 0) {\n                    this.hide();\n                }\n                else if (filteredMessages.length === this._messages.length && this._messagesAreComplete) {\n                    // no change\n                    return;\n                }\n                else {\n                    this._renderMessages(anchor, filteredMessages);\n                }\n            }\n        }\n        this._computer.anchor = anchor;\n        this._computer.shouldFocus = focus;\n        this._hoverOperation.start(mode);\n    }\n    hide() {\n        this._computer.anchor = null;\n        this._hoverOperation.cancel();\n        this._widget.hide();\n    }\n    isColorPickerVisible() {\n        return this._widget.isColorPickerVisible;\n    }\n    _addLoadingMessage(result) {\n        if (this._computer.anchor) {\n            for (const participant of this._participants) {\n                if (participant.createLoadingMessage) {\n                    const loadingMessage = participant.createLoadingMessage(this._computer.anchor);\n                    if (loadingMessage) {\n                        return result.slice(0).concat([loadingMessage]);\n                    }\n                }\n            }\n        }\n        return result;\n    }\n    _withResult(result, isComplete, hasLoadingMessage) {\n        this._messages = (hasLoadingMessage ? this._addLoadingMessage(result) : result);\n        this._messagesAreComplete = isComplete;\n        if (this._computer.anchor && this._messages.length > 0) {\n            this._renderMessages(this._computer.anchor, this._messages);\n        }\n        else if (isComplete) {\n            this.hide();\n        }\n    }\n    _renderMessages(anchor, messages) {\n        // update column from which to show\n        let renderColumn = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\n        let highlightRange = messages[0].range;\n        let forceShowAtRange = null;\n        for (const msg of messages) {\n            renderColumn = Math.min(renderColumn, msg.range.startColumn);\n            highlightRange = Range.plusRange(highlightRange, msg.range);\n            if (msg.forceShowAtRange) {\n                forceShowAtRange = msg.range;\n            }\n        }\n        const disposables = new DisposableStore();\n        const statusBar = disposables.add(new EditorHoverStatusBar(this._keybindingService));\n        const fragment = document.createDocumentFragment();\n        let colorPicker = null;\n        const context = {\n            fragment,\n            statusBar,\n            setColorPicker: (widget) => colorPicker = widget,\n            onContentsChanged: () => this._widget.onContentsChanged(),\n            hide: () => this.hide()\n        };\n        for (const participant of this._participants) {\n            const hoverParts = messages.filter(msg => msg.owner === participant);\n            if (hoverParts.length > 0) {\n                disposables.add(participant.renderHoverParts(context, hoverParts));\n            }\n        }\n        if (statusBar.hasContent) {\n            fragment.appendChild(statusBar.hoverElement);\n        }\n        if (fragment.hasChildNodes()) {\n            if (highlightRange) {\n                const highlightDecorations = this._decorationsChangerListener.deltaDecorations([], [{\n                        range: highlightRange,\n                        options: ContentHoverController._DECORATION_OPTIONS\n                    }]);\n                disposables.add(toDisposable(() => {\n                    this._decorationsChangerListener.deltaDecorations(highlightDecorations, []);\n                }));\n            }\n            this._widget.showAt(fragment, new ContentHoverVisibleData(colorPicker, forceShowAtRange ? forceShowAtRange.getStartPosition() : new Position(anchor.range.startLineNumber, renderColumn), forceShowAtRange ? forceShowAtRange : highlightRange, this._editor.getOption(53 /* hover */).above, this._computer.shouldFocus, disposables));\n        }\n        else {\n            disposables.dispose();\n        }\n    }\n};\nContentHoverController._DECORATION_OPTIONS = ModelDecorationOptions.register({\n    description: 'content-hover-highlight',\n    className: 'hoverHighlight'\n});\nContentHoverController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IKeybindingService)\n], ContentHoverController);\nexport { ContentHoverController };\n/**\n * Allows listening to `ICodeEditor.onDidChangeModelDecorations` and ignores the change caused by itself.\n */\nclass EditorDecorationsChangerListener extends Disposable {\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._onDidChangeModelDecorations = this._register(new Emitter());\n        this.onDidChangeModelDecorations = this._onDidChangeModelDecorations.event;\n        this._isChangingDecorations = false;\n        this._register(this._editor.onDidChangeModelDecorations((e) => {\n            if (this._isChangingDecorations) {\n                return;\n            }\n            this._onDidChangeModelDecorations.fire(e);\n        }));\n    }\n    deltaDecorations(oldDecorations, newDecorations) {\n        try {\n            this._isChangingDecorations = true;\n            return this._editor.deltaDecorations(oldDecorations, newDecorations);\n        }\n        finally {\n            this._isChangingDecorations = false;\n        }\n    }\n}\nclass ContentHoverVisibleData {\n    constructor(colorPicker, showAtPosition, showAtRange, preferAbove, stoleFocus, disposables) {\n        this.colorPicker = colorPicker;\n        this.showAtPosition = showAtPosition;\n        this.showAtRange = showAtRange;\n        this.preferAbove = preferAbove;\n        this.stoleFocus = stoleFocus;\n        this.disposables = disposables;\n    }\n}\nlet ContentHoverWidget = class ContentHoverWidget extends Disposable {\n    constructor(_editor, _contextKeyService) {\n        super();\n        this._editor = _editor;\n        this._contextKeyService = _contextKeyService;\n        this.allowEditorOverflow = true;\n        this._hoverVisibleKey = EditorContextKeys.hoverVisible.bindTo(this._contextKeyService);\n        this._hover = this._register(new HoverWidget());\n        this._visibleData = null;\n        this._register(this._editor.onDidLayoutChange(() => this._layout()));\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(44 /* fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._setVisibleData(null);\n        this._layout();\n        this._editor.addContentWidget(this);\n    }\n    /**\n     * Returns `null` if the hover is not visible.\n     */\n    get position() {\n        var _a, _b;\n        return (_b = (_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.showAtPosition) !== null && _b !== void 0 ? _b : null;\n    }\n    get isColorPickerVisible() {\n        var _a;\n        return Boolean((_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.colorPicker);\n    }\n    dispose() {\n        this._editor.removeContentWidget(this);\n        if (this._visibleData) {\n            this._visibleData.disposables.dispose();\n        }\n        super.dispose();\n    }\n    getId() {\n        return ContentHoverWidget.ID;\n    }\n    getDomNode() {\n        return this._hover.containerDomNode;\n    }\n    getPosition() {\n        if (!this._visibleData) {\n            return null;\n        }\n        let preferAbove = this._visibleData.preferAbove;\n        if (!preferAbove && this._contextKeyService.getContextKeyValue(SuggestContext.Visible.key)) {\n            // Prefer rendering above if the suggest widget is visible\n            preferAbove = true;\n        }\n        return {\n            position: this._visibleData.showAtPosition,\n            range: this._visibleData.showAtRange,\n            preference: (preferAbove\n                ? [1 /* ABOVE */, 2 /* BELOW */]\n                : [2 /* BELOW */, 1 /* ABOVE */]),\n        };\n    }\n    _setVisibleData(visibleData) {\n        if (this._visibleData) {\n            this._visibleData.disposables.dispose();\n        }\n        this._visibleData = visibleData;\n        this._hoverVisibleKey.set(!!this._visibleData);\n        this._hover.containerDomNode.classList.toggle('hidden', !this._visibleData);\n    }\n    _layout() {\n        const height = Math.max(this._editor.getLayoutInfo().height / 4, 250);\n        const { fontSize, lineHeight } = this._editor.getOption(44 /* fontInfo */);\n        this._hover.contentsDomNode.style.fontSize = `${fontSize}px`;\n        this._hover.contentsDomNode.style.lineHeight = `${lineHeight / fontSize}`;\n        this._hover.contentsDomNode.style.maxHeight = `${height}px`;\n        this._hover.contentsDomNode.style.maxWidth = `${Math.max(this._editor.getLayoutInfo().width * 0.66, 500)}px`;\n    }\n    _updateFont() {\n        const codeClasses = Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName('code'));\n        codeClasses.forEach(node => this._editor.applyFontInfo(node));\n    }\n    showAt(node, visibleData) {\n        this._setVisibleData(visibleData);\n        this._hover.contentsDomNode.textContent = '';\n        this._hover.contentsDomNode.appendChild(node);\n        this._hover.contentsDomNode.style.paddingBottom = '';\n        this._updateFont();\n        this._editor.layoutContentWidget(this);\n        this.onContentsChanged();\n        // Simply force a synchronous render on the editor\n        // such that the widget does not really render with left = '0px'\n        this._editor.render();\n        // See https://github.com/microsoft/vscode/issues/140339\n        // TODO: Doing a second layout of the hover after force rendering the editor\n        this._editor.layoutContentWidget(this);\n        this.onContentsChanged();\n        if (visibleData.stoleFocus) {\n            this._hover.containerDomNode.focus();\n        }\n        if (visibleData.colorPicker) {\n            visibleData.colorPicker.layout();\n        }\n    }\n    hide() {\n        if (this._visibleData) {\n            const stoleFocus = this._visibleData.stoleFocus;\n            this._setVisibleData(null);\n            this._editor.layoutContentWidget(this);\n            if (stoleFocus) {\n                this._editor.focus();\n            }\n        }\n    }\n    onContentsChanged() {\n        this._hover.onContentsChanged();\n        const scrollDimensions = this._hover.scrollbar.getScrollDimensions();\n        const hasHorizontalScrollbar = (scrollDimensions.scrollWidth > scrollDimensions.width);\n        if (hasHorizontalScrollbar) {\n            // There is just a horizontal scrollbar\n            const extraBottomPadding = `${this._hover.scrollbar.options.horizontalScrollbarSize}px`;\n            if (this._hover.contentsDomNode.style.paddingBottom !== extraBottomPadding) {\n                this._hover.contentsDomNode.style.paddingBottom = extraBottomPadding;\n                this._editor.layoutContentWidget(this);\n                this._hover.onContentsChanged();\n            }\n        }\n    }\n    clear() {\n        this._hover.contentsDomNode.textContent = '';\n    }\n};\nContentHoverWidget.ID = 'editor.contrib.contentHoverWidget';\nContentHoverWidget = __decorate([\n    __param(1, IContextKeyService)\n], ContentHoverWidget);\nexport { ContentHoverWidget };\nlet EditorHoverStatusBar = class EditorHoverStatusBar extends Disposable {\n    constructor(_keybindingService) {\n        super();\n        this._keybindingService = _keybindingService;\n        this._hasContent = false;\n        this.hoverElement = $('div.hover-row.status-bar');\n        this.actionsElement = dom.append(this.hoverElement, $('div.actions'));\n    }\n    get hasContent() {\n        return this._hasContent;\n    }\n    addAction(actionOptions) {\n        const keybinding = this._keybindingService.lookupKeybinding(actionOptions.commandId);\n        const keybindingLabel = keybinding ? keybinding.getLabel() : null;\n        this._hasContent = true;\n        return this._register(HoverAction.render(this.actionsElement, actionOptions, keybindingLabel));\n    }\n    append(element) {\n        const result = dom.append(this.actionsElement, element);\n        this._hasContent = true;\n        return result;\n    }\n};\nEditorHoverStatusBar = __decorate([\n    __param(0, IKeybindingService)\n], EditorHoverStatusBar);\nclass ContentHoverComputer {\n    constructor(_editor, _participants) {\n        this._editor = _editor;\n        this._participants = _participants;\n        this._anchor = null;\n        this._shouldFocus = false;\n    }\n    get anchor() { return this._anchor; }\n    set anchor(value) { this._anchor = value; }\n    get shouldFocus() { return this._shouldFocus; }\n    set shouldFocus(value) { this._shouldFocus = value; }\n    static _getLineDecorations(editor, anchor) {\n        if (anchor.type !== 1 /* Range */) {\n            return [];\n        }\n        const model = editor.getModel();\n        const lineNumber = anchor.range.startLineNumber;\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        return editor.getLineDecorations(lineNumber).filter((d) => {\n            if (d.options.isWholeLine) {\n                return true;\n            }\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n            if (d.options.showIfCollapsed) {\n                // Relax check around `showIfCollapsed` decorations to also include +/- 1 character\n                if (startColumn > anchor.range.startColumn + 1 || anchor.range.endColumn - 1 > endColumn) {\n                    return false;\n                }\n            }\n            else {\n                if (startColumn > anchor.range.startColumn || anchor.range.endColumn > endColumn) {\n                    return false;\n                }\n            }\n            return true;\n        });\n    }\n    computeAsync(token) {\n        const anchor = this._anchor;\n        if (!this._editor.hasModel() || !anchor) {\n            return AsyncIterableObject.EMPTY;\n        }\n        const lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, anchor);\n        return AsyncIterableObject.merge(this._participants.map((participant) => {\n            if (!participant.computeAsync) {\n                return AsyncIterableObject.EMPTY;\n            }\n            return participant.computeAsync(anchor, lineDecorations, token);\n        }));\n    }\n    computeSync() {\n        if (!this._editor.hasModel() || !this._anchor) {\n            return [];\n        }\n        const lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, this._anchor);\n        let result = [];\n        for (const participant of this._participants) {\n            result = result.concat(participant.computeSync(this._anchor, lineDecorations));\n        }\n        return coalesce(result);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './hover.css';\nconst $ = dom.$;\nexport class HoverWidget extends Disposable {\n    constructor() {\n        super();\n        this.containerDomNode = document.createElement('div');\n        this.containerDomNode.className = 'monaco-hover';\n        this.containerDomNode.tabIndex = 0;\n        this.containerDomNode.setAttribute('role', 'tooltip');\n        this.contentsDomNode = document.createElement('div');\n        this.contentsDomNode.className = 'monaco-hover-content';\n        this.scrollbar = this._register(new DomScrollableElement(this.contentsDomNode, {\n            consumeMouseWheelIfScrollbarIsNeeded: true\n        }));\n        this.containerDomNode.appendChild(this.scrollbar.getDomNode());\n    }\n    onContentsChanged() {\n        this.scrollbar.scanDomNode();\n    }\n}\nexport class HoverAction extends Disposable {\n    constructor(parent, actionOptions, keybindingLabel) {\n        super();\n        this.actionContainer = dom.append(parent, $('div.action-container'));\n        this.actionContainer.setAttribute('tabindex', '0');\n        this.action = dom.append(this.actionContainer, $('a.action'));\n        this.action.setAttribute('role', 'button');\n        if (actionOptions.iconClass) {\n            dom.append(this.action, $(`span.icon.${actionOptions.iconClass}`));\n        }\n        const label = dom.append(this.action, $('span'));\n        label.textContent = keybindingLabel ? `${actionOptions.label} (${keybindingLabel})` : actionOptions.label;\n        this._register(dom.addDisposableListener(this.actionContainer, dom.EventType.CLICK, e => {\n            e.stopPropagation();\n            e.preventDefault();\n            actionOptions.run(this.actionContainer);\n        }));\n        this._register(dom.addDisposableListener(this.actionContainer, dom.EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(3 /* Enter */)) {\n                e.stopPropagation();\n                e.preventDefault();\n                actionOptions.run(this.actionContainer);\n            }\n        }));\n        this.setEnabled(true);\n    }\n    static render(parent, actionOptions, keybindingLabel) {\n        return new HoverAction(parent, actionOptions, keybindingLabel);\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.actionContainer.classList.remove('disabled');\n            this.actionContainer.removeAttribute('aria-disabled');\n        }\n        else {\n            this.actionContainer.classList.add('disabled');\n            this.actionContainer.setAttribute('aria-disabled', 'true');\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport { createCancelableAsyncIterable, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nexport class HoverResult {\n    constructor(value, isComplete, hasLoadingMessage) {\n        this.value = value;\n        this.isComplete = isComplete;\n        this.hasLoadingMessage = hasLoadingMessage;\n    }\n}\n/**\n * Computing the hover is very fine tuned.\n *\n * Suppose the hover delay is 300ms (the default). Then, when resting the mouse at an anchor:\n * - at 150ms, the async computation is triggered (i.e. semantic hover)\n *   - if async results already come in, they are not rendered yet.\n * - at 300ms, the sync computation is triggered (i.e. decorations, markers)\n *   - if there are sync or async results, they are rendered.\n * - at 900ms, if the async computation hasn't finished, a \"Loading...\" result is added.\n */\nexport class HoverOperation extends Disposable {\n    constructor(_editor, _computer) {\n        super();\n        this._editor = _editor;\n        this._computer = _computer;\n        this._onResult = this._register(new Emitter());\n        this.onResult = this._onResult.event;\n        this._firstWaitScheduler = this._register(new RunOnceScheduler(() => this._triggerAsyncComputation(), 0));\n        this._secondWaitScheduler = this._register(new RunOnceScheduler(() => this._triggerSyncComputation(), 0));\n        this._loadingMessageScheduler = this._register(new RunOnceScheduler(() => this._triggerLoadingMessage(), 0));\n        this._state = 0 /* Idle */;\n        this._asyncIterable = null;\n        this._asyncIterableDone = false;\n        this._result = [];\n    }\n    dispose() {\n        if (this._asyncIterable) {\n            this._asyncIterable.cancel();\n            this._asyncIterable = null;\n        }\n        super.dispose();\n    }\n    get _hoverTime() {\n        return this._editor.getOption(53 /* hover */).delay;\n    }\n    get _firstWaitTime() {\n        return this._hoverTime / 2;\n    }\n    get _secondWaitTime() {\n        return this._hoverTime - this._firstWaitTime;\n    }\n    get _loadingMessageTime() {\n        return 3 * this._hoverTime;\n    }\n    _setState(state, fireResult = true) {\n        this._state = state;\n        if (fireResult) {\n            this._fireResult();\n        }\n    }\n    _triggerAsyncComputation() {\n        this._setState(2 /* SecondWait */);\n        this._secondWaitScheduler.schedule(this._secondWaitTime);\n        if (this._computer.computeAsync) {\n            this._asyncIterableDone = false;\n            this._asyncIterable = createCancelableAsyncIterable(token => this._computer.computeAsync(token));\n            (() => __awaiter(this, void 0, void 0, function* () {\n                var e_1, _a;\n                try {\n                    try {\n                        for (var _b = __asyncValues(this._asyncIterable), _c; _c = yield _b.next(), !_c.done;) {\n                            const item = _c.value;\n                            if (item) {\n                                this._result.push(item);\n                                this._fireResult();\n                            }\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_c && !_c.done && (_a = _b.return)) yield _a.call(_b);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                    this._asyncIterableDone = true;\n                    if (this._state === 3 /* WaitingForAsync */ || this._state === 4 /* WaitingForAsyncShowingLoading */) {\n                        this._setState(0 /* Idle */);\n                    }\n                }\n                catch (e) {\n                    onUnexpectedError(e);\n                }\n            }))();\n        }\n        else {\n            this._asyncIterableDone = true;\n        }\n    }\n    _triggerSyncComputation() {\n        if (this._computer.computeSync) {\n            this._result = this._result.concat(this._computer.computeSync());\n        }\n        this._setState(this._asyncIterableDone ? 0 /* Idle */ : 3 /* WaitingForAsync */);\n    }\n    _triggerLoadingMessage() {\n        if (this._state === 3 /* WaitingForAsync */) {\n            this._setState(4 /* WaitingForAsyncShowingLoading */);\n        }\n    }\n    _fireResult() {\n        if (this._state === 1 /* FirstWait */ || this._state === 2 /* SecondWait */) {\n            // Do not send out results before the hover time\n            return;\n        }\n        const isComplete = (this._state === 0 /* Idle */);\n        const hasLoadingMessage = (this._state === 4 /* WaitingForAsyncShowingLoading */);\n        this._onResult.fire(new HoverResult(this._result.slice(0), isComplete, hasLoadingMessage));\n    }\n    start(mode) {\n        if (mode === 0 /* Delayed */) {\n            if (this._state === 0 /* Idle */) {\n                this._setState(1 /* FirstWait */);\n                this._firstWaitScheduler.schedule(this._firstWaitTime);\n                this._loadingMessageScheduler.schedule(this._loadingMessageTime);\n            }\n        }\n        else {\n            switch (this._state) {\n                case 0 /* Idle */:\n                    this._triggerAsyncComputation();\n                    this._secondWaitScheduler.cancel();\n                    this._triggerSyncComputation();\n                    break;\n                case 2 /* SecondWait */:\n                    this._secondWaitScheduler.cancel();\n                    this._triggerSyncComputation();\n                    break;\n            }\n        }\n    }\n    cancel() {\n        this._firstWaitScheduler.cancel();\n        this._secondWaitScheduler.cancel();\n        this._loadingMessageScheduler.cancel();\n        if (this._asyncIterable) {\n            this._asyncIterable.cancel();\n            this._asyncIterable = null;\n        }\n        this._result = [];\n        this._setState(0 /* Idle */, false);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class HoverRangeAnchor {\n    constructor(priority, range) {\n        this.priority = priority;\n        this.range = range;\n        this.type = 1 /* Range */;\n    }\n    equals(other) {\n        return (other.type === 1 /* Range */ && this.range.equalsRange(other.range));\n    }\n    canAdoptVisibleHover(lastAnchor, showAtPosition) {\n        return (lastAnchor.type === 1 /* Range */ && showAtPosition.lineNumber === this.range.startLineNumber);\n    }\n}\nexport class HoverForeignElementAnchor {\n    constructor(priority, owner, range) {\n        this.priority = priority;\n        this.owner = owner;\n        this.range = range;\n        this.type = 2 /* ForeignElement */;\n    }\n    equals(other) {\n        return (other.type === 2 /* ForeignElement */ && this.owner === other.owner);\n    }\n    canAdoptVisibleHover(lastAnchor, showAtPosition) {\n        return (lastAnchor.type === 2 /* ForeignElement */ && this.owner === lastAnchor.owner);\n    }\n}\nexport const HoverParticipantRegistry = (new class HoverParticipantRegistry {\n    constructor() {\n        this._participants = [];\n    }\n    register(ctor) {\n        this._participants.push(ctor);\n    }\n    getAll() {\n        return this._participants;\n    }\n}());\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { canceled, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { historyNavigationVisible } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nexport const Context = {\n    Visible: historyNavigationVisible,\n    DetailsVisible: new RawContextKey('suggestWidgetDetailsVisible', false, localize('suggestWidgetDetailsVisible', \"Whether suggestion details are visible\")),\n    MultipleSuggestions: new RawContextKey('suggestWidgetMultipleSuggestions', false, localize('suggestWidgetMultipleSuggestions', \"Whether there are multiple suggestions to pick from\")),\n    MakesTextEdit: new RawContextKey('suggestionMakesTextEdit', true, localize('suggestionMakesTextEdit', \"Whether inserting the current suggestion yields in a change or has everything already been typed\")),\n    AcceptSuggestionsOnEnter: new RawContextKey('acceptSuggestionOnEnter', true, localize('acceptSuggestionOnEnter', \"Whether suggestions are inserted when pressing Enter\")),\n    HasInsertAndReplaceRange: new RawContextKey('suggestionHasInsertAndReplaceRange', false, localize('suggestionHasInsertAndReplaceRange', \"Whether the current suggestion has insert and replace behaviour\")),\n    InsertMode: new RawContextKey('suggestionInsertMode', undefined, { type: 'string', description: localize('suggestionInsertMode', \"Whether the default behaviour is to insert or replace\") }),\n    CanResolve: new RawContextKey('suggestionCanResolve', false, localize('suggestionCanResolve', \"Whether the current suggestion supports to resolve further details\")),\n};\nexport const suggestWidgetStatusbarMenu = new MenuId('suggestWidgetStatusBar');\nexport class CompletionItem {\n    constructor(position, completion, container, provider) {\n        this.position = position;\n        this.completion = completion;\n        this.container = container;\n        this.provider = provider;\n        // validation\n        this.isInvalid = false;\n        // sorting, filtering\n        this.score = FuzzyScore.Default;\n        this.distance = 0;\n        this.textLabel = typeof completion.label === 'string'\n            ? completion.label\n            : completion.label.label;\n        // ensure lower-variants (perf)\n        this.labelLow = this.textLabel.toLowerCase();\n        // validate label\n        this.isInvalid = !this.textLabel;\n        this.sortTextLow = completion.sortText && completion.sortText.toLowerCase();\n        this.filterTextLow = completion.filterText && completion.filterText.toLowerCase();\n        // normalize ranges\n        if (Range.isIRange(completion.range)) {\n            this.editStart = new Position(completion.range.startLineNumber, completion.range.startColumn);\n            this.editInsertEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            this.editReplaceEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            // validate range\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range) || completion.range.startLineNumber !== position.lineNumber;\n        }\n        else {\n            this.editStart = new Position(completion.range.insert.startLineNumber, completion.range.insert.startColumn);\n            this.editInsertEnd = new Position(completion.range.insert.endLineNumber, completion.range.insert.endColumn);\n            this.editReplaceEnd = new Position(completion.range.replace.endLineNumber, completion.range.replace.endColumn);\n            // validate ranges\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range.insert) || Range.spansMultipleLines(completion.range.replace)\n                || completion.range.insert.startLineNumber !== position.lineNumber || completion.range.replace.startLineNumber !== position.lineNumber\n                || completion.range.insert.startColumn !== completion.range.replace.startColumn;\n        }\n        // create the suggestion resolver\n        if (typeof provider.resolveCompletionItem !== 'function') {\n            this._resolveCache = Promise.resolve();\n            this._isResolved = true;\n        }\n    }\n    // ---- resolving\n    get isResolved() {\n        return !!this._isResolved;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._resolveCache) {\n                const sub = token.onCancellationRequested(() => {\n                    this._resolveCache = undefined;\n                    this._isResolved = false;\n                });\n                this._resolveCache = Promise.resolve(this.provider.resolveCompletionItem(this.completion, token)).then(value => {\n                    Object.assign(this.completion, value);\n                    this._isResolved = true;\n                    sub.dispose();\n                }, err => {\n                    if (isCancellationError(err)) {\n                        // the IPC queue will reject the request with the\n                        // cancellation error -> reset cached\n                        this._resolveCache = undefined;\n                        this._isResolved = false;\n                    }\n                });\n            }\n            return this._resolveCache;\n        });\n    }\n}\nexport class CompletionOptions {\n    constructor(snippetSortOrder = 2 /* Bottom */, kindFilter = new Set(), providerFilter = new Set(), showDeprecated = true) {\n        this.snippetSortOrder = snippetSortOrder;\n        this.kindFilter = kindFilter;\n        this.providerFilter = providerFilter;\n        this.showDeprecated = showDeprecated;\n    }\n}\nCompletionOptions.default = new CompletionOptions();\nlet _snippetSuggestSupport;\nexport function getSnippetSuggestSupport() {\n    return _snippetSuggestSupport;\n}\nexport class CompletionItemModel {\n    constructor(items, needsClipboard, durations, disposable) {\n        this.items = items;\n        this.needsClipboard = needsClipboard;\n        this.durations = durations;\n        this.disposable = disposable;\n    }\n}\nexport function provideSuggestionItems(registry, model, position, options = CompletionOptions.default, context = { triggerKind: 0 /* Invoke */ }, token = CancellationToken.None) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const sw = new StopWatch(true);\n        position = position.clone();\n        const word = model.getWordAtPosition(position);\n        const defaultReplaceRange = word ? new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn) : Range.fromPositions(position);\n        const defaultRange = { replace: defaultReplaceRange, insert: defaultReplaceRange.setEndPosition(position.lineNumber, position.column) };\n        const result = [];\n        const disposables = new DisposableStore();\n        const durations = [];\n        let needsClipboard = false;\n        const onCompletionList = (provider, container, sw) => {\n            var _a, _b, _c;\n            let didAddResult = false;\n            if (!container) {\n                return didAddResult;\n            }\n            for (let suggestion of container.suggestions) {\n                if (!options.kindFilter.has(suggestion.kind)) {\n                    // skip if not showing deprecated suggestions\n                    if (!options.showDeprecated && ((_a = suggestion === null || suggestion === void 0 ? void 0 : suggestion.tags) === null || _a === void 0 ? void 0 : _a.includes(1 /* Deprecated */))) {\n                        continue;\n                    }\n                    // fill in default range when missing\n                    if (!suggestion.range) {\n                        suggestion.range = defaultRange;\n                    }\n                    // fill in default sortText when missing\n                    if (!suggestion.sortText) {\n                        suggestion.sortText = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.label;\n                    }\n                    if (!needsClipboard && suggestion.insertTextRules && suggestion.insertTextRules & 4 /* InsertAsSnippet */) {\n                        needsClipboard = SnippetParser.guessNeedsClipboard(suggestion.insertText);\n                    }\n                    result.push(new CompletionItem(position, suggestion, container, provider));\n                    didAddResult = true;\n                }\n            }\n            if (isDisposable(container)) {\n                disposables.add(container);\n            }\n            durations.push({\n                providerName: (_b = provider._debugDisplayName) !== null && _b !== void 0 ? _b : 'unknown_provider', elapsedProvider: (_c = container.duration) !== null && _c !== void 0 ? _c : -1, elapsedOverall: sw.elapsed()\n            });\n            return didAddResult;\n        };\n        // ask for snippets in parallel to asking \"real\" providers. Only do something if configured to\n        // do so - no snippet filter, no special-providers-only request\n        const snippetCompletions = (() => __awaiter(this, void 0, void 0, function* () {\n            if (!_snippetSuggestSupport || options.kindFilter.has(27 /* Snippet */)) {\n                return;\n            }\n            if (options.providerFilter.size > 0 && !options.providerFilter.has(_snippetSuggestSupport)) {\n                return;\n            }\n            const sw = new StopWatch(true);\n            const list = yield _snippetSuggestSupport.provideCompletionItems(model, position, context, token);\n            onCompletionList(_snippetSuggestSupport, list, sw);\n        }))();\n        // add suggestions from contributed providers - providers are ordered in groups of\n        // equal score and once a group produces a result the process stops\n        // get provider groups, always add snippet suggestion provider\n        for (let providerGroup of registry.orderedGroups(model)) {\n            // for each support in the group ask for suggestions\n            let didAddResult = false;\n            yield Promise.all(providerGroup.map((provider) => __awaiter(this, void 0, void 0, function* () {\n                if (options.providerFilter.size > 0 && !options.providerFilter.has(provider)) {\n                    return;\n                }\n                try {\n                    const sw = new StopWatch(true);\n                    const list = yield provider.provideCompletionItems(model, position, context, token);\n                    didAddResult = onCompletionList(provider, list, sw) || didAddResult;\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n            })));\n            if (didAddResult || token.isCancellationRequested) {\n                break;\n            }\n        }\n        yield snippetCompletions;\n        if (token.isCancellationRequested) {\n            disposables.dispose();\n            return Promise.reject(canceled());\n        }\n        return new CompletionItemModel(result.sort(getSuggestionComparator(options.snippetSortOrder)), needsClipboard, { entries: durations, elapsed: sw.elapsed() }, disposables);\n    });\n}\nfunction defaultComparator(a, b) {\n    // check with 'sortText'\n    if (a.sortTextLow && b.sortTextLow) {\n        if (a.sortTextLow < b.sortTextLow) {\n            return -1;\n        }\n        else if (a.sortTextLow > b.sortTextLow) {\n            return 1;\n        }\n    }\n    // check with 'label'\n    if (a.completion.label < b.completion.label) {\n        return -1;\n    }\n    else if (a.completion.label > b.completion.label) {\n        return 1;\n    }\n    // check with 'type'\n    return a.completion.kind - b.completion.kind;\n}\nfunction snippetUpComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* Snippet */) {\n            return -1;\n        }\n        else if (b.completion.kind === 27 /* Snippet */) {\n            return 1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nfunction snippetDownComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* Snippet */) {\n            return 1;\n        }\n        else if (b.completion.kind === 27 /* Snippet */) {\n            return -1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nconst _snippetComparators = new Map();\n_snippetComparators.set(0 /* Top */, snippetUpComparator);\n_snippetComparators.set(2 /* Bottom */, snippetDownComparator);\n_snippetComparators.set(1 /* Inline */, defaultComparator);\nexport function getSuggestionComparator(snippetConfig) {\n    return _snippetComparators.get(snippetConfig);\n}\nCommandsRegistry.registerCommand('_executeCompletionItemProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, position, triggerCharacter, maxItemsToResolve] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    assertType(typeof maxItemsToResolve === 'number' || !maxItemsToResolve);\n    const { completionProvider } = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = {\n            incomplete: false,\n            suggestions: []\n        };\n        const resolving = [];\n        const completions = yield provideSuggestionItems(completionProvider, ref.object.textEditorModel, Position.lift(position), undefined, { triggerCharacter, triggerKind: triggerCharacter ? 1 /* TriggerCharacter */ : 0 /* Invoke */ });\n        for (const item of completions.items) {\n            if (resolving.length < (maxItemsToResolve !== null && maxItemsToResolve !== void 0 ? maxItemsToResolve : 0)) {\n                resolving.push(item.resolve(CancellationToken.None));\n            }\n            result.incomplete = result.incomplete || item.container.incomplete;\n            result.suggestions.push(item.completion);\n        }\n        try {\n            yield Promise.all(resolving);\n            return result;\n        }\n        finally {\n            setTimeout(() => completions.disposable.dispose(), 100);\n        }\n    }\n    finally {\n        ref.dispose();\n    }\n}));\nlet _onlyOnceProvider;\nlet _onlyOnceSuggestions = [];\nexport function showSimpleSuggestions(accessor, editor, suggestions) {\n    const { completionProvider } = accessor.get(ILanguageFeaturesService);\n    if (!_onlyOnceProvider) {\n        _onlyOnceProvider = new class {\n            provideCompletionItems() {\n                let suggestions = _onlyOnceSuggestions.slice(0);\n                let result = { suggestions };\n                _onlyOnceSuggestions.length = 0;\n                return result;\n            }\n        };\n        completionProvider.register('*', _onlyOnceProvider);\n    }\n    setTimeout(() => {\n        var _a;\n        _onlyOnceSuggestions.push(...suggestions);\n        (_a = editor.getContribution('editor.contrib.suggestController')) === null || _a === void 0 ? void 0 : _a.triggerSuggest(new Set().add(_onlyOnceProvider));\n    }, 0);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class Scanner {\n    constructor() {\n        this.value = '';\n        this.pos = 0;\n    }\n    static isDigitCharacter(ch) {\n        return ch >= 48 /* Digit0 */ && ch <= 57 /* Digit9 */;\n    }\n    static isVariableCharacter(ch) {\n        return ch === 95 /* Underline */\n            || (ch >= 97 /* a */ && ch <= 122 /* z */)\n            || (ch >= 65 /* A */ && ch <= 90 /* Z */);\n    }\n    text(value) {\n        this.value = value;\n        this.pos = 0;\n    }\n    tokenText(token) {\n        return this.value.substr(token.pos, token.len);\n    }\n    next() {\n        if (this.pos >= this.value.length) {\n            return { type: 14 /* EOF */, pos: this.pos, len: 0 };\n        }\n        let pos = this.pos;\n        let len = 0;\n        let ch = this.value.charCodeAt(pos);\n        let type;\n        // static types\n        type = Scanner._table[ch];\n        if (typeof type === 'number') {\n            this.pos += 1;\n            return { type, pos, len: 1 };\n        }\n        // number\n        if (Scanner.isDigitCharacter(ch)) {\n            type = 8 /* Int */;\n            do {\n                len += 1;\n                ch = this.value.charCodeAt(pos + len);\n            } while (Scanner.isDigitCharacter(ch));\n            this.pos += len;\n            return { type, pos, len };\n        }\n        // variable name\n        if (Scanner.isVariableCharacter(ch)) {\n            type = 9 /* VariableName */;\n            do {\n                ch = this.value.charCodeAt(pos + (++len));\n            } while (Scanner.isVariableCharacter(ch) || Scanner.isDigitCharacter(ch));\n            this.pos += len;\n            return { type, pos, len };\n        }\n        // format\n        type = 10 /* Format */;\n        do {\n            len += 1;\n            ch = this.value.charCodeAt(pos + len);\n        } while (!isNaN(ch)\n            && typeof Scanner._table[ch] === 'undefined' // not static token\n            && !Scanner.isDigitCharacter(ch) // not number\n            && !Scanner.isVariableCharacter(ch) // not variable\n        );\n        this.pos += len;\n        return { type, pos, len };\n    }\n}\nScanner._table = {\n    [36 /* DollarSign */]: 0 /* Dollar */,\n    [58 /* Colon */]: 1 /* Colon */,\n    [44 /* Comma */]: 2 /* Comma */,\n    [123 /* OpenCurlyBrace */]: 3 /* CurlyOpen */,\n    [125 /* CloseCurlyBrace */]: 4 /* CurlyClose */,\n    [92 /* Backslash */]: 5 /* Backslash */,\n    [47 /* Slash */]: 6 /* Forwardslash */,\n    [124 /* Pipe */]: 7 /* Pipe */,\n    [43 /* Plus */]: 11 /* Plus */,\n    [45 /* Dash */]: 12 /* Dash */,\n    [63 /* QuestionMark */]: 13 /* QuestionMark */,\n};\nexport class Marker {\n    constructor() {\n        this._children = [];\n    }\n    appendChild(child) {\n        if (child instanceof Text && this._children[this._children.length - 1] instanceof Text) {\n            // this and previous child are text -> merge them\n            this._children[this._children.length - 1].value += child.value;\n        }\n        else {\n            // normal adoption of child\n            child.parent = this;\n            this._children.push(child);\n        }\n        return this;\n    }\n    replace(child, others) {\n        const { parent } = child;\n        const idx = parent.children.indexOf(child);\n        const newChildren = parent.children.slice(0);\n        newChildren.splice(idx, 1, ...others);\n        parent._children = newChildren;\n        (function _fixParent(children, parent) {\n            for (const child of children) {\n                child.parent = parent;\n                _fixParent(child.children, child);\n            }\n        })(others, parent);\n    }\n    get children() {\n        return this._children;\n    }\n    get snippet() {\n        let candidate = this;\n        while (true) {\n            if (!candidate) {\n                return undefined;\n            }\n            if (candidate instanceof TextmateSnippet) {\n                return candidate;\n            }\n            candidate = candidate.parent;\n        }\n    }\n    toString() {\n        return this.children.reduce((prev, cur) => prev + cur.toString(), '');\n    }\n    len() {\n        return 0;\n    }\n}\nexport class Text extends Marker {\n    constructor(value) {\n        super();\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n    len() {\n        return this.value.length;\n    }\n    clone() {\n        return new Text(this.value);\n    }\n}\nexport class TransformableMarker extends Marker {\n}\nexport class Placeholder extends TransformableMarker {\n    constructor(index) {\n        super();\n        this.index = index;\n    }\n    static compareByIndex(a, b) {\n        if (a.index === b.index) {\n            return 0;\n        }\n        else if (a.isFinalTabstop) {\n            return 1;\n        }\n        else if (b.isFinalTabstop) {\n            return -1;\n        }\n        else if (a.index < b.index) {\n            return -1;\n        }\n        else if (a.index > b.index) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    get isFinalTabstop() {\n        return this.index === 0;\n    }\n    get choice() {\n        return this._children.length === 1 && this._children[0] instanceof Choice\n            ? this._children[0]\n            : undefined;\n    }\n    clone() {\n        let ret = new Placeholder(this.index);\n        if (this.transform) {\n            ret.transform = this.transform.clone();\n        }\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nexport class Choice extends Marker {\n    constructor() {\n        super(...arguments);\n        this.options = [];\n    }\n    appendChild(marker) {\n        if (marker instanceof Text) {\n            marker.parent = this;\n            this.options.push(marker);\n        }\n        return this;\n    }\n    toString() {\n        return this.options[0].value;\n    }\n    len() {\n        return this.options[0].len();\n    }\n    clone() {\n        let ret = new Choice();\n        this.options.forEach(ret.appendChild, ret);\n        return ret;\n    }\n}\nexport class Transform extends Marker {\n    constructor() {\n        super(...arguments);\n        this.regexp = new RegExp('');\n    }\n    resolve(value) {\n        const _this = this;\n        let didMatch = false;\n        let ret = value.replace(this.regexp, function () {\n            didMatch = true;\n            return _this._replace(Array.prototype.slice.call(arguments, 0, -2));\n        });\n        // when the regex didn't match and when the transform has\n        // else branches, then run those\n        if (!didMatch && this._children.some(child => child instanceof FormatString && Boolean(child.elseValue))) {\n            ret = this._replace([]);\n        }\n        return ret;\n    }\n    _replace(groups) {\n        let ret = '';\n        for (const marker of this._children) {\n            if (marker instanceof FormatString) {\n                let value = groups[marker.index] || '';\n                value = marker.resolve(value);\n                ret += value;\n            }\n            else {\n                ret += marker.toString();\n            }\n        }\n        return ret;\n    }\n    toString() {\n        return '';\n    }\n    clone() {\n        let ret = new Transform();\n        ret.regexp = new RegExp(this.regexp.source, '' + (this.regexp.ignoreCase ? 'i' : '') + (this.regexp.global ? 'g' : ''));\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nexport class FormatString extends Marker {\n    constructor(index, shorthandName, ifValue, elseValue) {\n        super();\n        this.index = index;\n        this.shorthandName = shorthandName;\n        this.ifValue = ifValue;\n        this.elseValue = elseValue;\n    }\n    resolve(value) {\n        if (this.shorthandName === 'upcase') {\n            return !value ? '' : value.toLocaleUpperCase();\n        }\n        else if (this.shorthandName === 'downcase') {\n            return !value ? '' : value.toLocaleLowerCase();\n        }\n        else if (this.shorthandName === 'capitalize') {\n            return !value ? '' : (value[0].toLocaleUpperCase() + value.substr(1));\n        }\n        else if (this.shorthandName === 'pascalcase') {\n            return !value ? '' : this._toPascalCase(value);\n        }\n        else if (this.shorthandName === 'camelcase') {\n            return !value ? '' : this._toCamelCase(value);\n        }\n        else if (Boolean(value) && typeof this.ifValue === 'string') {\n            return this.ifValue;\n        }\n        else if (!Boolean(value) && typeof this.elseValue === 'string') {\n            return this.elseValue;\n        }\n        else {\n            return value || '';\n        }\n    }\n    _toPascalCase(value) {\n        const match = value.match(/[a-z0-9]+/gi);\n        if (!match) {\n            return value;\n        }\n        return match.map(word => {\n            return word.charAt(0).toUpperCase()\n                + word.substr(1).toLowerCase();\n        })\n            .join('');\n    }\n    _toCamelCase(value) {\n        const match = value.match(/[a-z0-9]+/gi);\n        if (!match) {\n            return value;\n        }\n        return match.map((word, index) => {\n            if (index === 0) {\n                return word.toLowerCase();\n            }\n            else {\n                return word.charAt(0).toUpperCase()\n                    + word.substr(1).toLowerCase();\n            }\n        })\n            .join('');\n    }\n    clone() {\n        let ret = new FormatString(this.index, this.shorthandName, this.ifValue, this.elseValue);\n        return ret;\n    }\n}\nexport class Variable extends TransformableMarker {\n    constructor(name) {\n        super();\n        this.name = name;\n    }\n    resolve(resolver) {\n        let value = resolver.resolve(this);\n        if (this.transform) {\n            value = this.transform.resolve(value || '');\n        }\n        if (value !== undefined) {\n            this._children = [new Text(value)];\n            return true;\n        }\n        return false;\n    }\n    clone() {\n        const ret = new Variable(this.name);\n        if (this.transform) {\n            ret.transform = this.transform.clone();\n        }\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nfunction walk(marker, visitor) {\n    const stack = [...marker];\n    while (stack.length > 0) {\n        const marker = stack.shift();\n        const recurse = visitor(marker);\n        if (!recurse) {\n            break;\n        }\n        stack.unshift(...marker.children);\n    }\n}\nexport class TextmateSnippet extends Marker {\n    get placeholderInfo() {\n        if (!this._placeholders) {\n            // fill in placeholders\n            let all = [];\n            let last;\n            this.walk(function (candidate) {\n                if (candidate instanceof Placeholder) {\n                    all.push(candidate);\n                    last = !last || last.index < candidate.index ? candidate : last;\n                }\n                return true;\n            });\n            this._placeholders = { all, last };\n        }\n        return this._placeholders;\n    }\n    get placeholders() {\n        const { all } = this.placeholderInfo;\n        return all;\n    }\n    offset(marker) {\n        let pos = 0;\n        let found = false;\n        this.walk(candidate => {\n            if (candidate === marker) {\n                found = true;\n                return false;\n            }\n            pos += candidate.len();\n            return true;\n        });\n        if (!found) {\n            return -1;\n        }\n        return pos;\n    }\n    fullLen(marker) {\n        let ret = 0;\n        walk([marker], marker => {\n            ret += marker.len();\n            return true;\n        });\n        return ret;\n    }\n    enclosingPlaceholders(placeholder) {\n        let ret = [];\n        let { parent } = placeholder;\n        while (parent) {\n            if (parent instanceof Placeholder) {\n                ret.push(parent);\n            }\n            parent = parent.parent;\n        }\n        return ret;\n    }\n    resolveVariables(resolver) {\n        this.walk(candidate => {\n            if (candidate instanceof Variable) {\n                if (candidate.resolve(resolver)) {\n                    this._placeholders = undefined;\n                }\n            }\n            return true;\n        });\n        return this;\n    }\n    appendChild(child) {\n        this._placeholders = undefined;\n        return super.appendChild(child);\n    }\n    replace(child, others) {\n        this._placeholders = undefined;\n        return super.replace(child, others);\n    }\n    clone() {\n        let ret = new TextmateSnippet();\n        this._children = this.children.map(child => child.clone());\n        return ret;\n    }\n    walk(visitor) {\n        walk(this.children, visitor);\n    }\n}\nexport class SnippetParser {\n    constructor() {\n        this._scanner = new Scanner();\n        this._token = { type: 14 /* EOF */, pos: 0, len: 0 };\n    }\n    static escape(value) {\n        return value.replace(/\\$|}|\\\\/g, '\\\\$&');\n    }\n    static guessNeedsClipboard(template) {\n        return /\\${?CLIPBOARD/.test(template);\n    }\n    parse(value, insertFinalTabstop, enforceFinalTabstop) {\n        this._scanner.text(value);\n        this._token = this._scanner.next();\n        const snippet = new TextmateSnippet();\n        while (this._parse(snippet)) {\n            // nothing\n        }\n        // fill in values for placeholders. the first placeholder of an index\n        // that has a value defines the value for all placeholders with that index\n        const placeholderDefaultValues = new Map();\n        const incompletePlaceholders = [];\n        let placeholderCount = 0;\n        snippet.walk(marker => {\n            if (marker instanceof Placeholder) {\n                placeholderCount += 1;\n                if (marker.isFinalTabstop) {\n                    placeholderDefaultValues.set(0, undefined);\n                }\n                else if (!placeholderDefaultValues.has(marker.index) && marker.children.length > 0) {\n                    placeholderDefaultValues.set(marker.index, marker.children);\n                }\n                else {\n                    incompletePlaceholders.push(marker);\n                }\n            }\n            return true;\n        });\n        for (const placeholder of incompletePlaceholders) {\n            const defaultValues = placeholderDefaultValues.get(placeholder.index);\n            if (defaultValues) {\n                const clone = new Placeholder(placeholder.index);\n                clone.transform = placeholder.transform;\n                for (const child of defaultValues) {\n                    clone.appendChild(child.clone());\n                }\n                snippet.replace(placeholder, [clone]);\n            }\n        }\n        if (!enforceFinalTabstop) {\n            enforceFinalTabstop = placeholderCount > 0 && insertFinalTabstop;\n        }\n        if (!placeholderDefaultValues.has(0) && enforceFinalTabstop) {\n            // the snippet uses placeholders but has no\n            // final tabstop defined -> insert at the end\n            snippet.appendChild(new Placeholder(0));\n        }\n        return snippet;\n    }\n    _accept(type, value) {\n        if (type === undefined || this._token.type === type) {\n            let ret = !value ? true : this._scanner.tokenText(this._token);\n            this._token = this._scanner.next();\n            return ret;\n        }\n        return false;\n    }\n    _backTo(token) {\n        this._scanner.pos = token.pos + token.len;\n        this._token = token;\n        return false;\n    }\n    _until(type) {\n        const start = this._token;\n        while (this._token.type !== type) {\n            if (this._token.type === 14 /* EOF */) {\n                return false;\n            }\n            else if (this._token.type === 5 /* Backslash */) {\n                const nextToken = this._scanner.next();\n                if (nextToken.type !== 0 /* Dollar */\n                    && nextToken.type !== 4 /* CurlyClose */\n                    && nextToken.type !== 5 /* Backslash */) {\n                    return false;\n                }\n            }\n            this._token = this._scanner.next();\n        }\n        const value = this._scanner.value.substring(start.pos, this._token.pos).replace(/\\\\(\\$|}|\\\\)/g, '$1');\n        this._token = this._scanner.next();\n        return value;\n    }\n    _parse(marker) {\n        return this._parseEscaped(marker)\n            || this._parseTabstopOrVariableName(marker)\n            || this._parseComplexPlaceholder(marker)\n            || this._parseComplexVariable(marker)\n            || this._parseAnything(marker);\n    }\n    // \\$, \\\\, \\} -> just text\n    _parseEscaped(marker) {\n        let value;\n        if (value = this._accept(5 /* Backslash */, true)) {\n            // saw a backslash, append escaped token or that backslash\n            value = this._accept(0 /* Dollar */, true)\n                || this._accept(4 /* CurlyClose */, true)\n                || this._accept(5 /* Backslash */, true)\n                || value;\n            marker.appendChild(new Text(value));\n            return true;\n        }\n        return false;\n    }\n    // $foo -> variable, $1 -> tabstop\n    _parseTabstopOrVariableName(parent) {\n        let value;\n        const token = this._token;\n        const match = this._accept(0 /* Dollar */)\n            && (value = this._accept(9 /* VariableName */, true) || this._accept(8 /* Int */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        parent.appendChild(/^\\d+$/.test(value)\n            ? new Placeholder(Number(value))\n            : new Variable(value));\n        return true;\n    }\n    // ${1:<children>}, ${1} -> placeholder\n    _parseComplexPlaceholder(parent) {\n        let index;\n        const token = this._token;\n        const match = this._accept(0 /* Dollar */)\n            && this._accept(3 /* CurlyOpen */)\n            && (index = this._accept(8 /* Int */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        const placeholder = new Placeholder(Number(index));\n        if (this._accept(1 /* Colon */)) {\n            // ${1:<children>}\n            while (true) {\n                // ...} -> done\n                if (this._accept(4 /* CurlyClose */)) {\n                    parent.appendChild(placeholder);\n                    return true;\n                }\n                if (this._parse(placeholder)) {\n                    continue;\n                }\n                // fallback\n                parent.appendChild(new Text('${' + index + ':'));\n                placeholder.children.forEach(parent.appendChild, parent);\n                return true;\n            }\n        }\n        else if (placeholder.index > 0 && this._accept(7 /* Pipe */)) {\n            // ${1|one,two,three|}\n            const choice = new Choice();\n            while (true) {\n                if (this._parseChoiceElement(choice)) {\n                    if (this._accept(2 /* Comma */)) {\n                        // opt, -> more\n                        continue;\n                    }\n                    if (this._accept(7 /* Pipe */)) {\n                        placeholder.appendChild(choice);\n                        if (this._accept(4 /* CurlyClose */)) {\n                            // ..|} -> done\n                            parent.appendChild(placeholder);\n                            return true;\n                        }\n                    }\n                }\n                this._backTo(token);\n                return false;\n            }\n        }\n        else if (this._accept(6 /* Forwardslash */)) {\n            // ${1/<regex>/<format>/<options>}\n            if (this._parseTransform(placeholder)) {\n                parent.appendChild(placeholder);\n                return true;\n            }\n            this._backTo(token);\n            return false;\n        }\n        else if (this._accept(4 /* CurlyClose */)) {\n            // ${1}\n            parent.appendChild(placeholder);\n            return true;\n        }\n        else {\n            // ${1 <- missing curly or colon\n            return this._backTo(token);\n        }\n    }\n    _parseChoiceElement(parent) {\n        const token = this._token;\n        const values = [];\n        while (true) {\n            if (this._token.type === 2 /* Comma */ || this._token.type === 7 /* Pipe */) {\n                break;\n            }\n            let value;\n            if (value = this._accept(5 /* Backslash */, true)) {\n                // \\, \\|, or \\\\\n                value = this._accept(2 /* Comma */, true)\n                    || this._accept(7 /* Pipe */, true)\n                    || this._accept(5 /* Backslash */, true)\n                    || value;\n            }\n            else {\n                value = this._accept(undefined, true);\n            }\n            if (!value) {\n                // EOF\n                this._backTo(token);\n                return false;\n            }\n            values.push(value);\n        }\n        if (values.length === 0) {\n            this._backTo(token);\n            return false;\n        }\n        parent.appendChild(new Text(values.join('')));\n        return true;\n    }\n    // ${foo:<children>}, ${foo} -> variable\n    _parseComplexVariable(parent) {\n        let name;\n        const token = this._token;\n        const match = this._accept(0 /* Dollar */)\n            && this._accept(3 /* CurlyOpen */)\n            && (name = this._accept(9 /* VariableName */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        const variable = new Variable(name);\n        if (this._accept(1 /* Colon */)) {\n            // ${foo:<children>}\n            while (true) {\n                // ...} -> done\n                if (this._accept(4 /* CurlyClose */)) {\n                    parent.appendChild(variable);\n                    return true;\n                }\n                if (this._parse(variable)) {\n                    continue;\n                }\n                // fallback\n                parent.appendChild(new Text('${' + name + ':'));\n                variable.children.forEach(parent.appendChild, parent);\n                return true;\n            }\n        }\n        else if (this._accept(6 /* Forwardslash */)) {\n            // ${foo/<regex>/<format>/<options>}\n            if (this._parseTransform(variable)) {\n                parent.appendChild(variable);\n                return true;\n            }\n            this._backTo(token);\n            return false;\n        }\n        else if (this._accept(4 /* CurlyClose */)) {\n            // ${foo}\n            parent.appendChild(variable);\n            return true;\n        }\n        else {\n            // ${foo <- missing curly or colon\n            return this._backTo(token);\n        }\n    }\n    _parseTransform(parent) {\n        // ...<regex>/<format>/<options>}\n        let transform = new Transform();\n        let regexValue = '';\n        let regexOptions = '';\n        // (1) /regex\n        while (true) {\n            if (this._accept(6 /* Forwardslash */)) {\n                break;\n            }\n            let escaped;\n            if (escaped = this._accept(5 /* Backslash */, true)) {\n                escaped = this._accept(6 /* Forwardslash */, true) || escaped;\n                regexValue += escaped;\n                continue;\n            }\n            if (this._token.type !== 14 /* EOF */) {\n                regexValue += this._accept(undefined, true);\n                continue;\n            }\n            return false;\n        }\n        // (2) /format\n        while (true) {\n            if (this._accept(6 /* Forwardslash */)) {\n                break;\n            }\n            let escaped;\n            if (escaped = this._accept(5 /* Backslash */, true)) {\n                escaped = this._accept(5 /* Backslash */, true) || this._accept(6 /* Forwardslash */, true) || escaped;\n                transform.appendChild(new Text(escaped));\n                continue;\n            }\n            if (this._parseFormatString(transform) || this._parseAnything(transform)) {\n                continue;\n            }\n            return false;\n        }\n        // (3) /option\n        while (true) {\n            if (this._accept(4 /* CurlyClose */)) {\n                break;\n            }\n            if (this._token.type !== 14 /* EOF */) {\n                regexOptions += this._accept(undefined, true);\n                continue;\n            }\n            return false;\n        }\n        try {\n            transform.regexp = new RegExp(regexValue, regexOptions);\n        }\n        catch (e) {\n            // invalid regexp\n            return false;\n        }\n        parent.transform = transform;\n        return true;\n    }\n    _parseFormatString(parent) {\n        const token = this._token;\n        if (!this._accept(0 /* Dollar */)) {\n            return false;\n        }\n        let complex = false;\n        if (this._accept(3 /* CurlyOpen */)) {\n            complex = true;\n        }\n        let index = this._accept(8 /* Int */, true);\n        if (!index) {\n            this._backTo(token);\n            return false;\n        }\n        else if (!complex) {\n            // $1\n            parent.appendChild(new FormatString(Number(index)));\n            return true;\n        }\n        else if (this._accept(4 /* CurlyClose */)) {\n            // ${1}\n            parent.appendChild(new FormatString(Number(index)));\n            return true;\n        }\n        else if (!this._accept(1 /* Colon */)) {\n            this._backTo(token);\n            return false;\n        }\n        if (this._accept(6 /* Forwardslash */)) {\n            // ${1:/upcase}\n            let shorthand = this._accept(9 /* VariableName */, true);\n            if (!shorthand || !this._accept(4 /* CurlyClose */)) {\n                this._backTo(token);\n                return false;\n            }\n            else {\n                parent.appendChild(new FormatString(Number(index), shorthand));\n                return true;\n            }\n        }\n        else if (this._accept(11 /* Plus */)) {\n            // ${1:+<if>}\n            let ifValue = this._until(4 /* CurlyClose */);\n            if (ifValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, ifValue, undefined));\n                return true;\n            }\n        }\n        else if (this._accept(12 /* Dash */)) {\n            // ${2:-<else>}\n            let elseValue = this._until(4 /* CurlyClose */);\n            if (elseValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n                return true;\n            }\n        }\n        else if (this._accept(13 /* QuestionMark */)) {\n            // ${2:?<if>:<else>}\n            let ifValue = this._until(1 /* Colon */);\n            if (ifValue) {\n                let elseValue = this._until(4 /* CurlyClose */);\n                if (elseValue) {\n                    parent.appendChild(new FormatString(Number(index), undefined, ifValue, elseValue));\n                    return true;\n                }\n            }\n        }\n        else {\n            // ${1:<else>}\n            let elseValue = this._until(4 /* CurlyClose */);\n            if (elseValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n                return true;\n            }\n        }\n        this._backTo(token);\n        return false;\n    }\n    _parseAnything(marker) {\n        if (this._token.type !== 14 /* EOF */) {\n            marker.appendChild(new Text(this._scanner.tokenText(this._token)));\n            this._accept(undefined);\n            return true;\n        }\n        return false;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { CaseSensitiveCheckbox, RegexCheckbox, WholeWordsCheckbox } from './findInputCheckboxes.js';\nimport { HistoryInputBox } from '../inputbox/inputBox.js';\nimport { Widget } from '../widget.js';\nimport { Emitter } from '../../../common/event.js';\nimport './findInput.css';\nimport * as nls from '../../../../nls.js';\nconst NLS_DEFAULT_LABEL = nls.localize('defaultLabel', \"input\");\nexport class FindInput extends Widget {\n    constructor(parent, contextViewProvider, _showOptionButtons, options) {\n        super();\n        this._showOptionButtons = _showOptionButtons;\n        this.fixFocusOnOptionClickEnabled = true;\n        this.imeSessionInProgress = false;\n        this._onDidOptionChange = this._register(new Emitter());\n        this.onDidOptionChange = this._onDidOptionChange.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._onMouseDown = this._register(new Emitter());\n        this.onMouseDown = this._onMouseDown.event;\n        this._onInput = this._register(new Emitter());\n        this._onKeyUp = this._register(new Emitter());\n        this._onCaseSensitiveKeyDown = this._register(new Emitter());\n        this.onCaseSensitiveKeyDown = this._onCaseSensitiveKeyDown.event;\n        this._onRegexKeyDown = this._register(new Emitter());\n        this.onRegexKeyDown = this._onRegexKeyDown.event;\n        this._lastHighlightFindOptions = 0;\n        this.contextViewProvider = contextViewProvider;\n        this.placeholder = options.placeholder || '';\n        this.validation = options.validation;\n        this.label = options.label || NLS_DEFAULT_LABEL;\n        this.inputActiveOptionBorder = options.inputActiveOptionBorder;\n        this.inputActiveOptionForeground = options.inputActiveOptionForeground;\n        this.inputActiveOptionBackground = options.inputActiveOptionBackground;\n        this.inputBackground = options.inputBackground;\n        this.inputForeground = options.inputForeground;\n        this.inputBorder = options.inputBorder;\n        this.inputValidationInfoBorder = options.inputValidationInfoBorder;\n        this.inputValidationInfoBackground = options.inputValidationInfoBackground;\n        this.inputValidationInfoForeground = options.inputValidationInfoForeground;\n        this.inputValidationWarningBorder = options.inputValidationWarningBorder;\n        this.inputValidationWarningBackground = options.inputValidationWarningBackground;\n        this.inputValidationWarningForeground = options.inputValidationWarningForeground;\n        this.inputValidationErrorBorder = options.inputValidationErrorBorder;\n        this.inputValidationErrorBackground = options.inputValidationErrorBackground;\n        this.inputValidationErrorForeground = options.inputValidationErrorForeground;\n        const appendCaseSensitiveLabel = options.appendCaseSensitiveLabel || '';\n        const appendWholeWordsLabel = options.appendWholeWordsLabel || '';\n        const appendRegexLabel = options.appendRegexLabel || '';\n        const history = options.history || [];\n        const flexibleHeight = !!options.flexibleHeight;\n        const flexibleWidth = !!options.flexibleWidth;\n        const flexibleMaxHeight = options.flexibleMaxHeight;\n        this.domNode = document.createElement('div');\n        this.domNode.classList.add('monaco-findInput');\n        this.inputBox = this._register(new HistoryInputBox(this.domNode, this.contextViewProvider, {\n            placeholder: this.placeholder || '',\n            ariaLabel: this.label || '',\n            validationOptions: {\n                validation: this.validation\n            },\n            inputBackground: this.inputBackground,\n            inputForeground: this.inputForeground,\n            inputBorder: this.inputBorder,\n            inputValidationInfoBackground: this.inputValidationInfoBackground,\n            inputValidationInfoForeground: this.inputValidationInfoForeground,\n            inputValidationInfoBorder: this.inputValidationInfoBorder,\n            inputValidationWarningBackground: this.inputValidationWarningBackground,\n            inputValidationWarningForeground: this.inputValidationWarningForeground,\n            inputValidationWarningBorder: this.inputValidationWarningBorder,\n            inputValidationErrorBackground: this.inputValidationErrorBackground,\n            inputValidationErrorForeground: this.inputValidationErrorForeground,\n            inputValidationErrorBorder: this.inputValidationErrorBorder,\n            history,\n            showHistoryHint: options.showHistoryHint,\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight\n        }));\n        this.regex = this._register(new RegexCheckbox({\n            appendTitle: appendRegexLabel,\n            isChecked: false,\n            inputActiveOptionBorder: this.inputActiveOptionBorder,\n            inputActiveOptionForeground: this.inputActiveOptionForeground,\n            inputActiveOptionBackground: this.inputActiveOptionBackground\n        }));\n        this._register(this.regex.onChange(viaKeyboard => {\n            this._onDidOptionChange.fire(viaKeyboard);\n            if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                this.inputBox.focus();\n            }\n            this.validate();\n        }));\n        this._register(this.regex.onKeyDown(e => {\n            this._onRegexKeyDown.fire(e);\n        }));\n        this.wholeWords = this._register(new WholeWordsCheckbox({\n            appendTitle: appendWholeWordsLabel,\n            isChecked: false,\n            inputActiveOptionBorder: this.inputActiveOptionBorder,\n            inputActiveOptionForeground: this.inputActiveOptionForeground,\n            inputActiveOptionBackground: this.inputActiveOptionBackground\n        }));\n        this._register(this.wholeWords.onChange(viaKeyboard => {\n            this._onDidOptionChange.fire(viaKeyboard);\n            if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                this.inputBox.focus();\n            }\n            this.validate();\n        }));\n        this.caseSensitive = this._register(new CaseSensitiveCheckbox({\n            appendTitle: appendCaseSensitiveLabel,\n            isChecked: false,\n            inputActiveOptionBorder: this.inputActiveOptionBorder,\n            inputActiveOptionForeground: this.inputActiveOptionForeground,\n            inputActiveOptionBackground: this.inputActiveOptionBackground\n        }));\n        this._register(this.caseSensitive.onChange(viaKeyboard => {\n            this._onDidOptionChange.fire(viaKeyboard);\n            if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                this.inputBox.focus();\n            }\n            this.validate();\n        }));\n        this._register(this.caseSensitive.onKeyDown(e => {\n            this._onCaseSensitiveKeyDown.fire(e);\n        }));\n        if (this._showOptionButtons) {\n            this.inputBox.paddingRight = this.caseSensitive.width() + this.wholeWords.width() + this.regex.width();\n        }\n        // Arrow-Key support to navigate between options\n        let indexes = [this.caseSensitive.domNode, this.wholeWords.domNode, this.regex.domNode];\n        this.onkeydown(this.domNode, (event) => {\n            if (event.equals(15 /* LeftArrow */) || event.equals(17 /* RightArrow */) || event.equals(9 /* Escape */)) {\n                let index = indexes.indexOf(document.activeElement);\n                if (index >= 0) {\n                    let newIndex = -1;\n                    if (event.equals(17 /* RightArrow */)) {\n                        newIndex = (index + 1) % indexes.length;\n                    }\n                    else if (event.equals(15 /* LeftArrow */)) {\n                        if (index === 0) {\n                            newIndex = indexes.length - 1;\n                        }\n                        else {\n                            newIndex = index - 1;\n                        }\n                    }\n                    if (event.equals(9 /* Escape */)) {\n                        indexes[index].blur();\n                        this.inputBox.focus();\n                    }\n                    else if (newIndex >= 0) {\n                        indexes[newIndex].focus();\n                    }\n                    dom.EventHelper.stop(event, true);\n                }\n            }\n        });\n        this.controls = document.createElement('div');\n        this.controls.className = 'controls';\n        this.controls.style.display = this._showOptionButtons ? 'block' : 'none';\n        this.controls.appendChild(this.caseSensitive.domNode);\n        this.controls.appendChild(this.wholeWords.domNode);\n        this.controls.appendChild(this.regex.domNode);\n        this.domNode.appendChild(this.controls);\n        if (parent) {\n            parent.appendChild(this.domNode);\n        }\n        this._register(dom.addDisposableListener(this.inputBox.inputElement, 'compositionstart', (e) => {\n            this.imeSessionInProgress = true;\n        }));\n        this._register(dom.addDisposableListener(this.inputBox.inputElement, 'compositionend', (e) => {\n            this.imeSessionInProgress = false;\n            this._onInput.fire();\n        }));\n        this.onkeydown(this.inputBox.inputElement, (e) => this._onKeyDown.fire(e));\n        this.onkeyup(this.inputBox.inputElement, (e) => this._onKeyUp.fire(e));\n        this.oninput(this.inputBox.inputElement, (e) => this._onInput.fire());\n        this.onmousedown(this.inputBox.inputElement, (e) => this._onMouseDown.fire(e));\n    }\n    enable() {\n        this.domNode.classList.remove('disabled');\n        this.inputBox.enable();\n        this.regex.enable();\n        this.wholeWords.enable();\n        this.caseSensitive.enable();\n    }\n    disable() {\n        this.domNode.classList.add('disabled');\n        this.inputBox.disable();\n        this.regex.disable();\n        this.wholeWords.disable();\n        this.caseSensitive.disable();\n    }\n    setFocusInputOnOptionClick(value) {\n        this.fixFocusOnOptionClickEnabled = value;\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n    }\n    getValue() {\n        return this.inputBox.value;\n    }\n    setValue(value) {\n        if (this.inputBox.value !== value) {\n            this.inputBox.value = value;\n        }\n    }\n    style(styles) {\n        this.inputActiveOptionBorder = styles.inputActiveOptionBorder;\n        this.inputActiveOptionForeground = styles.inputActiveOptionForeground;\n        this.inputActiveOptionBackground = styles.inputActiveOptionBackground;\n        this.inputBackground = styles.inputBackground;\n        this.inputForeground = styles.inputForeground;\n        this.inputBorder = styles.inputBorder;\n        this.inputValidationInfoBackground = styles.inputValidationInfoBackground;\n        this.inputValidationInfoForeground = styles.inputValidationInfoForeground;\n        this.inputValidationInfoBorder = styles.inputValidationInfoBorder;\n        this.inputValidationWarningBackground = styles.inputValidationWarningBackground;\n        this.inputValidationWarningForeground = styles.inputValidationWarningForeground;\n        this.inputValidationWarningBorder = styles.inputValidationWarningBorder;\n        this.inputValidationErrorBackground = styles.inputValidationErrorBackground;\n        this.inputValidationErrorForeground = styles.inputValidationErrorForeground;\n        this.inputValidationErrorBorder = styles.inputValidationErrorBorder;\n        this.applyStyles();\n    }\n    applyStyles() {\n        if (this.domNode) {\n            const checkBoxStyles = {\n                inputActiveOptionBorder: this.inputActiveOptionBorder,\n                inputActiveOptionForeground: this.inputActiveOptionForeground,\n                inputActiveOptionBackground: this.inputActiveOptionBackground,\n            };\n            this.regex.style(checkBoxStyles);\n            this.wholeWords.style(checkBoxStyles);\n            this.caseSensitive.style(checkBoxStyles);\n            const inputBoxStyles = {\n                inputBackground: this.inputBackground,\n                inputForeground: this.inputForeground,\n                inputBorder: this.inputBorder,\n                inputValidationInfoBackground: this.inputValidationInfoBackground,\n                inputValidationInfoForeground: this.inputValidationInfoForeground,\n                inputValidationInfoBorder: this.inputValidationInfoBorder,\n                inputValidationWarningBackground: this.inputValidationWarningBackground,\n                inputValidationWarningForeground: this.inputValidationWarningForeground,\n                inputValidationWarningBorder: this.inputValidationWarningBorder,\n                inputValidationErrorBackground: this.inputValidationErrorBackground,\n                inputValidationErrorForeground: this.inputValidationErrorForeground,\n                inputValidationErrorBorder: this.inputValidationErrorBorder\n            };\n            this.inputBox.style(inputBoxStyles);\n        }\n    }\n    select() {\n        this.inputBox.select();\n    }\n    focus() {\n        this.inputBox.focus();\n    }\n    getCaseSensitive() {\n        return this.caseSensitive.checked;\n    }\n    setCaseSensitive(value) {\n        this.caseSensitive.checked = value;\n    }\n    getWholeWords() {\n        return this.wholeWords.checked;\n    }\n    setWholeWords(value) {\n        this.wholeWords.checked = value;\n    }\n    getRegex() {\n        return this.regex.checked;\n    }\n    setRegex(value) {\n        this.regex.checked = value;\n        this.validate();\n    }\n    focusOnCaseSensitive() {\n        this.caseSensitive.focus();\n    }\n    highlightFindOptions() {\n        this.domNode.classList.remove('highlight-' + (this._lastHighlightFindOptions));\n        this._lastHighlightFindOptions = 1 - this._lastHighlightFindOptions;\n        this.domNode.classList.add('highlight-' + (this._lastHighlightFindOptions));\n    }\n    validate() {\n        this.inputBox.validate();\n    }\n    clearMessage() {\n        this.inputBox.hideMessage();\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Widget } from '../widget.js';\nimport { CSSIcon } from '../../../common/codicons.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter } from '../../../common/event.js';\nimport './checkbox.css';\nconst defaultOpts = {\n    inputActiveOptionBorder: Color.fromHex('#007ACC00'),\n    inputActiveOptionForeground: Color.fromHex('#FFFFFF'),\n    inputActiveOptionBackground: Color.fromHex('#0E639C50')\n};\nexport class Checkbox extends Widget {\n    constructor(opts) {\n        super();\n        this._onChange = this._register(new Emitter());\n        this.onChange = this._onChange.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._opts = Object.assign(Object.assign({}, defaultOpts), opts);\n        this._checked = this._opts.isChecked;\n        const classes = ['monaco-custom-checkbox'];\n        if (this._opts.icon) {\n            classes.push(...CSSIcon.asClassNameArray(this._opts.icon));\n        }\n        if (this._opts.actionClassName) {\n            classes.push(...this._opts.actionClassName.split(' '));\n        }\n        if (this._checked) {\n            classes.push('checked');\n        }\n        this.domNode = document.createElement('div');\n        this.domNode.title = this._opts.title;\n        this.domNode.classList.add(...classes);\n        if (!this._opts.notFocusable) {\n            this.domNode.tabIndex = 0;\n        }\n        this.domNode.setAttribute('role', 'checkbox');\n        this.domNode.setAttribute('aria-checked', String(this._checked));\n        this.domNode.setAttribute('aria-label', this._opts.title);\n        this.applyStyles();\n        this.onclick(this.domNode, (ev) => {\n            if (this.enabled) {\n                this.checked = !this._checked;\n                this._onChange.fire(false);\n                ev.preventDefault();\n            }\n        });\n        this.ignoreGesture(this.domNode);\n        this.onkeydown(this.domNode, (keyboardEvent) => {\n            if (keyboardEvent.keyCode === 10 /* Space */ || keyboardEvent.keyCode === 3 /* Enter */) {\n                this.checked = !this._checked;\n                this._onChange.fire(true);\n                keyboardEvent.preventDefault();\n                return;\n            }\n            this._onKeyDown.fire(keyboardEvent);\n        });\n    }\n    get enabled() {\n        return this.domNode.getAttribute('aria-disabled') !== 'true';\n    }\n    focus() {\n        this.domNode.focus();\n    }\n    get checked() {\n        return this._checked;\n    }\n    set checked(newIsChecked) {\n        this._checked = newIsChecked;\n        this.domNode.setAttribute('aria-checked', String(this._checked));\n        this.domNode.classList.toggle('checked', this._checked);\n        this.applyStyles();\n    }\n    width() {\n        return 2 /*margin left*/ + 2 /*border*/ + 2 /*padding*/ + 16 /* icon width */;\n    }\n    style(styles) {\n        if (styles.inputActiveOptionBorder) {\n            this._opts.inputActiveOptionBorder = styles.inputActiveOptionBorder;\n        }\n        if (styles.inputActiveOptionForeground) {\n            this._opts.inputActiveOptionForeground = styles.inputActiveOptionForeground;\n        }\n        if (styles.inputActiveOptionBackground) {\n            this._opts.inputActiveOptionBackground = styles.inputActiveOptionBackground;\n        }\n        this.applyStyles();\n    }\n    applyStyles() {\n        if (this.domNode) {\n            this.domNode.style.borderColor = this._checked && this._opts.inputActiveOptionBorder ? this._opts.inputActiveOptionBorder.toString() : '';\n            this.domNode.style.color = this._checked && this._opts.inputActiveOptionForeground ? this._opts.inputActiveOptionForeground.toString() : 'inherit';\n            this.domNode.style.backgroundColor = this._checked && this._opts.inputActiveOptionBackground ? this._opts.inputActiveOptionBackground.toString() : '';\n        }\n    }\n    enable() {\n        this.domNode.setAttribute('aria-disabled', String(false));\n    }\n    disable() {\n        this.domNode.setAttribute('aria-disabled', String(true));\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Checkbox } from '../checkbox/checkbox.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport * as nls from '../../../../nls.js';\nconst NLS_CASE_SENSITIVE_CHECKBOX_LABEL = nls.localize('caseDescription', \"Match Case\");\nconst NLS_WHOLE_WORD_CHECKBOX_LABEL = nls.localize('wordsDescription', \"Match Whole Word\");\nconst NLS_REGEX_CHECKBOX_LABEL = nls.localize('regexDescription', \"Use Regular Expression\");\nexport class CaseSensitiveCheckbox extends Checkbox {\n    constructor(opts) {\n        super({\n            icon: Codicon.caseSensitive,\n            title: NLS_CASE_SENSITIVE_CHECKBOX_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nexport class WholeWordsCheckbox extends Checkbox {\n    constructor(opts) {\n        super({\n            icon: Codicon.wholeWord,\n            title: NLS_WHOLE_WORD_CHECKBOX_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nexport class RegexCheckbox extends Checkbox {\n    constructor(opts) {\n        super({\n            icon: Codicon.regex,\n            title: NLS_REGEX_CHECKBOX_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { Checkbox } from '../checkbox/checkbox.js';\nimport { HistoryInputBox } from '../inputbox/inputBox.js';\nimport { Widget } from '../widget.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { Emitter } from '../../../common/event.js';\nimport './findInput.css';\nimport * as nls from '../../../../nls.js';\nconst NLS_DEFAULT_LABEL = nls.localize('defaultLabel', \"input\");\nconst NLS_PRESERVE_CASE_LABEL = nls.localize('label.preserveCaseCheckbox', \"Preserve Case\");\nexport class PreserveCaseCheckbox extends Checkbox {\n    constructor(opts) {\n        super({\n            // TODO: does this need its own icon?\n            icon: Codicon.preserveCase,\n            title: NLS_PRESERVE_CASE_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nexport class ReplaceInput extends Widget {\n    constructor(parent, contextViewProvider, _showOptionButtons, options) {\n        super();\n        this._showOptionButtons = _showOptionButtons;\n        this.fixFocusOnOptionClickEnabled = true;\n        this.cachedOptionsWidth = 0;\n        this._onDidOptionChange = this._register(new Emitter());\n        this.onDidOptionChange = this._onDidOptionChange.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._onMouseDown = this._register(new Emitter());\n        this._onInput = this._register(new Emitter());\n        this._onKeyUp = this._register(new Emitter());\n        this._onPreserveCaseKeyDown = this._register(new Emitter());\n        this.onPreserveCaseKeyDown = this._onPreserveCaseKeyDown.event;\n        this.contextViewProvider = contextViewProvider;\n        this.placeholder = options.placeholder || '';\n        this.validation = options.validation;\n        this.label = options.label || NLS_DEFAULT_LABEL;\n        this.inputActiveOptionBorder = options.inputActiveOptionBorder;\n        this.inputActiveOptionForeground = options.inputActiveOptionForeground;\n        this.inputActiveOptionBackground = options.inputActiveOptionBackground;\n        this.inputBackground = options.inputBackground;\n        this.inputForeground = options.inputForeground;\n        this.inputBorder = options.inputBorder;\n        this.inputValidationInfoBorder = options.inputValidationInfoBorder;\n        this.inputValidationInfoBackground = options.inputValidationInfoBackground;\n        this.inputValidationInfoForeground = options.inputValidationInfoForeground;\n        this.inputValidationWarningBorder = options.inputValidationWarningBorder;\n        this.inputValidationWarningBackground = options.inputValidationWarningBackground;\n        this.inputValidationWarningForeground = options.inputValidationWarningForeground;\n        this.inputValidationErrorBorder = options.inputValidationErrorBorder;\n        this.inputValidationErrorBackground = options.inputValidationErrorBackground;\n        this.inputValidationErrorForeground = options.inputValidationErrorForeground;\n        const appendPreserveCaseLabel = options.appendPreserveCaseLabel || '';\n        const history = options.history || [];\n        const flexibleHeight = !!options.flexibleHeight;\n        const flexibleWidth = !!options.flexibleWidth;\n        const flexibleMaxHeight = options.flexibleMaxHeight;\n        this.domNode = document.createElement('div');\n        this.domNode.classList.add('monaco-findInput');\n        this.inputBox = this._register(new HistoryInputBox(this.domNode, this.contextViewProvider, {\n            ariaLabel: this.label || '',\n            placeholder: this.placeholder || '',\n            validationOptions: {\n                validation: this.validation\n            },\n            inputBackground: this.inputBackground,\n            inputForeground: this.inputForeground,\n            inputBorder: this.inputBorder,\n            inputValidationInfoBackground: this.inputValidationInfoBackground,\n            inputValidationInfoForeground: this.inputValidationInfoForeground,\n            inputValidationInfoBorder: this.inputValidationInfoBorder,\n            inputValidationWarningBackground: this.inputValidationWarningBackground,\n            inputValidationWarningForeground: this.inputValidationWarningForeground,\n            inputValidationWarningBorder: this.inputValidationWarningBorder,\n            inputValidationErrorBackground: this.inputValidationErrorBackground,\n            inputValidationErrorForeground: this.inputValidationErrorForeground,\n            inputValidationErrorBorder: this.inputValidationErrorBorder,\n            history,\n            showHistoryHint: options.showHistoryHint,\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight\n        }));\n        this.preserveCase = this._register(new PreserveCaseCheckbox({\n            appendTitle: appendPreserveCaseLabel,\n            isChecked: false,\n            inputActiveOptionBorder: this.inputActiveOptionBorder,\n            inputActiveOptionForeground: this.inputActiveOptionForeground,\n            inputActiveOptionBackground: this.inputActiveOptionBackground,\n        }));\n        this._register(this.preserveCase.onChange(viaKeyboard => {\n            this._onDidOptionChange.fire(viaKeyboard);\n            if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                this.inputBox.focus();\n            }\n            this.validate();\n        }));\n        this._register(this.preserveCase.onKeyDown(e => {\n            this._onPreserveCaseKeyDown.fire(e);\n        }));\n        if (this._showOptionButtons) {\n            this.cachedOptionsWidth = this.preserveCase.width();\n        }\n        else {\n            this.cachedOptionsWidth = 0;\n        }\n        // Arrow-Key support to navigate between options\n        let indexes = [this.preserveCase.domNode];\n        this.onkeydown(this.domNode, (event) => {\n            if (event.equals(15 /* LeftArrow */) || event.equals(17 /* RightArrow */) || event.equals(9 /* Escape */)) {\n                let index = indexes.indexOf(document.activeElement);\n                if (index >= 0) {\n                    let newIndex = -1;\n                    if (event.equals(17 /* RightArrow */)) {\n                        newIndex = (index + 1) % indexes.length;\n                    }\n                    else if (event.equals(15 /* LeftArrow */)) {\n                        if (index === 0) {\n                            newIndex = indexes.length - 1;\n                        }\n                        else {\n                            newIndex = index - 1;\n                        }\n                    }\n                    if (event.equals(9 /* Escape */)) {\n                        indexes[index].blur();\n                        this.inputBox.focus();\n                    }\n                    else if (newIndex >= 0) {\n                        indexes[newIndex].focus();\n                    }\n                    dom.EventHelper.stop(event, true);\n                }\n            }\n        });\n        let controls = document.createElement('div');\n        controls.className = 'controls';\n        controls.style.display = this._showOptionButtons ? 'block' : 'none';\n        controls.appendChild(this.preserveCase.domNode);\n        this.domNode.appendChild(controls);\n        if (parent) {\n            parent.appendChild(this.domNode);\n        }\n        this.onkeydown(this.inputBox.inputElement, (e) => this._onKeyDown.fire(e));\n        this.onkeyup(this.inputBox.inputElement, (e) => this._onKeyUp.fire(e));\n        this.oninput(this.inputBox.inputElement, (e) => this._onInput.fire());\n        this.onmousedown(this.inputBox.inputElement, (e) => this._onMouseDown.fire(e));\n    }\n    enable() {\n        this.domNode.classList.remove('disabled');\n        this.inputBox.enable();\n        this.preserveCase.enable();\n    }\n    disable() {\n        this.domNode.classList.add('disabled');\n        this.inputBox.disable();\n        this.preserveCase.disable();\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n    }\n    style(styles) {\n        this.inputActiveOptionBorder = styles.inputActiveOptionBorder;\n        this.inputActiveOptionForeground = styles.inputActiveOptionForeground;\n        this.inputActiveOptionBackground = styles.inputActiveOptionBackground;\n        this.inputBackground = styles.inputBackground;\n        this.inputForeground = styles.inputForeground;\n        this.inputBorder = styles.inputBorder;\n        this.inputValidationInfoBackground = styles.inputValidationInfoBackground;\n        this.inputValidationInfoForeground = styles.inputValidationInfoForeground;\n        this.inputValidationInfoBorder = styles.inputValidationInfoBorder;\n        this.inputValidationWarningBackground = styles.inputValidationWarningBackground;\n        this.inputValidationWarningForeground = styles.inputValidationWarningForeground;\n        this.inputValidationWarningBorder = styles.inputValidationWarningBorder;\n        this.inputValidationErrorBackground = styles.inputValidationErrorBackground;\n        this.inputValidationErrorForeground = styles.inputValidationErrorForeground;\n        this.inputValidationErrorBorder = styles.inputValidationErrorBorder;\n        this.applyStyles();\n    }\n    applyStyles() {\n        if (this.domNode) {\n            const checkBoxStyles = {\n                inputActiveOptionBorder: this.inputActiveOptionBorder,\n                inputActiveOptionForeground: this.inputActiveOptionForeground,\n                inputActiveOptionBackground: this.inputActiveOptionBackground,\n            };\n            this.preserveCase.style(checkBoxStyles);\n            const inputBoxStyles = {\n                inputBackground: this.inputBackground,\n                inputForeground: this.inputForeground,\n                inputBorder: this.inputBorder,\n                inputValidationInfoBackground: this.inputValidationInfoBackground,\n                inputValidationInfoForeground: this.inputValidationInfoForeground,\n                inputValidationInfoBorder: this.inputValidationInfoBorder,\n                inputValidationWarningBackground: this.inputValidationWarningBackground,\n                inputValidationWarningForeground: this.inputValidationWarningForeground,\n                inputValidationWarningBorder: this.inputValidationWarningBorder,\n                inputValidationErrorBackground: this.inputValidationErrorBackground,\n                inputValidationErrorForeground: this.inputValidationErrorForeground,\n                inputValidationErrorBorder: this.inputValidationErrorBorder\n            };\n            this.inputBox.style(inputBoxStyles);\n        }\n    }\n    select() {\n        this.inputBox.select();\n    }\n    focus() {\n        this.inputBox.focus();\n    }\n    getPreserveCase() {\n        return this.preserveCase.checked;\n    }\n    setPreserveCase(value) {\n        this.preserveCase.checked = value;\n    }\n    focusOnPreserve() {\n        this.preserveCase.focus();\n    }\n    validate() {\n        if (this.inputBox) {\n            this.inputBox.validate();\n        }\n    }\n    set width(newWidth) {\n        this.inputBox.paddingRight = this.cachedOptionsWidth;\n        this.inputBox.width = newWidth;\n        this.domNode.style.width = newWidth + 'px';\n    }\n    dispose() {\n        super.dispose();\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { FindInput } from '../../../base/browser/ui/findinput/findInput.js';\nimport { ReplaceInput } from '../../../base/browser/ui/findinput/replaceInput.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../contextkey/common/contextkey.js';\nimport { KeybindingsRegistry } from '../../keybinding/common/keybindingsRegistry.js';\nimport { localize } from '../../../nls.js';\nexport const historyNavigationVisible = new RawContextKey('suggestWidgetVisible', false, localize('suggestWidgetVisible', \"Whether suggestion are visible\"));\nexport const HistoryNavigationWidgetContext = 'historyNavigationWidget';\nconst HistoryNavigationForwardsEnablementContext = 'historyNavigationForwardsEnabled';\nconst HistoryNavigationBackwardsEnablementContext = 'historyNavigationBackwardsEnabled';\nfunction bindContextScopedWidget(contextKeyService, widget, contextKey) {\n    new RawContextKey(contextKey, widget).bindTo(contextKeyService);\n}\nfunction createWidgetScopedContextKeyService(contextKeyService, widget) {\n    return contextKeyService.createScoped(widget.target);\n}\nfunction getContextScopedWidget(contextKeyService, contextKey) {\n    return contextKeyService.getContext(document.activeElement).getValue(contextKey);\n}\nexport function createAndBindHistoryNavigationWidgetScopedContextKeyService(contextKeyService, widget) {\n    const scopedContextKeyService = createWidgetScopedContextKeyService(contextKeyService, widget);\n    bindContextScopedWidget(scopedContextKeyService, widget, HistoryNavigationWidgetContext);\n    const historyNavigationForwardsEnablement = new RawContextKey(HistoryNavigationForwardsEnablementContext, true).bindTo(scopedContextKeyService);\n    const historyNavigationBackwardsEnablement = new RawContextKey(HistoryNavigationBackwardsEnablementContext, true).bindTo(scopedContextKeyService);\n    return {\n        scopedContextKeyService,\n        historyNavigationForwardsEnablement,\n        historyNavigationBackwardsEnablement,\n    };\n}\nlet ContextScopedFindInput = class ContextScopedFindInput extends FindInput {\n    constructor(container, contextViewProvider, options, contextKeyService, showFindOptions = false) {\n        super(container, contextViewProvider, showFindOptions, options);\n        this._register(createAndBindHistoryNavigationWidgetScopedContextKeyService(contextKeyService, { target: this.inputBox.element, historyNavigator: this.inputBox }).scopedContextKeyService);\n    }\n};\nContextScopedFindInput = __decorate([\n    __param(3, IContextKeyService)\n], ContextScopedFindInput);\nexport { ContextScopedFindInput };\nlet ContextScopedReplaceInput = class ContextScopedReplaceInput extends ReplaceInput {\n    constructor(container, contextViewProvider, options, contextKeyService, showReplaceOptions = false) {\n        super(container, contextViewProvider, showReplaceOptions, options);\n        this._register(createAndBindHistoryNavigationWidgetScopedContextKeyService(contextKeyService, { target: this.inputBox.element, historyNavigator: this.inputBox }).scopedContextKeyService);\n    }\n};\nContextScopedReplaceInput = __decorate([\n    __param(3, IContextKeyService)\n], ContextScopedReplaceInput);\nexport { ContextScopedReplaceInput };\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'history.showPrevious',\n    weight: 200 /* WorkbenchContrib */,\n    when: ContextKeyExpr.and(ContextKeyExpr.has(HistoryNavigationWidgetContext), ContextKeyExpr.equals(HistoryNavigationBackwardsEnablementContext, true), historyNavigationVisible.isEqualTo(false)),\n    primary: 16 /* UpArrow */,\n    secondary: [512 /* Alt */ | 16 /* UpArrow */],\n    handler: (accessor) => {\n        const widget = getContextScopedWidget(accessor.get(IContextKeyService), HistoryNavigationWidgetContext);\n        if (widget) {\n            const historyInputBox = widget.historyNavigator;\n            historyInputBox.showPreviousValue();\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'history.showNext',\n    weight: 200 /* WorkbenchContrib */,\n    when: ContextKeyExpr.and(ContextKeyExpr.has(HistoryNavigationWidgetContext), ContextKeyExpr.equals(HistoryNavigationForwardsEnablementContext, true), historyNavigationVisible.isEqualTo(false)),\n    primary: 18 /* DownArrow */,\n    secondary: [512 /* Alt */ | 18 /* DownArrow */],\n    handler: (accessor) => {\n        const widget = getContextScopedWidget(accessor.get(IContextKeyService), HistoryNavigationWidgetContext);\n        if (widget) {\n            const historyInputBox = widget.historyNavigator;\n            historyInputBox.showNextValue();\n        }\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { asArray } from '../../../../base/common/arrays.js';\nimport { isEmptyMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { HoverOperation } from './hoverOperation.js';\nimport { NullOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { HoverWidget } from '../../../../base/browser/ui/hover/hoverWidget.js';\nconst $ = dom.$;\nexport class MarginHoverWidget extends Disposable {\n    constructor(editor, languageService, openerService = NullOpenerService) {\n        super();\n        this._renderDisposeables = this._register(new DisposableStore());\n        this._editor = editor;\n        this._isVisible = false;\n        this._messages = [];\n        this._hover = this._register(new HoverWidget());\n        this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\n        this._markdownRenderer = this._register(new MarkdownRenderer({ editor: this._editor }, languageService, openerService));\n        this._computer = new MarginHoverComputer(this._editor);\n        this._hoverOperation = this._register(new HoverOperation(this._editor, this._computer));\n        this._register(this._hoverOperation.onResult((result) => {\n            this._withResult(result.value);\n        }));\n        this._register(this._editor.onDidChangeModelDecorations(() => this._onModelDecorationsChanged()));\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(44 /* fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._editor.addOverlayWidget(this);\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    getId() {\n        return MarginHoverWidget.ID;\n    }\n    getDomNode() {\n        return this._hover.containerDomNode;\n    }\n    getPosition() {\n        return null;\n    }\n    _updateFont() {\n        const codeClasses = Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName('code'));\n        codeClasses.forEach(node => this._editor.applyFontInfo(node));\n    }\n    _onModelDecorationsChanged() {\n        if (this._isVisible) {\n            // The decorations have changed and the hover is visible,\n            // we need to recompute the displayed text\n            this._hoverOperation.cancel();\n            this._hoverOperation.start(0 /* Delayed */);\n        }\n    }\n    startShowingAt(lineNumber) {\n        if (this._computer.lineNumber === lineNumber) {\n            // We have to show the widget at the exact same line number as before, so no work is needed\n            return;\n        }\n        this._hoverOperation.cancel();\n        this.hide();\n        this._computer.lineNumber = lineNumber;\n        this._hoverOperation.start(0 /* Delayed */);\n    }\n    hide() {\n        this._computer.lineNumber = -1;\n        this._hoverOperation.cancel();\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\n    }\n    _withResult(result) {\n        this._messages = result;\n        if (this._messages.length > 0) {\n            this._renderMessages(this._computer.lineNumber, this._messages);\n        }\n        else {\n            this.hide();\n        }\n    }\n    _renderMessages(lineNumber, messages) {\n        this._renderDisposeables.clear();\n        const fragment = document.createDocumentFragment();\n        for (const msg of messages) {\n            const markdownHoverElement = $('div.hover-row.markdown-hover');\n            const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n            const renderedContents = this._renderDisposeables.add(this._markdownRenderer.render(msg.value));\n            hoverContentsElement.appendChild(renderedContents.element);\n            fragment.appendChild(markdownHoverElement);\n        }\n        this._updateContents(fragment);\n        this._showAt(lineNumber);\n    }\n    _updateContents(node) {\n        this._hover.contentsDomNode.textContent = '';\n        this._hover.contentsDomNode.appendChild(node);\n        this._updateFont();\n    }\n    _showAt(lineNumber) {\n        if (!this._isVisible) {\n            this._isVisible = true;\n            this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\n        }\n        const editorLayout = this._editor.getLayoutInfo();\n        const topForLineNumber = this._editor.getTopForLineNumber(lineNumber);\n        const editorScrollTop = this._editor.getScrollTop();\n        const lineHeight = this._editor.getOption(59 /* lineHeight */);\n        const nodeHeight = this._hover.containerDomNode.clientHeight;\n        const top = topForLineNumber - editorScrollTop - ((nodeHeight - lineHeight) / 2);\n        this._hover.containerDomNode.style.left = `${editorLayout.glyphMarginLeft + editorLayout.glyphMarginWidth}px`;\n        this._hover.containerDomNode.style.top = `${Math.max(Math.round(top), 0)}px`;\n    }\n}\nMarginHoverWidget.ID = 'editor.contrib.modesGlyphHoverWidget';\nclass MarginHoverComputer {\n    constructor(_editor) {\n        this._editor = _editor;\n        this._lineNumber = -1;\n    }\n    get lineNumber() {\n        return this._lineNumber;\n    }\n    set lineNumber(value) {\n        this._lineNumber = value;\n    }\n    computeSync() {\n        const toHoverMessage = (contents) => {\n            return {\n                value: contents\n            };\n        };\n        const lineDecorations = this._editor.getLineDecorations(this._lineNumber);\n        const result = [];\n        if (!lineDecorations) {\n            return result;\n        }\n        for (const d of lineDecorations) {\n            if (!d.options.glyphMarginClassName) {\n                continue;\n            }\n            const hoverMessage = d.options.glyphMarginHoverMessage;\n            if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\n                continue;\n            }\n            result.push(...asArray(hoverMessage).map(toHoverMessage));\n        }\n        return result;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as DOM from './dom.js';\nimport * as dompurify from './dompurify/dompurify.js';\nimport { DomEmitter } from './event.js';\nimport { createElement } from './formattedTextRenderer.js';\nimport { StandardMouseEvent } from './mouseEvent.js';\nimport { renderLabelWithIcons } from './ui/iconLabel/iconLabels.js';\nimport { raceCancellation } from '../common/async.js';\nimport { CancellationTokenSource } from '../common/cancellation.js';\nimport { onUnexpectedError } from '../common/errors.js';\nimport { Event } from '../common/event.js';\nimport { parseHrefAndDimensions, removeMarkdownEscapes } from '../common/htmlContent.js';\nimport { markdownEscapeEscapedIcons } from '../common/iconLabels.js';\nimport { defaultGenerator } from '../common/idGenerator.js';\nimport { DisposableStore } from '../common/lifecycle.js';\nimport { marked } from '../common/marked/marked.js';\nimport { parse } from '../common/marshalling.js';\nimport { FileAccess, Schemas } from '../common/network.js';\nimport { cloneAndChange } from '../common/objects.js';\nimport { dirname, resolvePath } from '../common/resources.js';\nimport { escape } from '../common/strings.js';\nimport { URI } from '../common/uri.js';\n/**\n * Low-level way create a html element from a markdown string.\n *\n * **Note** that for most cases you should be using [`MarkdownRenderer`](./src/vs/editor/browser/core/markdownRenderer.ts)\n * which comes with support for pretty code block rendering and which uses the default way of handling links.\n */\nexport function renderMarkdown(markdown, options = {}, markedOptions = {}) {\n    var _a;\n    const disposables = new DisposableStore();\n    let isDisposed = false;\n    const cts = disposables.add(new CancellationTokenSource());\n    const element = createElement(options);\n    const _uriMassage = function (part) {\n        let data;\n        try {\n            data = parse(decodeURIComponent(part));\n        }\n        catch (e) {\n            // ignore\n        }\n        if (!data) {\n            return part;\n        }\n        data = cloneAndChange(data, value => {\n            if (markdown.uris && markdown.uris[value]) {\n                return URI.revive(markdown.uris[value]);\n            }\n            else {\n                return undefined;\n            }\n        });\n        return encodeURIComponent(JSON.stringify(data));\n    };\n    const _href = function (href, isDomUri) {\n        const data = markdown.uris && markdown.uris[href];\n        let uri = URI.revive(data);\n        if (isDomUri) {\n            if (href.startsWith(Schemas.data + ':')) {\n                return href;\n            }\n            if (!uri) {\n                uri = URI.parse(href);\n            }\n            // this URI will end up as \"src\"-attribute of a dom node\n            // and because of that special rewriting needs to be done\n            // so that the URI uses a protocol that's understood by\n            // browsers (like http or https)\n            return FileAccess.asBrowserUri(uri).toString(true);\n        }\n        if (!uri) {\n            return href;\n        }\n        if (URI.parse(href).toString() === uri.toString()) {\n            return href; // no transformation performed\n        }\n        if (uri.query) {\n            uri = uri.with({ query: _uriMassage(uri.query) });\n        }\n        return uri.toString();\n    };\n    // signal to code-block render that the\n    // element has been created\n    let signalInnerHTML;\n    const withInnerHTML = new Promise(c => signalInnerHTML = c);\n    const renderer = new marked.Renderer();\n    renderer.image = (href, title, text) => {\n        let dimensions = [];\n        let attributes = [];\n        if (href) {\n            ({ href, dimensions } = parseHrefAndDimensions(href));\n            attributes.push(`src=\"${href}\"`);\n        }\n        if (text) {\n            attributes.push(`alt=\"${text}\"`);\n        }\n        if (title) {\n            attributes.push(`title=\"${title}\"`);\n        }\n        if (dimensions.length) {\n            attributes = attributes.concat(dimensions);\n        }\n        return '<img ' + attributes.join(' ') + '>';\n    };\n    renderer.link = (href, title, text) => {\n        if (typeof href !== 'string') {\n            return '';\n        }\n        // Remove markdown escapes. Workaround for https://github.com/chjj/marked/issues/829\n        if (href === text) { // raw link case\n            text = removeMarkdownEscapes(text);\n        }\n        href = _href(href, false);\n        if (markdown.baseUri) {\n            href = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n        }\n        title = typeof title === 'string' ? removeMarkdownEscapes(title) : '';\n        href = removeMarkdownEscapes(href);\n        if (!href\n            || /^data:|javascript:/i.test(href)\n            || (/^command:/i.test(href) && !markdown.isTrusted)\n            || /^command:(\\/\\/\\/)?_workbench\\.downloadResource/i.test(href)) {\n            // drop the link\n            return text;\n        }\n        else {\n            // HTML Encode href\n            href = href.replace(/&/g, '&amp;')\n                .replace(/</g, '&lt;')\n                .replace(/>/g, '&gt;')\n                .replace(/\"/g, '&quot;')\n                .replace(/'/g, '&#39;');\n            return `<a data-href=\"${href}\" title=\"${title || href}\">${text}</a>`;\n        }\n    };\n    renderer.paragraph = (text) => {\n        return `<p>${text}</p>`;\n    };\n    if (options.codeBlockRenderer) {\n        renderer.code = (code, lang) => {\n            const value = options.codeBlockRenderer(lang !== null && lang !== void 0 ? lang : '', code);\n            // when code-block rendering is async we return sync\n            // but update the node with the real result later.\n            const id = defaultGenerator.nextId();\n            raceCancellation(Promise.all([value, withInnerHTML]), cts.token).then(values => {\n                var _a;\n                if (!isDisposed && values) {\n                    const span = element.querySelector(`div[data-code=\"${id}\"]`);\n                    if (span) {\n                        DOM.reset(span, values[0]);\n                    }\n                    (_a = options.asyncRenderCallback) === null || _a === void 0 ? void 0 : _a.call(options);\n                }\n            }).catch(() => {\n                // ignore\n            });\n            return `<div class=\"code\" data-code=\"${id}\">${escape(code)}</div>`;\n        };\n    }\n    if (options.actionHandler) {\n        const onClick = options.actionHandler.disposables.add(new DomEmitter(element, 'click'));\n        const onAuxClick = options.actionHandler.disposables.add(new DomEmitter(element, 'auxclick'));\n        options.actionHandler.disposables.add(Event.any(onClick.event, onAuxClick.event)(e => {\n            const mouseEvent = new StandardMouseEvent(e);\n            if (!mouseEvent.leftButton && !mouseEvent.middleButton) {\n                return;\n            }\n            let target = mouseEvent.target;\n            if (target.tagName !== 'A') {\n                target = target.parentElement;\n                if (!target || target.tagName !== 'A') {\n                    return;\n                }\n            }\n            try {\n                let href = target.dataset['href'];\n                if (href) {\n                    if (markdown.baseUri) {\n                        href = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n                    }\n                    options.actionHandler.callback(href, mouseEvent);\n                }\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                mouseEvent.preventDefault();\n            }\n        }));\n    }\n    if (!markdown.supportHtml) {\n        // TODO: Can we deprecated this in favor of 'supportHtml'?\n        // Use our own sanitizer so that we can let through only spans.\n        // Otherwise, we'd be letting all html be rendered.\n        // If we want to allow markdown permitted tags, then we can delete sanitizer and sanitize.\n        // We always pass the output through dompurify after this so that we don't rely on\n        // marked for sanitization.\n        markedOptions.sanitizer = (html) => {\n            const match = markdown.isTrusted ? html.match(/^(<span[^>]+>)|(<\\/\\s*span>)$/) : undefined;\n            return match ? html : '';\n        };\n        markedOptions.sanitize = true;\n        markedOptions.silent = true;\n    }\n    markedOptions.renderer = renderer;\n    // values that are too long will freeze the UI\n    let value = (_a = markdown.value) !== null && _a !== void 0 ? _a : '';\n    if (value.length > 100000) {\n        value = `${value.substr(0, 100000)}\u2026`;\n    }\n    // escape theme icons\n    if (markdown.supportThemeIcons) {\n        value = markdownEscapeEscapedIcons(value);\n    }\n    let renderedMarkdown = marked.parse(value, markedOptions);\n    // Rewrite theme icons\n    if (markdown.supportThemeIcons) {\n        const elements = renderLabelWithIcons(renderedMarkdown);\n        renderedMarkdown = elements.map(e => typeof e === 'string' ? e : e.outerHTML).join('');\n    }\n    const htmlParser = new DOMParser();\n    const markdownHtmlDoc = htmlParser.parseFromString(sanitizeRenderedMarkdown(markdown, renderedMarkdown), 'text/html');\n    markdownHtmlDoc.body.querySelectorAll('img')\n        .forEach(img => {\n        const src = img.getAttribute('src'); // Get the raw 'src' attribute value as text, not the resolved 'src'\n        if (src) {\n            let href = src;\n            try {\n                if (markdown.baseUri) { // absolute or relative local path, or file: uri\n                    href = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n                }\n            }\n            catch (err) { }\n            img.src = _href(href, true);\n        }\n    });\n    element.innerHTML = sanitizeRenderedMarkdown(markdown, markdownHtmlDoc.body.innerHTML);\n    // signal that async code blocks can be now be inserted\n    signalInnerHTML();\n    // signal size changes for image tags\n    if (options.asyncRenderCallback) {\n        for (const img of element.getElementsByTagName('img')) {\n            const listener = disposables.add(DOM.addDisposableListener(img, 'load', () => {\n                listener.dispose();\n                options.asyncRenderCallback();\n            }));\n        }\n    }\n    return {\n        element,\n        dispose: () => {\n            isDisposed = true;\n            cts.cancel();\n            disposables.dispose();\n        }\n    };\n}\nfunction resolveWithBaseUri(baseUri, href) {\n    const hasScheme = /^\\w[\\w\\d+.-]*:/.test(href);\n    if (hasScheme) {\n        return href;\n    }\n    if (baseUri.path.endsWith('/')) {\n        return resolvePath(baseUri, href).toString();\n    }\n    else {\n        return resolvePath(dirname(baseUri), href).toString();\n    }\n}\nfunction sanitizeRenderedMarkdown(options, renderedMarkdown) {\n    const { config, allowedSchemes } = getSanitizerOptions(options);\n    dompurify.addHook('uponSanitizeAttribute', (element, e) => {\n        if (e.attrName === 'style' || e.attrName === 'class') {\n            if (element.tagName === 'SPAN') {\n                if (e.attrName === 'style') {\n                    e.keepAttr = /^(color\\:#[0-9a-fA-F]+;)?(background-color\\:#[0-9a-fA-F]+;)?$/.test(e.attrValue);\n                    return;\n                }\n                else if (e.attrName === 'class') {\n                    e.keepAttr = /^codicon codicon-[a-z\\-]+( codicon-modifier-[a-z\\-]+)?$/.test(e.attrValue);\n                    return;\n                }\n            }\n            e.keepAttr = false;\n            return;\n        }\n    });\n    // build an anchor to map URLs to\n    const anchor = document.createElement('a');\n    // https://github.com/cure53/DOMPurify/blob/main/demos/hooks-scheme-allowlist.html\n    dompurify.addHook('afterSanitizeAttributes', (node) => {\n        // check all href/src attributes for validity\n        for (const attr of ['href', 'src']) {\n            if (node.hasAttribute(attr)) {\n                anchor.href = node.getAttribute(attr);\n                if (!allowedSchemes.includes(anchor.protocol.replace(/:$/, ''))) {\n                    node.removeAttribute(attr);\n                }\n            }\n        }\n    });\n    try {\n        return dompurify.sanitize(renderedMarkdown, Object.assign(Object.assign({}, config), { RETURN_TRUSTED_TYPE: true }));\n    }\n    finally {\n        dompurify.removeHook('uponSanitizeAttribute');\n        dompurify.removeHook('afterSanitizeAttributes');\n    }\n}\nfunction getSanitizerOptions(options) {\n    const allowedSchemes = [\n        Schemas.http,\n        Schemas.https,\n        Schemas.mailto,\n        Schemas.data,\n        Schemas.file,\n        Schemas.vscodeFileResource,\n        Schemas.vscodeRemote,\n        Schemas.vscodeRemoteResource,\n    ];\n    if (options.isTrusted) {\n        allowedSchemes.push(Schemas.command);\n    }\n    return {\n        config: {\n            // allowedTags should included everything that markdown renders to.\n            // Since we have our own sanitize function for marked, it's possible we missed some tag so let dompurify make sure.\n            // HTML tags that can result from markdown are from reading https://spec.commonmark.org/0.29/\n            // HTML table tags that can result from markdown are from https://github.github.com/gfm/#tables-extension-\n            ALLOWED_TAGS: ['ul', 'li', 'p', 'b', 'i', 'code', 'blockquote', 'ol', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hr', 'em', 'pre', 'table', 'thead', 'tbody', 'tr', 'th', 'td', 'div', 'del', 'a', 'strong', 'br', 'img', 'span'],\n            ALLOWED_ATTR: ['href', 'data-href', 'target', 'title', 'src', 'alt', 'class', 'style', 'data-code', 'width', 'height', 'align'],\n            ALLOW_UNKNOWN_PROTOCOLS: true,\n        },\n        allowedSchemes\n    };\n}\n", "/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar hasOwnProperty = Object.hasOwnProperty,\n    setPrototypeOf = Object.setPrototypeOf,\n    isFrozen = Object.isFrozen,\n    getPrototypeOf = Object.getPrototypeOf,\n    getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar freeze = Object.freeze,\n    seal = Object.seal,\n    create = Object.create; // eslint-disable-line import/no-mutable-exports\n\nvar _ref = typeof Reflect !== 'undefined' && Reflect,\n    apply = _ref.apply,\n    construct = _ref.construct;\n\nif (!apply) {\n  apply = function apply(fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\n\nif (!freeze) {\n  freeze = function freeze(x) {\n    return x;\n  };\n}\n\nif (!seal) {\n  seal = function seal(x) {\n    return x;\n  };\n}\n\nif (!construct) {\n  construct = function construct(Func, args) {\n    return new (Function.prototype.bind.apply(Func, [null].concat(_toConsumableArray(args))))();\n  };\n}\n\nvar arrayForEach = unapply(Array.prototype.forEach);\nvar arrayPop = unapply(Array.prototype.pop);\nvar arrayPush = unapply(Array.prototype.push);\n\nvar stringToLowerCase = unapply(String.prototype.toLowerCase);\nvar stringMatch = unapply(String.prototype.match);\nvar stringReplace = unapply(String.prototype.replace);\nvar stringIndexOf = unapply(String.prototype.indexOf);\nvar stringTrim = unapply(String.prototype.trim);\n\nvar regExpTest = unapply(RegExp.prototype.test);\n\nvar typeErrorCreate = unconstruct(TypeError);\n\nfunction unapply(func) {\n  return function (thisArg) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return apply(func, thisArg, args);\n  };\n}\n\nfunction unconstruct(func) {\n  return function () {\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return construct(func, args);\n  };\n}\n\n/* Add properties to a lookup table */\nfunction addToSet(set, array) {\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n\n  var l = array.length;\n  while (l--) {\n    var element = array[l];\n    if (typeof element === 'string') {\n      var lcElement = stringToLowerCase(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          array[l] = lcElement;\n        }\n\n        element = lcElement;\n      }\n    }\n\n    set[element] = true;\n  }\n\n  return set;\n}\n\n/* Shallow clone an object */\nfunction clone(object) {\n  var newObject = create(null);\n\n  var property = void 0;\n  for (property in object) {\n    if (apply(hasOwnProperty, object, [property])) {\n      newObject[property] = object[property];\n    }\n  }\n\n  return newObject;\n}\n\n/* IE10 doesn't support __lookupGetter__ so lets'\n * simulate it. It also automatically checks\n * if the prop is function or getter and behaves\n * accordingly. */\nfunction lookupGetter(object, prop) {\n  while (object !== null) {\n    var desc = getOwnPropertyDescriptor(object, prop);\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n\n    object = getPrototypeOf(object);\n  }\n\n  function fallbackValue(element) {\n    console.warn('fallback value for', element);\n    return null;\n  }\n\n  return fallbackValue;\n}\n\nvar html = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\n\n// SVG\nvar svg = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\n\nvar svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nvar svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'fedropshadow', 'feimage', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\n\nvar mathMl = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover']);\n\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nvar mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\n\nvar text = freeze(['#text']);\n\nvar html$1 = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'xmlns', 'slot']);\n\nvar svg$1 = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'targetx', 'targety', 'transform', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\n\nvar mathMl$1 = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\n\nvar xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n// eslint-disable-next-line unicorn/better-regex\nvar MUSTACHE_EXPR = seal(/\\{\\{[\\s\\S]*|[\\s\\S]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nvar ERB_EXPR = seal(/<%[\\s\\S]*|[\\s\\S]*%>/gm);\nvar DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\nvar ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nvar IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nvar IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nvar ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray$1(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar getGlobal = function getGlobal() {\n  return typeof window === 'undefined' ? null : window;\n};\n\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param {?TrustedTypePolicyFactory} trustedTypes The policy factory.\n * @param {Document} document The document object (to determine policy name suffix)\n * @return {?TrustedTypePolicy} The policy created (or null, if Trusted Types\n * are not supported).\n */\nvar _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, document) {\n  if ((typeof trustedTypes === 'undefined' ? 'undefined' : _typeof(trustedTypes)) !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n    return null;\n  }\n\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  var suffix = null;\n  var ATTR_NAME = 'data-tt-policy-suffix';\n  if (document.currentScript && document.currentScript.hasAttribute(ATTR_NAME)) {\n    suffix = document.currentScript.getAttribute(ATTR_NAME);\n  }\n\n  var policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML: function createHTML(html$$1) {\n        return html$$1;\n      }\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n    return null;\n  }\n};\n\nfunction createDOMPurify() {\n  var window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n\n  var DOMPurify = function DOMPurify(root) {\n    return createDOMPurify(root);\n  };\n\n  /**\n   * Version label, exposed for easier checks\n   * if DOMPurify is up to date or not\n   */\n  DOMPurify.version = '2.3.1';\n\n  /**\n   * Array of elements that DOMPurify removed during sanitation.\n   * Empty if nothing was removed.\n   */\n  DOMPurify.removed = [];\n\n  if (!window || !window.document || window.document.nodeType !== 9) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n\n    return DOMPurify;\n  }\n\n  var originalDocument = window.document;\n\n  var document = window.document;\n  var DocumentFragment = window.DocumentFragment,\n      HTMLTemplateElement = window.HTMLTemplateElement,\n      Node = window.Node,\n      Element = window.Element,\n      NodeFilter = window.NodeFilter,\n      _window$NamedNodeMap = window.NamedNodeMap,\n      NamedNodeMap = _window$NamedNodeMap === undefined ? window.NamedNodeMap || window.MozNamedAttrMap : _window$NamedNodeMap,\n      Text = window.Text,\n      Comment = window.Comment,\n      DOMParser = window.DOMParser,\n      trustedTypes = window.trustedTypes;\n\n\n  var ElementPrototype = Element.prototype;\n\n  var cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  var getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  var getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  var getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    var template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n\n  var trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, originalDocument);\n  var emptyHTML = trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML('') : '';\n\n  var _document = document,\n      implementation = _document.implementation,\n      createNodeIterator = _document.createNodeIterator,\n      createDocumentFragment = _document.createDocumentFragment,\n      getElementsByTagName = _document.getElementsByTagName;\n  var importNode = originalDocument.importNode;\n\n\n  var documentMode = {};\n  try {\n    documentMode = clone(document).documentMode ? document.documentMode : {};\n  } catch (_) {}\n\n  var hooks = {};\n\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported = typeof getParentNode === 'function' && implementation && typeof implementation.createHTMLDocument !== 'undefined' && documentMode !== 9;\n\n  var MUSTACHE_EXPR$$1 = MUSTACHE_EXPR,\n      ERB_EXPR$$1 = ERB_EXPR,\n      DATA_ATTR$$1 = DATA_ATTR,\n      ARIA_ATTR$$1 = ARIA_ATTR,\n      IS_SCRIPT_OR_DATA$$1 = IS_SCRIPT_OR_DATA,\n      ATTR_WHITESPACE$$1 = ATTR_WHITESPACE;\n  var IS_ALLOWED_URI$$1 = IS_ALLOWED_URI;\n\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n\n  /* allowed element names */\n\n  var ALLOWED_TAGS = null;\n  var DEFAULT_ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray$1(html), _toConsumableArray$1(svg), _toConsumableArray$1(svgFilters), _toConsumableArray$1(mathMl), _toConsumableArray$1(text)));\n\n  /* Allowed attribute names */\n  var ALLOWED_ATTR = null;\n  var DEFAULT_ALLOWED_ATTR = addToSet({}, [].concat(_toConsumableArray$1(html$1), _toConsumableArray$1(svg$1), _toConsumableArray$1(mathMl$1), _toConsumableArray$1(xml)));\n\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  var FORBID_TAGS = null;\n\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  var FORBID_ATTR = null;\n\n  /* Decide if ARIA attributes are okay */\n  var ALLOW_ARIA_ATTR = true;\n\n  /* Decide if custom data attributes are okay */\n  var ALLOW_DATA_ATTR = true;\n\n  /* Decide if unknown protocols are okay */\n  var ALLOW_UNKNOWN_PROTOCOLS = false;\n\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  var SAFE_FOR_TEMPLATES = false;\n\n  /* Decide if document with <html>... should be returned */\n  var WHOLE_DOCUMENT = false;\n\n  /* Track whether config is already set on this instance of DOMPurify. */\n  var SET_CONFIG = false;\n\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  var FORCE_BODY = false;\n\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  var RETURN_DOM = false;\n\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  var RETURN_DOM_FRAGMENT = false;\n\n  /* If `RETURN_DOM` or `RETURN_DOM_FRAGMENT` is enabled, decide if the returned DOM\n   * `Node` is imported into the current `Document`. If this flag is not enabled the\n   * `Node` will belong (its ownerDocument) to a fresh `HTMLDocument`, created by\n   * DOMPurify.\n   *\n   * This defaults to `true` starting DOMPurify 2.2.0. Note that setting it to `false`\n   * might cause XSS from attacks hidden in closed shadowroots in case the browser\n   * supports Declarative Shadow: DOM https://web.dev/declarative-shadow-dom/\n   */\n  var RETURN_DOM_IMPORT = true;\n\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  var RETURN_TRUSTED_TYPE = false;\n\n  /* Output should be free from DOM clobbering attacks? */\n  var SANITIZE_DOM = true;\n\n  /* Keep element content when removing element? */\n  var KEEP_CONTENT = true;\n\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  var IN_PLACE = false;\n\n  /* Allow usage of profiles like html, svg and mathMl */\n  var USE_PROFILES = {};\n\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  var FORBID_CONTENTS = null;\n  var DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n\n  /* Tags that are safe for data: URIs */\n  var DATA_URI_TAGS = null;\n  var DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n\n  /* Attributes safe for values like \"javascript:\" */\n  var URI_SAFE_ATTRIBUTES = null;\n  var DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n\n  var MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  var SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  var HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n  var NAMESPACE = HTML_NAMESPACE;\n  var IS_EMPTY_INPUT = false;\n\n  /* Keep a reference to config to pass to hooks */\n  var CONFIG = null;\n\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n\n  var formElement = document.createElement('form');\n\n  /**\n   * _parseConfig\n   *\n   * @param  {Object} cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  var _parseConfig = function _parseConfig(cfg) {\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n\n    /* Shield configuration object from tampering */\n    if (!cfg || (typeof cfg === 'undefined' ? 'undefined' : _typeof(cfg)) !== 'object') {\n      cfg = {};\n    }\n\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n\n    /* Set configuration parameters */\n    ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ? addToSet({}, cfg.ALLOWED_TAGS) : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ? addToSet({}, cfg.ALLOWED_ATTR) : DEFAULT_ALLOWED_ATTR;\n    URI_SAFE_ATTRIBUTES = 'ADD_URI_SAFE_ATTR' in cfg ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR) : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS = 'ADD_DATA_URI_TAGS' in cfg ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS) : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS = 'FORBID_CONTENTS' in cfg ? addToSet({}, cfg.FORBID_CONTENTS) : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS) : {};\n    FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR) : {};\n    USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_DOM_IMPORT = cfg.RETURN_DOM_IMPORT !== false; // Default true\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI$$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI$$1;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray$1(text)));\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, html);\n        addToSet(ALLOWED_ATTR, html$1);\n      }\n\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, svg);\n        addToSet(ALLOWED_ATTR, svg$1);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, svgFilters);\n        addToSet(ALLOWED_ATTR, svg$1);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, mathMl);\n        addToSet(ALLOWED_ATTR, mathMl$1);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n    }\n\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS);\n    }\n\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR);\n    }\n\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR);\n    }\n\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS);\n    }\n\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n\n    CONFIG = cfg;\n  };\n\n  var MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n\n  var HTML_INTEGRATION_POINTS = addToSet({}, ['foreignobject', 'desc', 'title', 'annotation-xml']);\n\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  var ALL_SVG_TAGS = addToSet({}, svg);\n  addToSet(ALL_SVG_TAGS, svgFilters);\n  addToSet(ALL_SVG_TAGS, svgDisallowed);\n\n  var ALL_MATHML_TAGS = addToSet({}, mathMl);\n  addToSet(ALL_MATHML_TAGS, mathMlDisallowed);\n\n  /**\n   *\n   *\n   * @param  {Element} element a DOM element whose namespace is being checked\n   * @returns {boolean} Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  var _checkValidNamespace = function _checkValidNamespace(element) {\n    var parent = getParentNode(element);\n\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: HTML_NAMESPACE,\n        tagName: 'template'\n      };\n    }\n\n    var tagName = stringToLowerCase(element.tagName);\n    var parentTagName = stringToLowerCase(parent.tagName);\n\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n\n      // The only way to switch from MathML to SVG is via\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n      }\n\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n\n      if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n\n      // Certain elements are allowed in both SVG and HTML\n      // namespace. We need to specify them explicitly\n      // so that they don't get erronously deleted from\n      // HTML namespace.\n      var commonSvgAndHTMLElements = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return !ALL_MATHML_TAGS[tagName] && (commonSvgAndHTMLElements[tagName] || !ALL_SVG_TAGS[tagName]);\n    }\n\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG or MathML). Return false just in case.\n    return false;\n  };\n\n  /**\n   * _forceRemove\n   *\n   * @param  {Node} node a DOM node\n   */\n  var _forceRemove = function _forceRemove(node) {\n    arrayPush(DOMPurify.removed, { element: node });\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      node.parentNode.removeChild(node);\n    } catch (_) {\n      try {\n        node.outerHTML = emptyHTML;\n      } catch (_) {\n        node.remove();\n      }\n    }\n  };\n\n  /**\n   * _removeAttribute\n   *\n   * @param  {String} name an Attribute name\n   * @param  {Node} node a DOM node\n   */\n  var _removeAttribute = function _removeAttribute(name, node) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: node.getAttributeNode(name),\n        from: node\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: node\n      });\n    }\n\n    node.removeAttribute(name);\n\n    // We void attribute values for unremovable \"is\"\" attributes\n    if (name === 'is' && !ALLOWED_ATTR[name]) {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(node);\n        } catch (_) {}\n      } else {\n        try {\n          node.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n\n  /**\n   * _initDocument\n   *\n   * @param  {String} dirty a string of dirty markup\n   * @return {Document} a DOM, filled with the dirty markup\n   */\n  var _initDocument = function _initDocument(dirty) {\n    /* Create a HTML document */\n    var doc = void 0;\n    var leadingWhitespace = void 0;\n\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      var matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n\n    var dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, 'text/html');\n      } catch (_) {}\n    }\n\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT ? '' : dirtyPayload;\n      } catch (_) {\n        // Syntax error if dirtyPayload is invalid xml\n      }\n    }\n\n    var body = doc.body || doc.documentElement;\n\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n    }\n\n    /* Work on whole document or just its body */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n    }\n\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n\n  /**\n   * _createIterator\n   *\n   * @param  {Document} root document/fragment to create iterator for\n   * @return {Iterator} iterator instance\n   */\n  var _createIterator = function _createIterator(root) {\n    return createNodeIterator.call(root.ownerDocument || root, root, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT, null, false);\n  };\n\n  /**\n   * _isClobbered\n   *\n   * @param  {Node} elm element to check for clobbering attacks\n   * @return {Boolean} true if clobbered, false if safe\n   */\n  var _isClobbered = function _isClobbered(elm) {\n    if (elm instanceof Text || elm instanceof Comment) {\n      return false;\n    }\n\n    if (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function') {\n      return true;\n    }\n\n    return false;\n  };\n\n  /**\n   * _isNode\n   *\n   * @param  {Node} obj object to check whether it's a DOM node\n   * @return {Boolean} true is object is a DOM node\n   */\n  var _isNode = function _isNode(object) {\n    return (typeof Node === 'undefined' ? 'undefined' : _typeof(Node)) === 'object' ? object instanceof Node : object && (typeof object === 'undefined' ? 'undefined' : _typeof(object)) === 'object' && typeof object.nodeType === 'number' && typeof object.nodeName === 'string';\n  };\n\n  /**\n   * _executeHook\n   * Execute user configurable hooks\n   *\n   * @param  {String} entryPoint  Name of the hook's entry point\n   * @param  {Node} currentNode node to work on with the hook\n   * @param  {Object} data additional hook parameters\n   */\n  var _executeHook = function _executeHook(entryPoint, currentNode, data) {\n    if (!hooks[entryPoint]) {\n      return;\n    }\n\n    arrayForEach(hooks[entryPoint], function (hook) {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  };\n\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   *\n   * @param   {Node} currentNode to check for permission to exist\n   * @return  {Boolean} true if node was killed, false if left alive\n   */\n  var _sanitizeElements = function _sanitizeElements(currentNode) {\n    var content = void 0;\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeElements', currentNode, null);\n\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Check if tagname contains Unicode */\n    if (stringMatch(currentNode.nodeName, /[\\u0080-\\uFFFF]/)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Now let's check the element's type and name */\n    var tagName = stringToLowerCase(currentNode.nodeName);\n\n    /* Execute a hook if present */\n    _executeHook('uponSanitizeElement', currentNode, {\n      tagName: tagName,\n      allowedTags: ALLOWED_TAGS\n    });\n\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (!_isNode(currentNode.firstElementChild) && (!_isNode(currentNode.content) || !_isNode(currentNode.content.firstElementChild)) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Mitigate a problem with templates inside select */\n    if (tagName === 'select' && regExpTest(/<template/i, currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove element if anything forbids its presence */\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        var parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        var childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n\n        if (childNodes && parentNode) {\n          var childCount = childNodes.length;\n\n          for (var i = childCount - 1; i >= 0; --i) {\n            parentNode.insertBefore(cloneNode(childNodes[i], true), getNextSibling(currentNode));\n          }\n        }\n      }\n\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    if ((tagName === 'noscript' || tagName === 'noembed') && regExpTest(/<\\/no(script|embed)/i, currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      content = stringReplace(content, MUSTACHE_EXPR$$1, ' ');\n      content = stringReplace(content, ERB_EXPR$$1, ' ');\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n        currentNode.textContent = content;\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeElements', currentNode, null);\n\n    return false;\n  };\n\n  /**\n   * _isValidAttribute\n   *\n   * @param  {string} lcTag Lowercase tag name of containing element.\n   * @param  {string} lcName Lowercase attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  var _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n      return false;\n    }\n\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR$$1, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR$$1, lcName)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      return false;\n\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$$1, stringReplace(value, ATTR_WHITESPACE$$1, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA$$1, stringReplace(value, ATTR_WHITESPACE$$1, ''))) ; else if (!value) ; else {\n      return false;\n    }\n\n    return true;\n  };\n\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param  {Node} currentNode to sanitize\n   */\n  var _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n    var attr = void 0;\n    var value = void 0;\n    var lcName = void 0;\n    var l = void 0;\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeAttributes', currentNode, null);\n\n    var attributes = currentNode.attributes;\n\n    /* Check if we have attributes; if not we might have a text node */\n\n    if (!attributes) {\n      return;\n    }\n\n    var hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR\n    };\n    l = attributes.length;\n\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      attr = attributes[l];\n      var _attr = attr,\n          name = _attr.name,\n          namespaceURI = _attr.namespaceURI;\n\n      value = stringTrim(attr.value);\n      lcName = stringToLowerCase(name);\n\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n      value = hookEvent.attrValue;\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n\n      /* Remove attribute */\n      _removeAttribute(name, currentNode);\n\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        continue;\n      }\n\n      /* Work around a security issue in jQuery 3.0 */\n      if (regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        value = stringReplace(value, MUSTACHE_EXPR$$1, ' ');\n        value = stringReplace(value, ERB_EXPR$$1, ' ');\n      }\n\n      /* Is `value` valid for this attribute? */\n      var lcTag = currentNode.nodeName.toLowerCase();\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        continue;\n      }\n\n      /* Handle invalid data-* attribute set by try-catching it */\n      try {\n        if (namespaceURI) {\n          currentNode.setAttributeNS(namespaceURI, name, value);\n        } else {\n          /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n          currentNode.setAttribute(name, value);\n        }\n\n        arrayPop(DOMPurify.removed);\n      } catch (_) {}\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeAttributes', currentNode, null);\n  };\n\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param  {DocumentFragment} fragment to iterate over recursively\n   */\n  var _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n    var shadowNode = void 0;\n    var shadowIterator = _createIterator(fragment);\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeShadowDOM', fragment, null);\n\n    while (shadowNode = shadowIterator.nextNode()) {\n      /* Execute a hook if present */\n      _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(shadowNode)) {\n        continue;\n      }\n\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(shadowNode);\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeShadowDOM', fragment, null);\n  };\n\n  /**\n   * Sanitize\n   * Public method providing core sanitation functionality\n   *\n   * @param {String|Node} dirty string or DOM node\n   * @param {Object} configuration object\n   */\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty, cfg) {\n    var body = void 0;\n    var importedNode = void 0;\n    var currentNode = void 0;\n    var oldNode = void 0;\n    var returnNode = void 0;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      // eslint-disable-next-line no-negated-condition\n      if (typeof dirty.toString !== 'function') {\n        throw typeErrorCreate('toString is not a function');\n      } else {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      }\n    }\n\n    /* Check we can run. Otherwise fall back or ignore */\n    if (!DOMPurify.isSupported) {\n      if (_typeof(window.toStaticHTML) === 'object' || typeof window.toStaticHTML === 'function') {\n        if (typeof dirty === 'string') {\n          return window.toStaticHTML(dirty);\n        }\n\n        if (_isNode(dirty)) {\n          return window.toStaticHTML(dirty.outerHTML);\n        }\n      }\n\n      return dirty;\n    }\n\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n\n    if (IN_PLACE) ; else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n      // eslint-disable-next-line unicorn/prefer-includes\n      dirty.indexOf('<') === -1) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      }\n\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : emptyHTML;\n      }\n    }\n\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n\n    /* Get node iterator */\n    var nodeIterator = _createIterator(IN_PLACE ? dirty : body);\n\n    /* Now start iterating over the created document */\n    while (currentNode = nodeIterator.nextNode()) {\n      /* Fix IE's strange behavior with manipulated textNodes #89 */\n      if (currentNode.nodeType === 3 && currentNode === oldNode) {\n        continue;\n      }\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(currentNode)) {\n        continue;\n      }\n\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(currentNode);\n\n      oldNode = currentNode;\n    }\n\n    oldNode = null;\n\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n\n      if (RETURN_DOM_IMPORT) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n\n      return returnNode;\n    }\n\n    var serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      serializedHTML = stringReplace(serializedHTML, MUSTACHE_EXPR$$1, ' ');\n      serializedHTML = stringReplace(serializedHTML, ERB_EXPR$$1, ' ');\n    }\n\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n  };\n\n  /**\n   * Public method to set the configuration once\n   * setConfig\n   *\n   * @param {Object} cfg configuration object\n   */\n  DOMPurify.setConfig = function (cfg) {\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n\n  /**\n   * Public method to remove the configuration\n   * clearConfig\n   *\n   */\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n\n  /**\n   * Public method to check if an attribute value is valid.\n   * Uses last set config, if any. Otherwise, uses config defaults.\n   * isValidAttribute\n   *\n   * @param  {string} tag Tag name of containing element.\n   * @param  {string} attr Attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.\n   */\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n\n    var lcTag = stringToLowerCase(tag);\n    var lcName = stringToLowerCase(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n\n  /**\n   * AddHook\n   * Public method to add DOMPurify hooks\n   *\n   * @param {String} entryPoint entry point for the hook to add\n   * @param {Function} hookFunction function to execute\n   */\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n\n    hooks[entryPoint] = hooks[entryPoint] || [];\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n\n  /**\n   * RemoveHook\n   * Public method to remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if more are present)\n   *\n   * @param {String} entryPoint entry point for the hook to remove\n   */\n  DOMPurify.removeHook = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      arrayPop(hooks[entryPoint]);\n    }\n  };\n\n  /**\n   * RemoveHooks\n   * Public method to remove all DOMPurify hooks at a given entryPoint\n   *\n   * @param  {String} entryPoint entry point for the hooks to remove\n   */\n  DOMPurify.removeHooks = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      hooks[entryPoint] = [];\n    }\n  };\n\n  /**\n   * RemoveAllHooks\n   * Public method to remove all DOMPurify hooks\n   *\n   */\n  DOMPurify.removeAllHooks = function () {\n    hooks = {};\n  };\n\n  return DOMPurify;\n}\n\nvar purify = createDOMPurify();\n\n// ESM-comment-begin\n// define(function () { return purify; });\n// ESM-comment-end\n\n// ESM-uncomment-begin\nexport default purify;\nexport const version = purify.version;\nexport const isSupported = purify.isSupported;\nexport const sanitize = purify.sanitize;\nexport const setConfig = purify.setConfig;\nexport const clearConfig = purify.clearConfig;\nexport const isValidAttribute = purify.isValidAttribute;\nexport const addHook = purify.addHook;\nexport const removeHook = purify.removeHook;\nexport const removeHooks = purify.removeHooks;\nexport const removeAllHooks = purify.removeAllHooks;\n// ESM-uncomment-end\n", "/**\n * marked - a markdown parser\n * Copyright (c) 2011-2022, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\n// ESM-uncomment-begin\nlet __marked_exports = {};\n(function() {\n  function define(deps, factory) {\n    factory(__marked_exports);\n  }\n  define.amd = true;\n// ESM-uncomment-end\n\n (function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.marked = {}));\n})(this, (function (exports) { 'use strict';\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n      writable: false\n    });\n    return Constructor;\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _createForOfIteratorHelperLoose(o, allowArrayLike) {\n    var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n    if (it) return (it = it.call(o)).next.bind(it);\n\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      return function () {\n        if (i >= o.length) return {\n          done: true\n        };\n        return {\n          done: false,\n          value: o[i++]\n        };\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function getDefaults() {\n    return {\n      baseUrl: null,\n      breaks: false,\n      extensions: null,\n      gfm: true,\n      headerIds: true,\n      headerPrefix: '',\n      highlight: null,\n      langPrefix: 'language-',\n      mangle: true,\n      pedantic: false,\n      renderer: null,\n      sanitize: false,\n      sanitizer: null,\n      silent: false,\n      smartLists: false,\n      smartypants: false,\n      tokenizer: null,\n      walkTokens: null,\n      xhtml: false\n    };\n  }\n  exports.defaults = getDefaults();\n  function changeDefaults(newDefaults) {\n    exports.defaults = newDefaults;\n  }\n\n  /**\n   * Helpers\n   */\n  var escapeTest = /[&<>\"']/;\n  var escapeReplace = /[&<>\"']/g;\n  var escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\n  var escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\n  var escapeReplacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  var getEscapeReplacement = function getEscapeReplacement(ch) {\n    return escapeReplacements[ch];\n  };\n\n  function escape(html, encode) {\n    if (encode) {\n      if (escapeTest.test(html)) {\n        return html.replace(escapeReplace, getEscapeReplacement);\n      }\n    } else {\n      if (escapeTestNoEncode.test(html)) {\n        return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n      }\n    }\n\n    return html;\n  }\n  var unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n  function unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(unescapeTest, function (_, n) {\n      n = n.toLowerCase();\n      if (n === 'colon') return ':';\n\n      if (n.charAt(0) === '#') {\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\n      }\n\n      return '';\n    });\n  }\n  var caret = /(^|[^\\[])\\^/g;\n  function edit(regex, opt) {\n    regex = regex.source || regex;\n    opt = opt || '';\n    var obj = {\n      replace: function replace(name, val) {\n        val = val.source || val;\n        val = val.replace(caret, '$1');\n        regex = regex.replace(name, val);\n        return obj;\n      },\n      getRegex: function getRegex() {\n        return new RegExp(regex, opt);\n      }\n    };\n    return obj;\n  }\n  var nonWordAndColonTest = /[^\\w:]/g;\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n  function cleanUrl(sanitize, base, href) {\n    if (sanitize) {\n      var prot;\n\n      try {\n        prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, '').toLowerCase();\n      } catch (e) {\n        return null;\n      }\n\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n        return null;\n      }\n    }\n\n    if (base && !originIndependentUrl.test(href)) {\n      href = resolveUrl(base, href);\n    }\n\n    try {\n      href = encodeURI(href).replace(/%25/g, '%');\n    } catch (e) {\n      return null;\n    }\n\n    return href;\n  }\n  var baseUrls = {};\n  var justDomain = /^[^:]+:\\/*[^/]*$/;\n  var protocol = /^([^:]+:)[\\s\\S]*$/;\n  var domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n  function resolveUrl(base, href) {\n    if (!baseUrls[' ' + base]) {\n      // we can ignore everything in base after the last slash of its path component,\n      // but we might need to add _that_\n      // https://tools.ietf.org/html/rfc3986#section-3\n      if (justDomain.test(base)) {\n        baseUrls[' ' + base] = base + '/';\n      } else {\n        baseUrls[' ' + base] = rtrim(base, '/', true);\n      }\n    }\n\n    base = baseUrls[' ' + base];\n    var relativeBase = base.indexOf(':') === -1;\n\n    if (href.substring(0, 2) === '//') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(protocol, '$1') + href;\n    } else if (href.charAt(0) === '/') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(domain, '$1') + href;\n    } else {\n      return base + href;\n    }\n  }\n  var noopTest = {\n    exec: function noopTest() {}\n  };\n  function merge(obj) {\n    var i = 1,\n        target,\n        key;\n\n    for (; i < arguments.length; i++) {\n      target = arguments[i];\n\n      for (key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n          obj[key] = target[key];\n        }\n      }\n    }\n\n    return obj;\n  }\n  function splitCells(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    var row = tableRow.replace(/\\|/g, function (match, offset, str) {\n      var escaped = false,\n          curr = offset;\n\n      while (--curr >= 0 && str[curr] === '\\\\') {\n        escaped = !escaped;\n      }\n\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n        cells = row.split(/ \\|/);\n    var i = 0; // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n\n    if (!cells[0].trim()) {\n      cells.shift();\n    }\n\n    if (!cells[cells.length - 1].trim()) {\n      cells.pop();\n    }\n\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) {\n        cells.push('');\n      }\n    }\n\n    for (; i < cells.length; i++) {\n      // leading or trailing whitespace is ignored per the gfm spec\n      cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n    }\n\n    return cells;\n  } // Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n  // /c*$/ is vulnerable to REDOS.\n  // invert: Remove suffix of non-c chars instead. Default falsey.\n\n  function rtrim(str, c, invert) {\n    var l = str.length;\n\n    if (l === 0) {\n      return '';\n    } // Length of suffix matching the invert condition.\n\n\n    var suffLen = 0; // Step left until we fail to match the invert condition.\n\n    while (suffLen < l) {\n      var currChar = str.charAt(l - suffLen - 1);\n\n      if (currChar === c && !invert) {\n        suffLen++;\n      } else if (currChar !== c && invert) {\n        suffLen++;\n      } else {\n        break;\n      }\n    }\n\n    return str.substr(0, l - suffLen);\n  }\n  function findClosingBracket(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n      return -1;\n    }\n\n    var l = str.length;\n    var level = 0,\n        i = 0;\n\n    for (; i < l; i++) {\n      if (str[i] === '\\\\') {\n        i++;\n      } else if (str[i] === b[0]) {\n        level++;\n      } else if (str[i] === b[1]) {\n        level--;\n\n        if (level < 0) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n  function checkSanitizeDeprecation(opt) {\n    if (opt && opt.sanitize && !opt.silent) {\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n    }\n  } // copied from https://stackoverflow.com/a/5450113/806777\n\n  function repeatString(pattern, count) {\n    if (count < 1) {\n      return '';\n    }\n\n    var result = '';\n\n    while (count > 1) {\n      if (count & 1) {\n        result += pattern;\n      }\n\n      count >>= 1;\n      pattern += pattern;\n    }\n\n    return result + pattern;\n  }\n\n  function outputLink(cap, link, raw, lexer) {\n    var href = link.href;\n    var title = link.title ? escape(link.title) : null;\n    var text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n    if (cap[0].charAt(0) !== '!') {\n      lexer.state.inLink = true;\n      var token = {\n        type: 'link',\n        raw: raw,\n        href: href,\n        title: title,\n        text: text,\n        tokens: lexer.inlineTokens(text, [])\n      };\n      lexer.state.inLink = false;\n      return token;\n    } else {\n      return {\n        type: 'image',\n        raw: raw,\n        href: href,\n        title: title,\n        text: escape(text)\n      };\n    }\n  }\n\n  function indentCodeCompensation(raw, text) {\n    var matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n    if (matchIndentToCode === null) {\n      return text;\n    }\n\n    var indentToCode = matchIndentToCode[1];\n    return text.split('\\n').map(function (node) {\n      var matchIndentInNode = node.match(/^\\s+/);\n\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      var indentInNode = matchIndentInNode[0];\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    }).join('\\n');\n  }\n  /**\n   * Tokenizer\n   */\n\n\n  var Tokenizer = /*#__PURE__*/function () {\n    function Tokenizer(options) {\n      this.options = options || exports.defaults;\n    }\n\n    var _proto = Tokenizer.prototype;\n\n    _proto.space = function space(src) {\n      var cap = this.rules.block.newline.exec(src);\n\n      if (cap && cap[0].length > 0) {\n          return {\n            type: 'space',\n            raw: cap[0]\n          };\n        }\n    };\n\n    _proto.code = function code(src) {\n      var cap = this.rules.block.code.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ {1,4}/gm, '');\n        return {\n          type: 'code',\n          raw: cap[0],\n          codeBlockStyle: 'indented',\n          text: !this.options.pedantic ? rtrim(text, '\\n') : text\n        };\n      }\n    };\n\n    _proto.fences = function fences(src) {\n      var cap = this.rules.block.fences.exec(src);\n\n      if (cap) {\n        var raw = cap[0];\n        var text = indentCodeCompensation(raw, cap[3] || '');\n        return {\n          type: 'code',\n          raw: raw,\n          lang: cap[2] ? cap[2].trim() : cap[2],\n          text: text\n        };\n      }\n    };\n\n    _proto.heading = function heading(src) {\n      var cap = this.rules.block.heading.exec(src);\n\n      if (cap) {\n        var text = cap[2].trim(); // remove trailing #s\n\n        if (/#$/.test(text)) {\n          var trimmed = rtrim(text, '#');\n\n          if (this.options.pedantic) {\n            text = trimmed.trim();\n          } else if (!trimmed || / $/.test(trimmed)) {\n            // CommonMark requires space before trailing #s\n            text = trimmed.trim();\n          }\n        }\n\n        var token = {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[1].length,\n          text: text,\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.hr = function hr(src) {\n      var cap = this.rules.block.hr.exec(src);\n\n      if (cap) {\n        return {\n          type: 'hr',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.blockquote = function blockquote(src) {\n      var cap = this.rules.block.blockquote.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ *> ?/gm, '');\n        return {\n          type: 'blockquote',\n          raw: cap[0],\n          tokens: this.lexer.blockTokens(text, []),\n          text: text\n        };\n      }\n    };\n\n    _proto.list = function list(src) {\n      var cap = this.rules.block.list.exec(src);\n\n      if (cap) {\n        var raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine, line, nextLine, rawLine, itemContents, endEarly;\n        var bull = cap[1].trim();\n        var isordered = bull.length > 1;\n        var list = {\n          type: 'list',\n          raw: '',\n          ordered: isordered,\n          start: isordered ? +bull.slice(0, -1) : '',\n          loose: false,\n          items: []\n        };\n        bull = isordered ? \"\\\\d{1,9}\\\\\" + bull.slice(-1) : \"\\\\\" + bull;\n\n        if (this.options.pedantic) {\n          bull = isordered ? bull : '[*+-]';\n        } // Get next list item\n\n\n        var itemRegex = new RegExp(\"^( {0,3}\" + bull + \")((?: [^\\\\n]*)?(?:\\\\n|$))\"); // Check if current bullet point can start a new List Item\n\n        while (src) {\n          endEarly = false;\n\n          if (!(cap = itemRegex.exec(src))) {\n            break;\n          }\n\n          if (this.rules.block.hr.test(src)) {\n            // End list if bullet was actually HR (possibly move into itemRegex?)\n            break;\n          }\n\n          raw = cap[0];\n          src = src.substring(raw.length);\n          line = cap[2].split('\\n', 1)[0];\n          nextLine = src.split('\\n', 1)[0];\n\n          if (this.options.pedantic) {\n            indent = 2;\n            itemContents = line.trimLeft();\n          } else {\n            indent = cap[2].search(/[^ ]/); // Find first non-space char\n\n            indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\n\n            itemContents = line.slice(indent);\n            indent += cap[1].length;\n          }\n\n          blankLine = false;\n\n          if (!line && /^ *$/.test(nextLine)) {\n            // Items begin with at most one blank line\n            raw += nextLine + '\\n';\n            src = src.substring(nextLine.length + 1);\n            endEarly = true;\n          }\n\n          if (!endEarly) {\n            var nextBulletRegex = new RegExp(\"^ {0,\" + Math.min(3, indent - 1) + \"}(?:[*+-]|\\\\d{1,9}[.)])\"); // Check if following lines should be included in List Item\n\n            while (src) {\n              rawLine = src.split('\\n', 1)[0];\n              line = rawLine; // Re-align to follow commonmark nesting rules\n\n            if (this.options.pedantic) {\n              line = line.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\n            } // End list item if found start of new bullet\n\n\n            if (nextBulletRegex.test(line)) {\n              break;\n              }\n\n            if (line.search(/[^ ]/) >= indent || !line.trim()) {\n                // Dedent if possible\n              itemContents += '\\n' + line.slice(indent);\n              } else if (!blankLine) {\n                // Until blank line, item doesn't need indentation\n                itemContents += '\\n' + line;\n            } else {\n                // Otherwise, improper indentation ends this item\n              break;\n            }\n\n              if (!blankLine && !line.trim()) {\n                // Check if current line is blank\n                blankLine = true;\n              }\n\n              raw += rawLine + '\\n';\n              src = src.substring(rawLine.length + 1);\n            }\n          }\n\n          if (!list.loose) {\n            // If the previous item ended with a blank line, the list is loose\n            if (endsWithBlankLine) {\n              list.loose = true;\n            } else if (/\\n *\\n *$/.test(raw)) {\n              endsWithBlankLine = true;\n            }\n          } // Check for task list items\n\n\n          if (this.options.gfm) {\n            istask = /^\\[[ xX]\\] /.exec(itemContents);\n\n            if (istask) {\n              ischecked = istask[0] !== '[ ] ';\n              itemContents = itemContents.replace(/^\\[[ xX]\\] +/, '');\n            }\n          }\n\n          list.items.push({\n            type: 'list_item',\n            raw: raw,\n            task: !!istask,\n            checked: ischecked,\n            loose: false,\n            text: itemContents\n          });\n          list.raw += raw;\n        } // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n\n\n        list.items[list.items.length - 1].raw = raw.trimRight();\n        list.items[list.items.length - 1].text = itemContents.trimRight();\n        list.raw = list.raw.trimRight();\n        var l = list.items.length; // Item child tokens handled here at end because we needed to have the final item to trim it first\n\n        for (i = 0; i < l; i++) {\n          this.lexer.state.top = false;\n          list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n          var spacers = list.items[i].tokens.filter(function (t) {\n            return t.type === 'space';\n          });\n          var hasMultipleLineBreaks = spacers.every(function (t) {\n            var chars = t.raw.split('');\n            var lineBreaks = 0;\n\n            for (var _iterator = _createForOfIteratorHelperLoose(chars), _step; !(_step = _iterator()).done;) {\n              var _char = _step.value;\n\n              if (_char === '\\n') {\n                lineBreaks += 1;\n              }\n\n              if (lineBreaks > 1) {\n                return true;\n              }\n            }\n\n            return false;\n          });\n\n          if (!list.loose && spacers.length && hasMultipleLineBreaks) {\n            // Having a single line break doesn't mean a list is loose. A single line break is terminating the last list item\n            list.loose = true;\n            list.items[i].loose = true;\n          }\n        }\n\n        return list;\n      }\n    };\n\n    _proto.html = function html(src) {\n      var cap = this.rules.block.html.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'html',\n          raw: cap[0],\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: cap[0]\n        };\n\n        if (this.options.sanitize) {\n          token.type = 'paragraph';\n          token.text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\n          token.tokens = [];\n          this.lexer.inline(token.text, token.tokens);\n        }\n\n        return token;\n      }\n    };\n\n    _proto.def = function def(src) {\n      var cap = this.rules.block.def.exec(src);\n\n      if (cap) {\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n        var tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n        return {\n          type: 'def',\n          tag: tag,\n          raw: cap[0],\n          href: cap[2],\n          title: cap[3]\n        };\n      }\n    };\n\n    _proto.table = function table(src) {\n      var cap = this.rules.block.table.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells(cap[1]).map(function (c) {\n            return {\n              text: c\n            };\n          }),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          rows: cap[3] ? cap[3].replace(/\\n[ \\t]*$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          item.raw = cap[0];\n          var l = item.align.length;\n          var i, j, k, row;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.rows.length;\n\n          for (i = 0; i < l; i++) {\n            item.rows[i] = splitCells(item.rows[i], item.header.length).map(function (c) {\n              return {\n                text: c\n              };\n            });\n          } // parse child tokens inside headers and cells\n          // header child tokens\n\n\n          l = item.header.length;\n\n          for (j = 0; j < l; j++) {\n            item.header[j].tokens = [];\n            this.lexer.inlineTokens(item.header[j].text, item.header[j].tokens);\n          } // cell child tokens\n\n\n          l = item.rows.length;\n\n          for (j = 0; j < l; j++) {\n            row = item.rows[j];\n\n            for (k = 0; k < row.length; k++) {\n              row[k].tokens = [];\n              this.lexer.inlineTokens(row[k].text, row[k].tokens);\n            }\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.lheading = function lheading(src) {\n      var cap = this.rules.block.lheading.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\n          text: cap[1],\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.paragraph = function paragraph(src) {\n      var cap = this.rules.block.paragraph.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'paragraph',\n          raw: cap[0],\n          text: cap[1].charAt(cap[1].length - 1) === '\\n' ? cap[1].slice(0, -1) : cap[1],\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.text = function text(src) {\n      var cap = this.rules.block.text.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'text',\n          raw: cap[0],\n          text: cap[0],\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.escape = function escape$1(src) {\n      var cap = this.rules.inline.escape.exec(src);\n\n      if (cap) {\n        return {\n          type: 'escape',\n          raw: cap[0],\n          text: escape(cap[1])\n        };\n      }\n    };\n\n    _proto.tag = function tag(src) {\n      var cap = this.rules.inline.tag.exec(src);\n\n      if (cap) {\n        if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\n          this.lexer.state.inLink = true;\n        } else if (this.lexer.state.inLink && /^<\\/a>/i.test(cap[0])) {\n          this.lexer.state.inLink = false;\n        }\n\n        if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.lexer.state.inRawBlock = true;\n        } else if (this.lexer.state.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.lexer.state.inRawBlock = false;\n        }\n\n        return {\n          type: this.options.sanitize ? 'text' : 'html',\n          raw: cap[0],\n          inLink: this.lexer.state.inLink,\n          inRawBlock: this.lexer.state.inRawBlock,\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0]\n        };\n      }\n    };\n\n    _proto.link = function link(src) {\n      var cap = this.rules.inline.link.exec(src);\n\n      if (cap) {\n        var trimmedUrl = cap[2].trim();\n\n        if (!this.options.pedantic && /^</.test(trimmedUrl)) {\n          // commonmark requires matching angle brackets\n          if (!/>$/.test(trimmedUrl)) {\n            return;\n          } // ending angle bracket cannot be escaped\n\n\n          var rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n\n          if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n            return;\n          }\n        } else {\n          // find closing parenthesis\n          var lastParenIndex = findClosingBracket(cap[2], '()');\n\n          if (lastParenIndex > -1) {\n            var start = cap[0].indexOf('!') === 0 ? 5 : 4;\n            var linkLen = start + cap[1].length + lastParenIndex;\n            cap[2] = cap[2].substring(0, lastParenIndex);\n            cap[0] = cap[0].substring(0, linkLen).trim();\n            cap[3] = '';\n          }\n        }\n\n        var href = cap[2];\n        var title = '';\n\n        if (this.options.pedantic) {\n          // split pedantic href and title\n          var link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n          if (link) {\n            href = link[1];\n            title = link[3];\n          }\n        } else {\n          title = cap[3] ? cap[3].slice(1, -1) : '';\n        }\n\n        href = href.trim();\n\n        if (/^</.test(href)) {\n          if (this.options.pedantic && !/>$/.test(trimmedUrl)) {\n            // pedantic allows starting angle bracket without ending angle bracket\n            href = href.slice(1);\n          } else {\n            href = href.slice(1, -1);\n          }\n        }\n\n        return outputLink(cap, {\n          href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n          title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n        }, cap[0], this.lexer);\n      }\n    };\n\n    _proto.reflink = function reflink(src, links) {\n      var cap;\n\n      if ((cap = this.rules.inline.reflink.exec(src)) || (cap = this.rules.inline.nolink.exec(src))) {\n        var link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n        link = links[link.toLowerCase()];\n\n        if (!link || !link.href) {\n          var text = cap[0].charAt(0);\n          return {\n            type: 'text',\n            raw: text,\n            text: text\n          };\n        }\n\n        return outputLink(cap, link, cap[0], this.lexer);\n      }\n    };\n\n    _proto.emStrong = function emStrong(src, maskedSrc, prevChar) {\n      if (prevChar === void 0) {\n        prevChar = '';\n      }\n\n      var match = this.rules.inline.emStrong.lDelim.exec(src);\n      if (!match) return; // _ can't be between two alphanumerics. \\p{L}\\p{N} includes non-english alphabet/numbers as well\n\n      if (match[3] && prevChar.match(/(?:[0-9A-Za-z\\xAA\\xB2\\xB3\\xB5\\xB9\\xBA\\xBC-\\xBE\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0560-\\u0588\\u05D0-\\u05EA\\u05EF-\\u05F2\\u0620-\\u064A\\u0660-\\u0669\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07C0-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u0860-\\u086A\\u0870-\\u0887\\u0889-\\u088E\\u08A0-\\u08C9\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0966-\\u096F\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09E6-\\u09F1\\u09F4-\\u09F9\\u09FC\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A6F\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AE6-\\u0AEF\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B66-\\u0B6F\\u0B71-\\u0B77\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0BE6-\\u0BF2\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C5D\\u0C60\\u0C61\\u0C66-\\u0C6F\\u0C78-\\u0C7E\\u0C80\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDD\\u0CDE\\u0CE0\\u0CE1\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D04-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D54-\\u0D56\\u0D58-\\u0D61\\u0D66-\\u0D78\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DE6-\\u0DEF\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E86-\\u0E8A\\u0E8C-\\u0EA3\\u0EA5\\u0EA7-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F20-\\u0F33\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F-\\u1049\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u1090-\\u1099\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1369-\\u137C\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u1711\\u171F-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u17E0-\\u17E9\\u17F0-\\u17F9\\u1810-\\u1819\\u1820-\\u1878\\u1880-\\u1884\\u1887-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19DA\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4C\\u1B50-\\u1B59\\u1B83-\\u1BA0\\u1BAE-\\u1BE5\\u1C00-\\u1C23\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1C80-\\u1C88\\u1C90-\\u1CBA\\u1CBD-\\u1CBF\\u1CE9-\\u1CEC\\u1CEE-\\u1CF3\\u1CF5\\u1CF6\\u1CFA\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2070\\u2071\\u2074-\\u2079\\u207F-\\u2089\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2150-\\u2189\\u2460-\\u249B\\u24EA-\\u24FF\\u2776-\\u2793\\u2C00-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2CFD\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312F\\u3131-\\u318E\\u3192-\\u3195\\u31A0-\\u31BF\\u31F0-\\u31FF\\u3220-\\u3229\\u3248-\\u324F\\u3251-\\u325F\\u3280-\\u3289\\u32B1-\\u32BF\\u3400-\\u4DBF\\u4E00-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7CA\\uA7D0\\uA7D1\\uA7D3\\uA7D5-\\uA7D9\\uA7F2-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA830-\\uA835\\uA840-\\uA873\\uA882-\\uA8B3\\uA8D0-\\uA8D9\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA8FE\\uA900-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF-\\uA9D9\\uA9E0-\\uA9E4\\uA9E6-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB69\\uAB70-\\uABE2\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]|\\uD800[\\uDC00-\\uDC0B\\uDC0D-\\uDC26\\uDC28-\\uDC3A\\uDC3C\\uDC3D\\uDC3F-\\uDC4D\\uDC50-\\uDC5D\\uDC80-\\uDCFA\\uDD07-\\uDD33\\uDD40-\\uDD78\\uDD8A\\uDD8B\\uDE80-\\uDE9C\\uDEA0-\\uDED0\\uDEE1-\\uDEFB\\uDF00-\\uDF23\\uDF2D-\\uDF4A\\uDF50-\\uDF75\\uDF80-\\uDF9D\\uDFA0-\\uDFC3\\uDFC8-\\uDFCF\\uDFD1-\\uDFD5]|\\uD801[\\uDC00-\\uDC9D\\uDCA0-\\uDCA9\\uDCB0-\\uDCD3\\uDCD8-\\uDCFB\\uDD00-\\uDD27\\uDD30-\\uDD63\\uDD70-\\uDD7A\\uDD7C-\\uDD8A\\uDD8C-\\uDD92\\uDD94\\uDD95\\uDD97-\\uDDA1\\uDDA3-\\uDDB1\\uDDB3-\\uDDB9\\uDDBB\\uDDBC\\uDE00-\\uDF36\\uDF40-\\uDF55\\uDF60-\\uDF67\\uDF80-\\uDF85\\uDF87-\\uDFB0\\uDFB2-\\uDFBA]|\\uD802[\\uDC00-\\uDC05\\uDC08\\uDC0A-\\uDC35\\uDC37\\uDC38\\uDC3C\\uDC3F-\\uDC55\\uDC58-\\uDC76\\uDC79-\\uDC9E\\uDCA7-\\uDCAF\\uDCE0-\\uDCF2\\uDCF4\\uDCF5\\uDCFB-\\uDD1B\\uDD20-\\uDD39\\uDD80-\\uDDB7\\uDDBC-\\uDDCF\\uDDD2-\\uDE00\\uDE10-\\uDE13\\uDE15-\\uDE17\\uDE19-\\uDE35\\uDE40-\\uDE48\\uDE60-\\uDE7E\\uDE80-\\uDE9F\\uDEC0-\\uDEC7\\uDEC9-\\uDEE4\\uDEEB-\\uDEEF\\uDF00-\\uDF35\\uDF40-\\uDF55\\uDF58-\\uDF72\\uDF78-\\uDF91\\uDFA9-\\uDFAF]|\\uD803[\\uDC00-\\uDC48\\uDC80-\\uDCB2\\uDCC0-\\uDCF2\\uDCFA-\\uDD23\\uDD30-\\uDD39\\uDE60-\\uDE7E\\uDE80-\\uDEA9\\uDEB0\\uDEB1\\uDF00-\\uDF27\\uDF30-\\uDF45\\uDF51-\\uDF54\\uDF70-\\uDF81\\uDFB0-\\uDFCB\\uDFE0-\\uDFF6]|\\uD804[\\uDC03-\\uDC37\\uDC52-\\uDC6F\\uDC71\\uDC72\\uDC75\\uDC83-\\uDCAF\\uDCD0-\\uDCE8\\uDCF0-\\uDCF9\\uDD03-\\uDD26\\uDD36-\\uDD3F\\uDD44\\uDD47\\uDD50-\\uDD72\\uDD76\\uDD83-\\uDDB2\\uDDC1-\\uDDC4\\uDDD0-\\uDDDA\\uDDDC\\uDDE1-\\uDDF4\\uDE00-\\uDE11\\uDE13-\\uDE2B\\uDE80-\\uDE86\\uDE88\\uDE8A-\\uDE8D\\uDE8F-\\uDE9D\\uDE9F-\\uDEA8\\uDEB0-\\uDEDE\\uDEF0-\\uDEF9\\uDF05-\\uDF0C\\uDF0F\\uDF10\\uDF13-\\uDF28\\uDF2A-\\uDF30\\uDF32\\uDF33\\uDF35-\\uDF39\\uDF3D\\uDF50\\uDF5D-\\uDF61]|\\uD805[\\uDC00-\\uDC34\\uDC47-\\uDC4A\\uDC50-\\uDC59\\uDC5F-\\uDC61\\uDC80-\\uDCAF\\uDCC4\\uDCC5\\uDCC7\\uDCD0-\\uDCD9\\uDD80-\\uDDAE\\uDDD8-\\uDDDB\\uDE00-\\uDE2F\\uDE44\\uDE50-\\uDE59\\uDE80-\\uDEAA\\uDEB8\\uDEC0-\\uDEC9\\uDF00-\\uDF1A\\uDF30-\\uDF3B\\uDF40-\\uDF46]|\\uD806[\\uDC00-\\uDC2B\\uDCA0-\\uDCF2\\uDCFF-\\uDD06\\uDD09\\uDD0C-\\uDD13\\uDD15\\uDD16\\uDD18-\\uDD2F\\uDD3F\\uDD41\\uDD50-\\uDD59\\uDDA0-\\uDDA7\\uDDAA-\\uDDD0\\uDDE1\\uDDE3\\uDE00\\uDE0B-\\uDE32\\uDE3A\\uDE50\\uDE5C-\\uDE89\\uDE9D\\uDEB0-\\uDEF8]|\\uD807[\\uDC00-\\uDC08\\uDC0A-\\uDC2E\\uDC40\\uDC50-\\uDC6C\\uDC72-\\uDC8F\\uDD00-\\uDD06\\uDD08\\uDD09\\uDD0B-\\uDD30\\uDD46\\uDD50-\\uDD59\\uDD60-\\uDD65\\uDD67\\uDD68\\uDD6A-\\uDD89\\uDD98\\uDDA0-\\uDDA9\\uDEE0-\\uDEF2\\uDFB0\\uDFC0-\\uDFD4]|\\uD808[\\uDC00-\\uDF99]|\\uD809[\\uDC00-\\uDC6E\\uDC80-\\uDD43]|\\uD80B[\\uDF90-\\uDFF0]|[\\uD80C\\uD81C-\\uD820\\uD822\\uD840-\\uD868\\uD86A-\\uD86C\\uD86F-\\uD872\\uD874-\\uD879\\uD880-\\uD883][\\uDC00-\\uDFFF]|\\uD80D[\\uDC00-\\uDC2E]|\\uD811[\\uDC00-\\uDE46]|\\uD81A[\\uDC00-\\uDE38\\uDE40-\\uDE5E\\uDE60-\\uDE69\\uDE70-\\uDEBE\\uDEC0-\\uDEC9\\uDED0-\\uDEED\\uDF00-\\uDF2F\\uDF40-\\uDF43\\uDF50-\\uDF59\\uDF5B-\\uDF61\\uDF63-\\uDF77\\uDF7D-\\uDF8F]|\\uD81B[\\uDE40-\\uDE96\\uDF00-\\uDF4A\\uDF50\\uDF93-\\uDF9F\\uDFE0\\uDFE1\\uDFE3]|\\uD821[\\uDC00-\\uDFF7]|\\uD823[\\uDC00-\\uDCD5\\uDD00-\\uDD08]|\\uD82B[\\uDFF0-\\uDFF3\\uDFF5-\\uDFFB\\uDFFD\\uDFFE]|\\uD82C[\\uDC00-\\uDD22\\uDD50-\\uDD52\\uDD64-\\uDD67\\uDD70-\\uDEFB]|\\uD82F[\\uDC00-\\uDC6A\\uDC70-\\uDC7C\\uDC80-\\uDC88\\uDC90-\\uDC99]|\\uD834[\\uDEE0-\\uDEF3\\uDF60-\\uDF78]|\\uD835[\\uDC00-\\uDC54\\uDC56-\\uDC9C\\uDC9E\\uDC9F\\uDCA2\\uDCA5\\uDCA6\\uDCA9-\\uDCAC\\uDCAE-\\uDCB9\\uDCBB\\uDCBD-\\uDCC3\\uDCC5-\\uDD05\\uDD07-\\uDD0A\\uDD0D-\\uDD14\\uDD16-\\uDD1C\\uDD1E-\\uDD39\\uDD3B-\\uDD3E\\uDD40-\\uDD44\\uDD46\\uDD4A-\\uDD50\\uDD52-\\uDEA5\\uDEA8-\\uDEC0\\uDEC2-\\uDEDA\\uDEDC-\\uDEFA\\uDEFC-\\uDF14\\uDF16-\\uDF34\\uDF36-\\uDF4E\\uDF50-\\uDF6E\\uDF70-\\uDF88\\uDF8A-\\uDFA8\\uDFAA-\\uDFC2\\uDFC4-\\uDFCB\\uDFCE-\\uDFFF]|\\uD837[\\uDF00-\\uDF1E]|\\uD838[\\uDD00-\\uDD2C\\uDD37-\\uDD3D\\uDD40-\\uDD49\\uDD4E\\uDE90-\\uDEAD\\uDEC0-\\uDEEB\\uDEF0-\\uDEF9]|\\uD839[\\uDFE0-\\uDFE6\\uDFE8-\\uDFEB\\uDFED\\uDFEE\\uDFF0-\\uDFFE]|\\uD83A[\\uDC00-\\uDCC4\\uDCC7-\\uDCCF\\uDD00-\\uDD43\\uDD4B\\uDD50-\\uDD59]|\\uD83B[\\uDC71-\\uDCAB\\uDCAD-\\uDCAF\\uDCB1-\\uDCB4\\uDD01-\\uDD2D\\uDD2F-\\uDD3D\\uDE00-\\uDE03\\uDE05-\\uDE1F\\uDE21\\uDE22\\uDE24\\uDE27\\uDE29-\\uDE32\\uDE34-\\uDE37\\uDE39\\uDE3B\\uDE42\\uDE47\\uDE49\\uDE4B\\uDE4D-\\uDE4F\\uDE51\\uDE52\\uDE54\\uDE57\\uDE59\\uDE5B\\uDE5D\\uDE5F\\uDE61\\uDE62\\uDE64\\uDE67-\\uDE6A\\uDE6C-\\uDE72\\uDE74-\\uDE77\\uDE79-\\uDE7C\\uDE7E\\uDE80-\\uDE89\\uDE8B-\\uDE9B\\uDEA1-\\uDEA3\\uDEA5-\\uDEA9\\uDEAB-\\uDEBB]|\\uD83C[\\uDD00-\\uDD0C]|\\uD83E[\\uDFF0-\\uDFF9]|\\uD869[\\uDC00-\\uDEDF\\uDF00-\\uDFFF]|\\uD86D[\\uDC00-\\uDF38\\uDF40-\\uDFFF]|\\uD86E[\\uDC00-\\uDC1D\\uDC20-\\uDFFF]|\\uD873[\\uDC00-\\uDEA1\\uDEB0-\\uDFFF]|\\uD87A[\\uDC00-\\uDFE0]|\\uD87E[\\uDC00-\\uDE1D]|\\uD884[\\uDC00-\\uDF4A])/)) return;\n      var nextChar = match[1] || match[2] || '';\n\n      if (!nextChar || nextChar && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar))) {\n        var lLength = match[0].length - 1;\n        var rDelim,\n            rLength,\n            delimTotal = lLength,\n            midDelimTotal = 0;\n        var endReg = match[0][0] === '*' ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;\n        endReg.lastIndex = 0; // Clip maskedSrc to same section of string as src (move to lexer?)\n\n        maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n\n        while ((match = endReg.exec(maskedSrc)) != null) {\n          rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n          if (!rDelim) continue; // skip single * in __abc*abc__\n\n          rLength = rDelim.length;\n\n          if (match[3] || match[4]) {\n            // found another Left Delim\n            delimTotal += rLength;\n            continue;\n          } else if (match[5] || match[6]) {\n            // either Left or Right Delim\n            if (lLength % 3 && !((lLength + rLength) % 3)) {\n              midDelimTotal += rLength;\n              continue; // CommonMark Emphasis Rules 9-10\n            }\n          }\n\n          delimTotal -= rLength;\n          if (delimTotal > 0) continue; // Haven't found enough closing delimiters\n          // Remove extra characters. *a*** -> *a*\n\n          rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal); // Create `em` if smallest delimiter has odd char count. *a***\n\n          if (Math.min(lLength, rLength) % 2) {\n            var _text = src.slice(1, lLength + match.index + rLength);\n\n            return {\n              type: 'em',\n              raw: src.slice(0, lLength + match.index + rLength + 1),\n              text: _text,\n              tokens: this.lexer.inlineTokens(_text, [])\n            };\n          } // Create 'strong' if smallest delimiter has even char count. **a***\n\n\n          var text = src.slice(2, lLength + match.index + rLength - 1);\n          return {\n            type: 'strong',\n            raw: src.slice(0, lLength + match.index + rLength + 1),\n            text: text,\n            tokens: this.lexer.inlineTokens(text, [])\n          };\n        }\n      }\n    };\n\n    _proto.codespan = function codespan(src) {\n      var cap = this.rules.inline.code.exec(src);\n\n      if (cap) {\n        var text = cap[2].replace(/\\n/g, ' ');\n        var hasNonSpaceChars = /[^ ]/.test(text);\n        var hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\n\n        if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n          text = text.substring(1, text.length - 1);\n        }\n\n        text = escape(text, true);\n        return {\n          type: 'codespan',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    _proto.br = function br(src) {\n      var cap = this.rules.inline.br.exec(src);\n\n      if (cap) {\n        return {\n          type: 'br',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.del = function del(src) {\n      var cap = this.rules.inline.del.exec(src);\n\n      if (cap) {\n        return {\n          type: 'del',\n          raw: cap[0],\n          text: cap[2],\n          tokens: this.lexer.inlineTokens(cap[2], [])\n        };\n      }\n    };\n\n    _proto.autolink = function autolink(src, mangle) {\n      var cap = this.rules.inline.autolink.exec(src);\n\n      if (cap) {\n        var text, href;\n\n        if (cap[2] === '@') {\n          text = escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\n          href = 'mailto:' + text;\n        } else {\n          text = escape(cap[1]);\n          href = text;\n        }\n\n        return {\n          type: 'link',\n          raw: cap[0],\n          text: text,\n          href: href,\n          tokens: [{\n            type: 'text',\n            raw: text,\n            text: text\n          }]\n        };\n      }\n    };\n\n    _proto.url = function url(src, mangle) {\n      var cap;\n\n      if (cap = this.rules.inline.url.exec(src)) {\n        var text, href;\n\n        if (cap[2] === '@') {\n          text = escape(this.options.mangle ? mangle(cap[0]) : cap[0]);\n          href = 'mailto:' + text;\n        } else {\n          // do extended autolink path validation\n          var prevCapZero;\n\n          do {\n            prevCapZero = cap[0];\n            cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\n          } while (prevCapZero !== cap[0]);\n\n          text = escape(cap[0]);\n\n          if (cap[1] === 'www.') {\n            href = 'http://' + text;\n          } else {\n            href = text;\n          }\n        }\n\n        return {\n          type: 'link',\n          raw: cap[0],\n          text: text,\n          href: href,\n          tokens: [{\n            type: 'text',\n            raw: text,\n            text: text\n          }]\n        };\n      }\n    };\n\n    _proto.inlineText = function inlineText(src, smartypants) {\n      var cap = this.rules.inline.text.exec(src);\n\n      if (cap) {\n        var text;\n\n        if (this.lexer.state.inRawBlock) {\n          text = this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0];\n        } else {\n          text = escape(this.options.smartypants ? smartypants(cap[0]) : cap[0]);\n        }\n\n        return {\n          type: 'text',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    return Tokenizer;\n  }();\n\n  /**\n   * Block-Level Grammar\n   */\n\n  var block = {\n    newline: /^(?: *(?:\\n|$))+/,\n    code: /^( {4}[^\\n]+(?:\\n(?: *(?:\\n|$))*)?)+/,\n    fences: /^ {0,3}(`{3,}(?=[^`\\n]*\\n)|~{3,})([^\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/,\n    hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)/,\n    heading: /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/,\n    blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n    list: /^( {0,3}bull)( [^\\n]+?)?(?:\\n|$)/,\n    html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (6)\n    + '|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) open tag\n    + '|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) closing tag\n    + ')',\n    def: /^ {0,3}\\[(label)\\]: *(?:\\n *)?<?([^\\s>]+)>?(?:(?: +(?:\\n *)?| *\\n *)(title))? *(?:\\n+|$)/,\n    table: noopTest,\n    lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n    // regex template, placeholders will be replaced according to different paragraph\n    // interruption rules of commonmark and the original markdown spec:\n    _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\n)[^\\n]+)*)/,\n    text: /^[^\\n]+/\n  };\n  block._label = /(?!\\s*\\])(?:\\\\.|[^\\[\\]\\\\])+/;\n  block._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\n  block.def = edit(block.def).replace('label', block._label).replace('title', block._title).getRegex();\n  block.bullet = /(?:[*+-]|\\d{1,9}[.)])/;\n  block.listItemStart = edit(/^( *)(bull) */).replace('bull', block.bullet).getRegex();\n  block.list = edit(block.list).replace(/bull/g, block.bullet).replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))').replace('def', '\\\\n+(?=' + block.def.source + ')').getRegex();\n  block._tag = 'address|article|aside|base|basefont|blockquote|body|caption' + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption' + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe' + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option' + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr' + '|track|ul';\n  block._comment = /<!--(?!-?>)[\\s\\S]*?(?:-->|$)/;\n  block.html = edit(block.html, 'i').replace('comment', block._comment).replace('tag', block._tag).replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/).getRegex();\n  block.paragraph = edit(block._paragraph).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} ').replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('|table', '').replace('blockquote', ' {0,3}>').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n  block.blockquote = edit(block.blockquote).replace('paragraph', block.paragraph).getRegex();\n  /**\n   * Normal Block Grammar\n   */\n\n  block.normal = merge({}, block);\n  /**\n   * GFM Block Grammar\n   */\n\n  block.gfm = merge({}, block.normal, {\n    table: '^ *([^\\\\n ].*\\\\|.*)\\\\n' // Header\n    + ' {0,3}(?:\\\\| *)?(:?-+:? *(?:\\\\| *:?-+:? *)*)(?:\\\\| *)?' // Align\n    + '(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)' // Cells\n\n  });\n  block.gfm.table = edit(block.gfm.table).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} ').replace('blockquote', ' {0,3}>').replace('code', ' {4}[^\\\\n]').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag', block._tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n  block.gfm.paragraph = edit(block._paragraph).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} ').replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('table', block.gfm.table) // interrupt paragraphs with table\n  .replace('blockquote', ' {0,3}>').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n  /**\n   * Pedantic grammar (original John Gruber's loose markdown specification)\n   */\n\n  block.pedantic = merge({}, block.normal, {\n    html: edit('^ *(?:comment *(?:\\\\n|\\\\s*$)' + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))').replace('comment', block._comment).replace(/tag/g, '(?!(?:' + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub' + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)' + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b').getRegex(),\n    def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n    heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n    fences: noopTest,\n    // fences not supported\n    paragraph: edit(block.normal._paragraph).replace('hr', block.hr).replace('heading', ' *#{1,6} *[^\\n]').replace('lheading', block.lheading).replace('blockquote', ' {0,3}>').replace('|fences', '').replace('|list', '').replace('|html', '').getRegex()\n  });\n  /**\n   * Inline-Level Grammar\n   */\n\n  var inline = {\n    escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n    autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n    url: noopTest,\n    tag: '^comment' + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>',\n    // CDATA section\n    link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n    reflink: /^!?\\[(label)\\]\\[(ref)\\]/,\n    nolink: /^!?\\[(ref)\\](?:\\[\\])?/,\n    reflinkSearch: 'reflink|nolink(?!\\\\()',\n    emStrong: {\n      lDelim: /^(?:\\*+(?:([punct_])|[^\\s*]))|^_+(?:([punct*])|([^\\s_]))/,\n      //        (1) and (2) can only be a Right Delimiter. (3) and (4) can only be Left.  (5) and (6) can be either Left or Right.\n      //        () Skip orphan delim inside strong    (1) #***                (2) a***#, a***                   (3) #***a, ***a                 (4) ***#              (5) #***#                 (6) a***a\n      rDelimAst: /^[^_*]*?\\_\\_[^_*]*?\\*[^_*]*?(?=\\_\\_)|[punct_](\\*+)(?=[\\s]|$)|[^punct*_\\s](\\*+)(?=[punct_\\s]|$)|[punct_\\s](\\*+)(?=[^punct*_\\s])|[\\s](\\*+)(?=[punct_])|[punct_](\\*+)(?=[punct_])|[^punct*_\\s](\\*+)(?=[^punct*_\\s])/,\n      rDelimUnd: /^[^_*]*?\\*\\*[^_*]*?\\_[^_*]*?(?=\\*\\*)|[punct*](\\_+)(?=[\\s]|$)|[^punct*_\\s](\\_+)(?=[punct*\\s]|$)|[punct*\\s](\\_+)(?=[^punct*_\\s])|[\\s](\\_+)(?=[punct*])|[punct*](\\_+)(?=[punct*])/ // ^- Not allowed for _\n\n    },\n    code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n    br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n    del: noopTest,\n    text: /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/,\n    punctuation: /^([\\spunctuation])/\n  }; // list of punctuation marks from CommonMark spec\n  // without * and _ to handle the different emphasis markers * and _\n\n  inline._punctuation = '!\"#$%&\\'()+\\\\-.,/:;<=>?@\\\\[\\\\]`^{|}~';\n  inline.punctuation = edit(inline.punctuation).replace(/punctuation/g, inline._punctuation).getRegex(); // sequences em should skip over [title](link), `code`, <html>\n\n  inline.blockSkip = /\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>/g;\n  inline.escapedEmSt = /\\\\\\*|\\\\_/g;\n  inline._comment = edit(block._comment).replace('(?:-->|$)', '-->').getRegex();\n  inline.emStrong.lDelim = edit(inline.emStrong.lDelim).replace(/punct/g, inline._punctuation).getRegex();\n  inline.emStrong.rDelimAst = edit(inline.emStrong.rDelimAst, 'g').replace(/punct/g, inline._punctuation).getRegex();\n  inline.emStrong.rDelimUnd = edit(inline.emStrong.rDelimUnd, 'g').replace(/punct/g, inline._punctuation).getRegex();\n  inline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n  inline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\n  inline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\n  inline.autolink = edit(inline.autolink).replace('scheme', inline._scheme).replace('email', inline._email).getRegex();\n  inline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n  inline.tag = edit(inline.tag).replace('comment', inline._comment).replace('attribute', inline._attribute).getRegex();\n  inline._label = /(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\n  inline._href = /<(?:\\\\.|[^\\n<>\\\\])+>|[^\\s\\x00-\\x1f]*/;\n  inline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n  inline.link = edit(inline.link).replace('label', inline._label).replace('href', inline._href).replace('title', inline._title).getRegex();\n  inline.reflink = edit(inline.reflink).replace('label', inline._label).replace('ref', block._label).getRegex();\n  inline.nolink = edit(inline.nolink).replace('ref', block._label).getRegex();\n  inline.reflinkSearch = edit(inline.reflinkSearch, 'g').replace('reflink', inline.reflink).replace('nolink', inline.nolink).getRegex();\n  /**\n   * Normal Inline Grammar\n   */\n\n  inline.normal = merge({}, inline);\n  /**\n   * Pedantic Inline Grammar\n   */\n\n  inline.pedantic = merge({}, inline.normal, {\n    strong: {\n      start: /^__|\\*\\*/,\n      middle: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n      endAst: /\\*\\*(?!\\*)/g,\n      endUnd: /__(?!_)/g\n    },\n    em: {\n      start: /^_|\\*/,\n      middle: /^()\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)|^_(?=\\S)([\\s\\S]*?\\S)_(?!_)/,\n      endAst: /\\*(?!\\*)/g,\n      endUnd: /_(?!_)/g\n    },\n    link: edit(/^!?\\[(label)\\]\\((.*?)\\)/).replace('label', inline._label).getRegex(),\n    reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/).replace('label', inline._label).getRegex()\n  });\n  /**\n   * GFM Inline Grammar\n   */\n\n  inline.gfm = merge({}, inline.normal, {\n    escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n    _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n    url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n    _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n    del: /^(~~?)(?=[^\\s~])([\\s\\S]*?[^\\s~])\\1(?=[^~]|$)/,\n    text: /^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/\n  });\n  inline.gfm.url = edit(inline.gfm.url, 'i').replace('email', inline.gfm._extended_email).getRegex();\n  /**\n   * GFM + Line Breaks Inline Grammar\n   */\n\n  inline.breaks = merge({}, inline.gfm, {\n    br: edit(inline.br).replace('{2,}', '*').getRegex(),\n    text: edit(inline.gfm.text).replace('\\\\b_', '\\\\b_| {2,}\\\\n').replace(/\\{2,\\}/g, '*').getRegex()\n  });\n\n  /**\n   * smartypants text replacement\n   */\n\n  function smartypants(text) {\n    return text // em-dashes\n    .replace(/---/g, \"\\u2014\") // en-dashes\n    .replace(/--/g, \"\\u2013\") // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, \"$1\\u2018\") // closing singles & apostrophes\n    .replace(/'/g, \"\\u2019\") // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, \"$1\\u201C\") // closing doubles\n    .replace(/\"/g, \"\\u201D\") // ellipses\n    .replace(/\\.{3}/g, \"\\u2026\");\n  }\n  /**\n   * mangle email addresses\n   */\n\n\n  function mangle(text) {\n    var out = '',\n        i,\n        ch;\n    var l = text.length;\n\n    for (i = 0; i < l; i++) {\n      ch = text.charCodeAt(i);\n\n      if (Math.random() > 0.5) {\n        ch = 'x' + ch.toString(16);\n      }\n\n      out += '&#' + ch + ';';\n    }\n\n    return out;\n  }\n  /**\n   * Block Lexer\n   */\n\n\n  var Lexer = /*#__PURE__*/function () {\n    function Lexer(options) {\n      this.tokens = [];\n      this.tokens.links = Object.create(null);\n      this.options = options || exports.defaults;\n      this.options.tokenizer = this.options.tokenizer || new Tokenizer();\n      this.tokenizer = this.options.tokenizer;\n      this.tokenizer.options = this.options;\n      this.tokenizer.lexer = this;\n      this.inlineQueue = [];\n      this.state = {\n        inLink: false,\n        inRawBlock: false,\n        top: true\n      };\n      var rules = {\n        block: block.normal,\n        inline: inline.normal\n      };\n\n      if (this.options.pedantic) {\n        rules.block = block.pedantic;\n        rules.inline = inline.pedantic;\n      } else if (this.options.gfm) {\n        rules.block = block.gfm;\n\n        if (this.options.breaks) {\n          rules.inline = inline.breaks;\n        } else {\n          rules.inline = inline.gfm;\n        }\n      }\n\n      this.tokenizer.rules = rules;\n    }\n    /**\n     * Expose Rules\n     */\n\n\n    /**\n     * Static Lex Method\n     */\n    Lexer.lex = function lex(src, options) {\n      var lexer = new Lexer(options);\n      return lexer.lex(src);\n    }\n    /**\n     * Static Lex Inline Method\n     */\n    ;\n\n    Lexer.lexInline = function lexInline(src, options) {\n      var lexer = new Lexer(options);\n      return lexer.inlineTokens(src);\n    }\n    /**\n     * Preprocessing\n     */\n    ;\n\n    var _proto = Lexer.prototype;\n\n    _proto.lex = function lex(src) {\n      src = src.replace(/\\r\\n|\\r/g, '\\n').replace(/\\t/g, '    ');\n      this.blockTokens(src, this.tokens);\n      var next;\n\n      while (next = this.inlineQueue.shift()) {\n        this.inlineTokens(next.src, next.tokens);\n      }\n\n      return this.tokens;\n    }\n    /**\n     * Lexing\n     */\n    ;\n\n    _proto.blockTokens = function blockTokens(src, tokens) {\n      var _this = this;\n\n      if (tokens === void 0) {\n        tokens = [];\n      }\n\n      if (this.options.pedantic) {\n        src = src.replace(/^ +$/gm, '');\n      }\n\n      var token, lastToken, cutSrc, lastParagraphClipped;\n\n      while (src) {\n        if (this.options.extensions && this.options.extensions.block && this.options.extensions.block.some(function (extTokenizer) {\n          if (token = extTokenizer.call({\n            lexer: _this\n          }, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n\n          return false;\n        })) {\n          continue;\n        } // newline\n\n\n        if (token = this.tokenizer.space(src)) {\n          src = src.substring(token.raw.length);\n\n          if (token.raw.length === 1 && tokens.length > 0) {\n            // if there's a single \\n as a spacer, it's terminating the last line,\n            // so move it there so that we don't get unecessary paragraph tags\n            tokens[tokens.length - 1].raw += '\\n';\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // code\n\n\n        if (token = this.tokenizer.code(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1]; // An indented code block cannot interrupt a paragraph.\n\n          if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n            this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // fences\n\n\n        if (token = this.tokenizer.fences(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // heading\n\n\n        if (token = this.tokenizer.heading(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // hr\n\n\n        if (token = this.tokenizer.hr(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // blockquote\n\n\n        if (token = this.tokenizer.blockquote(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // list\n\n\n        if (token = this.tokenizer.list(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // html\n\n\n        if (token = this.tokenizer.html(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // def\n\n\n        if (token = this.tokenizer.def(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.raw;\n            this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n          } else if (!this.tokens.links[token.tag]) {\n            this.tokens.links[token.tag] = {\n              href: token.href,\n              title: token.title\n            };\n          }\n\n          continue;\n        } // table (gfm)\n\n\n        if (token = this.tokenizer.table(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // lheading\n\n\n        if (token = this.tokenizer.lheading(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // top-level paragraph\n        // prevent paragraph consuming extensions by clipping 'src' to extension start\n\n\n        cutSrc = src;\n\n        if (this.options.extensions && this.options.extensions.startBlock) {\n          (function () {\n            var startIndex = Infinity;\n            var tempSrc = src.slice(1);\n            var tempStart = void 0;\n\n            _this.options.extensions.startBlock.forEach(function (getStartIndex) {\n              tempStart = getStartIndex.call({\n                lexer: this\n              }, tempSrc);\n\n              if (typeof tempStart === 'number' && tempStart >= 0) {\n                startIndex = Math.min(startIndex, tempStart);\n              }\n            });\n\n            if (startIndex < Infinity && startIndex >= 0) {\n              cutSrc = src.substring(0, startIndex + 1);\n            }\n          })();\n        }\n\n        if (this.state.top && (token = this.tokenizer.paragraph(cutSrc))) {\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastParagraphClipped && lastToken.type === 'paragraph') {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n            this.inlineQueue.pop();\n            this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n          } else {\n            tokens.push(token);\n          }\n\n          lastParagraphClipped = cutSrc.length !== src.length;\n          src = src.substring(token.raw.length);\n          continue;\n        } // text\n\n\n        if (token = this.tokenizer.text(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && lastToken.type === 'text') {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n            this.inlineQueue.pop();\n            this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        }\n\n        if (src) {\n          var errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n\n          if (this.options.silent) {\n            console.error(errMsg);\n            break;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n\n      this.state.top = true;\n      return tokens;\n    };\n\n    _proto.inline = function inline(src, tokens) {\n      this.inlineQueue.push({\n        src: src,\n        tokens: tokens\n      });\n    }\n    /**\n     * Lexing/Compiling\n     */\n    ;\n\n    _proto.inlineTokens = function inlineTokens(src, tokens) {\n      var _this2 = this;\n\n      if (tokens === void 0) {\n        tokens = [];\n      }\n\n      var token, lastToken, cutSrc; // String with links masked to avoid interference with em and strong\n\n      var maskedSrc = src;\n      var match;\n      var keepPrevChar, prevChar; // Mask out reflinks\n\n      if (this.tokens.links) {\n        var links = Object.keys(this.tokens.links);\n\n        if (links.length > 0) {\n          while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n            if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n              maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n            }\n          }\n        }\n      } // Mask out other blocks\n\n\n      while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n        maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n      } // Mask out escaped em & strong delimiters\n\n\n      while ((match = this.tokenizer.rules.inline.escapedEmSt.exec(maskedSrc)) != null) {\n        maskedSrc = maskedSrc.slice(0, match.index) + '++' + maskedSrc.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);\n      }\n\n      while (src) {\n        if (!keepPrevChar) {\n          prevChar = '';\n        }\n\n        keepPrevChar = false; // extensions\n\n        if (this.options.extensions && this.options.extensions.inline && this.options.extensions.inline.some(function (extTokenizer) {\n          if (token = extTokenizer.call({\n            lexer: _this2\n          }, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n\n          return false;\n        })) {\n          continue;\n        } // escape\n\n\n        if (token = this.tokenizer.escape(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // tag\n\n\n        if (token = this.tokenizer.tag(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n            lastToken.raw += token.raw;\n            lastToken.text += token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // link\n\n\n        if (token = this.tokenizer.link(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // reflink, nolink\n\n\n        if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n            lastToken.raw += token.raw;\n            lastToken.text += token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // em & strong\n\n\n        if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // code\n\n\n        if (token = this.tokenizer.codespan(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // br\n\n\n        if (token = this.tokenizer.br(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // del (gfm)\n\n\n        if (token = this.tokenizer.del(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // autolink\n\n\n        if (token = this.tokenizer.autolink(src, mangle)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // url (gfm)\n\n\n        if (!this.state.inLink && (token = this.tokenizer.url(src, mangle))) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // text\n        // prevent inlineText consuming extensions by clipping 'src' to extension start\n\n\n        cutSrc = src;\n\n        if (this.options.extensions && this.options.extensions.startInline) {\n          (function () {\n            var startIndex = Infinity;\n            var tempSrc = src.slice(1);\n            var tempStart = void 0;\n\n            _this2.options.extensions.startInline.forEach(function (getStartIndex) {\n              tempStart = getStartIndex.call({\n                lexer: this\n              }, tempSrc);\n\n              if (typeof tempStart === 'number' && tempStart >= 0) {\n                startIndex = Math.min(startIndex, tempStart);\n              }\n            });\n\n            if (startIndex < Infinity && startIndex >= 0) {\n              cutSrc = src.substring(0, startIndex + 1);\n            }\n          })();\n        }\n\n        if (token = this.tokenizer.inlineText(cutSrc, smartypants)) {\n          src = src.substring(token.raw.length);\n\n          if (token.raw.slice(-1) !== '_') {\n            // Track prevChar before string of ____ started\n            prevChar = token.raw.slice(-1);\n          }\n\n          keepPrevChar = true;\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && lastToken.type === 'text') {\n            lastToken.raw += token.raw;\n            lastToken.text += token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        }\n\n        if (src) {\n          var errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n\n          if (this.options.silent) {\n            console.error(errMsg);\n            break;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n\n      return tokens;\n    };\n\n    _createClass(Lexer, null, [{\n      key: \"rules\",\n      get: function get() {\n        return {\n          block: block,\n          inline: inline\n        };\n      }\n    }]);\n\n    return Lexer;\n  }();\n\n  /**\n   * Renderer\n   */\n\n  var Renderer = /*#__PURE__*/function () {\n    function Renderer(options) {\n      this.options = options || exports.defaults;\n    }\n\n    var _proto = Renderer.prototype;\n\n    _proto.code = function code(_code, infostring, escaped) {\n      var lang = (infostring || '').match(/\\S*/)[0];\n\n      if (this.options.highlight) {\n        var out = this.options.highlight(_code, lang);\n\n        if (out != null && out !== _code) {\n          escaped = true;\n          _code = out;\n        }\n      }\n\n      _code = _code.replace(/\\n$/, '') + '\\n';\n\n      if (!lang) {\n        return '<pre><code>' + (escaped ? _code : escape(_code, true)) + '</code></pre>\\n';\n      }\n\n      return '<pre><code class=\"' + this.options.langPrefix + escape(lang, true) + '\">' + (escaped ? _code : escape(_code, true)) + '</code></pre>\\n';\n    };\n\n    _proto.blockquote = function blockquote(quote) {\n      return '<blockquote>\\n' + quote + '</blockquote>\\n';\n    };\n\n    _proto.html = function html(_html) {\n      return _html;\n    };\n\n    _proto.heading = function heading(text, level, raw, slugger) {\n      if (this.options.headerIds) {\n        return '<h' + level + ' id=\"' + this.options.headerPrefix + slugger.slug(raw) + '\">' + text + '</h' + level + '>\\n';\n      } // ignore IDs\n\n\n      return '<h' + level + '>' + text + '</h' + level + '>\\n';\n    };\n\n    _proto.hr = function hr() {\n      return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n    };\n\n    _proto.list = function list(body, ordered, start) {\n      var type = ordered ? 'ol' : 'ul',\n          startatt = ordered && start !== 1 ? ' start=\"' + start + '\"' : '';\n      return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n    };\n\n    _proto.listitem = function listitem(text) {\n      return '<li>' + text + '</li>\\n';\n    };\n\n    _proto.checkbox = function checkbox(checked) {\n      return '<input ' + (checked ? 'checked=\"\" ' : '') + 'disabled=\"\" type=\"checkbox\"' + (this.options.xhtml ? ' /' : '') + '> ';\n    };\n\n    _proto.paragraph = function paragraph(text) {\n      return '<p>' + text + '</p>\\n';\n    };\n\n    _proto.table = function table(header, body) {\n      if (body) body = '<tbody>' + body + '</tbody>';\n      return '<table>\\n' + '<thead>\\n' + header + '</thead>\\n' + body + '</table>\\n';\n    };\n\n    _proto.tablerow = function tablerow(content) {\n      return '<tr>\\n' + content + '</tr>\\n';\n    };\n\n    _proto.tablecell = function tablecell(content, flags) {\n      var type = flags.header ? 'th' : 'td';\n      var tag = flags.align ? '<' + type + ' align=\"' + flags.align + '\">' : '<' + type + '>';\n      return tag + content + '</' + type + '>\\n';\n    } // span level renderer\n    ;\n\n    _proto.strong = function strong(text) {\n      return '<strong>' + text + '</strong>';\n    };\n\n    _proto.em = function em(text) {\n      return '<em>' + text + '</em>';\n    };\n\n    _proto.codespan = function codespan(text) {\n      return '<code>' + text + '</code>';\n    };\n\n    _proto.br = function br() {\n      return this.options.xhtml ? '<br/>' : '<br>';\n    };\n\n    _proto.del = function del(text) {\n      return '<del>' + text + '</del>';\n    };\n\n    _proto.link = function link(href, title, text) {\n      href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n\n      if (href === null) {\n        return text;\n      }\n\n      var out = '<a href=\"' + escape(href) + '\"';\n\n      if (title) {\n        out += ' title=\"' + title + '\"';\n      }\n\n      out += '>' + text + '</a>';\n      return out;\n    };\n\n    _proto.image = function image(href, title, text) {\n      href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n\n      if (href === null) {\n        return text;\n      }\n\n      var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n\n      if (title) {\n        out += ' title=\"' + title + '\"';\n      }\n\n      out += this.options.xhtml ? '/>' : '>';\n      return out;\n    };\n\n    _proto.text = function text(_text) {\n      return _text;\n    };\n\n    return Renderer;\n  }();\n\n  /**\n   * TextRenderer\n   * returns only the textual part of the token\n   */\n  var TextRenderer = /*#__PURE__*/function () {\n    function TextRenderer() {}\n\n    var _proto = TextRenderer.prototype;\n\n    // no need for block level renderers\n    _proto.strong = function strong(text) {\n      return text;\n    };\n\n    _proto.em = function em(text) {\n      return text;\n    };\n\n    _proto.codespan = function codespan(text) {\n      return text;\n    };\n\n    _proto.del = function del(text) {\n      return text;\n    };\n\n    _proto.html = function html(text) {\n      return text;\n    };\n\n    _proto.text = function text(_text) {\n      return _text;\n    };\n\n    _proto.link = function link(href, title, text) {\n      return '' + text;\n    };\n\n    _proto.image = function image(href, title, text) {\n      return '' + text;\n    };\n\n    _proto.br = function br() {\n      return '';\n    };\n\n    return TextRenderer;\n  }();\n\n  /**\n   * Slugger generates header id\n   */\n  var Slugger = /*#__PURE__*/function () {\n    function Slugger() {\n      this.seen = {};\n    }\n\n    var _proto = Slugger.prototype;\n\n    _proto.serialize = function serialize(value) {\n      return value.toLowerCase().trim() // remove html tags\n      .replace(/<[!\\/a-z].*?>/ig, '') // remove unwanted chars\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '').replace(/\\s/g, '-');\n    }\n    /**\n     * Finds the next safe (unique) slug to use\n     */\n    ;\n\n    _proto.getNextSafeSlug = function getNextSafeSlug(originalSlug, isDryRun) {\n      var slug = originalSlug;\n      var occurenceAccumulator = 0;\n\n      if (this.seen.hasOwnProperty(slug)) {\n        occurenceAccumulator = this.seen[originalSlug];\n\n        do {\n          occurenceAccumulator++;\n          slug = originalSlug + '-' + occurenceAccumulator;\n        } while (this.seen.hasOwnProperty(slug));\n      }\n\n      if (!isDryRun) {\n        this.seen[originalSlug] = occurenceAccumulator;\n        this.seen[slug] = 0;\n      }\n\n      return slug;\n    }\n    /**\n     * Convert string to unique id\n     * @param {object} options\n     * @param {boolean} options.dryrun Generates the next unique slug without updating the internal accumulator.\n     */\n    ;\n\n    _proto.slug = function slug(value, options) {\n      if (options === void 0) {\n        options = {};\n      }\n\n      var slug = this.serialize(value);\n      return this.getNextSafeSlug(slug, options.dryrun);\n    };\n\n    return Slugger;\n  }();\n\n  /**\n   * Parsing & Compiling\n   */\n\n  var Parser = /*#__PURE__*/function () {\n    function Parser(options) {\n      this.options = options || exports.defaults;\n      this.options.renderer = this.options.renderer || new Renderer();\n      this.renderer = this.options.renderer;\n      this.renderer.options = this.options;\n      this.textRenderer = new TextRenderer();\n      this.slugger = new Slugger();\n    }\n    /**\n     * Static Parse Method\n     */\n\n\n    Parser.parse = function parse(tokens, options) {\n      var parser = new Parser(options);\n      return parser.parse(tokens);\n    }\n    /**\n     * Static Parse Inline Method\n     */\n    ;\n\n    Parser.parseInline = function parseInline(tokens, options) {\n      var parser = new Parser(options);\n      return parser.parseInline(tokens);\n    }\n    /**\n     * Parse Loop\n     */\n    ;\n\n    var _proto = Parser.prototype;\n\n    _proto.parse = function parse(tokens, top) {\n      if (top === void 0) {\n        top = true;\n      }\n\n      var out = '',\n          i,\n          j,\n          k,\n          l2,\n          l3,\n          row,\n          cell,\n          header,\n          body,\n          token,\n          ordered,\n          start,\n          loose,\n          itemBody,\n          item,\n          checked,\n          task,\n          checkbox,\n          ret;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i]; // Run any renderer extensions\n\n        if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n          ret = this.options.extensions.renderers[token.type].call({\n            parser: this\n          }, token);\n\n          if (ret !== false || !['space', 'hr', 'heading', 'code', 'table', 'blockquote', 'list', 'html', 'paragraph', 'text'].includes(token.type)) {\n            out += ret || '';\n            continue;\n          }\n        }\n\n        switch (token.type) {\n          case 'space':\n            {\n              continue;\n            }\n\n          case 'hr':\n            {\n              out += this.renderer.hr();\n              continue;\n            }\n\n          case 'heading':\n            {\n              out += this.renderer.heading(this.parseInline(token.tokens), token.depth, unescape(this.parseInline(token.tokens, this.textRenderer)), this.slugger);\n              continue;\n            }\n\n          case 'code':\n            {\n              out += this.renderer.code(token.text, token.lang, token.escaped);\n              continue;\n            }\n\n          case 'table':\n            {\n              header = ''; // header\n\n              cell = '';\n              l2 = token.header.length;\n\n              for (j = 0; j < l2; j++) {\n                cell += this.renderer.tablecell(this.parseInline(token.header[j].tokens), {\n                  header: true,\n                  align: token.align[j]\n                });\n              }\n\n              header += this.renderer.tablerow(cell);\n              body = '';\n              l2 = token.rows.length;\n\n              for (j = 0; j < l2; j++) {\n                row = token.rows[j];\n                cell = '';\n                l3 = row.length;\n\n                for (k = 0; k < l3; k++) {\n                  cell += this.renderer.tablecell(this.parseInline(row[k].tokens), {\n                    header: false,\n                    align: token.align[k]\n                  });\n                }\n\n                body += this.renderer.tablerow(cell);\n              }\n\n              out += this.renderer.table(header, body);\n              continue;\n            }\n\n          case 'blockquote':\n            {\n              body = this.parse(token.tokens);\n              out += this.renderer.blockquote(body);\n              continue;\n            }\n\n          case 'list':\n            {\n              ordered = token.ordered;\n              start = token.start;\n              loose = token.loose;\n              l2 = token.items.length;\n              body = '';\n\n              for (j = 0; j < l2; j++) {\n                item = token.items[j];\n                checked = item.checked;\n                task = item.task;\n                itemBody = '';\n\n                if (item.task) {\n                  checkbox = this.renderer.checkbox(checked);\n\n                  if (loose) {\n                    if (item.tokens.length > 0 && item.tokens[0].type === 'paragraph') {\n                      item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n\n                      if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                        item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                      }\n                    } else {\n                      item.tokens.unshift({\n                        type: 'text',\n                        text: checkbox\n                      });\n                    }\n                  } else {\n                    itemBody += checkbox;\n                  }\n                }\n\n                itemBody += this.parse(item.tokens, loose);\n                body += this.renderer.listitem(itemBody, task, checked);\n              }\n\n              out += this.renderer.list(body, ordered, start);\n              continue;\n            }\n\n          case 'html':\n            {\n              // TODO parse inline content if parameter markdown=1\n              out += this.renderer.html(token.text);\n              continue;\n            }\n\n          case 'paragraph':\n            {\n              out += this.renderer.paragraph(this.parseInline(token.tokens));\n              continue;\n            }\n\n          case 'text':\n            {\n              body = token.tokens ? this.parseInline(token.tokens) : token.text;\n\n              while (i + 1 < l && tokens[i + 1].type === 'text') {\n                token = tokens[++i];\n                body += '\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\n              }\n\n              out += top ? this.renderer.paragraph(body) : body;\n              continue;\n            }\n\n          default:\n            {\n              var errMsg = 'Token with \"' + token.type + '\" type was not found.';\n\n              if (this.options.silent) {\n                console.error(errMsg);\n                return;\n              } else {\n                throw new Error(errMsg);\n              }\n            }\n        }\n      }\n\n      return out;\n    }\n    /**\n     * Parse Inline Tokens\n     */\n    ;\n\n    _proto.parseInline = function parseInline(tokens, renderer) {\n      renderer = renderer || this.renderer;\n      var out = '',\n          i,\n          token,\n          ret;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i]; // Run any renderer extensions\n\n        if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n          ret = this.options.extensions.renderers[token.type].call({\n            parser: this\n          }, token);\n\n          if (ret !== false || !['escape', 'html', 'link', 'image', 'strong', 'em', 'codespan', 'br', 'del', 'text'].includes(token.type)) {\n            out += ret || '';\n            continue;\n          }\n        }\n\n        switch (token.type) {\n          case 'escape':\n            {\n              out += renderer.text(token.text);\n              break;\n            }\n\n          case 'html':\n            {\n              out += renderer.html(token.text);\n              break;\n            }\n\n          case 'link':\n            {\n              out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'image':\n            {\n              out += renderer.image(token.href, token.title, token.text);\n              break;\n            }\n\n          case 'strong':\n            {\n              out += renderer.strong(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'em':\n            {\n              out += renderer.em(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'codespan':\n            {\n              out += renderer.codespan(token.text);\n              break;\n            }\n\n          case 'br':\n            {\n              out += renderer.br();\n              break;\n            }\n\n          case 'del':\n            {\n              out += renderer.del(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'text':\n            {\n              out += renderer.text(token.text);\n              break;\n            }\n\n          default:\n            {\n              var errMsg = 'Token with \"' + token.type + '\" type was not found.';\n\n              if (this.options.silent) {\n                console.error(errMsg);\n                return;\n              } else {\n                throw new Error(errMsg);\n              }\n            }\n        }\n      }\n\n      return out;\n    };\n\n    return Parser;\n  }();\n\n  /**\n   * Marked\n   */\n\n  function marked(src, opt, callback) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    if (typeof opt === 'function') {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n\n    if (callback) {\n      var highlight = opt.highlight;\n      var tokens;\n\n      try {\n        tokens = Lexer.lex(src, opt);\n      } catch (e) {\n        return callback(e);\n      }\n\n      var done = function done(err) {\n        var out;\n\n        if (!err) {\n          try {\n            if (opt.walkTokens) {\n              marked.walkTokens(tokens, opt.walkTokens);\n            }\n\n            out = Parser.parse(tokens, opt);\n          } catch (e) {\n            err = e;\n          }\n        }\n\n        opt.highlight = highlight;\n        return err ? callback(err) : callback(null, out);\n      };\n\n      if (!highlight || highlight.length < 3) {\n        return done();\n      }\n\n      delete opt.highlight;\n      if (!tokens.length) return done();\n      var pending = 0;\n      marked.walkTokens(tokens, function (token) {\n        if (token.type === 'code') {\n          pending++;\n          setTimeout(function () {\n            highlight(token.text, token.lang, function (err, code) {\n              if (err) {\n                return done(err);\n              }\n\n              if (code != null && code !== token.text) {\n                token.text = code;\n                token.escaped = true;\n              }\n\n              pending--;\n\n              if (pending === 0) {\n                done();\n              }\n            });\n          }, 0);\n        }\n      });\n\n      if (pending === 0) {\n        done();\n      }\n\n      return;\n    }\n\n    try {\n      var _tokens = Lexer.lex(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(_tokens, opt.walkTokens);\n      }\n\n      return Parser.parse(_tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  }\n  /**\n   * Options\n   */\n\n  marked.options = marked.setOptions = function (opt) {\n    merge(marked.defaults, opt);\n    changeDefaults(marked.defaults);\n    return marked;\n  };\n\n  marked.getDefaults = getDefaults;\n  marked.defaults = exports.defaults;\n  /**\n   * Use Extension\n   */\n\n  marked.use = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var opts = merge.apply(void 0, [{}].concat(args));\n    var extensions = marked.defaults.extensions || {\n      renderers: {},\n      childTokens: {}\n    };\n    var hasExtensions;\n    args.forEach(function (pack) {\n      // ==-- Parse \"addon\" extensions --== //\n      if (pack.extensions) {\n        hasExtensions = true;\n        pack.extensions.forEach(function (ext) {\n          if (!ext.name) {\n            throw new Error('extension name required');\n          }\n\n          if (ext.renderer) {\n            // Renderer extensions\n            var prevRenderer = extensions.renderers ? extensions.renderers[ext.name] : null;\n\n            if (prevRenderer) {\n              // Replace extension with func to run new extension but fall back if false\n              extensions.renderers[ext.name] = function () {\n                for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                  args[_key2] = arguments[_key2];\n                }\n\n                var ret = ext.renderer.apply(this, args);\n\n                if (ret === false) {\n                  ret = prevRenderer.apply(this, args);\n                }\n\n                return ret;\n              };\n            } else {\n              extensions.renderers[ext.name] = ext.renderer;\n            }\n          }\n\n          if (ext.tokenizer) {\n            // Tokenizer Extensions\n            if (!ext.level || ext.level !== 'block' && ext.level !== 'inline') {\n              throw new Error(\"extension level must be 'block' or 'inline'\");\n            }\n\n            if (extensions[ext.level]) {\n              extensions[ext.level].unshift(ext.tokenizer);\n            } else {\n              extensions[ext.level] = [ext.tokenizer];\n            }\n\n            if (ext.start) {\n              // Function to check for start of token\n              if (ext.level === 'block') {\n                if (extensions.startBlock) {\n                  extensions.startBlock.push(ext.start);\n                } else {\n                  extensions.startBlock = [ext.start];\n                }\n              } else if (ext.level === 'inline') {\n                if (extensions.startInline) {\n                  extensions.startInline.push(ext.start);\n                } else {\n                  extensions.startInline = [ext.start];\n                }\n              }\n            }\n          }\n\n          if (ext.childTokens) {\n            // Child tokens to be visited by walkTokens\n            extensions.childTokens[ext.name] = ext.childTokens;\n          }\n        });\n      } // ==-- Parse \"overwrite\" extensions --== //\n\n\n      if (pack.renderer) {\n        (function () {\n          var renderer = marked.defaults.renderer || new Renderer();\n\n          var _loop = function _loop(prop) {\n            var prevRenderer = renderer[prop]; // Replace renderer with func to run extension, but fall back if false\n\n            renderer[prop] = function () {\n              for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n                args[_key3] = arguments[_key3];\n              }\n\n              var ret = pack.renderer[prop].apply(renderer, args);\n\n              if (ret === false) {\n                ret = prevRenderer.apply(renderer, args);\n              }\n\n              return ret;\n            };\n          };\n\n          for (var prop in pack.renderer) {\n            _loop(prop);\n          }\n\n          opts.renderer = renderer;\n        })();\n      }\n\n      if (pack.tokenizer) {\n        (function () {\n          var tokenizer = marked.defaults.tokenizer || new Tokenizer();\n\n          var _loop2 = function _loop2(prop) {\n            var prevTokenizer = tokenizer[prop]; // Replace tokenizer with func to run extension, but fall back if false\n\n            tokenizer[prop] = function () {\n              for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n                args[_key4] = arguments[_key4];\n              }\n\n              var ret = pack.tokenizer[prop].apply(tokenizer, args);\n\n              if (ret === false) {\n                ret = prevTokenizer.apply(tokenizer, args);\n              }\n\n              return ret;\n            };\n          };\n\n          for (var prop in pack.tokenizer) {\n            _loop2(prop);\n          }\n\n          opts.tokenizer = tokenizer;\n        })();\n      } // ==-- Parse WalkTokens extensions --== //\n\n\n      if (pack.walkTokens) {\n        var _walkTokens = marked.defaults.walkTokens;\n\n        opts.walkTokens = function (token) {\n          pack.walkTokens.call(this, token);\n\n          if (_walkTokens) {\n            _walkTokens.call(this, token);\n          }\n        };\n      }\n\n      if (hasExtensions) {\n        opts.extensions = extensions;\n      }\n\n      marked.setOptions(opts);\n    });\n  };\n  /**\n   * Run callback for every token\n   */\n\n\n  marked.walkTokens = function (tokens, callback) {\n    var _loop3 = function _loop3() {\n      var token = _step.value;\n      callback.call(marked, token);\n\n      switch (token.type) {\n        case 'table':\n          {\n            for (var _iterator2 = _createForOfIteratorHelperLoose(token.header), _step2; !(_step2 = _iterator2()).done;) {\n              var cell = _step2.value;\n              marked.walkTokens(cell.tokens, callback);\n            }\n\n            for (var _iterator3 = _createForOfIteratorHelperLoose(token.rows), _step3; !(_step3 = _iterator3()).done;) {\n              var row = _step3.value;\n\n              for (var _iterator4 = _createForOfIteratorHelperLoose(row), _step4; !(_step4 = _iterator4()).done;) {\n                var _cell = _step4.value;\n                marked.walkTokens(_cell.tokens, callback);\n              }\n            }\n\n            break;\n          }\n\n        case 'list':\n          {\n            marked.walkTokens(token.items, callback);\n            break;\n          }\n\n        default:\n          {\n            if (marked.defaults.extensions && marked.defaults.extensions.childTokens && marked.defaults.extensions.childTokens[token.type]) {\n              // Walk any extensions\n              marked.defaults.extensions.childTokens[token.type].forEach(function (childTokens) {\n                marked.walkTokens(token[childTokens], callback);\n              });\n            } else if (token.tokens) {\n              marked.walkTokens(token.tokens, callback);\n            }\n          }\n      }\n    };\n\n    for (var _iterator = _createForOfIteratorHelperLoose(tokens), _step; !(_step = _iterator()).done;) {\n      _loop3();\n    }\n  };\n  /**\n   * Parse Inline\n   */\n\n\n  marked.parseInline = function (src, opt) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked.parseInline(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked.parseInline(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n\n    try {\n      var tokens = Lexer.lexInline(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(tokens, opt.walkTokens);\n      }\n\n      return Parser.parseInline(tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  };\n  /**\n   * Expose\n   */\n\n\n  marked.Parser = Parser;\n  marked.parser = Parser.parse;\n  marked.Renderer = Renderer;\n  marked.TextRenderer = TextRenderer;\n  marked.Lexer = Lexer;\n  marked.lexer = Lexer.lex;\n  marked.Tokenizer = Tokenizer;\n  marked.Slugger = Slugger;\n  marked.parse = marked;\n  var options = marked.options;\n  var setOptions = marked.setOptions;\n  var use = marked.use;\n  var walkTokens = marked.walkTokens;\n  var parseInline = marked.parseInline;\n  var parse = marked;\n  var parser = Parser.parse;\n  var lexer = Lexer.lex;\n\n  exports.Lexer = Lexer;\n  exports.Parser = Parser;\n  exports.Renderer = Renderer;\n  exports.Slugger = Slugger;\n  exports.TextRenderer = TextRenderer;\n  exports.Tokenizer = Tokenizer;\n  exports.getDefaults = getDefaults;\n  exports.lexer = lexer;\n  exports.marked = marked;\n  exports.options = options;\n  exports.parse = parse;\n  exports.parseInline = parseInline;\n  exports.parser = parser;\n  exports.setOptions = setOptions;\n  exports.use = use;\n  exports.walkTokens = walkTokens;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n}));\n\n// ESM-uncomment-begin\n})();\nexport var marked = (__marked_exports || exports);\n// ESM-uncomment-end\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a;\nimport { renderMarkdown } from '../../../../base/browser/markdownRenderer.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { tokenizeToString } from '../../../common/languages/textToHtmlTokenizer.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { applyFontInfo } from '../../../browser/config/domFontInfo.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../common/languages/modesRegistry.js';\n/**\n * Markdown renderer that can render codeblocks with the editor mechanics. This\n * renderer should always be preferred.\n */\nlet MarkdownRenderer = class MarkdownRenderer {\n    constructor(_options, _languageService, _openerService) {\n        this._options = _options;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this._onDidRenderAsync = new Emitter();\n        this.onDidRenderAsync = this._onDidRenderAsync.event;\n    }\n    dispose() {\n        this._onDidRenderAsync.dispose();\n    }\n    render(markdown, options, markedOptions) {\n        if (!markdown) {\n            const element = document.createElement('span');\n            return { element, dispose: () => { } };\n        }\n        const disposables = new DisposableStore();\n        const rendered = disposables.add(renderMarkdown(markdown, Object.assign(Object.assign({}, this._getRenderOptions(markdown, disposables)), options), markedOptions));\n        return {\n            element: rendered.element,\n            dispose: () => disposables.dispose()\n        };\n    }\n    _getRenderOptions(markdown, disposeables) {\n        return {\n            codeBlockRenderer: (languageAlias, value) => __awaiter(this, void 0, void 0, function* () {\n                var _a, _b, _c;\n                // In markdown,\n                // it is possible that we stumble upon language aliases (e.g.js instead of javascript)\n                // it is possible no alias is given in which case we fall back to the current editor lang\n                let languageId;\n                if (languageAlias) {\n                    languageId = this._languageService.getLanguageIdByLanguageName(languageAlias);\n                }\n                else if (this._options.editor) {\n                    languageId = (_a = this._options.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getLanguageId();\n                }\n                if (!languageId) {\n                    languageId = PLAINTEXT_LANGUAGE_ID;\n                }\n                const html = yield tokenizeToString(this._languageService, value, languageId);\n                const element = document.createElement('span');\n                element.innerHTML = ((_c = (_b = MarkdownRenderer._ttpTokenizer) === null || _b === void 0 ? void 0 : _b.createHTML(html)) !== null && _c !== void 0 ? _c : html);\n                // use \"good\" font\n                if (this._options.editor) {\n                    const fontInfo = this._options.editor.getOption(44 /* fontInfo */);\n                    applyFontInfo(element, fontInfo);\n                }\n                else if (this._options.codeBlockFontFamily) {\n                    element.style.fontFamily = this._options.codeBlockFontFamily;\n                }\n                return element;\n            }),\n            asyncRenderCallback: () => this._onDidRenderAsync.fire(),\n            actionHandler: {\n                callback: (content) => this._openerService.open(content, { fromUserGesture: true, allowContributedOpeners: true, allowCommands: markdown.isTrusted }).catch(onUnexpectedError),\n                disposables: disposeables\n            }\n        };\n    }\n};\nMarkdownRenderer._ttpTokenizer = (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy('tokenizeToString', {\n    createHTML(html) {\n        return html;\n    }\n});\nMarkdownRenderer = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService)\n], MarkdownRenderer);\nexport { MarkdownRenderer };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { asArray } from '../../../../base/common/arrays.js';\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { isEmptyMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { getHover } from './getHover.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nconst $ = dom.$;\nexport class MarkdownHover {\n    constructor(owner, range, contents, ordinal) {\n        this.owner = owner;\n        this.range = range;\n        this.contents = contents;\n        this.ordinal = ordinal;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet MarkdownHoverParticipant = class MarkdownHoverParticipant {\n    constructor(_editor, _languageService, _openerService, _configurationService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this.hoverOrdinal = 2;\n    }\n    createLoadingMessage(anchor) {\n        return new MarkdownHover(this, anchor.range, [new MarkdownString().appendText(nls.localize('modesContentHover.loading', \"Loading...\"))], 2000);\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const lineNumber = anchor.range.startLineNumber;\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        const result = [];\n        let index = 1000;\n        const lineLength = model.getLineLength(lineNumber);\n        const languageId = model.getLanguageIdAtPosition(anchor.range.startLineNumber, anchor.range.startColumn);\n        const maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\n            overrideIdentifier: languageId\n        });\n        if (typeof maxTokenizationLineLength === 'number' && lineLength >= maxTokenizationLineLength) {\n            result.push(new MarkdownHover(this, anchor.range, [{\n                    value: nls.localize('too many characters', \"Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.\")\n                }], index++));\n        }\n        for (const d of lineDecorations) {\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n            const hoverMessage = d.options.hoverMessage;\n            if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\n                continue;\n            }\n            const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n            result.push(new MarkdownHover(this, range, asArray(hoverMessage), index++));\n        }\n        return result;\n    }\n    computeAsync(anchor, lineDecorations, token) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* Range */) {\n            return AsyncIterableObject.EMPTY;\n        }\n        const model = this._editor.getModel();\n        if (!this._languageFeaturesService.hoverProvider.has(model)) {\n            return AsyncIterableObject.EMPTY;\n        }\n        const position = new Position(anchor.range.startLineNumber, anchor.range.startColumn);\n        return getHover(this._languageFeaturesService.hoverProvider, model, position, token)\n            .filter(item => !isEmptyMarkdownString(item.hover.contents))\n            .map(item => {\n            const rng = item.hover.range ? Range.lift(item.hover.range) : anchor.range;\n            return new MarkdownHover(this, rng, item.hover.contents, item.ordinal);\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderMarkdownHovers(context, hoverParts, this._editor, this._languageService, this._openerService);\n    }\n};\nMarkdownHoverParticipant = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeaturesService)\n], MarkdownHoverParticipant);\nexport { MarkdownHoverParticipant };\nexport function renderMarkdownHovers(context, hoverParts, editor, languageService, openerService) {\n    // Sort hover parts to keep them stable since they might come in async, out-of-order\n    hoverParts.sort((a, b) => a.ordinal - b.ordinal);\n    const disposables = new DisposableStore();\n    for (const hoverPart of hoverParts) {\n        for (const contents of hoverPart.contents) {\n            if (isEmptyMarkdownString(contents)) {\n                continue;\n            }\n            const markdownHoverElement = $('div.hover-row.markdown-hover');\n            const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n            const renderer = disposables.add(new MarkdownRenderer({ editor }, languageService, openerService));\n            disposables.add(renderer.onDidRenderAsync(() => {\n                hoverContentsElement.className = 'hover-contents code-hover-contents';\n                context.onContentsChanged();\n            }));\n            const renderedContents = disposables.add(renderer.render(contents));\n            hoverContentsElement.appendChild(renderedContents.element);\n            context.fragment.appendChild(markdownHoverElement);\n        }\n    }\n    return disposables;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class HoverProviderResult {\n    constructor(provider, hover, ordinal) {\n        this.provider = provider;\n        this.hover = hover;\n        this.ordinal = ordinal;\n    }\n}\nfunction executeProvider(provider, ordinal, model, position, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            const result = yield Promise.resolve(provider.provideHover(model, position, token));\n            if (result && isValid(result)) {\n                return new HoverProviderResult(provider, result, ordinal);\n            }\n        }\n        catch (err) {\n            onUnexpectedExternalError(err);\n        }\n        return undefined;\n    });\n}\nexport function getHover(registry, model, position, token) {\n    const providers = registry.ordered(model);\n    const promises = providers.map((provider, index) => executeProvider(provider, index, model, position, token));\n    return AsyncIterableObject.fromPromises(promises).coalesce();\n}\nexport function getHoverPromise(registry, model, position, token) {\n    return getHover(registry, model, position, token).map(item => item.hover).toPromise();\n}\nregisterModelAndPositionCommand('_executeHoverProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    return getHoverPromise(languageFeaturesService.hoverProvider, model, position, CancellationToken.None);\n});\nfunction isValid(result) {\n    const hasRange = (typeof result.range !== 'undefined');\n    const hasHtmlContent = typeof result.contents !== 'undefined' && result.contents && result.contents.length > 0;\n    return hasRange && hasHtmlContent;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, disposableTimeout } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IMarkerDecorationsService } from '../../../common/services/markerDecorations.js';\nimport { getCodeActions } from '../../codeAction/browser/codeAction.js';\nimport { QuickFixAction, QuickFixController } from '../../codeAction/browser/codeActionCommands.js';\nimport { CodeActionKind } from '../../codeAction/browser/types.js';\nimport { MarkerController, NextMarkerAction } from '../../gotoError/browser/gotoError.js';\nimport * as nls from '../../../../nls.js';\nimport { IMarkerData, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nconst $ = dom.$;\nexport class MarkerHover {\n    constructor(owner, range, marker) {\n        this.owner = owner;\n        this.range = range;\n        this.marker = marker;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nconst markerCodeActionTrigger = {\n    type: 1 /* Invoke */,\n    filter: { include: CodeActionKind.QuickFix }\n};\nlet MarkerHoverParticipant = class MarkerHoverParticipant {\n    constructor(_editor, _markerDecorationsService, _openerService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._markerDecorationsService = _markerDecorationsService;\n        this._openerService = _openerService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this.hoverOrdinal = 5;\n        this.recentMarkerCodeActionsInfo = undefined;\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const lineNumber = anchor.range.startLineNumber;\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        const result = [];\n        for (const d of lineDecorations) {\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n            const marker = this._markerDecorationsService.getMarker(model.uri, d);\n            if (!marker) {\n                continue;\n            }\n            const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n            result.push(new MarkerHover(this, range, marker));\n        }\n        return result;\n    }\n    renderHoverParts(context, hoverParts) {\n        if (!hoverParts.length) {\n            return Disposable.None;\n        }\n        const disposables = new DisposableStore();\n        hoverParts.forEach(msg => context.fragment.appendChild(this.renderMarkerHover(msg, disposables)));\n        const markerHoverForStatusbar = hoverParts.length === 1 ? hoverParts[0] : hoverParts.sort((a, b) => MarkerSeverity.compare(a.marker.severity, b.marker.severity))[0];\n        this.renderMarkerStatusbar(context, markerHoverForStatusbar, disposables);\n        return disposables;\n    }\n    renderMarkerHover(markerHover, disposables) {\n        const hoverElement = $('div.hover-row');\n        const markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\n        const { source, message, code, relatedInformation } = markerHover.marker;\n        this._editor.applyFontInfo(markerElement);\n        const messageElement = dom.append(markerElement, $('span'));\n        messageElement.style.whiteSpace = 'pre-wrap';\n        messageElement.innerText = message;\n        if (source || code) {\n            // Code has link\n            if (code && typeof code !== 'string') {\n                const sourceAndCodeElement = $('span');\n                if (source) {\n                    const sourceElement = dom.append(sourceAndCodeElement, $('span'));\n                    sourceElement.innerText = source;\n                }\n                const codeLink = dom.append(sourceAndCodeElement, $('a.code-link'));\n                codeLink.setAttribute('href', code.target.toString());\n                disposables.add(dom.addDisposableListener(codeLink, 'click', (e) => {\n                    this._openerService.open(code.target, { allowCommands: true });\n                    e.preventDefault();\n                    e.stopPropagation();\n                }));\n                const codeElement = dom.append(codeLink, $('span'));\n                codeElement.innerText = code.value;\n                const detailsElement = dom.append(markerElement, sourceAndCodeElement);\n                detailsElement.style.opacity = '0.6';\n                detailsElement.style.paddingLeft = '6px';\n            }\n            else {\n                const detailsElement = dom.append(markerElement, $('span'));\n                detailsElement.style.opacity = '0.6';\n                detailsElement.style.paddingLeft = '6px';\n                detailsElement.innerText = source && code ? `${source}(${code})` : source ? source : `(${code})`;\n            }\n        }\n        if (isNonEmptyArray(relatedInformation)) {\n            for (const { message, resource, startLineNumber, startColumn } of relatedInformation) {\n                const relatedInfoContainer = dom.append(markerElement, $('div'));\n                relatedInfoContainer.style.marginTop = '8px';\n                const a = dom.append(relatedInfoContainer, $('a'));\n                a.innerText = `${basename(resource)}(${startLineNumber}, ${startColumn}): `;\n                a.style.cursor = 'pointer';\n                disposables.add(dom.addDisposableListener(a, 'click', (e) => {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    if (this._openerService) {\n                        this._openerService.open(resource, {\n                            fromUserGesture: true,\n                            editorOptions: { selection: { startLineNumber, startColumn } }\n                        }).catch(onUnexpectedError);\n                    }\n                }));\n                const messageElement = dom.append(relatedInfoContainer, $('span'));\n                messageElement.innerText = message;\n                this._editor.applyFontInfo(messageElement);\n            }\n        }\n        return hoverElement;\n    }\n    renderMarkerStatusbar(context, markerHover, disposables) {\n        if (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\n            context.statusBar.addAction({\n                label: nls.localize('view problem', \"View Problem\"),\n                commandId: NextMarkerAction.ID,\n                run: () => {\n                    var _a;\n                    context.hide();\n                    (_a = MarkerController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.showAtMarker(markerHover.marker);\n                    this._editor.focus();\n                }\n            });\n        }\n        if (!this._editor.getOption(81 /* readOnly */)) {\n            const quickfixPlaceholderElement = context.statusBar.append($('div'));\n            if (this.recentMarkerCodeActionsInfo) {\n                if (IMarkerData.makeKey(this.recentMarkerCodeActionsInfo.marker) === IMarkerData.makeKey(markerHover.marker)) {\n                    if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n                        quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n                    }\n                }\n                else {\n                    this.recentMarkerCodeActionsInfo = undefined;\n                }\n            }\n            const updatePlaceholderDisposable = this.recentMarkerCodeActionsInfo && !this.recentMarkerCodeActionsInfo.hasCodeActions ? Disposable.None : disposables.add(disposableTimeout(() => quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\"), 200));\n            if (!quickfixPlaceholderElement.textContent) {\n                // Have some content in here to avoid flickering\n                quickfixPlaceholderElement.textContent = String.fromCharCode(0xA0); // &nbsp;\n            }\n            const codeActionsPromise = this.getCodeActions(markerHover.marker);\n            disposables.add(toDisposable(() => codeActionsPromise.cancel()));\n            codeActionsPromise.then(actions => {\n                updatePlaceholderDisposable.dispose();\n                this.recentMarkerCodeActionsInfo = { marker: markerHover.marker, hasCodeActions: actions.validActions.length > 0 };\n                if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n                    actions.dispose();\n                    quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n                    return;\n                }\n                quickfixPlaceholderElement.style.display = 'none';\n                let showing = false;\n                disposables.add(toDisposable(() => {\n                    if (!showing) {\n                        actions.dispose();\n                    }\n                }));\n                context.statusBar.addAction({\n                    label: nls.localize('quick fixes', \"Quick Fix...\"),\n                    commandId: QuickFixAction.Id,\n                    run: (target) => {\n                        showing = true;\n                        const controller = QuickFixController.get(this._editor);\n                        const elementPosition = dom.getDomNodePagePosition(target);\n                        // Hide the hover pre-emptively, otherwise the editor can close the code actions\n                        // context menu as well when using keyboard navigation\n                        context.hide();\n                        controller === null || controller === void 0 ? void 0 : controller.showCodeActions(markerCodeActionTrigger, actions, {\n                            x: elementPosition.left + 6,\n                            y: elementPosition.top + elementPosition.height + 6\n                        });\n                    }\n                });\n            }, onUnexpectedError);\n        }\n    }\n    getCodeActions(marker) {\n        return createCancelablePromise(cancellationToken => {\n            return getCodeActions(this._languageFeaturesService.codeActionProvider, this._editor.getModel(), new Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn), markerCodeActionTrigger, Progress.None, cancellationToken);\n        });\n    }\n};\nMarkerHoverParticipant = __decorate([\n    __param(1, IMarkerDecorationsService),\n    __param(2, IOpenerService),\n    __param(3, ILanguageFeaturesService)\n], MarkerHoverParticipant);\nexport { MarkerHoverParticipant };\nregisterThemingParticipant((theme, collector) => {\n    const linkFg = theme.getColor(textLinkForeground);\n    if (linkFg) {\n        collector.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${linkFg}; }`);\n    }\n    const activeLinkFg = theme.getColor(textLinkActiveForeground);\n    if (activeLinkFg) {\n        collector.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${activeLinkFg}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IMarkerNavigationService } from './markerNavigationService.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { MarkerNavigationWidget } from './gotoErrorWidget.js';\nlet MarkerController = class MarkerController {\n    constructor(editor, _markerNavigationService, _contextKeyService, _editorService, _instantiationService) {\n        this._markerNavigationService = _markerNavigationService;\n        this._contextKeyService = _contextKeyService;\n        this._editorService = _editorService;\n        this._instantiationService = _instantiationService;\n        this._sessionDispoables = new DisposableStore();\n        this._editor = editor;\n        this._widgetVisible = CONTEXT_MARKERS_NAVIGATION_VISIBLE.bindTo(this._contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(MarkerController.ID);\n    }\n    dispose() {\n        this._cleanUp();\n        this._sessionDispoables.dispose();\n    }\n    _cleanUp() {\n        this._widgetVisible.reset();\n        this._sessionDispoables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    _getOrCreateModel(uri) {\n        if (this._model && this._model.matches(uri)) {\n            return this._model;\n        }\n        let reusePosition = false;\n        if (this._model) {\n            reusePosition = true;\n            this._cleanUp();\n        }\n        this._model = this._markerNavigationService.getMarkerList(uri);\n        if (reusePosition) {\n            this._model.move(true, this._editor.getModel(), this._editor.getPosition());\n        }\n        this._widget = this._instantiationService.createInstance(MarkerNavigationWidget, this._editor);\n        this._widget.onDidClose(() => this.close(), this, this._sessionDispoables);\n        this._widgetVisible.set(true);\n        this._sessionDispoables.add(this._model);\n        this._sessionDispoables.add(this._widget);\n        // follow cursor\n        this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e => {\n            var _a, _b, _c;\n            if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.selected) || !Range.containsPosition((_b = this._model) === null || _b === void 0 ? void 0 : _b.selected.marker, e.position)) {\n                (_c = this._model) === null || _c === void 0 ? void 0 : _c.resetIndex();\n            }\n        }));\n        // update markers\n        this._sessionDispoables.add(this._model.onDidChange(() => {\n            if (!this._widget || !this._widget.position || !this._model) {\n                return;\n            }\n            const info = this._model.find(this._editor.getModel().uri, this._widget.position);\n            if (info) {\n                this._widget.updateMarker(info.marker);\n            }\n            else {\n                this._widget.showStale();\n            }\n        }));\n        // open related\n        this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(related => {\n            this._editorService.openCodeEditor({\n                resource: related.resource,\n                options: { pinned: true, revealIfOpened: true, selection: Range.lift(related).collapseToStart() }\n            }, this._editor);\n            this.close(false);\n        }));\n        this._sessionDispoables.add(this._editor.onDidChangeModel(() => this._cleanUp()));\n        return this._model;\n    }\n    close(focusEditor = true) {\n        this._cleanUp();\n        if (focusEditor) {\n            this._editor.focus();\n        }\n    }\n    showAtMarker(marker) {\n        if (this._editor.hasModel()) {\n            const model = this._getOrCreateModel(this._editor.getModel().uri);\n            model.resetIndex();\n            model.move(true, this._editor.getModel(), new Position(marker.startLineNumber, marker.startColumn));\n            if (model.selected) {\n                this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n            }\n        }\n    }\n    nagivate(next, multiFile) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.hasModel()) {\n                const model = this._getOrCreateModel(multiFile ? undefined : this._editor.getModel().uri);\n                model.move(next, this._editor.getModel(), this._editor.getPosition());\n                if (!model.selected) {\n                    return;\n                }\n                if (model.selected.marker.resource.toString() !== this._editor.getModel().uri.toString()) {\n                    // show in different editor\n                    this._cleanUp();\n                    const otherEditor = yield this._editorService.openCodeEditor({\n                        resource: model.selected.marker.resource,\n                        options: { pinned: false, revealIfOpened: true, selectionRevealType: 2 /* NearTop */, selection: model.selected.marker }\n                    }, this._editor);\n                    if (otherEditor) {\n                        (_a = MarkerController.get(otherEditor)) === null || _a === void 0 ? void 0 : _a.close();\n                        (_b = MarkerController.get(otherEditor)) === null || _b === void 0 ? void 0 : _b.nagivate(next, multiFile);\n                    }\n                }\n                else {\n                    // show in this editor\n                    this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n                }\n            }\n        });\n    }\n};\nMarkerController.ID = 'editor.contrib.markerController';\nMarkerController = __decorate([\n    __param(1, IMarkerNavigationService),\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, IInstantiationService)\n], MarkerController);\nexport { MarkerController };\nclass MarkerNavigationAction extends EditorAction {\n    constructor(_next, _multiFile, opts) {\n        super(opts);\n        this._next = _next;\n        this._multiFile = _multiFile;\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                (_a = MarkerController.get(editor)) === null || _a === void 0 ? void 0 : _a.nagivate(this._next, this._multiFile);\n            }\n        });\n    }\n}\nexport class NextMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, false, {\n            id: NextMarkerAction.ID,\n            label: NextMarkerAction.LABEL,\n            alias: 'Go to Next Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 512 /* Alt */ | 66 /* F8 */,\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: NextMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-next', Codicon.arrowDown, nls.localize('nextMarkerIcon', 'Icon for goto next marker.')),\n                group: 'navigation',\n                order: 1\n            }\n        });\n    }\n}\nNextMarkerAction.ID = 'editor.action.marker.next';\nNextMarkerAction.LABEL = nls.localize('markerAction.next.label', \"Go to Next Problem (Error, Warning, Info)\");\nclass PrevMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, false, {\n            id: PrevMarkerAction.ID,\n            label: PrevMarkerAction.LABEL,\n            alias: 'Go to Previous Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 66 /* F8 */,\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: PrevMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-previous', Codicon.arrowUp, nls.localize('previousMarkerIcon', 'Icon for goto previous marker.')),\n                group: 'navigation',\n                order: 2\n            }\n        });\n    }\n}\nPrevMarkerAction.ID = 'editor.action.marker.prev';\nPrevMarkerAction.LABEL = nls.localize('markerAction.previous.label', \"Go to Previous Problem (Error, Warning, Info)\");\nclass NextMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, true, {\n            id: 'editor.action.marker.nextInFiles',\n            label: nls.localize('markerAction.nextInFiles.label', \"Go to Next Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Next Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 66 /* F8 */,\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoNextProblem', comment: ['&& denotes a mnemonic'] }, \"Next &&Problem\"),\n                group: '6_problem_nav',\n                order: 1\n            }\n        });\n    }\n}\nclass PrevMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, true, {\n            id: 'editor.action.marker.prevInFiles',\n            label: nls.localize('markerAction.previousInFiles.label', \"Go to Previous Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Previous Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* Shift */ | 66 /* F8 */,\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoPreviousProblem', comment: ['&& denotes a mnemonic'] }, \"Previous &&Problem\"),\n                group: '6_problem_nav',\n                order: 2\n            }\n        });\n    }\n}\nregisterEditorContribution(MarkerController.ID, MarkerController);\nregisterEditorAction(NextMarkerAction);\nregisterEditorAction(PrevMarkerAction);\nregisterEditorAction(NextMarkerInFilesAction);\nregisterEditorAction(PrevMarkerInFilesAction);\nconst CONTEXT_MARKERS_NAVIGATION_VISIBLE = new RawContextKey('markersNavigationVisible', false);\nconst MarkerCommand = EditorCommand.bindToContribution(MarkerController.get);\nregisterEditorCommand(new MarkerCommand({\n    id: 'closeMarkersNavigation',\n    precondition: CONTEXT_MARKERS_NAVIGATION_VISIBLE,\n    handler: x => x.close(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 50,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* Escape */,\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { compare } from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport class MarkerCoordinate {\n    constructor(marker, index, total) {\n        this.marker = marker;\n        this.index = index;\n        this.total = total;\n    }\n}\nlet MarkerList = class MarkerList {\n    constructor(resourceFilter, _markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._dispoables = new DisposableStore();\n        this._markers = [];\n        this._nextIdx = -1;\n        if (URI.isUri(resourceFilter)) {\n            this._resourceFilter = uri => uri.toString() === resourceFilter.toString();\n        }\n        else if (resourceFilter) {\n            this._resourceFilter = resourceFilter;\n        }\n        const compareOrder = this._configService.getValue('problems.sortOrder');\n        const compareMarker = (a, b) => {\n            let res = compare(a.resource.toString(), b.resource.toString());\n            if (res === 0) {\n                if (compareOrder === 'position') {\n                    res = Range.compareRangesUsingStarts(a, b) || MarkerSeverity.compare(a.severity, b.severity);\n                }\n                else {\n                    res = MarkerSeverity.compare(a.severity, b.severity) || Range.compareRangesUsingStarts(a, b);\n                }\n            }\n            return res;\n        };\n        const updateMarker = () => {\n            this._markers = this._markerService.read({\n                resource: URI.isUri(resourceFilter) ? resourceFilter : undefined,\n                severities: MarkerSeverity.Error | MarkerSeverity.Warning | MarkerSeverity.Info\n            });\n            if (typeof resourceFilter === 'function') {\n                this._markers = this._markers.filter(m => this._resourceFilter(m.resource));\n            }\n            this._markers.sort(compareMarker);\n        };\n        updateMarker();\n        this._dispoables.add(_markerService.onMarkerChanged(uris => {\n            if (!this._resourceFilter || uris.some(uri => this._resourceFilter(uri))) {\n                updateMarker();\n                this._nextIdx = -1;\n                this._onDidChange.fire();\n            }\n        }));\n    }\n    dispose() {\n        this._dispoables.dispose();\n        this._onDidChange.dispose();\n    }\n    matches(uri) {\n        if (!this._resourceFilter && !uri) {\n            return true;\n        }\n        if (!this._resourceFilter || !uri) {\n            return false;\n        }\n        return this._resourceFilter(uri);\n    }\n    get selected() {\n        const marker = this._markers[this._nextIdx];\n        return marker && new MarkerCoordinate(marker, this._nextIdx + 1, this._markers.length);\n    }\n    _initIdx(model, position, fwd) {\n        let found = false;\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === model.uri.toString());\n        if (idx < 0) {\n            idx = binarySearch(this._markers, { resource: model.uri }, (a, b) => compare(a.resource.toString(), b.resource.toString()));\n            if (idx < 0) {\n                idx = ~idx;\n            }\n        }\n        for (let i = idx; i < this._markers.length; i++) {\n            let range = Range.lift(this._markers[i]);\n            if (range.isEmpty()) {\n                const word = model.getWordAtPosition(range.getStartPosition());\n                if (word) {\n                    range = new Range(range.startLineNumber, word.startColumn, range.startLineNumber, word.endColumn);\n                }\n            }\n            if (position && (range.containsPosition(position) || position.isBeforeOrEqual(range.getStartPosition()))) {\n                this._nextIdx = i;\n                found = true;\n                break;\n            }\n            if (this._markers[i].resource.toString() !== model.uri.toString()) {\n                break;\n            }\n        }\n        if (!found) {\n            // after the last change\n            this._nextIdx = fwd ? 0 : this._markers.length - 1;\n        }\n        if (this._nextIdx < 0) {\n            this._nextIdx = this._markers.length - 1;\n        }\n    }\n    resetIndex() {\n        this._nextIdx = -1;\n    }\n    move(fwd, model, position) {\n        if (this._markers.length === 0) {\n            return false;\n        }\n        let oldIdx = this._nextIdx;\n        if (this._nextIdx === -1) {\n            this._initIdx(model, position, fwd);\n        }\n        else if (fwd) {\n            this._nextIdx = (this._nextIdx + 1) % this._markers.length;\n        }\n        else if (!fwd) {\n            this._nextIdx = (this._nextIdx - 1 + this._markers.length) % this._markers.length;\n        }\n        if (oldIdx !== this._nextIdx) {\n            return true;\n        }\n        return false;\n    }\n    find(uri, position) {\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === uri.toString());\n        if (idx < 0) {\n            return undefined;\n        }\n        for (; idx < this._markers.length; idx++) {\n            if (Range.containsPosition(this._markers[idx], position)) {\n                return new MarkerCoordinate(this._markers[idx], idx + 1, this._markers.length);\n            }\n        }\n        return undefined;\n    }\n};\nMarkerList = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IConfigurationService)\n], MarkerList);\nexport { MarkerList };\nexport const IMarkerNavigationService = createDecorator('IMarkerNavigationService');\nlet MarkerNavigationService = class MarkerNavigationService {\n    constructor(_markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._provider = new LinkedList();\n    }\n    getMarkerList(resource) {\n        for (let provider of this._provider) {\n            const result = provider.getMarkerList(resource);\n            if (result) {\n                return result;\n            }\n        }\n        // default\n        return new MarkerList(resource, this._markerService, this._configService);\n    }\n};\nMarkerNavigationService = __decorate([\n    __param(0, IMarkerService),\n    __param(1, IConfigurationService)\n], MarkerNavigationService);\nregisterSingleton(IMarkerNavigationService, MarkerNavigationService, true);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { getBaseLabel } from '../../../../base/common/labels.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { splitLines } from '../../../../base/common/strings.js';\nimport './media/gotoErrorWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { peekViewTitleForeground, peekViewTitleInfoForeground, PeekViewWidget } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { createAndFillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { SeverityIcon } from '../../../../platform/severityIcon/common/severityIcon.js';\nimport { contrastBorder, editorBackground, editorErrorBorder, editorErrorForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, oneOf, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nclass MessageWidget {\n    constructor(parent, editor, onRelatedInformation, _openerService, _labelService) {\n        this._openerService = _openerService;\n        this._labelService = _labelService;\n        this._lines = 0;\n        this._longestLineLength = 0;\n        this._relatedDiagnostics = new WeakMap();\n        this._disposables = new DisposableStore();\n        this._editor = editor;\n        const domNode = document.createElement('div');\n        domNode.className = 'descriptioncontainer';\n        this._messageBlock = document.createElement('div');\n        this._messageBlock.classList.add('message');\n        this._messageBlock.setAttribute('aria-live', 'assertive');\n        this._messageBlock.setAttribute('role', 'alert');\n        domNode.appendChild(this._messageBlock);\n        this._relatedBlock = document.createElement('div');\n        domNode.appendChild(this._relatedBlock);\n        this._disposables.add(dom.addStandardDisposableListener(this._relatedBlock, 'click', event => {\n            event.preventDefault();\n            const related = this._relatedDiagnostics.get(event.target);\n            if (related) {\n                onRelatedInformation(related);\n            }\n        }));\n        this._scrollable = new ScrollableElement(domNode, {\n            horizontal: 1 /* Auto */,\n            vertical: 1 /* Auto */,\n            useShadows: false,\n            horizontalScrollbarSize: 6,\n            verticalScrollbarSize: 6\n        });\n        parent.appendChild(this._scrollable.getDomNode());\n        this._disposables.add(this._scrollable.onScroll(e => {\n            domNode.style.left = `-${e.scrollLeft}px`;\n            domNode.style.top = `-${e.scrollTop}px`;\n        }));\n        this._disposables.add(this._scrollable);\n    }\n    dispose() {\n        dispose(this._disposables);\n    }\n    update(marker) {\n        const { source, message, relatedInformation, code } = marker;\n        let sourceAndCodeLength = ((source === null || source === void 0 ? void 0 : source.length) || 0) + '()'.length;\n        if (code) {\n            if (typeof code === 'string') {\n                sourceAndCodeLength += code.length;\n            }\n            else {\n                sourceAndCodeLength += code.value.length;\n            }\n        }\n        const lines = splitLines(message);\n        this._lines = lines.length;\n        this._longestLineLength = 0;\n        for (const line of lines) {\n            this._longestLineLength = Math.max(line.length + sourceAndCodeLength, this._longestLineLength);\n        }\n        dom.clearNode(this._messageBlock);\n        this._messageBlock.setAttribute('aria-label', this.getAriaLabel(marker));\n        this._editor.applyFontInfo(this._messageBlock);\n        let lastLineElement = this._messageBlock;\n        for (const line of lines) {\n            lastLineElement = document.createElement('div');\n            lastLineElement.innerText = line;\n            if (line === '') {\n                lastLineElement.style.height = this._messageBlock.style.lineHeight;\n            }\n            this._messageBlock.appendChild(lastLineElement);\n        }\n        if (source || code) {\n            const detailsElement = document.createElement('span');\n            detailsElement.classList.add('details');\n            lastLineElement.appendChild(detailsElement);\n            if (source) {\n                const sourceElement = document.createElement('span');\n                sourceElement.innerText = source;\n                sourceElement.classList.add('source');\n                detailsElement.appendChild(sourceElement);\n            }\n            if (code) {\n                if (typeof code === 'string') {\n                    const codeElement = document.createElement('span');\n                    codeElement.innerText = `(${code})`;\n                    codeElement.classList.add('code');\n                    detailsElement.appendChild(codeElement);\n                }\n                else {\n                    this._codeLink = dom.$('a.code-link');\n                    this._codeLink.setAttribute('href', `${code.target.toString()}`);\n                    this._codeLink.onclick = (e) => {\n                        this._openerService.open(code.target, { allowCommands: true });\n                        e.preventDefault();\n                        e.stopPropagation();\n                    };\n                    const codeElement = dom.append(this._codeLink, dom.$('span'));\n                    codeElement.innerText = code.value;\n                    detailsElement.appendChild(this._codeLink);\n                }\n            }\n        }\n        dom.clearNode(this._relatedBlock);\n        this._editor.applyFontInfo(this._relatedBlock);\n        if (isNonEmptyArray(relatedInformation)) {\n            const relatedInformationNode = this._relatedBlock.appendChild(document.createElement('div'));\n            relatedInformationNode.style.paddingTop = `${Math.floor(this._editor.getOption(59 /* lineHeight */) * 0.66)}px`;\n            this._lines += 1;\n            for (const related of relatedInformation) {\n                let container = document.createElement('div');\n                let relatedResource = document.createElement('a');\n                relatedResource.classList.add('filename');\n                relatedResource.innerText = `${getBaseLabel(related.resource)}(${related.startLineNumber}, ${related.startColumn}): `;\n                relatedResource.title = this._labelService.getUriLabel(related.resource);\n                this._relatedDiagnostics.set(relatedResource, related);\n                let relatedMessage = document.createElement('span');\n                relatedMessage.innerText = related.message;\n                container.appendChild(relatedResource);\n                container.appendChild(relatedMessage);\n                this._lines += 1;\n                relatedInformationNode.appendChild(container);\n            }\n        }\n        const fontInfo = this._editor.getOption(44 /* fontInfo */);\n        const scrollWidth = Math.ceil(fontInfo.typicalFullwidthCharacterWidth * this._longestLineLength * 0.75);\n        const scrollHeight = fontInfo.lineHeight * this._lines;\n        this._scrollable.setScrollDimensions({ scrollWidth, scrollHeight });\n    }\n    layout(height, width) {\n        this._scrollable.getDomNode().style.height = `${height}px`;\n        this._scrollable.getDomNode().style.width = `${width}px`;\n        this._scrollable.setScrollDimensions({ width, height });\n    }\n    getHeightInLines() {\n        return Math.min(17, this._lines);\n    }\n    getAriaLabel(marker) {\n        let severityLabel = '';\n        switch (marker.severity) {\n            case MarkerSeverity.Error:\n                severityLabel = nls.localize('Error', \"Error\");\n                break;\n            case MarkerSeverity.Warning:\n                severityLabel = nls.localize('Warning', \"Warning\");\n                break;\n            case MarkerSeverity.Info:\n                severityLabel = nls.localize('Info', \"Info\");\n                break;\n            case MarkerSeverity.Hint:\n                severityLabel = nls.localize('Hint', \"Hint\");\n                break;\n        }\n        let ariaLabel = nls.localize('marker aria', \"{0} at {1}. \", severityLabel, marker.startLineNumber + ':' + marker.startColumn);\n        const model = this._editor.getModel();\n        if (model && (marker.startLineNumber <= model.getLineCount()) && (marker.startLineNumber >= 1)) {\n            const lineContent = model.getLineContent(marker.startLineNumber);\n            ariaLabel = `${lineContent}, ${ariaLabel}`;\n        }\n        return ariaLabel;\n    }\n}\nlet MarkerNavigationWidget = class MarkerNavigationWidget extends PeekViewWidget {\n    constructor(editor, _themeService, _openerService, _menuService, instantiationService, _contextKeyService, _labelService) {\n        super(editor, { showArrow: true, showFrame: true, isAccessible: true, frameWidth: 1 }, instantiationService);\n        this._themeService = _themeService;\n        this._openerService = _openerService;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._labelService = _labelService;\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectRelatedInformation = new Emitter();\n        this.onDidSelectRelatedInformation = this._onDidSelectRelatedInformation.event;\n        this._severity = MarkerSeverity.Warning;\n        this._backgroundColor = Color.white;\n        this._applyTheme(_themeService.getColorTheme());\n        this._callOnDispose.add(_themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this.create();\n    }\n    _applyTheme(theme) {\n        this._backgroundColor = theme.getColor(editorMarkerNavigationBackground);\n        let colorId = editorMarkerNavigationError;\n        let headerBackground = editorMarkerNavigationErrorHeader;\n        if (this._severity === MarkerSeverity.Warning) {\n            colorId = editorMarkerNavigationWarning;\n            headerBackground = editorMarkerNavigationWarningHeader;\n        }\n        else if (this._severity === MarkerSeverity.Info) {\n            colorId = editorMarkerNavigationInfo;\n            headerBackground = editorMarkerNavigationInfoHeader;\n        }\n        const frameColor = theme.getColor(colorId);\n        const headerBg = theme.getColor(headerBackground);\n        this.style({\n            arrowColor: frameColor,\n            frameColor: frameColor,\n            headerBackgroundColor: headerBg,\n            primaryHeadingColor: theme.getColor(peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekViewTitleInfoForeground)\n        }); // style() will trigger _applyStyles\n    }\n    _applyStyles() {\n        if (this._parentContainer) {\n            this._parentContainer.style.backgroundColor = this._backgroundColor ? this._backgroundColor.toString() : '';\n        }\n        super._applyStyles();\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        super.dispose();\n    }\n    _fillHead(container) {\n        super._fillHead(container);\n        this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(e => this.editor.focus()));\n        const actions = [];\n        const menu = this._menuService.createMenu(MarkerNavigationWidget.TitleMenu, this._contextKeyService);\n        createAndFillInActionBarActions(menu, undefined, actions);\n        this._actionbarWidget.push(actions, { label: false, icon: true, index: 0 });\n        menu.dispose();\n    }\n    _fillTitleIcon(container) {\n        this._icon = dom.append(container, dom.$(''));\n    }\n    _fillBody(container) {\n        this._parentContainer = container;\n        container.classList.add('marker-widget');\n        this._parentContainer.tabIndex = 0;\n        this._parentContainer.setAttribute('role', 'tooltip');\n        this._container = document.createElement('div');\n        container.appendChild(this._container);\n        this._message = new MessageWidget(this._container, this.editor, related => this._onDidSelectRelatedInformation.fire(related), this._openerService, this._labelService);\n        this._disposables.add(this._message);\n    }\n    show() {\n        throw new Error('call showAtMarker');\n    }\n    showAtMarker(marker, markerIdx, markerCount) {\n        // update:\n        // * title\n        // * message\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n        // update frame color (only applied on 'show')\n        this._severity = marker.severity;\n        this._applyTheme(this._themeService.getColorTheme());\n        // show\n        let range = Range.lift(marker);\n        const editorPosition = this.editor.getPosition();\n        let position = editorPosition && range.containsPosition(editorPosition) ? editorPosition : range.getStartPosition();\n        super.show(position, this.computeRequiredHeight());\n        const model = this.editor.getModel();\n        if (model) {\n            const detail = markerCount > 1\n                ? nls.localize('problems', \"{0} of {1} problems\", markerIdx, markerCount)\n                : nls.localize('change', \"{0} of {1} problem\", markerIdx, markerCount);\n            this.setTitle(basename(model.uri), detail);\n        }\n        this._icon.className = `codicon ${SeverityIcon.className(MarkerSeverity.toSeverity(this._severity))}`;\n        this.editor.revealPositionNearTop(position, 0 /* Smooth */);\n        this.editor.focus();\n    }\n    updateMarker(marker) {\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n    }\n    showStale() {\n        this._container.classList.add('stale');\n        this._relayout();\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._heightInPixel = heightInPixel;\n        this._message.layout(heightInPixel, widthInPixel);\n        this._container.style.height = `${heightInPixel}px`;\n    }\n    _onWidth(widthInPixel) {\n        this._message.layout(this._heightInPixel, widthInPixel);\n    }\n    _relayout() {\n        super._relayout(this.computeRequiredHeight());\n    }\n    computeRequiredHeight() {\n        return 3 + this._message.getHeightInLines();\n    }\n};\nMarkerNavigationWidget.TitleMenu = new MenuId('gotoErrorTitleMenu');\nMarkerNavigationWidget = __decorate([\n    __param(1, IThemeService),\n    __param(2, IOpenerService),\n    __param(3, IMenuService),\n    __param(4, IInstantiationService),\n    __param(5, IContextKeyService),\n    __param(6, ILabelService)\n], MarkerNavigationWidget);\nexport { MarkerNavigationWidget };\n// theming\nlet errorDefault = oneOf(editorErrorForeground, editorErrorBorder);\nlet warningDefault = oneOf(editorWarningForeground, editorWarningBorder);\nlet infoDefault = oneOf(editorInfoForeground, editorInfoBorder);\nexport const editorMarkerNavigationError = registerColor('editorMarkerNavigationError.background', { dark: errorDefault, light: errorDefault, hc: contrastBorder }, nls.localize('editorMarkerNavigationError', 'Editor marker navigation widget error color.'));\nexport const editorMarkerNavigationErrorHeader = registerColor('editorMarkerNavigationError.headerBackground', { dark: transparent(editorMarkerNavigationError, .1), light: transparent(editorMarkerNavigationError, .1), hc: null }, nls.localize('editorMarkerNavigationErrorHeaderBackground', 'Editor marker navigation widget error heading background.'));\nexport const editorMarkerNavigationWarning = registerColor('editorMarkerNavigationWarning.background', { dark: warningDefault, light: warningDefault, hc: contrastBorder }, nls.localize('editorMarkerNavigationWarning', 'Editor marker navigation widget warning color.'));\nexport const editorMarkerNavigationWarningHeader = registerColor('editorMarkerNavigationWarning.headerBackground', { dark: transparent(editorMarkerNavigationWarning, .1), light: transparent(editorMarkerNavigationWarning, .1), hc: '#0C141F' }, nls.localize('editorMarkerNavigationWarningBackground', 'Editor marker navigation widget warning heading background.'));\nexport const editorMarkerNavigationInfo = registerColor('editorMarkerNavigationInfo.background', { dark: infoDefault, light: infoDefault, hc: contrastBorder }, nls.localize('editorMarkerNavigationInfo', 'Editor marker navigation widget info color.'));\nexport const editorMarkerNavigationInfoHeader = registerColor('editorMarkerNavigationInfo.headerBackground', { dark: transparent(editorMarkerNavigationInfo, .1), light: transparent(editorMarkerNavigationInfo, .1), hc: null }, nls.localize('editorMarkerNavigationInfoHeaderBackground', 'Editor marker navigation widget info heading background.'));\nexport const editorMarkerNavigationBackground = registerColor('editorMarkerNavigation.background', { dark: editorBackground, light: editorBackground, hc: editorBackground }, nls.localize('editorMarkerNavigationBackground', 'Editor marker navigation widget background.'));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../base/common/codicons.js';\nimport Severity from '../../../base/common/severity.js';\nimport { problemsErrorIconForeground, problemsInfoIconForeground, problemsWarningIconForeground } from '../../theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../theme/common/themeService.js';\nexport var SeverityIcon;\n(function (SeverityIcon) {\n    function className(severity) {\n        switch (severity) {\n            case Severity.Ignore:\n                return 'severity-ignore ' + Codicon.info.classNames;\n            case Severity.Info:\n                return Codicon.info.classNames;\n            case Severity.Warning:\n                return Codicon.warning.classNames;\n            case Severity.Error:\n                return Codicon.error.classNames;\n            default:\n                return '';\n        }\n    }\n    SeverityIcon.className = className;\n})(SeverityIcon || (SeverityIcon = {}));\nregisterThemingParticipant((theme, collector) => {\n    const errorIconForeground = theme.getColor(problemsErrorIconForeground);\n    if (errorIconForeground) {\n        const errorCodiconSelector = Codicon.error.cssSelector;\n        collector.addRule(`\n\t\t\t.monaco-editor .zone-widget ${errorCodiconSelector},\n\t\t\t.markers-panel .marker-icon${errorCodiconSelector},\n\t\t\t.text-search-provider-messages .providerMessage ${errorCodiconSelector},\n\t\t\t.extensions-viewlet > .extensions ${errorCodiconSelector} {\n\t\t\t\tcolor: ${errorIconForeground};\n\t\t\t}\n\t\t`);\n    }\n    const warningIconForeground = theme.getColor(problemsWarningIconForeground);\n    if (warningIconForeground) {\n        const warningCodiconSelector = Codicon.warning.cssSelector;\n        collector.addRule(`\n\t\t\t.monaco-editor .zone-widget ${warningCodiconSelector},\n\t\t\t.markers-panel .marker-icon${warningCodiconSelector},\n\t\t\t.extensions-viewlet > .extensions ${warningCodiconSelector},\n\t\t\t.extension-editor ${warningCodiconSelector},\n\t\t\t.text-search-provider-messages .providerMessage ${warningCodiconSelector},\n\t\t\t.preferences-editor ${warningCodiconSelector} {\n\t\t\t\tcolor: ${warningIconForeground};\n\t\t\t}\n\t\t`);\n    }\n    const infoIconForeground = theme.getColor(problemsInfoIconForeground);\n    if (infoIconForeground) {\n        const infoCodiconSelector = Codicon.info.cssSelector;\n        collector.addRule(`\n\t\t\t.monaco-editor .zone-widget ${infoCodiconSelector},\n\t\t\t.markers-panel .marker-icon${infoCodiconSelector},\n\t\t\t.extensions-viewlet > .extensions ${infoCodiconSelector},\n\t\t\t.text-search-provider-messages .providerMessage ${infoCodiconSelector},\n\t\t\t.extension-editor ${infoCodiconSelector} {\n\t\t\t\tcolor: ${infoIconForeground};\n\t\t\t}\n\t\t`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nimport { LineCommentCommand } from './lineCommentCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nclass CommentLineAction extends EditorAction {\n    constructor(type, opts) {\n        super(opts);\n        this._type = type;\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const modelOptions = model.getOptions();\n        const commentsOptions = editor.getOption(19 /* comments */);\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignoreFirstLine: false }));\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        // Remove selections that would result in copying the same line\n        let prev = selections[0];\n        for (let i = 1; i < selections.length; i++) {\n            const curr = selections[i];\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n                // these two selections would copy the same line\n                if (prev.index < curr.index) {\n                    // prev wins\n                    curr.ignoreFirstLine = true;\n                }\n                else {\n                    // curr wins\n                    prev.ignoreFirstLine = true;\n                    prev = curr;\n                }\n            }\n        }\n        for (const selection of selections) {\n            commands.push(new LineCommentCommand(languageConfigurationService, selection.selection, modelOptions.tabSize, this._type, commentsOptions.insertSpace, commentsOptions.ignoreEmptyLines, selection.ignoreFirstLine));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass ToggleCommentLineAction extends CommentLineAction {\n    constructor() {\n        super(0 /* Toggle */, {\n            id: 'editor.action.commentLine',\n            label: nls.localize('comment.line', \"Toggle Line Comment\"),\n            alias: 'Toggle Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 85 /* Slash */,\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleLineComment', comment: ['&& denotes a mnemonic'] }, \"&&Toggle Line Comment\"),\n                order: 1\n            }\n        });\n    }\n}\nclass AddLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(1 /* ForceAdd */, {\n            id: 'editor.action.addCommentLine',\n            label: nls.localize('comment.line.add', \"Add Line Comment\"),\n            alias: 'Add Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 33 /* KeyC */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n}\nclass RemoveLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(2 /* ForceRemove */, {\n            id: 'editor.action.removeCommentLine',\n            label: nls.localize('comment.line.remove', \"Remove Line Comment\"),\n            alias: 'Remove Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 51 /* KeyU */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n}\nclass BlockCommentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.blockComment',\n            label: nls.localize('comment.block', \"Toggle Block Comment\"),\n            alias: 'Toggle Block Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 31 /* KeyA */,\n                linux: { primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 31 /* KeyA */ },\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleBlockComment', comment: ['&& denotes a mnemonic'] }, \"Toggle &&Block Comment\"),\n                order: 2\n            }\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commentsOptions = editor.getOption(19 /* comments */);\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new BlockCommentCommand(selection, commentsOptions.insertSpace, languageConfigurationService));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nregisterEditorAction(ToggleCommentLineAction);\nregisterEditorAction(AddLineCommentAction);\nregisterEditorAction(RemoveLineCommentAction);\nregisterEditorAction(BlockCommentAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class BlockCommentCommand {\n    constructor(selection, insertSpace, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._insertSpace = insertSpace;\n        this._usedEndToken = null;\n    }\n    static _haystackHasNeedleAtOffset(haystack, needle, offset) {\n        if (offset < 0) {\n            return false;\n        }\n        const needleLength = needle.length;\n        const haystackLength = haystack.length;\n        if (offset + needleLength > haystackLength) {\n            return false;\n        }\n        for (let i = 0; i < needleLength; i++) {\n            const codeA = haystack.charCodeAt(offset + i);\n            const codeB = needle.charCodeAt(i);\n            if (codeA === codeB) {\n                continue;\n            }\n            if (codeA >= 65 /* A */ && codeA <= 90 /* Z */ && codeA + 32 === codeB) {\n                // codeA is upper-case variant of codeB\n                continue;\n            }\n            if (codeB >= 65 /* A */ && codeB <= 90 /* Z */ && codeB + 32 === codeA) {\n                // codeB is upper-case variant of codeA\n                continue;\n            }\n            return false;\n        }\n        return true;\n    }\n    _createOperationsForBlockComment(selection, startToken, endToken, insertSpace, model, builder) {\n        const startLineNumber = selection.startLineNumber;\n        const startColumn = selection.startColumn;\n        const endLineNumber = selection.endLineNumber;\n        const endColumn = selection.endColumn;\n        const startLineText = model.getLineContent(startLineNumber);\n        const endLineText = model.getLineContent(endLineNumber);\n        let startTokenIndex = startLineText.lastIndexOf(startToken, startColumn - 1 + startToken.length);\n        let endTokenIndex = endLineText.indexOf(endToken, endColumn - 1 - endToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            if (startLineNumber === endLineNumber) {\n                const lineBetweenTokens = startLineText.substring(startTokenIndex + startToken.length, endTokenIndex);\n                if (lineBetweenTokens.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n            else {\n                const startLineAfterStartToken = startLineText.substring(startTokenIndex + startToken.length);\n                const endLineBeforeEndToken = endLineText.substring(0, endTokenIndex);\n                if (startLineAfterStartToken.indexOf(endToken) >= 0 || endLineBeforeEndToken.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n        }\n        let ops;\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            // Consider spaces as part of the comment tokens\n            if (insertSpace && startTokenIndex + startToken.length < startLineText.length && startLineText.charCodeAt(startTokenIndex + startToken.length) === 32 /* Space */) {\n                // Pretend the start token contains a trailing space\n                startToken = startToken + ' ';\n            }\n            if (insertSpace && endTokenIndex > 0 && endLineText.charCodeAt(endTokenIndex - 1) === 32 /* Space */) {\n                // Pretend the end token contains a leading space\n                endToken = ' ' + endToken;\n                endTokenIndex -= 1;\n            }\n            ops = BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        else {\n            ops = BlockCommentCommand._createAddBlockCommentOperations(selection, startToken, endToken, this._insertSpace);\n            this._usedEndToken = ops.length === 1 ? endToken : null;\n        }\n        for (const op of ops) {\n            builder.addTrackedEditOperation(op.range, op.text);\n        }\n    }\n    static _createRemoveBlockCommentOperations(r, startToken, endToken) {\n        let res = [];\n        if (!Range.isEmpty(r)) {\n            // Remove block comment start\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.startLineNumber, r.startColumn)));\n            // Remove block comment end\n            res.push(EditOperation.delete(new Range(r.endLineNumber, r.endColumn, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        else {\n            // Remove both continuously\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        return res;\n    }\n    static _createAddBlockCommentOperations(r, startToken, endToken, insertSpace) {\n        let res = [];\n        if (!Range.isEmpty(r)) {\n            // Insert block comment start\n            res.push(EditOperation.insert(new Position(r.startLineNumber, r.startColumn), startToken + (insertSpace ? ' ' : '')));\n            // Insert block comment end\n            res.push(EditOperation.insert(new Position(r.endLineNumber, r.endColumn), (insertSpace ? ' ' : '') + endToken));\n        }\n        else {\n            // Insert both continuously\n            res.push(EditOperation.replace(new Range(r.startLineNumber, r.startColumn, r.endLineNumber, r.endColumn), startToken + '  ' + endToken));\n        }\n        return res;\n    }\n    getEditOperations(model, builder) {\n        const startLineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        model.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, startColumn);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        this._createOperationsForBlockComment(this._selection, config.blockCommentStartToken, config.blockCommentEndToken, this._insertSpace, model, builder);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        if (inverseEditOperations.length === 2) {\n            const startTokenEditOperation = inverseEditOperations[0];\n            const endTokenEditOperation = inverseEditOperations[1];\n            return new Selection(startTokenEditOperation.range.endLineNumber, startTokenEditOperation.range.endColumn, endTokenEditOperation.range.startLineNumber, endTokenEditOperation.range.startColumn);\n        }\n        else {\n            const srcRange = inverseEditOperations[0].range;\n            const deltaColumn = this._usedEndToken ? -this._usedEndToken.length - 1 : 0; // minus 1 space before endToken\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn + deltaColumn, srcRange.endLineNumber, srcRange.endColumn + deltaColumn);\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { LanguageConfigurationRegistry } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nexport class LineCommentCommand {\n    constructor(languageConfigurationService, selection, tabSize, type, insertSpace, ignoreEmptyLines, ignoreFirstLine) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._tabSize = tabSize;\n        this._type = type;\n        this._insertSpace = insertSpace;\n        this._selectionId = null;\n        this._deltaColumn = 0;\n        this._moveEndPositionDown = false;\n        this._ignoreEmptyLines = ignoreEmptyLines;\n        this._ignoreFirstLine = ignoreFirstLine || false;\n    }\n    /**\n     * Do an initial pass over the lines and gather info about the line comment string.\n     * Returns null if any of the lines doesn't support a line comment string.\n     */\n    static _gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService) {\n        model.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, 1);\n        const config = languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        const commentStr = (config ? config.lineCommentToken : null);\n        if (!commentStr) {\n            // Mode does not support line comments\n            return null;\n        }\n        let lines = [];\n        for (let i = 0, lineCount = endLineNumber - startLineNumber + 1; i < lineCount; i++) {\n            lines[i] = {\n                ignore: false,\n                commentStr: commentStr,\n                commentStrOffset: 0,\n                commentStrLength: commentStr.length\n            };\n        }\n        return lines;\n    }\n    /**\n     * Analyze lines and decide which lines are relevant and what the toggle should do.\n     * Also, build up several offsets and lengths useful in the generation of editor operations.\n     */\n    static _analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        let onlyWhitespaceLines = true;\n        let shouldRemoveComments;\n        if (type === 0 /* Toggle */) {\n            shouldRemoveComments = true;\n        }\n        else if (type === 1 /* ForceAdd */) {\n            shouldRemoveComments = false;\n        }\n        else {\n            shouldRemoveComments = true;\n        }\n        for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n            const lineData = lines[i];\n            const lineNumber = startLineNumber + i;\n            if (lineNumber === startLineNumber && ignoreFirstLine) {\n                // first line ignored\n                lineData.ignore = true;\n                continue;\n            }\n            const lineContent = model.getLineContent(lineNumber);\n            const lineContentStartOffset = strings.firstNonWhitespaceIndex(lineContent);\n            if (lineContentStartOffset === -1) {\n                // Empty or whitespace only line\n                lineData.ignore = ignoreEmptyLines;\n                lineData.commentStrOffset = lineContent.length;\n                continue;\n            }\n            onlyWhitespaceLines = false;\n            lineData.ignore = false;\n            lineData.commentStrOffset = lineContentStartOffset;\n            if (shouldRemoveComments && !BlockCommentCommand._haystackHasNeedleAtOffset(lineContent, lineData.commentStr, lineContentStartOffset)) {\n                if (type === 0 /* Toggle */) {\n                    // Every line so far has been a line comment, but this one is not\n                    shouldRemoveComments = false;\n                }\n                else if (type === 1 /* ForceAdd */) {\n                    // Will not happen\n                }\n                else {\n                    lineData.ignore = true;\n                }\n            }\n            if (shouldRemoveComments && insertSpace) {\n                // Remove a following space if present\n                const commentStrEndOffset = lineContentStartOffset + lineData.commentStrLength;\n                if (commentStrEndOffset < lineContent.length && lineContent.charCodeAt(commentStrEndOffset) === 32 /* Space */) {\n                    lineData.commentStrLength += 1;\n                }\n            }\n        }\n        if (type === 0 /* Toggle */ && onlyWhitespaceLines) {\n            // For only whitespace lines, we insert comments\n            shouldRemoveComments = false;\n            // Also, no longer ignore them\n            for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n                lines[i].ignore = false;\n            }\n        }\n        return {\n            supported: true,\n            shouldRemoveComments: shouldRemoveComments,\n            lines: lines\n        };\n    }\n    /**\n     * Analyze all lines and decide exactly what to do => not supported | insert line comments | remove line comments\n     */\n    static _gatherPreflightData(type, insertSpace, model, startLineNumber, endLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        const lines = LineCommentCommand._gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService);\n        if (lines === null) {\n            return {\n                supported: false\n            };\n        }\n        return LineCommentCommand._analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService);\n    }\n    /**\n     * Given a successful analysis, execute either insert line comments, either remove line comments\n     */\n    _executeLineComments(model, builder, data, s) {\n        let ops;\n        if (data.shouldRemoveComments) {\n            ops = LineCommentCommand._createRemoveLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        else {\n            LineCommentCommand._normalizeInsertionPoint(model, data.lines, s.startLineNumber, this._tabSize);\n            ops = this._createAddLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        const cursorPosition = new Position(s.positionLineNumber, s.positionColumn);\n        for (let i = 0, len = ops.length; i < len; i++) {\n            builder.addEditOperation(ops[i].range, ops[i].text);\n            if (Range.isEmpty(ops[i].range) && Range.getStartPosition(ops[i].range).equals(cursorPosition)) {\n                const lineContent = model.getLineContent(cursorPosition.lineNumber);\n                if (lineContent.length + 1 === cursorPosition.column) {\n                    this._deltaColumn = (ops[i].text || '').length;\n                }\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n    }\n    _attemptRemoveBlockComment(model, s, startToken, endToken) {\n        let startLineNumber = s.startLineNumber;\n        let endLineNumber = s.endLineNumber;\n        let startTokenAllowedBeforeColumn = endToken.length + Math.max(model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.startColumn);\n        let startTokenIndex = model.getLineContent(startLineNumber).lastIndexOf(startToken, startTokenAllowedBeforeColumn - 1);\n        let endTokenIndex = model.getLineContent(endLineNumber).indexOf(endToken, s.endColumn - 1 - startToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex === -1) {\n            endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            endLineNumber = startLineNumber;\n        }\n        if (startTokenIndex === -1 && endTokenIndex !== -1) {\n            startTokenIndex = model.getLineContent(endLineNumber).lastIndexOf(startToken, endTokenIndex);\n            startLineNumber = endLineNumber;\n        }\n        if (s.isEmpty() && (startTokenIndex === -1 || endTokenIndex === -1)) {\n            startTokenIndex = model.getLineContent(startLineNumber).indexOf(startToken);\n            if (startTokenIndex !== -1) {\n                endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            }\n        }\n        // We have to adjust to possible inner white space.\n        // For Space after startToken, add Space to startToken - range math will work out.\n        if (startTokenIndex !== -1 && model.getLineContent(startLineNumber).charCodeAt(startTokenIndex + startToken.length) === 32 /* Space */) {\n            startToken += ' ';\n        }\n        // For Space before endToken, add Space before endToken and shift index one left.\n        if (endTokenIndex !== -1 && model.getLineContent(endLineNumber).charCodeAt(endTokenIndex - 1) === 32 /* Space */) {\n            endToken = ' ' + endToken;\n            endTokenIndex -= 1;\n        }\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            return BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        return null;\n    }\n    /**\n     * Given an unsuccessful analysis, delegate to the block comment command\n     */\n    _executeBlockComment(model, builder, s) {\n        model.tokenizeIfCheap(s.startLineNumber);\n        let languageId = model.getLanguageIdAtPosition(s.startLineNumber, 1);\n        let config = LanguageConfigurationRegistry.getComments(languageId);\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        const startToken = config.blockCommentStartToken;\n        const endToken = config.blockCommentEndToken;\n        let ops = this._attemptRemoveBlockComment(model, s, startToken, endToken);\n        if (!ops) {\n            if (s.isEmpty()) {\n                const lineContent = model.getLineContent(s.startLineNumber);\n                let firstNonWhitespaceIndex = strings.firstNonWhitespaceIndex(lineContent);\n                if (firstNonWhitespaceIndex === -1) {\n                    // Line is empty or contains only whitespace\n                    firstNonWhitespaceIndex = lineContent.length;\n                }\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, firstNonWhitespaceIndex + 1, s.startLineNumber, lineContent.length + 1), startToken, endToken, this._insertSpace);\n            }\n            else {\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), startToken, endToken, this._insertSpace);\n            }\n            if (ops.length === 1) {\n                // Leave cursor after token and Space\n                this._deltaColumn = startToken.length + 1;\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n        for (const op of ops) {\n            builder.addEditOperation(op.range, op.text);\n        }\n    }\n    getEditOperations(model, builder) {\n        let s = this._selection;\n        this._moveEndPositionDown = false;\n        if (s.startLineNumber === s.endLineNumber && this._ignoreFirstLine) {\n            builder.addEditOperation(new Range(s.startLineNumber, model.getLineMaxColumn(s.startLineNumber), s.startLineNumber + 1, 1), s.startLineNumber === model.getLineCount() ? '' : '\\n');\n            this._selectionId = builder.trackSelection(s);\n            return;\n        }\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._moveEndPositionDown = true;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const data = LineCommentCommand._gatherPreflightData(this._type, this._insertSpace, model, s.startLineNumber, s.endLineNumber, this._ignoreEmptyLines, this._ignoreFirstLine, this.languageConfigurationService);\n        if (data.supported) {\n            return this._executeLineComments(model, builder, data, s);\n        }\n        return this._executeBlockComment(model, builder, s);\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._moveEndPositionDown) {\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\n        }\n        return new Selection(result.selectionStartLineNumber, result.selectionStartColumn + this._deltaColumn, result.positionLineNumber, result.positionColumn + this._deltaColumn);\n    }\n    /**\n     * Generate edit operations in the remove line comment case\n     */\n    static _createRemoveLineCommentsOperations(lines, startLineNumber) {\n        let res = [];\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.delete(new Range(startLineNumber + i, lineData.commentStrOffset + 1, startLineNumber + i, lineData.commentStrOffset + lineData.commentStrLength + 1)));\n        }\n        return res;\n    }\n    /**\n     * Generate edit operations in the add line comment case\n     */\n    _createAddLineCommentsOperations(lines, startLineNumber) {\n        let res = [];\n        const afterCommentStr = this._insertSpace ? ' ' : '';\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.insert(new Position(startLineNumber + i, lineData.commentStrOffset + 1), lineData.commentStr + afterCommentStr));\n        }\n        return res;\n    }\n    static nextVisibleColumn(currentVisibleColumn, tabSize, isTab, columnSize) {\n        if (isTab) {\n            return currentVisibleColumn + (tabSize - (currentVisibleColumn % tabSize));\n        }\n        return currentVisibleColumn + columnSize;\n    }\n    /**\n     * Adjust insertion points to have them vertically aligned in the add line comment case\n     */\n    static _normalizeInsertionPoint(model, lines, startLineNumber, tabSize) {\n        let minVisibleColumn = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\n        let j;\n        let lenJ;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (let j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* Tab */, 1);\n            }\n            if (currentVisibleColumn < minVisibleColumn) {\n                minVisibleColumn = currentVisibleColumn;\n            }\n        }\n        minVisibleColumn = Math.floor(minVisibleColumn / tabSize) * tabSize;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* Tab */, 1);\n            }\n            if (currentVisibleColumn > minVisibleColumn) {\n                lines[i].commentStrOffset = j - 1;\n            }\n            else {\n                lines[i].commentStrOffset = j;\n            }\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { Separator, SubmenuAction } from '../../../../base/common/actions.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { IMenuService, MenuId, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nlet ContextMenuController = class ContextMenuController {\n    constructor(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService) {\n        this._contextMenuService = _contextMenuService;\n        this._contextViewService = _contextViewService;\n        this._contextKeyService = _contextKeyService;\n        this._keybindingService = _keybindingService;\n        this._menuService = _menuService;\n        this._toDispose = new DisposableStore();\n        this._contextMenuIsBeingShownCount = 0;\n        this._editor = editor;\n        this._toDispose.add(this._editor.onContextMenu((e) => this._onContextMenu(e)));\n        this._toDispose.add(this._editor.onMouseWheel((e) => {\n            if (this._contextMenuIsBeingShownCount > 0) {\n                const view = this._contextViewService.getContextViewElement();\n                const target = e.srcElement;\n                // Event triggers on shadow root host first\n                // Check if the context view is under this host before hiding it #103169\n                if (!(target.shadowRoot && dom.getShadowRoot(view) === target.shadowRoot)) {\n                    this._contextViewService.hideContextView();\n                }\n            }\n        }));\n        this._toDispose.add(this._editor.onKeyDown((e) => {\n            if (e.keyCode === 58 /* ContextMenu */) {\n                // Chrome is funny like that\n                e.preventDefault();\n                e.stopPropagation();\n                this.showContextMenu();\n            }\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(ContextMenuController.ID);\n    }\n    _onContextMenu(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._editor.getOption(20 /* contextmenu */)) {\n            this._editor.focus();\n            // Ensure the cursor is at the position of the mouse click\n            if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n                this._editor.setPosition(e.target.position);\n            }\n            return; // Context menu is turned off through configuration\n        }\n        if (e.target.type === 12 /* OVERLAY_WIDGET */) {\n            return; // allow native menu on widgets to support right click on input field for example in find\n        }\n        if (e.target.type === 6 /* CONTENT_TEXT */ && e.target.detail.injectedText) {\n            return; // allow native menu on injected text\n        }\n        e.event.preventDefault();\n        e.event.stopPropagation();\n        if (e.target.type !== 6 /* CONTENT_TEXT */ && e.target.type !== 7 /* CONTENT_EMPTY */ && e.target.type !== 1 /* TEXTAREA */) {\n            return; // only support mouse click into text or native context menu key for now\n        }\n        // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\n        this._editor.focus();\n        // Ensure the cursor is at the position of the mouse click\n        if (e.target.position) {\n            let hasSelectionAtPosition = false;\n            for (const selection of this._editor.getSelections()) {\n                if (selection.containsPosition(e.target.position)) {\n                    hasSelectionAtPosition = true;\n                    break;\n                }\n            }\n            if (!hasSelectionAtPosition) {\n                this._editor.setPosition(e.target.position);\n            }\n        }\n        // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\n        let anchor = null;\n        if (e.target.type !== 1 /* TEXTAREA */) {\n            anchor = { x: e.event.posx - 1, width: 2, y: e.event.posy - 1, height: 2 };\n        }\n        // Show the context menu\n        this.showContextMenu(anchor);\n    }\n    showContextMenu(anchor) {\n        if (!this._editor.getOption(20 /* contextmenu */)) {\n            return; // Context menu is turned off through configuration\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._contextMenuService) {\n            this._editor.focus();\n            return; // We need the context menu service to function\n        }\n        // Find actions available for menu\n        const menuActions = this._getMenuActions(this._editor.getModel(), this._editor.isSimpleWidget ? MenuId.SimpleEditorContext : MenuId.EditorContext);\n        // Show menu if we have actions to show\n        if (menuActions.length > 0) {\n            this._doShowContextMenu(menuActions, anchor);\n        }\n    }\n    _getMenuActions(model, menuId) {\n        const result = [];\n        // get menu groups\n        const menu = this._menuService.createMenu(menuId, this._contextKeyService);\n        const groups = menu.getActions({ arg: model.uri });\n        menu.dispose();\n        // translate them into other actions\n        for (let group of groups) {\n            const [, actions] = group;\n            let addedItems = 0;\n            for (const action of actions) {\n                if (action instanceof SubmenuItemAction) {\n                    const subActions = this._getMenuActions(model, action.item.submenu);\n                    if (subActions.length > 0) {\n                        result.push(new SubmenuAction(action.id, action.label, subActions));\n                        addedItems++;\n                    }\n                }\n                else {\n                    result.push(action);\n                    addedItems++;\n                }\n            }\n            if (addedItems) {\n                result.push(new Separator());\n            }\n        }\n        if (result.length) {\n            result.pop(); // remove last separator\n        }\n        return result;\n    }\n    _doShowContextMenu(actions, anchor = null) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Disable hover\n        const oldHoverSetting = this._editor.getOption(53 /* hover */);\n        this._editor.updateOptions({\n            hover: {\n                enabled: false\n            }\n        });\n        if (!anchor) {\n            // Ensure selection is visible\n            this._editor.revealPosition(this._editor.getPosition(), 1 /* Immediate */);\n            this._editor.render();\n            const cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition());\n            // Translate to absolute editor position\n            const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n            const posx = editorCoords.left + cursorCoords.left;\n            const posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\n            anchor = { x: posx, y: posy };\n        }\n        const useShadowDOM = this._editor.getOption(115 /* useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        // Show menu\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            getActionViewItem: (action) => {\n                const keybinding = this._keybindingFor(action);\n                if (keybinding) {\n                    return new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel(), isMenu: true });\n                }\n                const customActionViewItem = action;\n                if (typeof customActionViewItem.getActionViewItem === 'function') {\n                    return customActionViewItem.getActionViewItem();\n                }\n                return new ActionViewItem(action, action, { icon: true, label: true, isMenu: true });\n            },\n            getKeyBinding: (action) => {\n                return this._keybindingFor(action);\n            },\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.focus();\n                this._editor.updateOptions({\n                    hover: oldHoverSetting\n                });\n            }\n        });\n    }\n    _keybindingFor(action) {\n        return this._keybindingService.lookupKeybinding(action.id);\n    }\n    dispose() {\n        if (this._contextMenuIsBeingShownCount > 0) {\n            this._contextViewService.hideContextView();\n        }\n        this._toDispose.dispose();\n    }\n};\nContextMenuController.ID = 'editor.contrib.contextmenu';\nContextMenuController = __decorate([\n    __param(1, IContextMenuService),\n    __param(2, IContextViewService),\n    __param(3, IContextKeyService),\n    __param(4, IKeybindingService),\n    __param(5, IMenuService)\n], ContextMenuController);\nexport { ContextMenuController };\nclass ShowContextMenu extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showContextMenu',\n            label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\n            alias: 'Show Editor Context Menu',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 1024 /* Shift */ | 68 /* F10 */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = ContextMenuController.get(editor)) === null || _a === void 0 ? void 0 : _a.showContextMenu();\n    }\n}\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController);\nregisterEditorAction(ShowContextMenu);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass CursorState {\n    constructor(selections) {\n        this.selections = selections;\n    }\n    equals(other) {\n        const thisLen = this.selections.length;\n        const otherLen = other.selections.length;\n        if (thisLen !== otherLen) {\n            return false;\n        }\n        for (let i = 0; i < thisLen; i++) {\n            if (!this.selections[i].equalsSelection(other.selections[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\nclass StackElement {\n    constructor(cursorState, scrollTop, scrollLeft) {\n        this.cursorState = cursorState;\n        this.scrollTop = scrollTop;\n        this.scrollLeft = scrollLeft;\n    }\n}\nexport class CursorUndoRedoController extends Disposable {\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._isCursorUndoRedo = false;\n        this._undoStack = [];\n        this._redoStack = [];\n        this._register(editor.onDidChangeModel((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeCursorSelection((e) => {\n            if (this._isCursorUndoRedo) {\n                return;\n            }\n            if (!e.oldSelections) {\n                return;\n            }\n            if (e.oldModelVersionId !== e.modelVersionId) {\n                return;\n            }\n            const prevState = new CursorState(e.oldSelections);\n            const isEqualToLastUndoStack = (this._undoStack.length > 0 && this._undoStack[this._undoStack.length - 1].cursorState.equals(prevState));\n            if (!isEqualToLastUndoStack) {\n                this._undoStack.push(new StackElement(prevState, editor.getScrollTop(), editor.getScrollLeft()));\n                this._redoStack = [];\n                if (this._undoStack.length > 50) {\n                    // keep the cursor undo stack bounded\n                    this._undoStack.shift();\n                }\n            }\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(CursorUndoRedoController.ID);\n    }\n    cursorUndo() {\n        if (!this._editor.hasModel() || this._undoStack.length === 0) {\n            return;\n        }\n        this._redoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._undoStack.pop());\n    }\n    cursorRedo() {\n        if (!this._editor.hasModel() || this._redoStack.length === 0) {\n            return;\n        }\n        this._undoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._redoStack.pop());\n    }\n    _applyState(stackElement) {\n        this._isCursorUndoRedo = true;\n        this._editor.setSelections(stackElement.cursorState.selections);\n        this._editor.setScrollPosition({\n            scrollTop: stackElement.scrollTop,\n            scrollLeft: stackElement.scrollLeft\n        });\n        this._isCursorUndoRedo = false;\n    }\n}\nCursorUndoRedoController.ID = 'editor.contrib.cursorUndoRedoController';\nexport class CursorUndo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorUndo',\n            label: nls.localize('cursor.undo', \"Cursor Undo\"),\n            alias: 'Cursor Undo',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* CtrlCmd */ | 51 /* KeyU */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorUndo();\n    }\n}\nexport class CursorRedo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorRedo',\n            label: nls.localize('cursor.redo', \"Cursor Redo\"),\n            alias: 'Cursor Redo',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorRedo();\n    }\n}\nregisterEditorContribution(CursorUndoRedoController.ID, CursorUndoRedoController);\nregisterEditorAction(CursorUndo);\nregisterEditorAction(CursorRedo);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { isMacintosh } from '../../../../base/common/platform.js';\nimport './dnd.css';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { DragAndDropCommand } from './dragAndDropCommand.js';\nfunction hasTriggerModifier(e) {\n    if (isMacintosh) {\n        return e.altKey;\n    }\n    else {\n        return e.ctrlKey;\n    }\n}\nexport class DragAndDropController extends Disposable {\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._register(this._editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n        this._register(this._editor.onMouseUp((e) => this._onEditorMouseUp(e)));\n        this._register(this._editor.onMouseDrag((e) => this._onEditorMouseDrag(e)));\n        this._register(this._editor.onMouseDrop((e) => this._onEditorMouseDrop(e)));\n        this._register(this._editor.onMouseDropCanceled(() => this._onEditorMouseDropCanceled()));\n        this._register(this._editor.onKeyDown((e) => this.onEditorKeyDown(e)));\n        this._register(this._editor.onKeyUp((e) => this.onEditorKeyUp(e)));\n        this._register(this._editor.onDidBlurEditorWidget(() => this.onEditorBlur()));\n        this._register(this._editor.onDidBlurEditorText(() => this.onEditorBlur()));\n        this._dndDecorationIds = [];\n        this._mouseDown = false;\n        this._modifierPressed = false;\n        this._dragSelection = null;\n    }\n    onEditorBlur() {\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n        this._modifierPressed = false;\n    }\n    onEditorKeyDown(e) {\n        if (!this._editor.getOption(31 /* dragAndDrop */) || this._editor.getOption(18 /* columnSelection */)) {\n            return;\n        }\n        if (hasTriggerModifier(e)) {\n            this._modifierPressed = true;\n        }\n        if (this._mouseDown && hasTriggerModifier(e)) {\n            this._editor.updateOptions({\n                mouseStyle: 'copy'\n            });\n        }\n    }\n    onEditorKeyUp(e) {\n        if (!this._editor.getOption(31 /* dragAndDrop */) || this._editor.getOption(18 /* columnSelection */)) {\n            return;\n        }\n        if (hasTriggerModifier(e)) {\n            this._modifierPressed = false;\n        }\n        if (this._mouseDown && e.keyCode === DragAndDropController.TRIGGER_KEY_VALUE) {\n            this._editor.updateOptions({\n                mouseStyle: 'default'\n            });\n        }\n    }\n    _onEditorMouseDown(mouseEvent) {\n        this._mouseDown = true;\n    }\n    _onEditorMouseUp(mouseEvent) {\n        this._mouseDown = false;\n        // Whenever users release the mouse, the drag and drop operation should finish and the cursor should revert to text.\n        this._editor.updateOptions({\n            mouseStyle: 'text'\n        });\n    }\n    _onEditorMouseDrag(mouseEvent) {\n        let target = mouseEvent.target;\n        if (this._dragSelection === null) {\n            const selections = this._editor.getSelections() || [];\n            let possibleSelections = selections.filter(selection => target.position && selection.containsPosition(target.position));\n            if (possibleSelections.length === 1) {\n                this._dragSelection = possibleSelections[0];\n            }\n            else {\n                return;\n            }\n        }\n        if (hasTriggerModifier(mouseEvent.event)) {\n            this._editor.updateOptions({\n                mouseStyle: 'copy'\n            });\n        }\n        else {\n            this._editor.updateOptions({\n                mouseStyle: 'default'\n            });\n        }\n        if (target.position) {\n            if (this._dragSelection.containsPosition(target.position)) {\n                this._removeDecoration();\n            }\n            else {\n                this.showAt(target.position);\n            }\n        }\n    }\n    _onEditorMouseDropCanceled() {\n        this._editor.updateOptions({\n            mouseStyle: 'text'\n        });\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n    }\n    _onEditorMouseDrop(mouseEvent) {\n        if (mouseEvent.target && (this._hitContent(mouseEvent.target) || this._hitMargin(mouseEvent.target)) && mouseEvent.target.position) {\n            let newCursorPosition = new Position(mouseEvent.target.position.lineNumber, mouseEvent.target.position.column);\n            if (this._dragSelection === null) {\n                let newSelections = null;\n                if (mouseEvent.event.shiftKey) {\n                    let primarySelection = this._editor.getSelection();\n                    if (primarySelection) {\n                        const { selectionStartLineNumber, selectionStartColumn } = primarySelection;\n                        newSelections = [new Selection(selectionStartLineNumber, selectionStartColumn, newCursorPosition.lineNumber, newCursorPosition.column)];\n                    }\n                }\n                else {\n                    newSelections = (this._editor.getSelections() || []).map(selection => {\n                        if (selection.containsPosition(newCursorPosition)) {\n                            return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n                        }\n                        else {\n                            return selection;\n                        }\n                    });\n                }\n                // Use `mouse` as the source instead of `api` and setting the reason to explicit (to behave like any other mouse operation).\n                this._editor.setSelections(newSelections || [], 'mouse', 3 /* Explicit */);\n            }\n            else if (!this._dragSelection.containsPosition(newCursorPosition) ||\n                ((hasTriggerModifier(mouseEvent.event) ||\n                    this._modifierPressed) && (this._dragSelection.getEndPosition().equals(newCursorPosition) || this._dragSelection.getStartPosition().equals(newCursorPosition)) // we allow users to paste content beside the selection\n                )) {\n                this._editor.pushUndoStop();\n                this._editor.executeCommand(DragAndDropController.ID, new DragAndDropCommand(this._dragSelection, newCursorPosition, hasTriggerModifier(mouseEvent.event) || this._modifierPressed));\n                this._editor.pushUndoStop();\n            }\n        }\n        this._editor.updateOptions({\n            mouseStyle: 'text'\n        });\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n    }\n    showAt(position) {\n        let newDecorations = [{\n                range: new Range(position.lineNumber, position.column, position.lineNumber, position.column),\n                options: DragAndDropController._DECORATION_OPTIONS\n            }];\n        this._dndDecorationIds = this._editor.deltaDecorations(this._dndDecorationIds, newDecorations);\n        this._editor.revealPosition(position, 1 /* Immediate */);\n    }\n    _removeDecoration() {\n        this._dndDecorationIds = this._editor.deltaDecorations(this._dndDecorationIds, []);\n    }\n    _hitContent(target) {\n        return target.type === 6 /* CONTENT_TEXT */ ||\n            target.type === 7 /* CONTENT_EMPTY */;\n    }\n    _hitMargin(target) {\n        return target.type === 2 /* GUTTER_GLYPH_MARGIN */ ||\n            target.type === 3 /* GUTTER_LINE_NUMBERS */ ||\n            target.type === 4 /* GUTTER_LINE_DECORATIONS */;\n    }\n    dispose() {\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n        this._modifierPressed = false;\n        super.dispose();\n    }\n}\nDragAndDropController.ID = 'editor.contrib.dragAndDrop';\nDragAndDropController.TRIGGER_KEY_VALUE = isMacintosh ? 6 /* Alt */ : 5 /* Ctrl */;\nDragAndDropController._DECORATION_OPTIONS = ModelDecorationOptions.register({\n    description: 'dnd-target',\n    className: 'dnd-target'\n});\nregisterEditorContribution(DragAndDropController.ID, DragAndDropController);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class DragAndDropCommand {\n    constructor(selection, targetPosition, copy) {\n        this.selection = selection;\n        this.targetPosition = targetPosition;\n        this.copy = copy;\n        this.targetSelection = null;\n    }\n    getEditOperations(model, builder) {\n        let text = model.getValueInRange(this.selection);\n        if (!this.copy) {\n            builder.addEditOperation(this.selection, null);\n        }\n        builder.addEditOperation(new Range(this.targetPosition.lineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.targetPosition.column), text);\n        if (this.selection.containsPosition(this.targetPosition) && !(this.copy && (this.selection.getEndPosition().equals(this.targetPosition) || this.selection.getStartPosition().equals(this.targetPosition)) // we allow users to paste content beside the selection\n        )) {\n            this.targetSelection = this.selection;\n            return;\n        }\n        if (this.copy) {\n            this.targetSelection = new Selection(this.targetPosition.lineNumber, this.targetPosition.column, this.selection.endLineNumber - this.selection.startLineNumber + this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\n                this.selection.endColumn);\n            return;\n        }\n        if (this.targetPosition.lineNumber > this.selection.endLineNumber) {\n            // Drag the selection downwards\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\n                this.selection.endColumn);\n            return;\n        }\n        if (this.targetPosition.lineNumber < this.selection.endLineNumber) {\n            // Drag the selection upwards\n            this.targetSelection = new Selection(this.targetPosition.lineNumber, this.targetPosition.column, this.targetPosition.lineNumber + this.selection.endLineNumber - this.selection.startLineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\n                this.selection.endColumn);\n            return;\n        }\n        // The target position is at the same line as the selection's end position.\n        if (this.selection.endColumn <= this.targetPosition.column) {\n            // The target position is after the selection's end position\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column - this.selection.endColumn + this.selection.startColumn :\n                this.targetPosition.column - this.selection.endColumn + this.selection.startColumn, this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column :\n                this.selection.endColumn);\n        }\n        else {\n            // The target position is before the selection's end position. Since the selection doesn't contain the target position, the selection is one-line and target position is before this selection.\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.targetPosition.column + this.selection.endColumn - this.selection.startColumn);\n        }\n    }\n    computeCursorState(model, helper) {\n        return this.targetSelection;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Delayer } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand, MultiEditorAction, registerEditorAction, registerEditorCommand, registerEditorContribution, registerMultiEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_FIND_WIDGET_VISIBLE, CONTEXT_REPLACE_INPUT_FOCUSED, FindModelBoundToEditorModel, FIND_IDS, ToggleCaseSensitiveKeybinding, TogglePreserveCaseKeybinding, ToggleRegexKeybinding, ToggleSearchScopeKeybinding, ToggleWholeWordKeybinding } from './findModel.js';\nimport { FindOptionsWidget } from './findOptionsWidget.js';\nimport { FindReplaceState } from './findState.js';\nimport { FindWidget } from './findWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nconst SEARCH_STRING_MAX_LENGTH = 524288;\nexport function getSelectionSearchString(editor, seedSearchStringFromSelection = 'single', seedSearchStringFromNonEmptySelection = false) {\n    if (!editor.hasModel()) {\n        return null;\n    }\n    const selection = editor.getSelection();\n    // if selection spans multiple lines, default search string to empty\n    if ((seedSearchStringFromSelection === 'single' && selection.startLineNumber === selection.endLineNumber)\n        || seedSearchStringFromSelection === 'multiple') {\n        if (selection.isEmpty()) {\n            const wordAtPosition = editor.getConfiguredWordAtPosition(selection.getStartPosition());\n            if (wordAtPosition && (false === seedSearchStringFromNonEmptySelection)) {\n                return wordAtPosition.word;\n            }\n        }\n        else {\n            if (editor.getModel().getValueLengthInRange(selection) < SEARCH_STRING_MAX_LENGTH) {\n                return editor.getModel().getValueInRange(selection);\n            }\n        }\n    }\n    return null;\n}\nlet CommonFindController = class CommonFindController extends Disposable {\n    constructor(editor, contextKeyService, storageService, clipboardService) {\n        super();\n        this._editor = editor;\n        this._findWidgetVisible = CONTEXT_FIND_WIDGET_VISIBLE.bindTo(contextKeyService);\n        this._contextKeyService = contextKeyService;\n        this._storageService = storageService;\n        this._clipboardService = clipboardService;\n        this._updateHistoryDelayer = new Delayer(500);\n        this._state = this._register(new FindReplaceState());\n        this.loadQueryState();\n        this._register(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this._model = null;\n        this._register(this._editor.onDidChangeModel(() => {\n            let shouldRestartFind = (this._editor.getModel() && this._state.isRevealed);\n            this.disposeModel();\n            this._state.change({\n                searchScope: null,\n                matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* WORKSPACE */, false),\n                wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* WORKSPACE */, false),\n                isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* WORKSPACE */, false),\n                preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* WORKSPACE */, false)\n            }, false);\n            if (shouldRestartFind) {\n                this._start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: 'none',\n                    seedSearchStringFromNonEmptySelection: false,\n                    seedSearchStringFromGlobalClipboard: false,\n                    shouldFocus: 0 /* NoFocusChange */,\n                    shouldAnimate: false,\n                    updateSearchScope: false,\n                    loop: this._editor.getOption(35 /* find */).loop\n                });\n            }\n        }));\n    }\n    get editor() {\n        return this._editor;\n    }\n    static get(editor) {\n        return editor.getContribution(CommonFindController.ID);\n    }\n    dispose() {\n        this.disposeModel();\n        super.dispose();\n    }\n    disposeModel() {\n        if (this._model) {\n            this._model.dispose();\n            this._model = null;\n        }\n    }\n    _onStateChanged(e) {\n        this.saveQueryState(e);\n        if (e.isRevealed) {\n            if (this._state.isRevealed) {\n                this._findWidgetVisible.set(true);\n            }\n            else {\n                this._findWidgetVisible.reset();\n                this.disposeModel();\n            }\n        }\n        if (e.searchString) {\n            this.setGlobalBufferTerm(this._state.searchString);\n        }\n    }\n    saveQueryState(e) {\n        if (e.isRegex) {\n            this._storageService.store('editor.isRegex', this._state.actualIsRegex, 1 /* WORKSPACE */, 0 /* USER */);\n        }\n        if (e.wholeWord) {\n            this._storageService.store('editor.wholeWord', this._state.actualWholeWord, 1 /* WORKSPACE */, 0 /* USER */);\n        }\n        if (e.matchCase) {\n            this._storageService.store('editor.matchCase', this._state.actualMatchCase, 1 /* WORKSPACE */, 0 /* USER */);\n        }\n        if (e.preserveCase) {\n            this._storageService.store('editor.preserveCase', this._state.actualPreserveCase, 1 /* WORKSPACE */, 0 /* USER */);\n        }\n    }\n    loadQueryState() {\n        this._state.change({\n            matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* WORKSPACE */, this._state.matchCase),\n            wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* WORKSPACE */, this._state.wholeWord),\n            isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* WORKSPACE */, this._state.isRegex),\n            preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* WORKSPACE */, this._state.preserveCase)\n        }, false);\n    }\n    isFindInputFocused() {\n        return !!CONTEXT_FIND_INPUT_FOCUSED.getValue(this._contextKeyService);\n    }\n    getState() {\n        return this._state;\n    }\n    closeFindWidget() {\n        this._state.change({\n            isRevealed: false,\n            searchScope: null\n        }, false);\n        this._editor.focus();\n    }\n    toggleCaseSensitive() {\n        this._state.change({ matchCase: !this._state.matchCase }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    toggleWholeWords() {\n        this._state.change({ wholeWord: !this._state.wholeWord }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    toggleRegex() {\n        this._state.change({ isRegex: !this._state.isRegex }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    togglePreserveCase() {\n        this._state.change({ preserveCase: !this._state.preserveCase }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    toggleSearchScope() {\n        if (this._state.searchScope) {\n            this._state.change({ searchScope: null }, true);\n        }\n        else {\n            if (this._editor.hasModel()) {\n                let selections = this._editor.getSelections();\n                selections.map(selection => {\n                    if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                        selection = selection.setEndPosition(selection.endLineNumber - 1, this._editor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                    }\n                    if (!selection.isEmpty()) {\n                        return selection;\n                    }\n                    return null;\n                }).filter(element => !!element);\n                if (selections.length) {\n                    this._state.change({ searchScope: selections }, true);\n                }\n            }\n        }\n    }\n    setSearchString(searchString) {\n        if (this._state.isRegex) {\n            searchString = strings.escapeRegExpCharacters(searchString);\n        }\n        this._state.change({ searchString: searchString }, false);\n    }\n    highlightFindOptions(ignoreWhenVisible = false) {\n        // overwritten in subclass\n    }\n    _start(opts, newState) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.disposeModel();\n            if (!this._editor.hasModel()) {\n                // cannot do anything with an editor that doesn't have a model...\n                return;\n            }\n            let stateChanges = Object.assign(Object.assign({}, newState), { isRevealed: true });\n            if (opts.seedSearchStringFromSelection === 'single') {\n                let selectionSearchString = getSelectionSearchString(this._editor, opts.seedSearchStringFromSelection, opts.seedSearchStringFromNonEmptySelection);\n                if (selectionSearchString) {\n                    if (this._state.isRegex) {\n                        stateChanges.searchString = strings.escapeRegExpCharacters(selectionSearchString);\n                    }\n                    else {\n                        stateChanges.searchString = selectionSearchString;\n                    }\n                }\n            }\n            else if (opts.seedSearchStringFromSelection === 'multiple' && !opts.updateSearchScope) {\n                let selectionSearchString = getSelectionSearchString(this._editor, opts.seedSearchStringFromSelection);\n                if (selectionSearchString) {\n                    stateChanges.searchString = selectionSearchString;\n                }\n            }\n            if (!stateChanges.searchString && opts.seedSearchStringFromGlobalClipboard) {\n                let selectionSearchString = yield this.getGlobalBufferTerm();\n                if (!this._editor.hasModel()) {\n                    // the editor has lost its model in the meantime\n                    return;\n                }\n                if (selectionSearchString) {\n                    stateChanges.searchString = selectionSearchString;\n                }\n            }\n            // Overwrite isReplaceRevealed\n            if (opts.forceRevealReplace || stateChanges.isReplaceRevealed) {\n                stateChanges.isReplaceRevealed = true;\n            }\n            else if (!this._findWidgetVisible.get()) {\n                stateChanges.isReplaceRevealed = false;\n            }\n            if (opts.updateSearchScope) {\n                let currentSelections = this._editor.getSelections();\n                if (currentSelections.some(selection => !selection.isEmpty())) {\n                    stateChanges.searchScope = currentSelections;\n                }\n            }\n            stateChanges.loop = opts.loop;\n            this._state.change(stateChanges, false);\n            if (!this._model) {\n                this._model = new FindModelBoundToEditorModel(this._editor, this._state);\n            }\n        });\n    }\n    start(opts, newState) {\n        return this._start(opts, newState);\n    }\n    moveToNextMatch() {\n        if (this._model) {\n            this._model.moveToNextMatch();\n            return true;\n        }\n        return false;\n    }\n    moveToPrevMatch() {\n        if (this._model) {\n            this._model.moveToPrevMatch();\n            return true;\n        }\n        return false;\n    }\n    replace() {\n        if (this._model) {\n            this._model.replace();\n            return true;\n        }\n        return false;\n    }\n    replaceAll() {\n        if (this._model) {\n            this._model.replaceAll();\n            return true;\n        }\n        return false;\n    }\n    selectAllMatches() {\n        if (this._model) {\n            this._model.selectAllMatches();\n            this._editor.focus();\n            return true;\n        }\n        return false;\n    }\n    getGlobalBufferTerm() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.getOption(35 /* find */).globalFindClipboard\n                && this._editor.hasModel()\n                && !this._editor.getModel().isTooLargeForSyncing()) {\n                return this._clipboardService.readFindText();\n            }\n            return '';\n        });\n    }\n    setGlobalBufferTerm(text) {\n        if (this._editor.getOption(35 /* find */).globalFindClipboard\n            && this._editor.hasModel()\n            && !this._editor.getModel().isTooLargeForSyncing()) {\n            // intentionally not awaited\n            this._clipboardService.writeFindText(text);\n        }\n    }\n};\nCommonFindController.ID = 'editor.contrib.findController';\nCommonFindController = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IStorageService),\n    __param(3, IClipboardService)\n], CommonFindController);\nexport { CommonFindController };\nlet FindController = class FindController extends CommonFindController {\n    constructor(editor, _contextViewService, _contextKeyService, _keybindingService, _themeService, _notificationService, _storageService, clipboardService) {\n        super(editor, _contextKeyService, _storageService, clipboardService);\n        this._contextViewService = _contextViewService;\n        this._keybindingService = _keybindingService;\n        this._themeService = _themeService;\n        this._notificationService = _notificationService;\n        this._widget = null;\n        this._findOptionsWidget = null;\n    }\n    _start(opts, newState) {\n        const _super = Object.create(null, {\n            _start: { get: () => super._start }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._widget) {\n                this._createFindWidget();\n            }\n            const selection = this._editor.getSelection();\n            let updateSearchScope = false;\n            switch (this._editor.getOption(35 /* find */).autoFindInSelection) {\n                case 'always':\n                    updateSearchScope = true;\n                    break;\n                case 'never':\n                    updateSearchScope = false;\n                    break;\n                case 'multiline': {\n                    const isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n                    updateSearchScope = isSelectionMultipleLine;\n                    break;\n                }\n                default:\n                    break;\n            }\n            opts.updateSearchScope = opts.updateSearchScope || updateSearchScope;\n            yield _super._start.call(this, opts, newState);\n            if (this._widget) {\n                if (opts.shouldFocus === 2 /* FocusReplaceInput */) {\n                    this._widget.focusReplaceInput();\n                }\n                else if (opts.shouldFocus === 1 /* FocusFindInput */) {\n                    this._widget.focusFindInput();\n                }\n            }\n        });\n    }\n    highlightFindOptions(ignoreWhenVisible = false) {\n        if (!this._widget) {\n            this._createFindWidget();\n        }\n        if (this._state.isRevealed && !ignoreWhenVisible) {\n            this._widget.highlightFindOptions();\n        }\n        else {\n            this._findOptionsWidget.highlightFindOptions();\n        }\n    }\n    _createFindWidget() {\n        this._widget = this._register(new FindWidget(this._editor, this, this._state, this._contextViewService, this._keybindingService, this._contextKeyService, this._themeService, this._storageService, this._notificationService));\n        this._findOptionsWidget = this._register(new FindOptionsWidget(this._editor, this._state, this._keybindingService, this._themeService));\n    }\n};\nFindController = __decorate([\n    __param(1, IContextViewService),\n    __param(2, IContextKeyService),\n    __param(3, IKeybindingService),\n    __param(4, IThemeService),\n    __param(5, INotificationService),\n    __param(6, IStorageService),\n    __param(7, IClipboardService)\n], FindController);\nexport { FindController };\nexport const StartFindAction = registerMultiEditorAction(new MultiEditorAction({\n    id: FIND_IDS.StartFindAction,\n    label: nls.localize('startFindAction', \"Find\"),\n    alias: 'Find',\n    precondition: ContextKeyExpr.or(EditorContextKeys.focus, ContextKeyExpr.has('editorIsOpen')),\n    kbOpts: {\n        kbExpr: null,\n        primary: 2048 /* CtrlCmd */ | 36 /* KeyF */,\n        weight: 100 /* EditorContrib */\n    },\n    menuOpts: {\n        menuId: MenuId.MenubarEditMenu,\n        group: '3_find',\n        title: nls.localize({ key: 'miFind', comment: ['&& denotes a mnemonic'] }, \"&&Find\"),\n        order: 1\n    }\n}));\nStartFindAction.addImplementation(0, (accessor, editor, args) => {\n    const controller = CommonFindController.get(editor);\n    if (!controller) {\n        return false;\n    }\n    return controller.start({\n        forceRevealReplace: false,\n        seedSearchStringFromSelection: editor.getOption(35 /* find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n        seedSearchStringFromNonEmptySelection: editor.getOption(35 /* find */).seedSearchStringFromSelection === 'selection',\n        seedSearchStringFromGlobalClipboard: editor.getOption(35 /* find */).globalFindClipboard,\n        shouldFocus: 1 /* FocusFindInput */,\n        shouldAnimate: true,\n        updateSearchScope: false,\n        loop: editor.getOption(35 /* find */).loop\n    });\n});\nconst findArgDescription = {\n    description: 'Open a new In-Editor Find Widget.',\n    args: [{\n            name: 'Open a new In-Editor Find Widget args',\n            schema: {\n                properties: {\n                    searchString: { type: 'string' },\n                    replaceString: { type: 'string' },\n                    regex: { type: 'boolean' },\n                    regexOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.isRegexOverride', 'Overrides \"Use Regular Expression\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    wholeWord: { type: 'boolean' },\n                    wholeWordOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.wholeWordOverride', 'Overrides \"Match Whole Word\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    matchCase: { type: 'boolean' },\n                    matchCaseOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.matchCaseOverride', 'Overrides \"Math Case\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    preserveCase: { type: 'boolean' },\n                    preserveCaseOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.preserveCaseOverride', 'Overrides \"Preserve Case\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    findInSelection: { type: 'boolean' },\n                }\n            }\n        }]\n};\nexport class StartFindWithArgsAction extends EditorAction {\n    constructor() {\n        super({\n            id: FIND_IDS.StartFindWithArgs,\n            label: nls.localize('startFindWithArgsAction', \"Find With Arguments\"),\n            alias: 'Find With Arguments',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: null,\n                primary: 0,\n                weight: 100 /* EditorContrib */\n            },\n            description: findArgDescription\n        });\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (controller) {\n                const newState = args ? {\n                    searchString: args.searchString,\n                    replaceString: args.replaceString,\n                    isReplaceRevealed: args.replaceString !== undefined,\n                    isRegex: args.isRegex,\n                    // isRegexOverride: args.regexOverride,\n                    wholeWord: args.matchWholeWord,\n                    // wholeWordOverride: args.wholeWordOverride,\n                    matchCase: args.isCaseSensitive,\n                    // matchCaseOverride: args.matchCaseOverride,\n                    preserveCase: args.preserveCase,\n                    // preserveCaseOverride: args.preserveCaseOverride,\n                } : {};\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(35 /* find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n                    seedSearchStringFromNonEmptySelection: editor.getOption(35 /* find */).seedSearchStringFromSelection === 'selection',\n                    seedSearchStringFromGlobalClipboard: true,\n                    shouldFocus: 1 /* FocusFindInput */,\n                    shouldAnimate: true,\n                    updateSearchScope: (args === null || args === void 0 ? void 0 : args.findInSelection) || false,\n                    loop: editor.getOption(35 /* find */).loop\n                }, newState);\n                controller.setGlobalBufferTerm(controller.getState().searchString);\n            }\n        });\n    }\n}\nexport class StartFindWithSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: FIND_IDS.StartFindWithSelection,\n            label: nls.localize('startFindWithSelectionAction', \"Find With Selection\"),\n            alias: 'Find With Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: null,\n                primary: 0,\n                mac: {\n                    primary: 2048 /* CtrlCmd */ | 35 /* KeyE */,\n                },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (controller) {\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: 'multiple',\n                    seedSearchStringFromNonEmptySelection: false,\n                    seedSearchStringFromGlobalClipboard: false,\n                    shouldFocus: 0 /* NoFocusChange */,\n                    shouldAnimate: true,\n                    updateSearchScope: false,\n                    loop: editor.getOption(35 /* find */).loop\n                });\n                controller.setGlobalBufferTerm(controller.getState().searchString);\n            }\n        });\n    }\n}\nexport class MatchFindAction extends EditorAction {\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (controller && !this._run(controller)) {\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(35 /* find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n                    seedSearchStringFromNonEmptySelection: editor.getOption(35 /* find */).seedSearchStringFromSelection === 'selection',\n                    seedSearchStringFromGlobalClipboard: true,\n                    shouldFocus: 0 /* NoFocusChange */,\n                    shouldAnimate: true,\n                    updateSearchScope: false,\n                    loop: editor.getOption(35 /* find */).loop\n                });\n                this._run(controller);\n            }\n        });\n    }\n}\nexport class NextMatchFindAction extends MatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.NextMatchFindAction,\n            label: nls.localize('findNextMatchAction', \"Find Next\"),\n            alias: 'Find Next',\n            precondition: undefined,\n            kbOpts: [{\n                    kbExpr: EditorContextKeys.focus,\n                    primary: 61 /* F3 */,\n                    mac: { primary: 2048 /* CtrlCmd */ | 37 /* KeyG */, secondary: [61 /* F3 */] },\n                    weight: 100 /* EditorContrib */\n                }, {\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\n                    primary: 3 /* Enter */,\n                    weight: 100 /* EditorContrib */\n                }]\n        });\n    }\n    _run(controller) {\n        const result = controller.moveToNextMatch();\n        if (result) {\n            controller.editor.pushUndoStop();\n            return true;\n        }\n        return false;\n    }\n}\nexport class PreviousMatchFindAction extends MatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.PreviousMatchFindAction,\n            label: nls.localize('findPreviousMatchAction', \"Find Previous\"),\n            alias: 'Find Previous',\n            precondition: undefined,\n            kbOpts: [{\n                    kbExpr: EditorContextKeys.focus,\n                    primary: 1024 /* Shift */ | 61 /* F3 */,\n                    mac: { primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 37 /* KeyG */, secondary: [1024 /* Shift */ | 61 /* F3 */] },\n                    weight: 100 /* EditorContrib */\n                }, {\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\n                    primary: 1024 /* Shift */ | 3 /* Enter */,\n                    weight: 100 /* EditorContrib */\n                }\n            ]\n        });\n    }\n    _run(controller) {\n        return controller.moveToPrevMatch();\n    }\n}\nexport class SelectionMatchFindAction extends EditorAction {\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (!controller) {\n                return;\n            }\n            const seedSearchStringFromNonEmptySelection = editor.getOption(35 /* find */).seedSearchStringFromSelection === 'selection';\n            let selectionSearchString = null;\n            if (editor.getOption(35 /* find */).seedSearchStringFromSelection !== 'never') {\n                selectionSearchString = getSelectionSearchString(editor, 'single', seedSearchStringFromNonEmptySelection);\n            }\n            if (selectionSearchString) {\n                controller.setSearchString(selectionSearchString);\n            }\n            if (!this._run(controller)) {\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: editor.getOption(35 /* find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n                    seedSearchStringFromNonEmptySelection: seedSearchStringFromNonEmptySelection,\n                    seedSearchStringFromGlobalClipboard: false,\n                    shouldFocus: 0 /* NoFocusChange */,\n                    shouldAnimate: true,\n                    updateSearchScope: false,\n                    loop: editor.getOption(35 /* find */).loop\n                });\n                this._run(controller);\n            }\n        });\n    }\n}\nexport class NextSelectionMatchFindAction extends SelectionMatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.NextSelectionMatchFindAction,\n            label: nls.localize('nextSelectionMatchFindAction', \"Find Next Selection\"),\n            alias: 'Find Next Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* CtrlCmd */ | 61 /* F3 */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    _run(controller) {\n        return controller.moveToNextMatch();\n    }\n}\nexport class PreviousSelectionMatchFindAction extends SelectionMatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.PreviousSelectionMatchFindAction,\n            label: nls.localize('previousSelectionMatchFindAction', \"Find Previous Selection\"),\n            alias: 'Find Previous Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 61 /* F3 */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    _run(controller) {\n        return controller.moveToPrevMatch();\n    }\n}\nexport const StartFindReplaceAction = registerMultiEditorAction(new MultiEditorAction({\n    id: FIND_IDS.StartFindReplaceAction,\n    label: nls.localize('startReplace', \"Replace\"),\n    alias: 'Replace',\n    precondition: ContextKeyExpr.or(EditorContextKeys.focus, ContextKeyExpr.has('editorIsOpen')),\n    kbOpts: {\n        kbExpr: null,\n        primary: 2048 /* CtrlCmd */ | 38 /* KeyH */,\n        mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 36 /* KeyF */ },\n        weight: 100 /* EditorContrib */\n    },\n    menuOpts: {\n        menuId: MenuId.MenubarEditMenu,\n        group: '3_find',\n        title: nls.localize({ key: 'miReplace', comment: ['&& denotes a mnemonic'] }, \"&&Replace\"),\n        order: 2\n    }\n}));\nStartFindReplaceAction.addImplementation(0, (accessor, editor, args) => {\n    if (!editor.hasModel() || editor.getOption(81 /* readOnly */)) {\n        return false;\n    }\n    const controller = CommonFindController.get(editor);\n    if (!controller) {\n        return false;\n    }\n    const currentSelection = editor.getSelection();\n    const findInputFocused = controller.isFindInputFocused();\n    // we only seed search string from selection when the current selection is single line and not empty,\n    // + the find input is not focused\n    const seedSearchStringFromSelection = !currentSelection.isEmpty()\n        && currentSelection.startLineNumber === currentSelection.endLineNumber\n        && (editor.getOption(35 /* find */).seedSearchStringFromSelection !== 'never')\n        && !findInputFocused;\n    /*\n    * if the existing search string in find widget is empty and we don't seed search string from selection, it means the Find Input is still empty, so we should focus the Find Input instead of Replace Input.\n\n    * findInputFocused true -> seedSearchStringFromSelection false, FocusReplaceInput\n    * findInputFocused false, seedSearchStringFromSelection true FocusReplaceInput\n    * findInputFocused false seedSearchStringFromSelection false FocusFindInput\n    */\n    const shouldFocus = (findInputFocused || seedSearchStringFromSelection) ?\n        2 /* FocusReplaceInput */ : 1 /* FocusFindInput */;\n    return controller.start({\n        forceRevealReplace: true,\n        seedSearchStringFromSelection: seedSearchStringFromSelection ? 'single' : 'none',\n        seedSearchStringFromNonEmptySelection: editor.getOption(35 /* find */).seedSearchStringFromSelection === 'selection',\n        seedSearchStringFromGlobalClipboard: editor.getOption(35 /* find */).seedSearchStringFromSelection !== 'never',\n        shouldFocus: shouldFocus,\n        shouldAnimate: true,\n        updateSearchScope: false,\n        loop: editor.getOption(35 /* find */).loop\n    });\n});\nregisterEditorContribution(CommonFindController.ID, FindController);\nregisterEditorAction(StartFindWithArgsAction);\nregisterEditorAction(StartFindWithSelectionAction);\nregisterEditorAction(NextMatchFindAction);\nregisterEditorAction(PreviousMatchFindAction);\nregisterEditorAction(NextSelectionMatchFindAction);\nregisterEditorAction(PreviousSelectionMatchFindAction);\nconst FindCommand = EditorCommand.bindToContribution(CommonFindController.get);\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.CloseFindWidgetCommand,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.closeFindWidget(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 5,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n        primary: 9 /* Escape */,\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleCaseSensitiveCommand,\n    precondition: undefined,\n    handler: x => x.toggleCaseSensitive(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleCaseSensitiveKeybinding.primary,\n        mac: ToggleCaseSensitiveKeybinding.mac,\n        win: ToggleCaseSensitiveKeybinding.win,\n        linux: ToggleCaseSensitiveKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleWholeWordCommand,\n    precondition: undefined,\n    handler: x => x.toggleWholeWords(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleWholeWordKeybinding.primary,\n        mac: ToggleWholeWordKeybinding.mac,\n        win: ToggleWholeWordKeybinding.win,\n        linux: ToggleWholeWordKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleRegexCommand,\n    precondition: undefined,\n    handler: x => x.toggleRegex(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleRegexKeybinding.primary,\n        mac: ToggleRegexKeybinding.mac,\n        win: ToggleRegexKeybinding.win,\n        linux: ToggleRegexKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleSearchScopeCommand,\n    precondition: undefined,\n    handler: x => x.toggleSearchScope(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleSearchScopeKeybinding.primary,\n        mac: ToggleSearchScopeKeybinding.mac,\n        win: ToggleSearchScopeKeybinding.win,\n        linux: ToggleSearchScopeKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.TogglePreserveCaseCommand,\n    precondition: undefined,\n    handler: x => x.togglePreserveCase(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: TogglePreserveCaseKeybinding.primary,\n        mac: TogglePreserveCaseKeybinding.mac,\n        win: TogglePreserveCaseKeybinding.win,\n        linux: TogglePreserveCaseKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceOneAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replace(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 22 /* Digit1 */\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceOneAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replace(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 5,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\n        primary: 3 /* Enter */\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceAllAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replaceAll(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 3 /* Enter */\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceAllAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replaceAll(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 5,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\n        primary: undefined,\n        mac: {\n            primary: 2048 /* CtrlCmd */ | 3 /* Enter */,\n        }\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.SelectAllMatchesAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.selectAllMatches(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: 512 /* Alt */ | 3 /* Enter */\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findFirstInSorted } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler, TimeoutTimer } from '../../../../base/common/async.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection } from '../../../common/commands/replaceCommand.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { SearchParams } from '../../../common/model/textModelSearch.js';\nimport { FindDecorations } from './findDecorations.js';\nimport { ReplaceAllCommand } from './replaceAllCommand.js';\nimport { parseReplaceString, ReplacePattern } from './replacePattern.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const CONTEXT_FIND_WIDGET_VISIBLE = new RawContextKey('findWidgetVisible', false);\nexport const CONTEXT_FIND_WIDGET_NOT_VISIBLE = CONTEXT_FIND_WIDGET_VISIBLE.toNegated();\n// Keep ContextKey use of 'Focussed' to not break when clauses\nexport const CONTEXT_FIND_INPUT_FOCUSED = new RawContextKey('findInputFocussed', false);\nexport const CONTEXT_REPLACE_INPUT_FOCUSED = new RawContextKey('replaceInputFocussed', false);\nexport const ToggleCaseSensitiveKeybinding = {\n    primary: 512 /* Alt */ | 33 /* KeyC */,\n    mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 33 /* KeyC */ }\n};\nexport const ToggleWholeWordKeybinding = {\n    primary: 512 /* Alt */ | 53 /* KeyW */,\n    mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 53 /* KeyW */ }\n};\nexport const ToggleRegexKeybinding = {\n    primary: 512 /* Alt */ | 48 /* KeyR */,\n    mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 48 /* KeyR */ }\n};\nexport const ToggleSearchScopeKeybinding = {\n    primary: 512 /* Alt */ | 42 /* KeyL */,\n    mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 42 /* KeyL */ }\n};\nexport const TogglePreserveCaseKeybinding = {\n    primary: 512 /* Alt */ | 46 /* KeyP */,\n    mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 46 /* KeyP */ }\n};\nexport const FIND_IDS = {\n    StartFindAction: 'actions.find',\n    StartFindWithSelection: 'actions.findWithSelection',\n    StartFindWithArgs: 'editor.actions.findWithArgs',\n    NextMatchFindAction: 'editor.action.nextMatchFindAction',\n    PreviousMatchFindAction: 'editor.action.previousMatchFindAction',\n    NextSelectionMatchFindAction: 'editor.action.nextSelectionMatchFindAction',\n    PreviousSelectionMatchFindAction: 'editor.action.previousSelectionMatchFindAction',\n    StartFindReplaceAction: 'editor.action.startFindReplaceAction',\n    CloseFindWidgetCommand: 'closeFindWidget',\n    ToggleCaseSensitiveCommand: 'toggleFindCaseSensitive',\n    ToggleWholeWordCommand: 'toggleFindWholeWord',\n    ToggleRegexCommand: 'toggleFindRegex',\n    ToggleSearchScopeCommand: 'toggleFindInSelection',\n    TogglePreserveCaseCommand: 'togglePreserveCase',\n    ReplaceOneAction: 'editor.action.replaceOne',\n    ReplaceAllAction: 'editor.action.replaceAll',\n    SelectAllMatchesAction: 'editor.action.selectAllMatches'\n};\nexport const MATCHES_LIMIT = 19999;\nconst RESEARCH_DELAY = 240;\nexport class FindModelBoundToEditorModel {\n    constructor(editor, state) {\n        this._toDispose = new DisposableStore();\n        this._editor = editor;\n        this._state = state;\n        this._isDisposed = false;\n        this._startSearchingTimer = new TimeoutTimer();\n        this._decorations = new FindDecorations(editor);\n        this._toDispose.add(this._decorations);\n        this._updateDecorationsScheduler = new RunOnceScheduler(() => this.research(false), 100);\n        this._toDispose.add(this._updateDecorationsScheduler);\n        this._toDispose.add(this._editor.onDidChangeCursorPosition((e) => {\n            if (e.reason === 3 /* Explicit */\n                || e.reason === 5 /* Undo */\n                || e.reason === 6 /* Redo */) {\n                this._decorations.setStartPosition(this._editor.getPosition());\n            }\n        }));\n        this._ignoreModelContentChanged = false;\n        this._toDispose.add(this._editor.onDidChangeModelContent((e) => {\n            if (this._ignoreModelContentChanged) {\n                return;\n            }\n            if (e.isFlush) {\n                // a model.setValue() was called\n                this._decorations.reset();\n            }\n            this._decorations.setStartPosition(this._editor.getPosition());\n            this._updateDecorationsScheduler.schedule();\n        }));\n        this._toDispose.add(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this.research(false, this._state.searchScope);\n    }\n    dispose() {\n        this._isDisposed = true;\n        dispose(this._startSearchingTimer);\n        this._toDispose.dispose();\n    }\n    _onStateChanged(e) {\n        if (this._isDisposed) {\n            // The find model is disposed during a find state changed event\n            return;\n        }\n        if (!this._editor.hasModel()) {\n            // The find model will be disposed momentarily\n            return;\n        }\n        if (e.searchString || e.isReplaceRevealed || e.isRegex || e.wholeWord || e.matchCase || e.searchScope) {\n            let model = this._editor.getModel();\n            if (model.isTooLargeForSyncing()) {\n                this._startSearchingTimer.cancel();\n                this._startSearchingTimer.setIfNotSet(() => {\n                    if (e.searchScope) {\n                        this.research(e.moveCursor, this._state.searchScope);\n                    }\n                    else {\n                        this.research(e.moveCursor);\n                    }\n                }, RESEARCH_DELAY);\n            }\n            else {\n                if (e.searchScope) {\n                    this.research(e.moveCursor, this._state.searchScope);\n                }\n                else {\n                    this.research(e.moveCursor);\n                }\n            }\n        }\n    }\n    static _getSearchRange(model, findScope) {\n        // If we have set now or before a find scope, use it for computing the search range\n        if (findScope) {\n            return findScope;\n        }\n        return model.getFullModelRange();\n    }\n    research(moveCursor, newFindScope) {\n        let findScopes = null;\n        if (typeof newFindScope !== 'undefined') {\n            if (newFindScope !== null) {\n                if (!Array.isArray(newFindScope)) {\n                    findScopes = [newFindScope];\n                }\n                else {\n                    findScopes = newFindScope;\n                }\n            }\n        }\n        else {\n            findScopes = this._decorations.getFindScopes();\n        }\n        if (findScopes !== null) {\n            findScopes = findScopes.map(findScope => {\n                if (findScope.startLineNumber !== findScope.endLineNumber) {\n                    let endLineNumber = findScope.endLineNumber;\n                    if (findScope.endColumn === 1) {\n                        endLineNumber = endLineNumber - 1;\n                    }\n                    return new Range(findScope.startLineNumber, 1, endLineNumber, this._editor.getModel().getLineMaxColumn(endLineNumber));\n                }\n                return findScope;\n            });\n        }\n        let findMatches = this._findMatches(findScopes, false, MATCHES_LIMIT);\n        this._decorations.set(findMatches, findScopes);\n        const editorSelection = this._editor.getSelection();\n        let currentMatchesPosition = this._decorations.getCurrentMatchesPosition(editorSelection);\n        if (currentMatchesPosition === 0 && findMatches.length > 0) {\n            // current selection is not on top of a match\n            // try to find its nearest result from the top of the document\n            const matchAfterSelection = findFirstInSorted(findMatches.map(match => match.range), range => Range.compareRangesUsingStarts(range, editorSelection) >= 0);\n            currentMatchesPosition = matchAfterSelection > 0 ? matchAfterSelection - 1 + 1 /** match position is one based */ : currentMatchesPosition;\n        }\n        this._state.changeMatchInfo(currentMatchesPosition, this._decorations.getCount(), undefined);\n        if (moveCursor && this._editor.getOption(35 /* find */).cursorMoveOnType) {\n            this._moveToNextMatch(this._decorations.getStartPosition());\n        }\n    }\n    _hasMatches() {\n        return (this._state.matchesCount > 0);\n    }\n    _cannotFind() {\n        if (!this._hasMatches()) {\n            let findScope = this._decorations.getFindScope();\n            if (findScope) {\n                // Reveal the selection so user is reminded that 'selection find' is on.\n                this._editor.revealRangeInCenterIfOutsideViewport(findScope, 0 /* Smooth */);\n            }\n            return true;\n        }\n        return false;\n    }\n    _setCurrentFindMatch(match) {\n        let matchesPosition = this._decorations.setCurrentFindMatch(match);\n        this._state.changeMatchInfo(matchesPosition, this._decorations.getCount(), match);\n        this._editor.setSelection(match);\n        this._editor.revealRangeInCenterIfOutsideViewport(match, 0 /* Smooth */);\n    }\n    _prevSearchPosition(before) {\n        let isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\n            || this._state.searchString.indexOf('$') >= 0);\n        let { lineNumber, column } = before;\n        let model = this._editor.getModel();\n        if (isUsingLineStops || column === 1) {\n            if (lineNumber === 1) {\n                lineNumber = model.getLineCount();\n            }\n            else {\n                lineNumber--;\n            }\n            column = model.getLineMaxColumn(lineNumber);\n        }\n        else {\n            column--;\n        }\n        return new Position(lineNumber, column);\n    }\n    _moveToPrevMatch(before, isRecursed = false) {\n        if (!this._state.canNavigateBack()) {\n            // we are beyond the first matched find result\n            // instead of doing nothing, we should refocus the first item\n            const nextMatchRange = this._decorations.matchAfterPosition(before);\n            if (nextMatchRange) {\n                this._setCurrentFindMatch(nextMatchRange);\n            }\n            return;\n        }\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\n            let prevMatchRange = this._decorations.matchBeforePosition(before);\n            if (prevMatchRange && prevMatchRange.isEmpty() && prevMatchRange.getStartPosition().equals(before)) {\n                before = this._prevSearchPosition(before);\n                prevMatchRange = this._decorations.matchBeforePosition(before);\n            }\n            if (prevMatchRange) {\n                this._setCurrentFindMatch(prevMatchRange);\n            }\n            return;\n        }\n        if (this._cannotFind()) {\n            return;\n        }\n        let findScope = this._decorations.getFindScope();\n        let searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\n        // ...(----)...|...\n        if (searchRange.getEndPosition().isBefore(before)) {\n            before = searchRange.getEndPosition();\n        }\n        // ...|...(----)...\n        if (before.isBefore(searchRange.getStartPosition())) {\n            before = searchRange.getEndPosition();\n        }\n        let { lineNumber, column } = before;\n        let model = this._editor.getModel();\n        let position = new Position(lineNumber, column);\n        let prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(117 /* wordSeparators */) : null, false);\n        if (prevMatch && prevMatch.range.isEmpty() && prevMatch.range.getStartPosition().equals(position)) {\n            // Looks like we're stuck at this position, unacceptable!\n            position = this._prevSearchPosition(position);\n            prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(117 /* wordSeparators */) : null, false);\n        }\n        if (!prevMatch) {\n            // there is precisely one match and selection is on top of it\n            return;\n        }\n        if (!isRecursed && !searchRange.containsRange(prevMatch.range)) {\n            return this._moveToPrevMatch(prevMatch.range.getStartPosition(), true);\n        }\n        this._setCurrentFindMatch(prevMatch.range);\n    }\n    moveToPrevMatch() {\n        this._moveToPrevMatch(this._editor.getSelection().getStartPosition());\n    }\n    _nextSearchPosition(after) {\n        let isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\n            || this._state.searchString.indexOf('$') >= 0);\n        let { lineNumber, column } = after;\n        let model = this._editor.getModel();\n        if (isUsingLineStops || column === model.getLineMaxColumn(lineNumber)) {\n            if (lineNumber === model.getLineCount()) {\n                lineNumber = 1;\n            }\n            else {\n                lineNumber++;\n            }\n            column = 1;\n        }\n        else {\n            column++;\n        }\n        return new Position(lineNumber, column);\n    }\n    _moveToNextMatch(after) {\n        if (!this._state.canNavigateForward()) {\n            // we are beyond the last matched find result\n            // instead of doing nothing, we should refocus the last item\n            const prevMatchRange = this._decorations.matchBeforePosition(after);\n            if (prevMatchRange) {\n                this._setCurrentFindMatch(prevMatchRange);\n            }\n            return;\n        }\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\n            let nextMatchRange = this._decorations.matchAfterPosition(after);\n            if (nextMatchRange && nextMatchRange.isEmpty() && nextMatchRange.getStartPosition().equals(after)) {\n                // Looks like we're stuck at this position, unacceptable!\n                after = this._nextSearchPosition(after);\n                nextMatchRange = this._decorations.matchAfterPosition(after);\n            }\n            if (nextMatchRange) {\n                this._setCurrentFindMatch(nextMatchRange);\n            }\n            return;\n        }\n        let nextMatch = this._getNextMatch(after, false, true);\n        if (nextMatch) {\n            this._setCurrentFindMatch(nextMatch.range);\n        }\n    }\n    _getNextMatch(after, captureMatches, forceMove, isRecursed = false) {\n        if (this._cannotFind()) {\n            return null;\n        }\n        let findScope = this._decorations.getFindScope();\n        let searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\n        // ...(----)...|...\n        if (searchRange.getEndPosition().isBefore(after)) {\n            after = searchRange.getStartPosition();\n        }\n        // ...|...(----)...\n        if (after.isBefore(searchRange.getStartPosition())) {\n            after = searchRange.getStartPosition();\n        }\n        let { lineNumber, column } = after;\n        let model = this._editor.getModel();\n        let position = new Position(lineNumber, column);\n        let nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(117 /* wordSeparators */) : null, captureMatches);\n        if (forceMove && nextMatch && nextMatch.range.isEmpty() && nextMatch.range.getStartPosition().equals(position)) {\n            // Looks like we're stuck at this position, unacceptable!\n            position = this._nextSearchPosition(position);\n            nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(117 /* wordSeparators */) : null, captureMatches);\n        }\n        if (!nextMatch) {\n            // there is precisely one match and selection is on top of it\n            return null;\n        }\n        if (!isRecursed && !searchRange.containsRange(nextMatch.range)) {\n            return this._getNextMatch(nextMatch.range.getEndPosition(), captureMatches, forceMove, true);\n        }\n        return nextMatch;\n    }\n    moveToNextMatch() {\n        this._moveToNextMatch(this._editor.getSelection().getEndPosition());\n    }\n    _getReplacePattern() {\n        if (this._state.isRegex) {\n            return parseReplaceString(this._state.replaceString);\n        }\n        return ReplacePattern.fromStaticValue(this._state.replaceString);\n    }\n    replace() {\n        if (!this._hasMatches()) {\n            return;\n        }\n        let replacePattern = this._getReplacePattern();\n        let selection = this._editor.getSelection();\n        let nextMatch = this._getNextMatch(selection.getStartPosition(), true, false);\n        if (nextMatch) {\n            if (selection.equalsRange(nextMatch.range)) {\n                // selection sits on a find match => replace it!\n                let replaceString = replacePattern.buildReplaceString(nextMatch.matches, this._state.preserveCase);\n                let command = new ReplaceCommand(selection, replaceString);\n                this._executeEditorCommand('replace', command);\n                this._decorations.setStartPosition(new Position(selection.startLineNumber, selection.startColumn + replaceString.length));\n                this.research(true);\n            }\n            else {\n                this._decorations.setStartPosition(this._editor.getPosition());\n                this._setCurrentFindMatch(nextMatch.range);\n            }\n        }\n    }\n    _findMatches(findScopes, captureMatches, limitResultCount) {\n        const searchRanges = (findScopes || [null]).map((scope) => FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), scope));\n        return this._editor.getModel().findMatches(this._state.searchString, searchRanges, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(117 /* wordSeparators */) : null, captureMatches, limitResultCount);\n    }\n    replaceAll() {\n        if (!this._hasMatches()) {\n            return;\n        }\n        const findScopes = this._decorations.getFindScopes();\n        if (findScopes === null && this._state.matchesCount >= MATCHES_LIMIT) {\n            // Doing a replace on the entire file that is over ${MATCHES_LIMIT} matches\n            this._largeReplaceAll();\n        }\n        else {\n            this._regularReplaceAll(findScopes);\n        }\n        this.research(false);\n    }\n    _largeReplaceAll() {\n        const searchParams = new SearchParams(this._state.searchString, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(117 /* wordSeparators */) : null);\n        const searchData = searchParams.parseSearchRequest();\n        if (!searchData) {\n            return;\n        }\n        let searchRegex = searchData.regex;\n        if (!searchRegex.multiline) {\n            let mod = 'mu';\n            if (searchRegex.ignoreCase) {\n                mod += 'i';\n            }\n            if (searchRegex.global) {\n                mod += 'g';\n            }\n            searchRegex = new RegExp(searchRegex.source, mod);\n        }\n        const model = this._editor.getModel();\n        const modelText = model.getValue(1 /* LF */);\n        const fullModelRange = model.getFullModelRange();\n        const replacePattern = this._getReplacePattern();\n        let resultText;\n        const preserveCase = this._state.preserveCase;\n        if (replacePattern.hasReplacementPatterns || preserveCase) {\n            resultText = modelText.replace(searchRegex, function () {\n                return replacePattern.buildReplaceString(arguments, preserveCase);\n            });\n        }\n        else {\n            resultText = modelText.replace(searchRegex, replacePattern.buildReplaceString(null, preserveCase));\n        }\n        let command = new ReplaceCommandThatPreservesSelection(fullModelRange, resultText, this._editor.getSelection());\n        this._executeEditorCommand('replaceAll', command);\n    }\n    _regularReplaceAll(findScopes) {\n        const replacePattern = this._getReplacePattern();\n        // Get all the ranges (even more than the highlighted ones)\n        let matches = this._findMatches(findScopes, replacePattern.hasReplacementPatterns || this._state.preserveCase, 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\n        let replaceStrings = [];\n        for (let i = 0, len = matches.length; i < len; i++) {\n            replaceStrings[i] = replacePattern.buildReplaceString(matches[i].matches, this._state.preserveCase);\n        }\n        let command = new ReplaceAllCommand(this._editor.getSelection(), matches.map(m => m.range), replaceStrings);\n        this._executeEditorCommand('replaceAll', command);\n    }\n    selectAllMatches() {\n        if (!this._hasMatches()) {\n            return;\n        }\n        let findScopes = this._decorations.getFindScopes();\n        // Get all the ranges (even more than the highlighted ones)\n        let matches = this._findMatches(findScopes, false, 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\n        let selections = matches.map(m => new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn));\n        // If one of the ranges is the editor selection, then maintain it as primary\n        let editorSelection = this._editor.getSelection();\n        for (let i = 0, len = selections.length; i < len; i++) {\n            let sel = selections[i];\n            if (sel.equalsRange(editorSelection)) {\n                selections = [editorSelection].concat(selections.slice(0, i)).concat(selections.slice(i + 1));\n                break;\n            }\n        }\n        this._editor.setSelections(selections);\n    }\n    _executeEditorCommand(source, command) {\n        try {\n            this._ignoreModelContentChanged = true;\n            this._editor.pushUndoStop();\n            this._editor.executeCommand(source, command);\n            this._editor.pushUndoStop();\n        }\n        finally {\n            this._ignoreModelContentChanged = false;\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { MinimapPosition, OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { minimapFindMatch, overviewRulerFindMatchForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nexport class FindDecorations {\n    constructor(editor) {\n        this._editor = editor;\n        this._decorations = [];\n        this._overviewRulerApproximateDecorations = [];\n        this._findScopeDecorationIds = [];\n        this._rangeHighlightDecorationId = null;\n        this._highlightedDecorationId = null;\n        this._startPosition = this._editor.getPosition();\n    }\n    dispose() {\n        this._editor.deltaDecorations(this._allDecorations(), []);\n        this._decorations = [];\n        this._overviewRulerApproximateDecorations = [];\n        this._findScopeDecorationIds = [];\n        this._rangeHighlightDecorationId = null;\n        this._highlightedDecorationId = null;\n    }\n    reset() {\n        this._decorations = [];\n        this._overviewRulerApproximateDecorations = [];\n        this._findScopeDecorationIds = [];\n        this._rangeHighlightDecorationId = null;\n        this._highlightedDecorationId = null;\n    }\n    getCount() {\n        return this._decorations.length;\n    }\n    /** @deprecated use getFindScopes to support multiple selections */\n    getFindScope() {\n        if (this._findScopeDecorationIds[0]) {\n            return this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]);\n        }\n        return null;\n    }\n    getFindScopes() {\n        if (this._findScopeDecorationIds.length) {\n            const scopes = this._findScopeDecorationIds.map(findScopeDecorationId => this._editor.getModel().getDecorationRange(findScopeDecorationId)).filter(element => !!element);\n            if (scopes.length) {\n                return scopes;\n            }\n        }\n        return null;\n    }\n    getStartPosition() {\n        return this._startPosition;\n    }\n    setStartPosition(newStartPosition) {\n        this._startPosition = newStartPosition;\n        this.setCurrentFindMatch(null);\n    }\n    _getDecorationIndex(decorationId) {\n        const index = this._decorations.indexOf(decorationId);\n        if (index >= 0) {\n            return index + 1;\n        }\n        return 1;\n    }\n    getCurrentMatchesPosition(desiredRange) {\n        let candidates = this._editor.getModel().getDecorationsInRange(desiredRange);\n        for (const candidate of candidates) {\n            const candidateOpts = candidate.options;\n            if (candidateOpts === FindDecorations._FIND_MATCH_DECORATION || candidateOpts === FindDecorations._CURRENT_FIND_MATCH_DECORATION) {\n                return this._getDecorationIndex(candidate.id);\n            }\n        }\n        // We don't know the current match position, so returns zero to show '?' in find widget\n        return 0;\n    }\n    setCurrentFindMatch(nextMatch) {\n        let newCurrentDecorationId = null;\n        let matchPosition = 0;\n        if (nextMatch) {\n            for (let i = 0, len = this._decorations.length; i < len; i++) {\n                let range = this._editor.getModel().getDecorationRange(this._decorations[i]);\n                if (nextMatch.equalsRange(range)) {\n                    newCurrentDecorationId = this._decorations[i];\n                    matchPosition = (i + 1);\n                    break;\n                }\n            }\n        }\n        if (this._highlightedDecorationId !== null || newCurrentDecorationId !== null) {\n            this._editor.changeDecorations((changeAccessor) => {\n                if (this._highlightedDecorationId !== null) {\n                    changeAccessor.changeDecorationOptions(this._highlightedDecorationId, FindDecorations._FIND_MATCH_DECORATION);\n                    this._highlightedDecorationId = null;\n                }\n                if (newCurrentDecorationId !== null) {\n                    this._highlightedDecorationId = newCurrentDecorationId;\n                    changeAccessor.changeDecorationOptions(this._highlightedDecorationId, FindDecorations._CURRENT_FIND_MATCH_DECORATION);\n                }\n                if (this._rangeHighlightDecorationId !== null) {\n                    changeAccessor.removeDecoration(this._rangeHighlightDecorationId);\n                    this._rangeHighlightDecorationId = null;\n                }\n                if (newCurrentDecorationId !== null) {\n                    let rng = this._editor.getModel().getDecorationRange(newCurrentDecorationId);\n                    if (rng.startLineNumber !== rng.endLineNumber && rng.endColumn === 1) {\n                        let lineBeforeEnd = rng.endLineNumber - 1;\n                        let lineBeforeEndMaxColumn = this._editor.getModel().getLineMaxColumn(lineBeforeEnd);\n                        rng = new Range(rng.startLineNumber, rng.startColumn, lineBeforeEnd, lineBeforeEndMaxColumn);\n                    }\n                    this._rangeHighlightDecorationId = changeAccessor.addDecoration(rng, FindDecorations._RANGE_HIGHLIGHT_DECORATION);\n                }\n            });\n        }\n        return matchPosition;\n    }\n    set(findMatches, findScopes) {\n        this._editor.changeDecorations((accessor) => {\n            let findMatchesOptions = FindDecorations._FIND_MATCH_DECORATION;\n            let newOverviewRulerApproximateDecorations = [];\n            if (findMatches.length > 1000) {\n                // we go into a mode where the overview ruler gets \"approximate\" decorations\n                // the reason is that the overview ruler paints all the decorations in the file and we don't want to cause freezes\n                findMatchesOptions = FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION;\n                // approximate a distance in lines where matches should be merged\n                const lineCount = this._editor.getModel().getLineCount();\n                const height = this._editor.getLayoutInfo().height;\n                const approxPixelsPerLine = height / lineCount;\n                const mergeLinesDelta = Math.max(2, Math.ceil(3 / approxPixelsPerLine));\n                // merge decorations as much as possible\n                let prevStartLineNumber = findMatches[0].range.startLineNumber;\n                let prevEndLineNumber = findMatches[0].range.endLineNumber;\n                for (let i = 1, len = findMatches.length; i < len; i++) {\n                    const range = findMatches[i].range;\n                    if (prevEndLineNumber + mergeLinesDelta >= range.startLineNumber) {\n                        if (range.endLineNumber > prevEndLineNumber) {\n                            prevEndLineNumber = range.endLineNumber;\n                        }\n                    }\n                    else {\n                        newOverviewRulerApproximateDecorations.push({\n                            range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\n                            options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\n                        });\n                        prevStartLineNumber = range.startLineNumber;\n                        prevEndLineNumber = range.endLineNumber;\n                    }\n                }\n                newOverviewRulerApproximateDecorations.push({\n                    range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\n                    options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\n                });\n            }\n            // Find matches\n            let newFindMatchesDecorations = new Array(findMatches.length);\n            for (let i = 0, len = findMatches.length; i < len; i++) {\n                newFindMatchesDecorations[i] = {\n                    range: findMatches[i].range,\n                    options: findMatchesOptions\n                };\n            }\n            this._decorations = accessor.deltaDecorations(this._decorations, newFindMatchesDecorations);\n            // Overview ruler approximate decorations\n            this._overviewRulerApproximateDecorations = accessor.deltaDecorations(this._overviewRulerApproximateDecorations, newOverviewRulerApproximateDecorations);\n            // Range highlight\n            if (this._rangeHighlightDecorationId) {\n                accessor.removeDecoration(this._rangeHighlightDecorationId);\n                this._rangeHighlightDecorationId = null;\n            }\n            // Find scope\n            if (this._findScopeDecorationIds.length) {\n                this._findScopeDecorationIds.forEach(findScopeDecorationId => accessor.removeDecoration(findScopeDecorationId));\n                this._findScopeDecorationIds = [];\n            }\n            if (findScopes === null || findScopes === void 0 ? void 0 : findScopes.length) {\n                this._findScopeDecorationIds = findScopes.map(findScope => accessor.addDecoration(findScope, FindDecorations._FIND_SCOPE_DECORATION));\n            }\n        });\n    }\n    matchBeforePosition(position) {\n        if (this._decorations.length === 0) {\n            return null;\n        }\n        for (let i = this._decorations.length - 1; i >= 0; i--) {\n            let decorationId = this._decorations[i];\n            let r = this._editor.getModel().getDecorationRange(decorationId);\n            if (!r || r.endLineNumber > position.lineNumber) {\n                continue;\n            }\n            if (r.endLineNumber < position.lineNumber) {\n                return r;\n            }\n            if (r.endColumn > position.column) {\n                continue;\n            }\n            return r;\n        }\n        return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length - 1]);\n    }\n    matchAfterPosition(position) {\n        if (this._decorations.length === 0) {\n            return null;\n        }\n        for (let i = 0, len = this._decorations.length; i < len; i++) {\n            let decorationId = this._decorations[i];\n            let r = this._editor.getModel().getDecorationRange(decorationId);\n            if (!r || r.startLineNumber < position.lineNumber) {\n                continue;\n            }\n            if (r.startLineNumber > position.lineNumber) {\n                return r;\n            }\n            if (r.startColumn < position.column) {\n                continue;\n            }\n            return r;\n        }\n        return this._editor.getModel().getDecorationRange(this._decorations[0]);\n    }\n    _allDecorations() {\n        let result = [];\n        result = result.concat(this._decorations);\n        result = result.concat(this._overviewRulerApproximateDecorations);\n        if (this._findScopeDecorationIds.length) {\n            result.push(...this._findScopeDecorationIds);\n        }\n        if (this._rangeHighlightDecorationId) {\n            result.push(this._rangeHighlightDecorationId);\n        }\n        return result;\n    }\n}\nFindDecorations._CURRENT_FIND_MATCH_DECORATION = ModelDecorationOptions.register({\n    description: 'current-find-match',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    zIndex: 13,\n    className: 'currentFindMatch',\n    showIfCollapsed: true,\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapFindMatch),\n        position: MinimapPosition.Inline\n    }\n});\nFindDecorations._FIND_MATCH_DECORATION = ModelDecorationOptions.register({\n    description: 'find-match',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    zIndex: 10,\n    className: 'findMatch',\n    showIfCollapsed: true,\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapFindMatch),\n        position: MinimapPosition.Inline\n    }\n});\nFindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION = ModelDecorationOptions.register({\n    description: 'find-match-no-overview',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    className: 'findMatch',\n    showIfCollapsed: true\n});\nFindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION = ModelDecorationOptions.register({\n    description: 'find-match-only-overview',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nFindDecorations._RANGE_HIGHLIGHT_DECORATION = ModelDecorationOptions.register({\n    description: 'find-range-highlight',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    className: 'rangeHighlight',\n    isWholeLine: true\n});\nFindDecorations._FIND_SCOPE_DECORATION = ModelDecorationOptions.register({\n    description: 'find-scope',\n    className: 'findScope',\n    isWholeLine: true\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nexport class ReplaceAllCommand {\n    constructor(editorSelection, ranges, replaceStrings) {\n        this._editorSelection = editorSelection;\n        this._ranges = ranges;\n        this._replaceStrings = replaceStrings;\n        this._trackedEditorSelectionId = null;\n    }\n    getEditOperations(model, builder) {\n        if (this._ranges.length > 0) {\n            // Collect all edit operations\n            let ops = [];\n            for (let i = 0; i < this._ranges.length; i++) {\n                ops.push({\n                    range: this._ranges[i],\n                    text: this._replaceStrings[i]\n                });\n            }\n            // Sort them in ascending order by range starts\n            ops.sort((o1, o2) => {\n                return Range.compareRangesUsingStarts(o1.range, o2.range);\n            });\n            // Merge operations that touch each other\n            let resultOps = [];\n            let previousOp = ops[0];\n            for (let i = 1; i < ops.length; i++) {\n                if (previousOp.range.endLineNumber === ops[i].range.startLineNumber && previousOp.range.endColumn === ops[i].range.startColumn) {\n                    // These operations are one after another and can be merged\n                    previousOp.range = previousOp.range.plusRange(ops[i].range);\n                    previousOp.text = previousOp.text + ops[i].text;\n                }\n                else {\n                    resultOps.push(previousOp);\n                    previousOp = ops[i];\n                }\n            }\n            resultOps.push(previousOp);\n            for (const op of resultOps) {\n                builder.addEditOperation(op.range, op.text);\n            }\n        }\n        this._trackedEditorSelectionId = builder.trackSelection(this._editorSelection);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this._trackedEditorSelectionId);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from './strings.js';\nexport function buildReplaceStringWithCasePreserved(matches, pattern) {\n    if (matches && (matches[0] !== '')) {\n        const containsHyphens = validateSpecificSpecialCharacter(matches, pattern, '-');\n        const containsUnderscores = validateSpecificSpecialCharacter(matches, pattern, '_');\n        if (containsHyphens && !containsUnderscores) {\n            return buildReplaceStringForSpecificSpecialCharacter(matches, pattern, '-');\n        }\n        else if (!containsHyphens && containsUnderscores) {\n            return buildReplaceStringForSpecificSpecialCharacter(matches, pattern, '_');\n        }\n        if (matches[0].toUpperCase() === matches[0]) {\n            return pattern.toUpperCase();\n        }\n        else if (matches[0].toLowerCase() === matches[0]) {\n            return pattern.toLowerCase();\n        }\n        else if (strings.containsUppercaseCharacter(matches[0][0]) && pattern.length > 0) {\n            return pattern[0].toUpperCase() + pattern.substr(1);\n        }\n        else if (matches[0][0].toUpperCase() !== matches[0][0] && pattern.length > 0) {\n            return pattern[0].toLowerCase() + pattern.substr(1);\n        }\n        else {\n            // we don't understand its pattern yet.\n            return pattern;\n        }\n    }\n    else {\n        return pattern;\n    }\n}\nfunction validateSpecificSpecialCharacter(matches, pattern, specialCharacter) {\n    const doesContainSpecialCharacter = matches[0].indexOf(specialCharacter) !== -1 && pattern.indexOf(specialCharacter) !== -1;\n    return doesContainSpecialCharacter && matches[0].split(specialCharacter).length === pattern.split(specialCharacter).length;\n}\nfunction buildReplaceStringForSpecificSpecialCharacter(matches, pattern, specialCharacter) {\n    const splitPatternAtSpecialCharacter = pattern.split(specialCharacter);\n    const splitMatchAtSpecialCharacter = matches[0].split(specialCharacter);\n    let replaceString = '';\n    splitPatternAtSpecialCharacter.forEach((splitValue, index) => {\n        replaceString += buildReplaceStringWithCasePreserved([splitMatchAtSpecialCharacter[index]], splitValue) + specialCharacter;\n    });\n    return replaceString.slice(0, -1);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { buildReplaceStringWithCasePreserved } from '../../../../base/common/search.js';\n/**\n * Assigned when the replace pattern is entirely static.\n */\nclass StaticValueReplacePattern {\n    constructor(staticValue) {\n        this.staticValue = staticValue;\n        this.kind = 0 /* StaticValue */;\n    }\n}\n/**\n * Assigned when the replace pattern has replacement patterns.\n */\nclass DynamicPiecesReplacePattern {\n    constructor(pieces) {\n        this.pieces = pieces;\n        this.kind = 1 /* DynamicPieces */;\n    }\n}\nexport class ReplacePattern {\n    constructor(pieces) {\n        if (!pieces || pieces.length === 0) {\n            this._state = new StaticValueReplacePattern('');\n        }\n        else if (pieces.length === 1 && pieces[0].staticValue !== null) {\n            this._state = new StaticValueReplacePattern(pieces[0].staticValue);\n        }\n        else {\n            this._state = new DynamicPiecesReplacePattern(pieces);\n        }\n    }\n    static fromStaticValue(value) {\n        return new ReplacePattern([ReplacePiece.staticValue(value)]);\n    }\n    get hasReplacementPatterns() {\n        return (this._state.kind === 1 /* DynamicPieces */);\n    }\n    buildReplaceString(matches, preserveCase) {\n        if (this._state.kind === 0 /* StaticValue */) {\n            if (preserveCase) {\n                return buildReplaceStringWithCasePreserved(matches, this._state.staticValue);\n            }\n            else {\n                return this._state.staticValue;\n            }\n        }\n        let result = '';\n        for (let i = 0, len = this._state.pieces.length; i < len; i++) {\n            let piece = this._state.pieces[i];\n            if (piece.staticValue !== null) {\n                // static value ReplacePiece\n                result += piece.staticValue;\n                continue;\n            }\n            // match index ReplacePiece\n            let match = ReplacePattern._substitute(piece.matchIndex, matches);\n            if (piece.caseOps !== null && piece.caseOps.length > 0) {\n                let repl = [];\n                let lenOps = piece.caseOps.length;\n                let opIdx = 0;\n                for (let idx = 0, len = match.length; idx < len; idx++) {\n                    if (opIdx >= lenOps) {\n                        repl.push(match.slice(idx));\n                        break;\n                    }\n                    switch (piece.caseOps[opIdx]) {\n                        case 'U':\n                            repl.push(match[idx].toUpperCase());\n                            break;\n                        case 'u':\n                            repl.push(match[idx].toUpperCase());\n                            opIdx++;\n                            break;\n                        case 'L':\n                            repl.push(match[idx].toLowerCase());\n                            break;\n                        case 'l':\n                            repl.push(match[idx].toLowerCase());\n                            opIdx++;\n                            break;\n                        default:\n                            repl.push(match[idx]);\n                    }\n                }\n                match = repl.join('');\n            }\n            result += match;\n        }\n        return result;\n    }\n    static _substitute(matchIndex, matches) {\n        if (matches === null) {\n            return '';\n        }\n        if (matchIndex === 0) {\n            return matches[0];\n        }\n        let remainder = '';\n        while (matchIndex > 0) {\n            if (matchIndex < matches.length) {\n                // A match can be undefined\n                let match = (matches[matchIndex] || '');\n                return match + remainder;\n            }\n            remainder = String(matchIndex % 10) + remainder;\n            matchIndex = Math.floor(matchIndex / 10);\n        }\n        return '$' + remainder;\n    }\n}\n/**\n * A replace piece can either be a static string or an index to a specific match.\n */\nexport class ReplacePiece {\n    constructor(staticValue, matchIndex, caseOps) {\n        this.staticValue = staticValue;\n        this.matchIndex = matchIndex;\n        if (!caseOps || caseOps.length === 0) {\n            this.caseOps = null;\n        }\n        else {\n            this.caseOps = caseOps.slice(0);\n        }\n    }\n    static staticValue(value) {\n        return new ReplacePiece(value, -1, null);\n    }\n    static caseOps(index, caseOps) {\n        return new ReplacePiece(null, index, caseOps);\n    }\n}\nclass ReplacePieceBuilder {\n    constructor(source) {\n        this._source = source;\n        this._lastCharIndex = 0;\n        this._result = [];\n        this._resultLen = 0;\n        this._currentStaticPiece = '';\n    }\n    emitUnchanged(toCharIndex) {\n        this._emitStatic(this._source.substring(this._lastCharIndex, toCharIndex));\n        this._lastCharIndex = toCharIndex;\n    }\n    emitStatic(value, toCharIndex) {\n        this._emitStatic(value);\n        this._lastCharIndex = toCharIndex;\n    }\n    _emitStatic(value) {\n        if (value.length === 0) {\n            return;\n        }\n        this._currentStaticPiece += value;\n    }\n    emitMatchIndex(index, toCharIndex, caseOps) {\n        if (this._currentStaticPiece.length !== 0) {\n            this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\n            this._currentStaticPiece = '';\n        }\n        this._result[this._resultLen++] = ReplacePiece.caseOps(index, caseOps);\n        this._lastCharIndex = toCharIndex;\n    }\n    finalize() {\n        this.emitUnchanged(this._source.length);\n        if (this._currentStaticPiece.length !== 0) {\n            this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\n            this._currentStaticPiece = '';\n        }\n        return new ReplacePattern(this._result);\n    }\n}\n/**\n * \\n\t\t\t=> inserts a LF\n * \\t\t\t\t=> inserts a TAB\n * \\\\\t\t\t=> inserts a \"\\\".\n * \\u\t\t\t=> upper-cases one character in a match.\n * \\U\t\t\t=> upper-cases ALL remaining characters in a match.\n * \\l\t\t\t=> lower-cases one character in a match.\n * \\L\t\t\t=> lower-cases ALL remaining characters in a match.\n * $$\t\t\t=> inserts a \"$\".\n * $& and $0\t=> inserts the matched substring.\n * $n\t\t\t=> Where n is a non-negative integer lesser than 100, inserts the nth parenthesized submatch string\n * everything else stays untouched\n *\n * Also see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter\n */\nexport function parseReplaceString(replaceString) {\n    if (!replaceString || replaceString.length === 0) {\n        return new ReplacePattern(null);\n    }\n    let caseOps = [];\n    let result = new ReplacePieceBuilder(replaceString);\n    for (let i = 0, len = replaceString.length; i < len; i++) {\n        let chCode = replaceString.charCodeAt(i);\n        if (chCode === 92 /* Backslash */) {\n            // move to next char\n            i++;\n            if (i >= len) {\n                // string ends with a \\\n                break;\n            }\n            let nextChCode = replaceString.charCodeAt(i);\n            // let replaceWithCharacter: string | null = null;\n            switch (nextChCode) {\n                case 92 /* Backslash */:\n                    // \\\\ => inserts a \"\\\"\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('\\\\', i + 1);\n                    break;\n                case 110 /* n */:\n                    // \\n => inserts a LF\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('\\n', i + 1);\n                    break;\n                case 116 /* t */:\n                    // \\t => inserts a TAB\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('\\t', i + 1);\n                    break;\n                // Case modification of string replacements, patterned after Boost, but only applied\n                // to the replacement text, not subsequent content.\n                case 117 /* u */:\n                // \\u => upper-cases one character.\n                case 85 /* U */:\n                // \\U => upper-cases ALL following characters.\n                case 108 /* l */:\n                // \\l => lower-cases one character.\n                case 76 /* L */:\n                    // \\L => lower-cases ALL following characters.\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('', i + 1);\n                    caseOps.push(String.fromCharCode(nextChCode));\n                    break;\n            }\n            continue;\n        }\n        if (chCode === 36 /* DollarSign */) {\n            // move to next char\n            i++;\n            if (i >= len) {\n                // string ends with a $\n                break;\n            }\n            let nextChCode = replaceString.charCodeAt(i);\n            if (nextChCode === 36 /* DollarSign */) {\n                // $$ => inserts a \"$\"\n                result.emitUnchanged(i - 1);\n                result.emitStatic('$', i + 1);\n                continue;\n            }\n            if (nextChCode === 48 /* Digit0 */ || nextChCode === 38 /* Ampersand */) {\n                // $& and $0 => inserts the matched substring.\n                result.emitUnchanged(i - 1);\n                result.emitMatchIndex(0, i + 1, caseOps);\n                caseOps.length = 0;\n                continue;\n            }\n            if (49 /* Digit1 */ <= nextChCode && nextChCode <= 57 /* Digit9 */) {\n                // $n\n                let matchIndex = nextChCode - 48 /* Digit0 */;\n                // peek next char to probe for $nn\n                if (i + 1 < len) {\n                    let nextNextChCode = replaceString.charCodeAt(i + 1);\n                    if (48 /* Digit0 */ <= nextNextChCode && nextNextChCode <= 57 /* Digit9 */) {\n                        // $nn\n                        // move to next char\n                        i++;\n                        matchIndex = matchIndex * 10 + (nextNextChCode - 48 /* Digit0 */);\n                        result.emitUnchanged(i - 2);\n                        result.emitMatchIndex(matchIndex, i + 1, caseOps);\n                        caseOps.length = 0;\n                        continue;\n                    }\n                }\n                result.emitUnchanged(i - 1);\n                result.emitMatchIndex(matchIndex, i + 1, caseOps);\n                caseOps.length = 0;\n                continue;\n            }\n        }\n    }\n    return result.finalize();\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { CaseSensitiveCheckbox, RegexCheckbox, WholeWordsCheckbox } from '../../../../base/browser/ui/findinput/findInputCheckboxes.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { FIND_IDS } from './findModel.js';\nimport { contrastBorder, editorWidgetBackground, editorWidgetForeground, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nexport class FindOptionsWidget extends Widget {\n    constructor(editor, state, keybindingService, themeService) {\n        super();\n        this._hideSoon = this._register(new RunOnceScheduler(() => this._hide(), 2000));\n        this._isVisible = false;\n        this._editor = editor;\n        this._state = state;\n        this._keybindingService = keybindingService;\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'findOptionsWidget';\n        this._domNode.style.display = 'none';\n        this._domNode.style.top = '10px';\n        this._domNode.setAttribute('role', 'presentation');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        const inputActiveOptionBorderColor = themeService.getColorTheme().getColor(inputActiveOptionBorder);\n        const inputActiveOptionForegroundColor = themeService.getColorTheme().getColor(inputActiveOptionForeground);\n        const inputActiveOptionBackgroundColor = themeService.getColorTheme().getColor(inputActiveOptionBackground);\n        this.caseSensitive = this._register(new CaseSensitiveCheckbox({\n            appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n            isChecked: this._state.matchCase,\n            inputActiveOptionBorder: inputActiveOptionBorderColor,\n            inputActiveOptionForeground: inputActiveOptionForegroundColor,\n            inputActiveOptionBackground: inputActiveOptionBackgroundColor\n        }));\n        this._domNode.appendChild(this.caseSensitive.domNode);\n        this._register(this.caseSensitive.onChange(() => {\n            this._state.change({\n                matchCase: this.caseSensitive.checked\n            }, false);\n        }));\n        this.wholeWords = this._register(new WholeWordsCheckbox({\n            appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n            isChecked: this._state.wholeWord,\n            inputActiveOptionBorder: inputActiveOptionBorderColor,\n            inputActiveOptionForeground: inputActiveOptionForegroundColor,\n            inputActiveOptionBackground: inputActiveOptionBackgroundColor\n        }));\n        this._domNode.appendChild(this.wholeWords.domNode);\n        this._register(this.wholeWords.onChange(() => {\n            this._state.change({\n                wholeWord: this.wholeWords.checked\n            }, false);\n        }));\n        this.regex = this._register(new RegexCheckbox({\n            appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n            isChecked: this._state.isRegex,\n            inputActiveOptionBorder: inputActiveOptionBorderColor,\n            inputActiveOptionForeground: inputActiveOptionForegroundColor,\n            inputActiveOptionBackground: inputActiveOptionBackgroundColor\n        }));\n        this._domNode.appendChild(this.regex.domNode);\n        this._register(this.regex.onChange(() => {\n            this._state.change({\n                isRegex: this.regex.checked\n            }, false);\n        }));\n        this._editor.addOverlayWidget(this);\n        this._register(this._state.onFindReplaceStateChange((e) => {\n            let somethingChanged = false;\n            if (e.isRegex) {\n                this.regex.checked = this._state.isRegex;\n                somethingChanged = true;\n            }\n            if (e.wholeWord) {\n                this.wholeWords.checked = this._state.wholeWord;\n                somethingChanged = true;\n            }\n            if (e.matchCase) {\n                this.caseSensitive.checked = this._state.matchCase;\n                somethingChanged = true;\n            }\n            if (!this._state.isRevealed && somethingChanged) {\n                this._revealTemporarily();\n            }\n        }));\n        this._register(dom.addDisposableNonBubblingMouseOutListener(this._domNode, (e) => this._onMouseOut()));\n        this._register(dom.addDisposableListener(this._domNode, 'mouseover', (e) => this._onMouseOver()));\n        this._applyTheme(themeService.getColorTheme());\n        this._register(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n    }\n    _keybindingLabelFor(actionId) {\n        let kb = this._keybindingService.lookupKeybinding(actionId);\n        if (!kb) {\n            return '';\n        }\n        return ` (${kb.getLabel()})`;\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return FindOptionsWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            preference: 0 /* TOP_RIGHT_CORNER */\n        };\n    }\n    highlightFindOptions() {\n        this._revealTemporarily();\n    }\n    _revealTemporarily() {\n        this._show();\n        this._hideSoon.schedule();\n    }\n    _onMouseOut() {\n        this._hideSoon.schedule();\n    }\n    _onMouseOver() {\n        this._hideSoon.cancel();\n    }\n    _show() {\n        if (this._isVisible) {\n            return;\n        }\n        this._isVisible = true;\n        this._domNode.style.display = 'block';\n    }\n    _hide() {\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this._domNode.style.display = 'none';\n    }\n    _applyTheme(theme) {\n        let inputStyles = {\n            inputActiveOptionBorder: theme.getColor(inputActiveOptionBorder),\n            inputActiveOptionForeground: theme.getColor(inputActiveOptionForeground),\n            inputActiveOptionBackground: theme.getColor(inputActiveOptionBackground)\n        };\n        this.caseSensitive.style(inputStyles);\n        this.wholeWords.style(inputStyles);\n        this.regex.style(inputStyles);\n    }\n}\nFindOptionsWidget.ID = 'editor.contrib.findOptionsWidget';\nregisterThemingParticipant((theme, collector) => {\n    const widgetBackground = theme.getColor(editorWidgetBackground);\n    if (widgetBackground) {\n        collector.addRule(`.monaco-editor .findOptionsWidget { background-color: ${widgetBackground}; }`);\n    }\n    const widgetForeground = theme.getColor(editorWidgetForeground);\n    if (widgetForeground) {\n        collector.addRule(`.monaco-editor .findOptionsWidget { color: ${widgetForeground}; }`);\n    }\n    const widgetShadowColor = theme.getColor(widgetShadow);\n    if (widgetShadowColor) {\n        collector.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${widgetShadowColor}; }`);\n    }\n    const hcBorder = theme.getColor(contrastBorder);\n    if (hcBorder) {\n        collector.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${hcBorder}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { MATCHES_LIMIT } from './findModel.js';\nfunction effectiveOptionValue(override, value) {\n    if (override === 1 /* True */) {\n        return true;\n    }\n    if (override === 2 /* False */) {\n        return false;\n    }\n    return value;\n}\nexport class FindReplaceState extends Disposable {\n    constructor() {\n        super();\n        this._onFindReplaceStateChange = this._register(new Emitter());\n        this.onFindReplaceStateChange = this._onFindReplaceStateChange.event;\n        this._searchString = '';\n        this._replaceString = '';\n        this._isRevealed = false;\n        this._isReplaceRevealed = false;\n        this._isRegex = false;\n        this._isRegexOverride = 0 /* NotSet */;\n        this._wholeWord = false;\n        this._wholeWordOverride = 0 /* NotSet */;\n        this._matchCase = false;\n        this._matchCaseOverride = 0 /* NotSet */;\n        this._preserveCase = false;\n        this._preserveCaseOverride = 0 /* NotSet */;\n        this._searchScope = null;\n        this._matchesPosition = 0;\n        this._matchesCount = 0;\n        this._currentMatch = null;\n        this._loop = true;\n        this._isSearching = false;\n        this._filters = null;\n    }\n    get searchString() { return this._searchString; }\n    get replaceString() { return this._replaceString; }\n    get isRevealed() { return this._isRevealed; }\n    get isReplaceRevealed() { return this._isReplaceRevealed; }\n    get isRegex() { return effectiveOptionValue(this._isRegexOverride, this._isRegex); }\n    get wholeWord() { return effectiveOptionValue(this._wholeWordOverride, this._wholeWord); }\n    get matchCase() { return effectiveOptionValue(this._matchCaseOverride, this._matchCase); }\n    get preserveCase() { return effectiveOptionValue(this._preserveCaseOverride, this._preserveCase); }\n    get actualIsRegex() { return this._isRegex; }\n    get actualWholeWord() { return this._wholeWord; }\n    get actualMatchCase() { return this._matchCase; }\n    get actualPreserveCase() { return this._preserveCase; }\n    get searchScope() { return this._searchScope; }\n    get matchesPosition() { return this._matchesPosition; }\n    get matchesCount() { return this._matchesCount; }\n    get currentMatch() { return this._currentMatch; }\n    changeMatchInfo(matchesPosition, matchesCount, currentMatch) {\n        let changeEvent = {\n            moveCursor: false,\n            updateHistory: false,\n            searchString: false,\n            replaceString: false,\n            isRevealed: false,\n            isReplaceRevealed: false,\n            isRegex: false,\n            wholeWord: false,\n            matchCase: false,\n            preserveCase: false,\n            searchScope: false,\n            matchesPosition: false,\n            matchesCount: false,\n            currentMatch: false,\n            loop: false,\n            isSearching: false,\n            filters: false\n        };\n        let somethingChanged = false;\n        if (matchesCount === 0) {\n            matchesPosition = 0;\n        }\n        if (matchesPosition > matchesCount) {\n            matchesPosition = matchesCount;\n        }\n        if (this._matchesPosition !== matchesPosition) {\n            this._matchesPosition = matchesPosition;\n            changeEvent.matchesPosition = true;\n            somethingChanged = true;\n        }\n        if (this._matchesCount !== matchesCount) {\n            this._matchesCount = matchesCount;\n            changeEvent.matchesCount = true;\n            somethingChanged = true;\n        }\n        if (typeof currentMatch !== 'undefined') {\n            if (!Range.equalsRange(this._currentMatch, currentMatch)) {\n                this._currentMatch = currentMatch;\n                changeEvent.currentMatch = true;\n                somethingChanged = true;\n            }\n        }\n        if (somethingChanged) {\n            this._onFindReplaceStateChange.fire(changeEvent);\n        }\n    }\n    change(newState, moveCursor, updateHistory = true) {\n        var _a;\n        let changeEvent = {\n            moveCursor: moveCursor,\n            updateHistory: updateHistory,\n            searchString: false,\n            replaceString: false,\n            isRevealed: false,\n            isReplaceRevealed: false,\n            isRegex: false,\n            wholeWord: false,\n            matchCase: false,\n            preserveCase: false,\n            searchScope: false,\n            matchesPosition: false,\n            matchesCount: false,\n            currentMatch: false,\n            loop: false,\n            isSearching: false,\n            filters: false\n        };\n        let somethingChanged = false;\n        const oldEffectiveIsRegex = this.isRegex;\n        const oldEffectiveWholeWords = this.wholeWord;\n        const oldEffectiveMatchCase = this.matchCase;\n        const oldEffectivePreserveCase = this.preserveCase;\n        if (typeof newState.searchString !== 'undefined') {\n            if (this._searchString !== newState.searchString) {\n                this._searchString = newState.searchString;\n                changeEvent.searchString = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.replaceString !== 'undefined') {\n            if (this._replaceString !== newState.replaceString) {\n                this._replaceString = newState.replaceString;\n                changeEvent.replaceString = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isRevealed !== 'undefined') {\n            if (this._isRevealed !== newState.isRevealed) {\n                this._isRevealed = newState.isRevealed;\n                changeEvent.isRevealed = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isReplaceRevealed !== 'undefined') {\n            if (this._isReplaceRevealed !== newState.isReplaceRevealed) {\n                this._isReplaceRevealed = newState.isReplaceRevealed;\n                changeEvent.isReplaceRevealed = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isRegex !== 'undefined') {\n            this._isRegex = newState.isRegex;\n        }\n        if (typeof newState.wholeWord !== 'undefined') {\n            this._wholeWord = newState.wholeWord;\n        }\n        if (typeof newState.matchCase !== 'undefined') {\n            this._matchCase = newState.matchCase;\n        }\n        if (typeof newState.preserveCase !== 'undefined') {\n            this._preserveCase = newState.preserveCase;\n        }\n        if (typeof newState.searchScope !== 'undefined') {\n            if (!((_a = newState.searchScope) === null || _a === void 0 ? void 0 : _a.every((newSearchScope) => {\n                var _a;\n                return (_a = this._searchScope) === null || _a === void 0 ? void 0 : _a.some(existingSearchScope => {\n                    return !Range.equalsRange(existingSearchScope, newSearchScope);\n                });\n            }))) {\n                this._searchScope = newState.searchScope;\n                changeEvent.searchScope = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.loop !== 'undefined') {\n            if (this._loop !== newState.loop) {\n                this._loop = newState.loop;\n                changeEvent.loop = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isSearching !== 'undefined') {\n            if (this._isSearching !== newState.isSearching) {\n                this._isSearching = newState.isSearching;\n                changeEvent.isSearching = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.filters !== 'undefined') {\n            if (this._filters) {\n                this._filters.update(newState.filters);\n            }\n            else {\n                this._filters = newState.filters;\n            }\n            changeEvent.filters = true;\n            somethingChanged = true;\n        }\n        // Overrides get set when they explicitly come in and get reset anytime something else changes\n        this._isRegexOverride = (typeof newState.isRegexOverride !== 'undefined' ? newState.isRegexOverride : 0 /* NotSet */);\n        this._wholeWordOverride = (typeof newState.wholeWordOverride !== 'undefined' ? newState.wholeWordOverride : 0 /* NotSet */);\n        this._matchCaseOverride = (typeof newState.matchCaseOverride !== 'undefined' ? newState.matchCaseOverride : 0 /* NotSet */);\n        this._preserveCaseOverride = (typeof newState.preserveCaseOverride !== 'undefined' ? newState.preserveCaseOverride : 0 /* NotSet */);\n        if (oldEffectiveIsRegex !== this.isRegex) {\n            somethingChanged = true;\n            changeEvent.isRegex = true;\n        }\n        if (oldEffectiveWholeWords !== this.wholeWord) {\n            somethingChanged = true;\n            changeEvent.wholeWord = true;\n        }\n        if (oldEffectiveMatchCase !== this.matchCase) {\n            somethingChanged = true;\n            changeEvent.matchCase = true;\n        }\n        if (oldEffectivePreserveCase !== this.preserveCase) {\n            somethingChanged = true;\n            changeEvent.preserveCase = true;\n        }\n        if (somethingChanged) {\n            this._onFindReplaceStateChange.fire(changeEvent);\n        }\n    }\n    canNavigateBack() {\n        return this.canNavigateInLoop() || (this.matchesPosition !== 1);\n    }\n    canNavigateForward() {\n        return this.canNavigateInLoop() || (this.matchesPosition < this.matchesCount);\n    }\n    canNavigateInLoop() {\n        return this._loop || (this.matchesCount >= MATCHES_LIMIT);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { alert as alertFn } from '../../../../base/browser/ui/aria/aria.js';\nimport { Checkbox } from '../../../../base/browser/ui/checkbox/checkbox.js';\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Delayer } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './findWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_REPLACE_INPUT_FOCUSED, FIND_IDS, MATCHES_LIMIT } from './findModel.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextScopedFindInput, ContextScopedReplaceInput } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nimport { showHistoryKeybindingHint } from '../../../../platform/history/browser/historyWidgetKeybindingHint.js';\nimport { contrastBorder, editorFindMatch, editorFindMatchBorder, editorFindMatchHighlight, editorFindMatchHighlightBorder, editorFindRangeHighlight, editorFindRangeHighlightBorder, editorWidgetBackground, editorWidgetBorder, editorWidgetForeground, editorWidgetResizeBorder, errorForeground, focusBorder, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground, inputBackground, inputBorder, inputForeground, inputValidationErrorBackground, inputValidationErrorBorder, inputValidationErrorForeground, inputValidationInfoBackground, inputValidationInfoBorder, inputValidationInfoForeground, inputValidationWarningBackground, inputValidationWarningBorder, inputValidationWarningForeground, toolbarHoverBackground, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon, widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { registerThemingParticipant, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nconst findSelectionIcon = registerIcon('find-selection', Codicon.selection, nls.localize('findSelectionIcon', 'Icon for \\'Find in Selection\\' in the editor find widget.'));\nconst findCollapsedIcon = registerIcon('find-collapsed', Codicon.chevronRight, nls.localize('findCollapsedIcon', 'Icon to indicate that the editor find widget is collapsed.'));\nconst findExpandedIcon = registerIcon('find-expanded', Codicon.chevronDown, nls.localize('findExpandedIcon', 'Icon to indicate that the editor find widget is expanded.'));\nexport const findReplaceIcon = registerIcon('find-replace', Codicon.replace, nls.localize('findReplaceIcon', 'Icon for \\'Replace\\' in the editor find widget.'));\nexport const findReplaceAllIcon = registerIcon('find-replace-all', Codicon.replaceAll, nls.localize('findReplaceAllIcon', 'Icon for \\'Replace All\\' in the editor find widget.'));\nexport const findPreviousMatchIcon = registerIcon('find-previous-match', Codicon.arrowUp, nls.localize('findPreviousMatchIcon', 'Icon for \\'Find Previous\\' in the editor find widget.'));\nexport const findNextMatchIcon = registerIcon('find-next-match', Codicon.arrowDown, nls.localize('findNextMatchIcon', 'Icon for \\'Find Next\\' in the editor find widget.'));\nconst NLS_FIND_INPUT_LABEL = nls.localize('label.find', \"Find\");\nconst NLS_FIND_INPUT_PLACEHOLDER = nls.localize('placeholder.find', \"Find\");\nconst NLS_PREVIOUS_MATCH_BTN_LABEL = nls.localize('label.previousMatchButton', \"Previous Match\");\nconst NLS_NEXT_MATCH_BTN_LABEL = nls.localize('label.nextMatchButton', \"Next Match\");\nconst NLS_TOGGLE_SELECTION_FIND_TITLE = nls.localize('label.toggleSelectionFind', \"Find in Selection\");\nconst NLS_CLOSE_BTN_LABEL = nls.localize('label.closeButton', \"Close\");\nconst NLS_REPLACE_INPUT_LABEL = nls.localize('label.replace', \"Replace\");\nconst NLS_REPLACE_INPUT_PLACEHOLDER = nls.localize('placeholder.replace', \"Replace\");\nconst NLS_REPLACE_BTN_LABEL = nls.localize('label.replaceButton', \"Replace\");\nconst NLS_REPLACE_ALL_BTN_LABEL = nls.localize('label.replaceAllButton', \"Replace All\");\nconst NLS_TOGGLE_REPLACE_MODE_BTN_LABEL = nls.localize('label.toggleReplaceButton', \"Toggle Replace\");\nconst NLS_MATCHES_COUNT_LIMIT_TITLE = nls.localize('title.matchesCountLimit', \"Only the first {0} results are highlighted, but all find operations work on the entire text.\", MATCHES_LIMIT);\nexport const NLS_MATCHES_LOCATION = nls.localize('label.matchesLocation', \"{0} of {1}\");\nexport const NLS_NO_RESULTS = nls.localize('label.noResults', \"No results\");\nconst FIND_WIDGET_INITIAL_WIDTH = 419;\nconst PART_WIDTH = 275;\nconst FIND_INPUT_AREA_WIDTH = PART_WIDTH - 54;\nlet MAX_MATCHES_COUNT_WIDTH = 69;\n// let FIND_ALL_CONTROLS_WIDTH = 17/** Find Input margin-left */ + (MAX_MATCHES_COUNT_WIDTH + 3 + 1) /** Match Results */ + 23 /** Button */ * 4 + 2/** sash */;\nconst FIND_INPUT_AREA_HEIGHT = 33; // The height of Find Widget when Replace Input is not visible.\nconst ctrlEnterReplaceAllWarningPromptedKey = 'ctrlEnterReplaceAll.windows.donotask';\nconst ctrlKeyMod = (platform.isMacintosh ? 256 /* WinCtrl */ : 2048 /* CtrlCmd */);\nexport class FindWidgetViewZone {\n    constructor(afterLineNumber) {\n        this.afterLineNumber = afterLineNumber;\n        this.heightInPx = FIND_INPUT_AREA_HEIGHT;\n        this.suppressMouseDown = false;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'dock-find-viewzone';\n    }\n}\nfunction stopPropagationForMultiLineUpwards(event, value, textarea) {\n    const isMultiline = !!value.match(/\\n/);\n    if (textarea && isMultiline && textarea.selectionStart > 0) {\n        event.stopPropagation();\n        return;\n    }\n}\nfunction stopPropagationForMultiLineDownwards(event, value, textarea) {\n    const isMultiline = !!value.match(/\\n/);\n    if (textarea && isMultiline && textarea.selectionEnd < textarea.value.length) {\n        event.stopPropagation();\n        return;\n    }\n}\nexport class FindWidget extends Widget {\n    constructor(codeEditor, controller, state, contextViewProvider, keybindingService, contextKeyService, themeService, storageService, notificationService) {\n        super();\n        this._cachedHeight = null;\n        this._revealTimeouts = [];\n        this._codeEditor = codeEditor;\n        this._controller = controller;\n        this._state = state;\n        this._contextViewProvider = contextViewProvider;\n        this._keybindingService = keybindingService;\n        this._contextKeyService = contextKeyService;\n        this._storageService = storageService;\n        this._notificationService = notificationService;\n        this._ctrlEnterReplaceAllWarningPrompted = !!storageService.getBoolean(ctrlEnterReplaceAllWarningPromptedKey, 0 /* GLOBAL */);\n        this._isVisible = false;\n        this._isReplaceVisible = false;\n        this._ignoreChangeEvent = false;\n        this._updateHistoryDelayer = new Delayer(500);\n        this._register(toDisposable(() => this._updateHistoryDelayer.cancel()));\n        this._register(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this._buildDomNode();\n        this._updateButtons();\n        this._tryUpdateWidgetWidth();\n        this._findInput.inputBox.layout();\n        this._register(this._codeEditor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(81 /* readOnly */)) {\n                if (this._codeEditor.getOption(81 /* readOnly */)) {\n                    // Hide replace part if editor becomes read only\n                    this._state.change({ isReplaceRevealed: false }, false);\n                }\n                this._updateButtons();\n            }\n            if (e.hasChanged(131 /* layoutInfo */)) {\n                this._tryUpdateWidgetWidth();\n            }\n            if (e.hasChanged(2 /* accessibilitySupport */)) {\n                this.updateAccessibilitySupport();\n            }\n            if (e.hasChanged(35 /* find */)) {\n                const addExtraSpaceOnTop = this._codeEditor.getOption(35 /* find */).addExtraSpaceOnTop;\n                if (addExtraSpaceOnTop && !this._viewZone) {\n                    this._viewZone = new FindWidgetViewZone(0);\n                    this._showViewZone();\n                }\n                if (!addExtraSpaceOnTop && this._viewZone) {\n                    this._removeViewZone();\n                }\n            }\n        }));\n        this.updateAccessibilitySupport();\n        this._register(this._codeEditor.onDidChangeCursorSelection(() => {\n            if (this._isVisible) {\n                this._updateToggleSelectionFindButton();\n            }\n        }));\n        this._register(this._codeEditor.onDidFocusEditorWidget(() => __awaiter(this, void 0, void 0, function* () {\n            if (this._isVisible) {\n                let globalBufferTerm = yield this._controller.getGlobalBufferTerm();\n                if (globalBufferTerm && globalBufferTerm !== this._state.searchString) {\n                    this._state.change({ searchString: globalBufferTerm }, false);\n                    this._findInput.select();\n                }\n            }\n        })));\n        this._findInputFocused = CONTEXT_FIND_INPUT_FOCUSED.bindTo(contextKeyService);\n        this._findFocusTracker = this._register(dom.trackFocus(this._findInput.inputBox.inputElement));\n        this._register(this._findFocusTracker.onDidFocus(() => {\n            this._findInputFocused.set(true);\n            this._updateSearchScope();\n        }));\n        this._register(this._findFocusTracker.onDidBlur(() => {\n            this._findInputFocused.set(false);\n        }));\n        this._replaceInputFocused = CONTEXT_REPLACE_INPUT_FOCUSED.bindTo(contextKeyService);\n        this._replaceFocusTracker = this._register(dom.trackFocus(this._replaceInput.inputBox.inputElement));\n        this._register(this._replaceFocusTracker.onDidFocus(() => {\n            this._replaceInputFocused.set(true);\n            this._updateSearchScope();\n        }));\n        this._register(this._replaceFocusTracker.onDidBlur(() => {\n            this._replaceInputFocused.set(false);\n        }));\n        this._codeEditor.addOverlayWidget(this);\n        if (this._codeEditor.getOption(35 /* find */).addExtraSpaceOnTop) {\n            this._viewZone = new FindWidgetViewZone(0); // Put it before the first line then users can scroll beyond the first line.\n        }\n        this._applyTheme(themeService.getColorTheme());\n        this._register(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this._register(this._codeEditor.onDidChangeModel(() => {\n            if (!this._isVisible) {\n                return;\n            }\n            this._viewZoneId = undefined;\n        }));\n        this._register(this._codeEditor.onDidScrollChange((e) => {\n            if (e.scrollTopChanged) {\n                this._layoutViewZone();\n                return;\n            }\n            // for other scroll changes, layout the viewzone in next tick to avoid ruining current rendering.\n            setTimeout(() => {\n                this._layoutViewZone();\n            }, 0);\n        }));\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return FindWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        if (this._isVisible) {\n            return {\n                preference: 0 /* TOP_RIGHT_CORNER */\n            };\n        }\n        return null;\n    }\n    // ----- React to state changes\n    _onStateChanged(e) {\n        if (e.searchString) {\n            try {\n                this._ignoreChangeEvent = true;\n                this._findInput.setValue(this._state.searchString);\n            }\n            finally {\n                this._ignoreChangeEvent = false;\n            }\n            this._updateButtons();\n        }\n        if (e.replaceString) {\n            this._replaceInput.inputBox.value = this._state.replaceString;\n        }\n        if (e.isRevealed) {\n            if (this._state.isRevealed) {\n                this._reveal();\n            }\n            else {\n                this._hide(true);\n            }\n        }\n        if (e.isReplaceRevealed) {\n            if (this._state.isReplaceRevealed) {\n                if (!this._codeEditor.getOption(81 /* readOnly */) && !this._isReplaceVisible) {\n                    this._isReplaceVisible = true;\n                    this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                    this._updateButtons();\n                    this._replaceInput.inputBox.layout();\n                }\n            }\n            else {\n                if (this._isReplaceVisible) {\n                    this._isReplaceVisible = false;\n                    this._updateButtons();\n                }\n            }\n        }\n        if ((e.isRevealed || e.isReplaceRevealed) && (this._state.isRevealed || this._state.isReplaceRevealed)) {\n            if (this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }\n        if (e.isRegex) {\n            this._findInput.setRegex(this._state.isRegex);\n        }\n        if (e.wholeWord) {\n            this._findInput.setWholeWords(this._state.wholeWord);\n        }\n        if (e.matchCase) {\n            this._findInput.setCaseSensitive(this._state.matchCase);\n        }\n        if (e.preserveCase) {\n            this._replaceInput.setPreserveCase(this._state.preserveCase);\n        }\n        if (e.searchScope) {\n            if (this._state.searchScope) {\n                this._toggleSelectionFind.checked = true;\n            }\n            else {\n                this._toggleSelectionFind.checked = false;\n            }\n            this._updateToggleSelectionFindButton();\n        }\n        if (e.searchString || e.matchesCount || e.matchesPosition) {\n            let showRedOutline = (this._state.searchString.length > 0 && this._state.matchesCount === 0);\n            this._domNode.classList.toggle('no-results', showRedOutline);\n            this._updateMatchesCount();\n            this._updateButtons();\n        }\n        if (e.searchString || e.currentMatch) {\n            this._layoutViewZone();\n        }\n        if (e.updateHistory) {\n            this._delayedUpdateHistory();\n        }\n        if (e.loop) {\n            this._updateButtons();\n        }\n    }\n    _delayedUpdateHistory() {\n        this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(undefined, onUnexpectedError);\n    }\n    _updateHistory() {\n        if (this._state.searchString) {\n            this._findInput.inputBox.addToHistory();\n        }\n        if (this._state.replaceString) {\n            this._replaceInput.inputBox.addToHistory();\n        }\n    }\n    _updateMatchesCount() {\n        this._matchesCount.style.minWidth = MAX_MATCHES_COUNT_WIDTH + 'px';\n        if (this._state.matchesCount >= MATCHES_LIMIT) {\n            this._matchesCount.title = NLS_MATCHES_COUNT_LIMIT_TITLE;\n        }\n        else {\n            this._matchesCount.title = '';\n        }\n        // remove previous content\n        if (this._matchesCount.firstChild) {\n            this._matchesCount.removeChild(this._matchesCount.firstChild);\n        }\n        let label;\n        if (this._state.matchesCount > 0) {\n            let matchesCount = String(this._state.matchesCount);\n            if (this._state.matchesCount >= MATCHES_LIMIT) {\n                matchesCount += '+';\n            }\n            let matchesPosition = String(this._state.matchesPosition);\n            if (matchesPosition === '0') {\n                matchesPosition = '?';\n            }\n            label = strings.format(NLS_MATCHES_LOCATION, matchesPosition, matchesCount);\n        }\n        else {\n            label = NLS_NO_RESULTS;\n        }\n        this._matchesCount.appendChild(document.createTextNode(label));\n        alertFn(this._getAriaLabel(label, this._state.currentMatch, this._state.searchString));\n        MAX_MATCHES_COUNT_WIDTH = Math.max(MAX_MATCHES_COUNT_WIDTH, this._matchesCount.clientWidth);\n    }\n    // ----- actions\n    _getAriaLabel(label, currentMatch, searchString) {\n        if (label === NLS_NO_RESULTS) {\n            return searchString === ''\n                ? nls.localize('ariaSearchNoResultEmpty', \"{0} found\", label)\n                : nls.localize('ariaSearchNoResult', \"{0} found for '{1}'\", label, searchString);\n        }\n        if (currentMatch) {\n            const ariaLabel = nls.localize('ariaSearchNoResultWithLineNum', \"{0} found for '{1}', at {2}\", label, searchString, currentMatch.startLineNumber + ':' + currentMatch.startColumn);\n            const model = this._codeEditor.getModel();\n            if (model && (currentMatch.startLineNumber <= model.getLineCount()) && (currentMatch.startLineNumber >= 1)) {\n                const lineContent = model.getLineContent(currentMatch.startLineNumber);\n                return `${lineContent}, ${ariaLabel}`;\n            }\n            return ariaLabel;\n        }\n        return nls.localize('ariaSearchNoResultWithLineNumNoCurrentMatch', \"{0} found for '{1}'\", label, searchString);\n    }\n    /**\n     * If 'selection find' is ON we should not disable the button (its function is to cancel 'selection find').\n     * If 'selection find' is OFF we enable the button only if there is a selection.\n     */\n    _updateToggleSelectionFindButton() {\n        let selection = this._codeEditor.getSelection();\n        let isSelection = selection ? (selection.startLineNumber !== selection.endLineNumber || selection.startColumn !== selection.endColumn) : false;\n        let isChecked = this._toggleSelectionFind.checked;\n        if (this._isVisible && (isChecked || isSelection)) {\n            this._toggleSelectionFind.enable();\n        }\n        else {\n            this._toggleSelectionFind.disable();\n        }\n    }\n    _updateButtons() {\n        this._findInput.setEnabled(this._isVisible);\n        this._replaceInput.setEnabled(this._isVisible && this._isReplaceVisible);\n        this._updateToggleSelectionFindButton();\n        this._closeBtn.setEnabled(this._isVisible);\n        let findInputIsNonEmpty = (this._state.searchString.length > 0);\n        let matchesCount = this._state.matchesCount ? true : false;\n        this._prevBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateBack());\n        this._nextBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateForward());\n        this._replaceBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n        this._replaceAllBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n        this._domNode.classList.toggle('replaceToggled', this._isReplaceVisible);\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n        let canReplace = !this._codeEditor.getOption(81 /* readOnly */);\n        this._toggleReplaceBtn.setEnabled(this._isVisible && canReplace);\n    }\n    _reveal() {\n        this._revealTimeouts.forEach(e => {\n            clearTimeout(e);\n        });\n        this._revealTimeouts = [];\n        if (!this._isVisible) {\n            this._isVisible = true;\n            const selection = this._codeEditor.getSelection();\n            switch (this._codeEditor.getOption(35 /* find */).autoFindInSelection) {\n                case 'always':\n                    this._toggleSelectionFind.checked = true;\n                    break;\n                case 'never':\n                    this._toggleSelectionFind.checked = false;\n                    break;\n                case 'multiline': {\n                    const isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n                    this._toggleSelectionFind.checked = isSelectionMultipleLine;\n                    break;\n                }\n                default:\n                    break;\n            }\n            this._tryUpdateWidgetWidth();\n            this._updateButtons();\n            this._revealTimeouts.push(setTimeout(() => {\n                this._domNode.classList.add('visible');\n                this._domNode.setAttribute('aria-hidden', 'false');\n            }, 0));\n            // validate query again as it's being dismissed when we hide the find widget.\n            this._revealTimeouts.push(setTimeout(() => {\n                this._findInput.validate();\n            }, 200));\n            this._codeEditor.layoutOverlayWidget(this);\n            let adjustEditorScrollTop = true;\n            if (this._codeEditor.getOption(35 /* find */).seedSearchStringFromSelection && selection) {\n                const domNode = this._codeEditor.getDomNode();\n                if (domNode) {\n                    const editorCoords = dom.getDomNodePagePosition(domNode);\n                    const startCoords = this._codeEditor.getScrolledVisiblePosition(selection.getStartPosition());\n                    const startLeft = editorCoords.left + (startCoords ? startCoords.left : 0);\n                    const startTop = startCoords ? startCoords.top : 0;\n                    if (this._viewZone && startTop < this._viewZone.heightInPx) {\n                        if (selection.endLineNumber > selection.startLineNumber) {\n                            adjustEditorScrollTop = false;\n                        }\n                        const leftOfFindWidget = dom.getTopLeftOffset(this._domNode).left;\n                        if (startLeft > leftOfFindWidget) {\n                            adjustEditorScrollTop = false;\n                        }\n                        const endCoords = this._codeEditor.getScrolledVisiblePosition(selection.getEndPosition());\n                        const endLeft = editorCoords.left + (endCoords ? endCoords.left : 0);\n                        if (endLeft > leftOfFindWidget) {\n                            adjustEditorScrollTop = false;\n                        }\n                    }\n                }\n            }\n            this._showViewZone(adjustEditorScrollTop);\n        }\n    }\n    _hide(focusTheEditor) {\n        this._revealTimeouts.forEach(e => {\n            clearTimeout(e);\n        });\n        this._revealTimeouts = [];\n        if (this._isVisible) {\n            this._isVisible = false;\n            this._updateButtons();\n            this._domNode.classList.remove('visible');\n            this._domNode.setAttribute('aria-hidden', 'true');\n            this._findInput.clearMessage();\n            if (focusTheEditor) {\n                this._codeEditor.focus();\n            }\n            this._codeEditor.layoutOverlayWidget(this);\n            this._removeViewZone();\n        }\n    }\n    _layoutViewZone(targetScrollTop) {\n        const addExtraSpaceOnTop = this._codeEditor.getOption(35 /* find */).addExtraSpaceOnTop;\n        if (!addExtraSpaceOnTop) {\n            this._removeViewZone();\n            return;\n        }\n        if (!this._isVisible) {\n            return;\n        }\n        const viewZone = this._viewZone;\n        if (this._viewZoneId !== undefined || !viewZone) {\n            return;\n        }\n        this._codeEditor.changeViewZones((accessor) => {\n            viewZone.heightInPx = this._getHeight();\n            this._viewZoneId = accessor.addZone(viewZone);\n            // scroll top adjust to make sure the editor doesn't scroll when adding viewzone at the beginning.\n            this._codeEditor.setScrollTop(targetScrollTop || this._codeEditor.getScrollTop() + viewZone.heightInPx);\n        });\n    }\n    _showViewZone(adjustScroll = true) {\n        if (!this._isVisible) {\n            return;\n        }\n        const addExtraSpaceOnTop = this._codeEditor.getOption(35 /* find */).addExtraSpaceOnTop;\n        if (!addExtraSpaceOnTop) {\n            return;\n        }\n        if (this._viewZone === undefined) {\n            this._viewZone = new FindWidgetViewZone(0);\n        }\n        const viewZone = this._viewZone;\n        this._codeEditor.changeViewZones((accessor) => {\n            if (this._viewZoneId !== undefined) {\n                // the view zone already exists, we need to update the height\n                const newHeight = this._getHeight();\n                if (newHeight === viewZone.heightInPx) {\n                    return;\n                }\n                let scrollAdjustment = newHeight - viewZone.heightInPx;\n                viewZone.heightInPx = newHeight;\n                accessor.layoutZone(this._viewZoneId);\n                if (adjustScroll) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\n                }\n                return;\n            }\n            else {\n                let scrollAdjustment = this._getHeight();\n                // if the editor has top padding, factor that into the zone height\n                scrollAdjustment -= this._codeEditor.getOption(75 /* padding */).top;\n                if (scrollAdjustment <= 0) {\n                    return;\n                }\n                viewZone.heightInPx = scrollAdjustment;\n                this._viewZoneId = accessor.addZone(viewZone);\n                if (adjustScroll) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\n                }\n            }\n        });\n    }\n    _removeViewZone() {\n        this._codeEditor.changeViewZones((accessor) => {\n            if (this._viewZoneId !== undefined) {\n                accessor.removeZone(this._viewZoneId);\n                this._viewZoneId = undefined;\n                if (this._viewZone) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() - this._viewZone.heightInPx);\n                    this._viewZone = undefined;\n                }\n            }\n        });\n    }\n    _applyTheme(theme) {\n        let inputStyles = {\n            inputActiveOptionBorder: theme.getColor(inputActiveOptionBorder),\n            inputActiveOptionBackground: theme.getColor(inputActiveOptionBackground),\n            inputActiveOptionForeground: theme.getColor(inputActiveOptionForeground),\n            inputBackground: theme.getColor(inputBackground),\n            inputForeground: theme.getColor(inputForeground),\n            inputBorder: theme.getColor(inputBorder),\n            inputValidationInfoBackground: theme.getColor(inputValidationInfoBackground),\n            inputValidationInfoForeground: theme.getColor(inputValidationInfoForeground),\n            inputValidationInfoBorder: theme.getColor(inputValidationInfoBorder),\n            inputValidationWarningBackground: theme.getColor(inputValidationWarningBackground),\n            inputValidationWarningForeground: theme.getColor(inputValidationWarningForeground),\n            inputValidationWarningBorder: theme.getColor(inputValidationWarningBorder),\n            inputValidationErrorBackground: theme.getColor(inputValidationErrorBackground),\n            inputValidationErrorForeground: theme.getColor(inputValidationErrorForeground),\n            inputValidationErrorBorder: theme.getColor(inputValidationErrorBorder),\n        };\n        this._findInput.style(inputStyles);\n        this._replaceInput.style(inputStyles);\n        this._toggleSelectionFind.style(inputStyles);\n    }\n    _tryUpdateWidgetWidth() {\n        if (!this._isVisible) {\n            return;\n        }\n        if (!dom.isInDOM(this._domNode)) {\n            // the widget is not in the DOM\n            return;\n        }\n        const layoutInfo = this._codeEditor.getLayoutInfo();\n        const editorContentWidth = layoutInfo.contentWidth;\n        if (editorContentWidth <= 0) {\n            // for example, diff view original editor\n            this._domNode.classList.add('hiddenEditor');\n            return;\n        }\n        else if (this._domNode.classList.contains('hiddenEditor')) {\n            this._domNode.classList.remove('hiddenEditor');\n        }\n        const editorWidth = layoutInfo.width;\n        const minimapWidth = layoutInfo.minimap.minimapWidth;\n        let collapsedFindWidget = false;\n        let reducedFindWidget = false;\n        let narrowFindWidget = false;\n        if (this._resized) {\n            let widgetWidth = dom.getTotalWidth(this._domNode);\n            if (widgetWidth > FIND_WIDGET_INITIAL_WIDTH) {\n                // as the widget is resized by users, we may need to change the max width of the widget as the editor width changes.\n                this._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                return;\n            }\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth >= editorWidth) {\n            reducedFindWidget = true;\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth) {\n            narrowFindWidget = true;\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth + 50) {\n            collapsedFindWidget = true;\n        }\n        this._domNode.classList.toggle('collapsed-find-widget', collapsedFindWidget);\n        this._domNode.classList.toggle('narrow-find-widget', narrowFindWidget);\n        this._domNode.classList.toggle('reduced-find-widget', reducedFindWidget);\n        if (!narrowFindWidget && !collapsedFindWidget) {\n            // the minimal left offset of findwidget is 15px.\n            this._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n        }\n        if (this._resized) {\n            this._findInput.inputBox.layout();\n            let findInputWidth = this._findInput.inputBox.element.clientWidth;\n            if (findInputWidth > 0) {\n                this._replaceInput.width = findInputWidth;\n            }\n        }\n        else if (this._isReplaceVisible) {\n            this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n        }\n    }\n    _getHeight() {\n        let totalheight = 0;\n        // find input margin top\n        totalheight += 4;\n        // find input height\n        totalheight += this._findInput.inputBox.height + 2 /** input box border */;\n        if (this._isReplaceVisible) {\n            // replace input margin\n            totalheight += 4;\n            totalheight += this._replaceInput.inputBox.height + 2 /** input box border */;\n        }\n        // margin bottom\n        totalheight += 4;\n        return totalheight;\n    }\n    _tryUpdateHeight() {\n        const totalHeight = this._getHeight();\n        if (this._cachedHeight !== null && this._cachedHeight === totalHeight) {\n            return false;\n        }\n        this._cachedHeight = totalHeight;\n        this._domNode.style.height = `${totalHeight}px`;\n        return true;\n    }\n    // ----- Public\n    focusFindInput() {\n        this._findInput.select();\n        // Edge browser requires focus() in addition to select()\n        this._findInput.focus();\n    }\n    focusReplaceInput() {\n        this._replaceInput.select();\n        // Edge browser requires focus() in addition to select()\n        this._replaceInput.focus();\n    }\n    highlightFindOptions() {\n        this._findInput.highlightFindOptions();\n    }\n    _updateSearchScope() {\n        if (!this._codeEditor.hasModel()) {\n            return;\n        }\n        if (this._toggleSelectionFind.checked) {\n            let selections = this._codeEditor.getSelections();\n            selections.map(selection => {\n                if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                    selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                }\n                const currentMatch = this._state.currentMatch;\n                if (selection.startLineNumber !== selection.endLineNumber) {\n                    if (!Range.equalsRange(selection, currentMatch)) {\n                        return selection;\n                    }\n                }\n                return null;\n            }).filter(element => !!element);\n            if (selections.length) {\n                this._state.change({ searchScope: selections }, true);\n            }\n        }\n    }\n    _onFindInputMouseDown(e) {\n        // on linux, middle key does pasting.\n        if (e.middleButton) {\n            e.stopPropagation();\n        }\n    }\n    _onFindInputKeyDown(e) {\n        if (e.equals(ctrlKeyMod | 3 /* Enter */)) {\n            if (this._keybindingService.dispatchEvent(e, e.target)) {\n                e.preventDefault();\n                return;\n            }\n            else {\n                this._findInput.inputBox.insertAtCursor('\\n');\n                e.preventDefault();\n                return;\n            }\n        }\n        if (e.equals(2 /* Tab */)) {\n            if (this._isReplaceVisible) {\n                this._replaceInput.focus();\n            }\n            else {\n                this._findInput.focusOnCaseSensitive();\n            }\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(2048 /* CtrlCmd */ | 18 /* DownArrow */)) {\n            this._codeEditor.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(16 /* UpArrow */)) {\n            return stopPropagationForMultiLineUpwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n        }\n        if (e.equals(18 /* DownArrow */)) {\n            return stopPropagationForMultiLineDownwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n        }\n    }\n    _onReplaceInputKeyDown(e) {\n        if (e.equals(ctrlKeyMod | 3 /* Enter */)) {\n            if (this._keybindingService.dispatchEvent(e, e.target)) {\n                e.preventDefault();\n                return;\n            }\n            else {\n                if (platform.isWindows && platform.isNative && !this._ctrlEnterReplaceAllWarningPrompted) {\n                    // this is the first time when users press Ctrl + Enter to replace all\n                    this._notificationService.info(nls.localize('ctrlEnter.keybindingChanged', 'Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.'));\n                    this._ctrlEnterReplaceAllWarningPrompted = true;\n                    this._storageService.store(ctrlEnterReplaceAllWarningPromptedKey, true, 0 /* GLOBAL */, 0 /* USER */);\n                }\n                this._replaceInput.inputBox.insertAtCursor('\\n');\n                e.preventDefault();\n                return;\n            }\n        }\n        if (e.equals(2 /* Tab */)) {\n            this._findInput.focusOnCaseSensitive();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(1024 /* Shift */ | 2 /* Tab */)) {\n            this._findInput.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(2048 /* CtrlCmd */ | 18 /* DownArrow */)) {\n            this._codeEditor.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(16 /* UpArrow */)) {\n            return stopPropagationForMultiLineUpwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n        }\n        if (e.equals(18 /* DownArrow */)) {\n            return stopPropagationForMultiLineDownwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n        }\n    }\n    // ----- sash\n    getVerticalSashLeft(_sash) {\n        return 0;\n    }\n    // ----- initialization\n    _keybindingLabelFor(actionId) {\n        let kb = this._keybindingService.lookupKeybinding(actionId);\n        if (!kb) {\n            return '';\n        }\n        return ` (${kb.getLabel()})`;\n    }\n    _buildDomNode() {\n        const flexibleHeight = true;\n        const flexibleWidth = true;\n        // Find input\n        this._findInput = this._register(new ContextScopedFindInput(null, this._contextViewProvider, {\n            width: FIND_INPUT_AREA_WIDTH,\n            label: NLS_FIND_INPUT_LABEL,\n            placeholder: NLS_FIND_INPUT_PLACEHOLDER,\n            appendCaseSensitiveLabel: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n            appendWholeWordsLabel: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n            appendRegexLabel: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n            validation: (value) => {\n                if (value.length === 0 || !this._findInput.getRegex()) {\n                    return null;\n                }\n                try {\n                    // use `g` and `u` which are also used by the TextModel search\n                    new RegExp(value, 'gu');\n                    return null;\n                }\n                catch (e) {\n                    return { content: e.message };\n                }\n            },\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight: 118,\n            showHistoryHint: () => showHistoryKeybindingHint(this._keybindingService)\n        }, this._contextKeyService, true));\n        this._findInput.setRegex(!!this._state.isRegex);\n        this._findInput.setCaseSensitive(!!this._state.matchCase);\n        this._findInput.setWholeWords(!!this._state.wholeWord);\n        this._register(this._findInput.onKeyDown((e) => this._onFindInputKeyDown(e)));\n        this._register(this._findInput.inputBox.onDidChange(() => {\n            if (this._ignoreChangeEvent) {\n                return;\n            }\n            this._state.change({ searchString: this._findInput.getValue() }, true);\n        }));\n        this._register(this._findInput.onDidOptionChange(() => {\n            this._state.change({\n                isRegex: this._findInput.getRegex(),\n                wholeWord: this._findInput.getWholeWords(),\n                matchCase: this._findInput.getCaseSensitive()\n            }, true);\n        }));\n        this._register(this._findInput.onCaseSensitiveKeyDown((e) => {\n            if (e.equals(1024 /* Shift */ | 2 /* Tab */)) {\n                if (this._isReplaceVisible) {\n                    this._replaceInput.focus();\n                    e.preventDefault();\n                }\n            }\n        }));\n        this._register(this._findInput.onRegexKeyDown((e) => {\n            if (e.equals(2 /* Tab */)) {\n                if (this._isReplaceVisible) {\n                    this._replaceInput.focusOnPreserve();\n                    e.preventDefault();\n                }\n            }\n        }));\n        this._register(this._findInput.inputBox.onDidHeightChange((e) => {\n            if (this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }));\n        if (platform.isLinux) {\n            this._register(this._findInput.onMouseDown((e) => this._onFindInputMouseDown(e)));\n        }\n        this._matchesCount = document.createElement('div');\n        this._matchesCount.className = 'matchesCount';\n        this._updateMatchesCount();\n        // Previous button\n        this._prevBtn = this._register(new SimpleButton({\n            label: NLS_PREVIOUS_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.PreviousMatchFindAction),\n            icon: findPreviousMatchIcon,\n            onTrigger: () => {\n                this._codeEditor.getAction(FIND_IDS.PreviousMatchFindAction).run().then(undefined, onUnexpectedError);\n            }\n        }));\n        // Next button\n        this._nextBtn = this._register(new SimpleButton({\n            label: NLS_NEXT_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.NextMatchFindAction),\n            icon: findNextMatchIcon,\n            onTrigger: () => {\n                this._codeEditor.getAction(FIND_IDS.NextMatchFindAction).run().then(undefined, onUnexpectedError);\n            }\n        }));\n        let findPart = document.createElement('div');\n        findPart.className = 'find-part';\n        findPart.appendChild(this._findInput.domNode);\n        const actionsContainer = document.createElement('div');\n        actionsContainer.className = 'find-actions';\n        findPart.appendChild(actionsContainer);\n        actionsContainer.appendChild(this._matchesCount);\n        actionsContainer.appendChild(this._prevBtn.domNode);\n        actionsContainer.appendChild(this._nextBtn.domNode);\n        // Toggle selection button\n        this._toggleSelectionFind = this._register(new Checkbox({\n            icon: findSelectionIcon,\n            title: NLS_TOGGLE_SELECTION_FIND_TITLE + this._keybindingLabelFor(FIND_IDS.ToggleSearchScopeCommand),\n            isChecked: false\n        }));\n        this._register(this._toggleSelectionFind.onChange(() => {\n            if (this._toggleSelectionFind.checked) {\n                if (this._codeEditor.hasModel()) {\n                    let selections = this._codeEditor.getSelections();\n                    selections.map(selection => {\n                        if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                            selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                        }\n                        if (!selection.isEmpty()) {\n                            return selection;\n                        }\n                        return null;\n                    }).filter(element => !!element);\n                    if (selections.length) {\n                        this._state.change({ searchScope: selections }, true);\n                    }\n                }\n            }\n            else {\n                this._state.change({ searchScope: null }, true);\n            }\n        }));\n        actionsContainer.appendChild(this._toggleSelectionFind.domNode);\n        // Close button\n        this._closeBtn = this._register(new SimpleButton({\n            label: NLS_CLOSE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.CloseFindWidgetCommand),\n            icon: widgetClose,\n            onTrigger: () => {\n                this._state.change({ isRevealed: false, searchScope: null }, false);\n            },\n            onKeyDown: (e) => {\n                if (e.equals(2 /* Tab */)) {\n                    if (this._isReplaceVisible) {\n                        if (this._replaceBtn.isEnabled()) {\n                            this._replaceBtn.focus();\n                        }\n                        else {\n                            this._codeEditor.focus();\n                        }\n                        e.preventDefault();\n                    }\n                }\n            }\n        }));\n        actionsContainer.appendChild(this._closeBtn.domNode);\n        // Replace input\n        this._replaceInput = this._register(new ContextScopedReplaceInput(null, undefined, {\n            label: NLS_REPLACE_INPUT_LABEL,\n            placeholder: NLS_REPLACE_INPUT_PLACEHOLDER,\n            appendPreserveCaseLabel: this._keybindingLabelFor(FIND_IDS.TogglePreserveCaseCommand),\n            history: [],\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight: 118,\n            showHistoryHint: () => showHistoryKeybindingHint(this._keybindingService)\n        }, this._contextKeyService, true));\n        this._replaceInput.setPreserveCase(!!this._state.preserveCase);\n        this._register(this._replaceInput.onKeyDown((e) => this._onReplaceInputKeyDown(e)));\n        this._register(this._replaceInput.inputBox.onDidChange(() => {\n            this._state.change({ replaceString: this._replaceInput.inputBox.value }, false);\n        }));\n        this._register(this._replaceInput.inputBox.onDidHeightChange((e) => {\n            if (this._isReplaceVisible && this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }));\n        this._register(this._replaceInput.onDidOptionChange(() => {\n            this._state.change({\n                preserveCase: this._replaceInput.getPreserveCase()\n            }, true);\n        }));\n        this._register(this._replaceInput.onPreserveCaseKeyDown((e) => {\n            if (e.equals(2 /* Tab */)) {\n                if (this._prevBtn.isEnabled()) {\n                    this._prevBtn.focus();\n                }\n                else if (this._nextBtn.isEnabled()) {\n                    this._nextBtn.focus();\n                }\n                else if (this._toggleSelectionFind.enabled) {\n                    this._toggleSelectionFind.focus();\n                }\n                else if (this._closeBtn.isEnabled()) {\n                    this._closeBtn.focus();\n                }\n                e.preventDefault();\n            }\n        }));\n        // Replace one button\n        this._replaceBtn = this._register(new SimpleButton({\n            label: NLS_REPLACE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceOneAction),\n            icon: findReplaceIcon,\n            onTrigger: () => {\n                this._controller.replace();\n            },\n            onKeyDown: (e) => {\n                if (e.equals(1024 /* Shift */ | 2 /* Tab */)) {\n                    this._closeBtn.focus();\n                    e.preventDefault();\n                }\n            }\n        }));\n        // Replace all button\n        this._replaceAllBtn = this._register(new SimpleButton({\n            label: NLS_REPLACE_ALL_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceAllAction),\n            icon: findReplaceAllIcon,\n            onTrigger: () => {\n                this._controller.replaceAll();\n            }\n        }));\n        let replacePart = document.createElement('div');\n        replacePart.className = 'replace-part';\n        replacePart.appendChild(this._replaceInput.domNode);\n        const replaceActionsContainer = document.createElement('div');\n        replaceActionsContainer.className = 'replace-actions';\n        replacePart.appendChild(replaceActionsContainer);\n        replaceActionsContainer.appendChild(this._replaceBtn.domNode);\n        replaceActionsContainer.appendChild(this._replaceAllBtn.domNode);\n        // Toggle replace button\n        this._toggleReplaceBtn = this._register(new SimpleButton({\n            label: NLS_TOGGLE_REPLACE_MODE_BTN_LABEL,\n            className: 'codicon toggle left',\n            onTrigger: () => {\n                this._state.change({ isReplaceRevealed: !this._isReplaceVisible }, false);\n                if (this._isReplaceVisible) {\n                    this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                    this._replaceInput.inputBox.layout();\n                }\n                this._showViewZone();\n            }\n        }));\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n        // Widget\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'editor-widget find-widget';\n        this._domNode.setAttribute('aria-hidden', 'true');\n        // We need to set this explicitly, otherwise on IE11, the width inheritence of flex doesn't work.\n        this._domNode.style.width = `${FIND_WIDGET_INITIAL_WIDTH}px`;\n        this._domNode.appendChild(this._toggleReplaceBtn.domNode);\n        this._domNode.appendChild(findPart);\n        this._domNode.appendChild(replacePart);\n        this._resizeSash = new Sash(this._domNode, this, { orientation: 0 /* VERTICAL */, size: 2 });\n        this._resized = false;\n        let originalWidth = FIND_WIDGET_INITIAL_WIDTH;\n        this._register(this._resizeSash.onDidStart(() => {\n            originalWidth = dom.getTotalWidth(this._domNode);\n        }));\n        this._register(this._resizeSash.onDidChange((evt) => {\n            this._resized = true;\n            let width = originalWidth + evt.startX - evt.currentX;\n            if (width < FIND_WIDGET_INITIAL_WIDTH) {\n                // narrow down the find widget should be handled by CSS.\n                return;\n            }\n            const maxWidth = parseFloat(dom.getComputedStyle(this._domNode).maxWidth) || 0;\n            if (width > maxWidth) {\n                return;\n            }\n            this._domNode.style.width = `${width}px`;\n            if (this._isReplaceVisible) {\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n            }\n            this._findInput.inputBox.layout();\n            this._tryUpdateHeight();\n        }));\n        this._register(this._resizeSash.onDidReset(() => {\n            // users double click on the sash\n            const currentWidth = dom.getTotalWidth(this._domNode);\n            if (currentWidth < FIND_WIDGET_INITIAL_WIDTH) {\n                // The editor is narrow and the width of the find widget is controlled fully by CSS.\n                return;\n            }\n            let width = FIND_WIDGET_INITIAL_WIDTH;\n            if (!this._resized || currentWidth === FIND_WIDGET_INITIAL_WIDTH) {\n                // 1. never resized before, double click should maximizes it\n                // 2. users resized it already but its width is the same as default\n                const layoutInfo = this._codeEditor.getLayoutInfo();\n                width = layoutInfo.width - 28 - layoutInfo.minimap.minimapWidth - 15;\n                this._resized = true;\n            }\n            else {\n                /**\n                 * no op, the find widget should be shrinked to its default size.\n                 */\n            }\n            this._domNode.style.width = `${width}px`;\n            if (this._isReplaceVisible) {\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n            }\n            this._findInput.inputBox.layout();\n        }));\n    }\n    updateAccessibilitySupport() {\n        const value = this._codeEditor.getOption(2 /* accessibilitySupport */);\n        this._findInput.setFocusInputOnOptionClick(value !== 2 /* Enabled */);\n    }\n}\nFindWidget.ID = 'editor.contrib.findWidget';\nexport class SimpleButton extends Widget {\n    constructor(opts) {\n        super();\n        this._opts = opts;\n        let className = 'button';\n        if (this._opts.className) {\n            className = className + ' ' + this._opts.className;\n        }\n        if (this._opts.icon) {\n            className = className + ' ' + ThemeIcon.asClassName(this._opts.icon);\n        }\n        this._domNode = document.createElement('div');\n        this._domNode.title = this._opts.label;\n        this._domNode.tabIndex = 0;\n        this._domNode.className = className;\n        this._domNode.setAttribute('role', 'button');\n        this._domNode.setAttribute('aria-label', this._opts.label);\n        this.onclick(this._domNode, (e) => {\n            this._opts.onTrigger();\n            e.preventDefault();\n        });\n        this.onkeydown(this._domNode, (e) => {\n            if (e.equals(10 /* Space */) || e.equals(3 /* Enter */)) {\n                this._opts.onTrigger();\n                e.preventDefault();\n                return;\n            }\n            if (this._opts.onKeyDown) {\n                this._opts.onKeyDown(e);\n            }\n        });\n    }\n    get domNode() {\n        return this._domNode;\n    }\n    isEnabled() {\n        return (this._domNode.tabIndex >= 0);\n    }\n    focus() {\n        this._domNode.focus();\n    }\n    setEnabled(enabled) {\n        this._domNode.classList.toggle('disabled', !enabled);\n        this._domNode.setAttribute('aria-disabled', String(!enabled));\n        this._domNode.tabIndex = enabled ? 0 : -1;\n    }\n    setExpanded(expanded) {\n        this._domNode.setAttribute('aria-expanded', String(!!expanded));\n        if (expanded) {\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(findCollapsedIcon));\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(findExpandedIcon));\n        }\n        else {\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(findExpandedIcon));\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(findCollapsedIcon));\n        }\n    }\n}\n// theming\nregisterThemingParticipant((theme, collector) => {\n    const addBackgroundColorRule = (selector, color) => {\n        if (color) {\n            collector.addRule(`.monaco-editor ${selector} { background-color: ${color}; }`);\n        }\n    };\n    addBackgroundColorRule('.findMatch', theme.getColor(editorFindMatchHighlight));\n    addBackgroundColorRule('.currentFindMatch', theme.getColor(editorFindMatch));\n    addBackgroundColorRule('.findScope', theme.getColor(editorFindRangeHighlight));\n    const widgetBackground = theme.getColor(editorWidgetBackground);\n    addBackgroundColorRule('.find-widget', widgetBackground);\n    const widgetShadowColor = theme.getColor(widgetShadow);\n    if (widgetShadowColor) {\n        collector.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${widgetShadowColor}; }`);\n    }\n    const findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\n    if (findMatchHighlightBorder) {\n        collector.addRule(`.monaco-editor .findMatch { border: 1px ${theme.type === 'hc' ? 'dotted' : 'solid'} ${findMatchHighlightBorder}; box-sizing: border-box; }`);\n    }\n    const findMatchBorder = theme.getColor(editorFindMatchBorder);\n    if (findMatchBorder) {\n        collector.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${findMatchBorder}; padding: 1px; box-sizing: border-box; }`);\n    }\n    const findRangeHighlightBorder = theme.getColor(editorFindRangeHighlightBorder);\n    if (findRangeHighlightBorder) {\n        collector.addRule(`.monaco-editor .findScope { border: 1px ${theme.type === 'hc' ? 'dashed' : 'solid'} ${findRangeHighlightBorder}; }`);\n    }\n    const hcBorder = theme.getColor(contrastBorder);\n    if (hcBorder) {\n        collector.addRule(`.monaco-editor .find-widget { border: 1px solid ${hcBorder}; }`);\n    }\n    const foreground = theme.getColor(editorWidgetForeground);\n    if (foreground) {\n        collector.addRule(`.monaco-editor .find-widget { color: ${foreground}; }`);\n    }\n    const error = theme.getColor(errorForeground);\n    if (error) {\n        collector.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${error}; }`);\n    }\n    const resizeBorderBackground = theme.getColor(editorWidgetResizeBorder);\n    if (resizeBorderBackground) {\n        collector.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${resizeBorderBackground}; }`);\n    }\n    else {\n        const border = theme.getColor(editorWidgetBorder);\n        if (border) {\n            collector.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${border}; }`);\n        }\n    }\n    // Action bars\n    const toolbarHoverBackgroundColor = theme.getColor(toolbarHoverBackground);\n    if (toolbarHoverBackgroundColor) {\n        collector.addRule(`\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\n\t\t\tbackground-color: ${toolbarHoverBackgroundColor} !important;\n\t\t}\n\t`);\n    }\n    // This rule is used to override the outline color for synthetic-focus find input.\n    const focusOutline = theme.getColor(focusBorder);\n    if (focusOutline) {\n        collector.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${focusOutline}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function showHistoryKeybindingHint(keybindingService) {\n    var _a, _b;\n    return ((_a = keybindingService.lookupKeybinding('history.showPrevious')) === null || _a === void 0 ? void 0 : _a.getElectronAccelerator()) === 'Up' && ((_b = keybindingService.lookupKeybinding('history.showNext')) === null || _b === void 0 ? void 0 : _b.getElectronAccelerator()) === 'Down';\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise, Delayer, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport * as types from '../../../../base/common/types.js';\nimport './folding.css';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerInstantiatedEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { FoldingRangeKind } from '../../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { FoldingModel, getNextFoldLine, getParentFoldLine as getParentFoldLine, getPreviousFoldLine, setCollapseStateAtLevel, setCollapseStateForMatchingLines, setCollapseStateForRest, setCollapseStateForType, setCollapseStateLevelsDown, setCollapseStateLevelsUp, setCollapseStateUp, toggleCollapseState } from './foldingModel.js';\nimport { HiddenRangeModel } from './hiddenRangeModel.js';\nimport { IndentRangeProvider } from './indentRangeProvider.js';\nimport { ID_INIT_PROVIDER, InitializingRangeProvider } from './intializingRangeProvider.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { editorSelectionBackground, iconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nimport { foldingCollapsedIcon, FoldingDecorationProvider, foldingExpandedIcon } from './foldingDecorations.js';\nimport { ID_SYNTAX_PROVIDER, SyntaxRangeProvider } from './syntaxRangeProvider.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport Severity from '../../../../base/common/severity.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nconst CONTEXT_FOLDING_ENABLED = new RawContextKey('foldingEnabled', false);\nlet FoldingController = class FoldingController extends Disposable {\n    constructor(editor, contextKeyService, languageConfigurationService, notificationService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this.contextKeyService = contextKeyService;\n        this.languageConfigurationService = languageConfigurationService;\n        this.languageFeaturesService = languageFeaturesService;\n        this._tooManyRegionsNotified = false;\n        this.localToDispose = this._register(new DisposableStore());\n        this.editor = editor;\n        const options = this.editor.getOptions();\n        this._isEnabled = options.get(37 /* folding */);\n        this._useFoldingProviders = options.get(38 /* foldingStrategy */) !== 'indentation';\n        this._unfoldOnClickAfterEndOfLine = options.get(42 /* unfoldOnClickAfterEndOfLine */);\n        this._restoringViewState = false;\n        this._currentModelHasFoldedImports = false;\n        this._foldingImportsByDefault = options.get(40 /* foldingImportsByDefault */);\n        this._maxFoldingRegions = options.get(41 /* foldingMaximumRegions */);\n        this.updateDebounceInfo = languageFeatureDebounceService.for(languageFeaturesService.foldingRangeProvider, 'Folding', { min: 200 });\n        this.foldingModel = null;\n        this.hiddenRangeModel = null;\n        this.rangeProvider = null;\n        this.foldingRegionPromise = null;\n        this.foldingStateMemento = null;\n        this.foldingModelPromise = null;\n        this.updateScheduler = null;\n        this.cursorChangedScheduler = null;\n        this.mouseDownInfo = null;\n        this.foldingDecorationProvider = new FoldingDecorationProvider(editor);\n        this.foldingDecorationProvider.autoHideFoldingControls = options.get(99 /* showFoldingControls */) === 'mouseover';\n        this.foldingDecorationProvider.showFoldingHighlights = options.get(39 /* foldingHighlight */);\n        this.foldingEnabled = CONTEXT_FOLDING_ENABLED.bindTo(this.contextKeyService);\n        this.foldingEnabled.set(this._isEnabled);\n        this._notifyTooManyRegions = (maxFoldingRegions) => {\n            // Message will display once per time vscode runs. Once per file would be tricky.\n            if (!this._tooManyRegionsNotified) {\n                notificationService.notify({\n                    severity: Severity.Warning,\n                    sticky: true,\n                    message: nls.localize('maximum fold ranges', \"The number of foldable regions is limited to a maximum of {0}. Increase configuration option ['Folding Maximum Regions'](command:workbench.action.openSettings?[\\\"editor.foldingMaximumRegions\\\"]) to enable more.\", maxFoldingRegions)\n                });\n                this._tooManyRegionsNotified = true;\n            }\n        };\n        this._register(this.editor.onDidChangeModel(() => this.onModelChanged()));\n        this._register(this.editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(37 /* folding */)) {\n                this._isEnabled = this.editor.getOptions().get(37 /* folding */);\n                this.foldingEnabled.set(this._isEnabled);\n                this.onModelChanged();\n            }\n            if (e.hasChanged(41 /* foldingMaximumRegions */)) {\n                this._maxFoldingRegions = this.editor.getOptions().get(41 /* foldingMaximumRegions */);\n                this._tooManyRegionsNotified = false;\n                this.onModelChanged();\n            }\n            if (e.hasChanged(99 /* showFoldingControls */) || e.hasChanged(39 /* foldingHighlight */)) {\n                const options = this.editor.getOptions();\n                this.foldingDecorationProvider.autoHideFoldingControls = options.get(99 /* showFoldingControls */) === 'mouseover';\n                this.foldingDecorationProvider.showFoldingHighlights = options.get(39 /* foldingHighlight */);\n                this.triggerFoldingModelChanged();\n            }\n            if (e.hasChanged(38 /* foldingStrategy */)) {\n                this._useFoldingProviders = this.editor.getOptions().get(38 /* foldingStrategy */) !== 'indentation';\n                this.onFoldingStrategyChanged();\n            }\n            if (e.hasChanged(42 /* unfoldOnClickAfterEndOfLine */)) {\n                this._unfoldOnClickAfterEndOfLine = this.editor.getOptions().get(42 /* unfoldOnClickAfterEndOfLine */);\n            }\n            if (e.hasChanged(40 /* foldingImportsByDefault */)) {\n                this._foldingImportsByDefault = this.editor.getOptions().get(40 /* foldingImportsByDefault */);\n            }\n        }));\n        this.onModelChanged();\n    }\n    static get(editor) {\n        return editor.getContribution(FoldingController.ID);\n    }\n    /**\n     * Store view state.\n     */\n    saveViewState() {\n        let model = this.editor.getModel();\n        if (!model || !this._isEnabled || model.isTooLargeForTokenization()) {\n            return {};\n        }\n        if (this.foldingModel) { // disposed ?\n            let collapsedRegions = this.foldingModel.isInitialized ? this.foldingModel.getMemento() : this.hiddenRangeModel.getMemento();\n            let provider = this.rangeProvider ? this.rangeProvider.id : undefined;\n            return { collapsedRegions, lineCount: model.getLineCount(), provider, foldedImports: this._currentModelHasFoldedImports };\n        }\n        return undefined;\n    }\n    /**\n     * Restore view state.\n     */\n    restoreViewState(state) {\n        let model = this.editor.getModel();\n        if (!model || !this._isEnabled || model.isTooLargeForTokenization() || !this.hiddenRangeModel) {\n            return;\n        }\n        if (!state || state.lineCount !== model.getLineCount()) {\n            return;\n        }\n        this._currentModelHasFoldedImports = !!state.foldedImports;\n        if (!state.collapsedRegions) {\n            return;\n        }\n        if (state.provider === ID_SYNTAX_PROVIDER || state.provider === ID_INIT_PROVIDER) {\n            this.foldingStateMemento = state;\n        }\n        const collapsedRegions = state.collapsedRegions;\n        // set the hidden ranges right away, before waiting for the folding model.\n        if (this.hiddenRangeModel.applyMemento(collapsedRegions)) {\n            const foldingModel = this.getFoldingModel();\n            if (foldingModel) {\n                foldingModel.then(foldingModel => {\n                    if (foldingModel) {\n                        this._restoringViewState = true;\n                        try {\n                            foldingModel.applyMemento(collapsedRegions);\n                        }\n                        finally {\n                            this._restoringViewState = false;\n                        }\n                    }\n                }).then(undefined, onUnexpectedError);\n            }\n        }\n    }\n    onModelChanged() {\n        this.localToDispose.clear();\n        let model = this.editor.getModel();\n        if (!this._isEnabled || !model || model.isTooLargeForTokenization()) {\n            // huge files get no view model, so they cannot support hidden areas\n            return;\n        }\n        this._currentModelHasFoldedImports = false;\n        this.foldingModel = new FoldingModel(model, this.foldingDecorationProvider);\n        this.localToDispose.add(this.foldingModel);\n        this.hiddenRangeModel = new HiddenRangeModel(this.foldingModel);\n        this.localToDispose.add(this.hiddenRangeModel);\n        this.localToDispose.add(this.hiddenRangeModel.onDidChange(hr => this.onHiddenRangesChanges(hr)));\n        this.updateScheduler = new Delayer(this.updateDebounceInfo.get(model));\n        this.cursorChangedScheduler = new RunOnceScheduler(() => this.revealCursor(), 200);\n        this.localToDispose.add(this.cursorChangedScheduler);\n        this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(() => this.onFoldingStrategyChanged()));\n        this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(() => this.onFoldingStrategyChanged())); // covers model language changes as well\n        this.localToDispose.add(this.editor.onDidChangeModelContent(e => this.onDidChangeModelContent(e)));\n        this.localToDispose.add(this.editor.onDidChangeCursorPosition(() => this.onCursorPositionChanged()));\n        this.localToDispose.add(this.editor.onMouseDown(e => this.onEditorMouseDown(e)));\n        this.localToDispose.add(this.editor.onMouseUp(e => this.onEditorMouseUp(e)));\n        this.localToDispose.add({\n            dispose: () => {\n                if (this.foldingRegionPromise) {\n                    this.foldingRegionPromise.cancel();\n                    this.foldingRegionPromise = null;\n                }\n                if (this.updateScheduler) {\n                    this.updateScheduler.cancel();\n                }\n                this.updateScheduler = null;\n                this.foldingModel = null;\n                this.foldingModelPromise = null;\n                this.hiddenRangeModel = null;\n                this.cursorChangedScheduler = null;\n                this.foldingStateMemento = null;\n                if (this.rangeProvider) {\n                    this.rangeProvider.dispose();\n                }\n                this.rangeProvider = null;\n            }\n        });\n        this.triggerFoldingModelChanged();\n    }\n    onFoldingStrategyChanged() {\n        if (this.rangeProvider) {\n            this.rangeProvider.dispose();\n        }\n        this.rangeProvider = null;\n        this.triggerFoldingModelChanged();\n    }\n    getRangeProvider(editorModel) {\n        if (this.rangeProvider) {\n            return this.rangeProvider;\n        }\n        this.rangeProvider = new IndentRangeProvider(editorModel, this.languageConfigurationService, this._maxFoldingRegions); // fallback\n        if (this._useFoldingProviders && this.foldingModel) {\n            let foldingProviders = this.languageFeaturesService.foldingRangeProvider.ordered(this.foldingModel.textModel);\n            if (foldingProviders.length === 0 && this.foldingStateMemento && this.foldingStateMemento.collapsedRegions) {\n                const rangeProvider = this.rangeProvider = new InitializingRangeProvider(editorModel, this.foldingStateMemento.collapsedRegions, () => {\n                    // if after 30 the InitializingRangeProvider is still not replaced, force a refresh\n                    this.foldingStateMemento = null;\n                    this.onFoldingStrategyChanged();\n                }, 30000);\n                return rangeProvider; // keep memento in case there are still no foldingProviders on the next request.\n            }\n            else if (foldingProviders.length > 0) {\n                this.rangeProvider = new SyntaxRangeProvider(editorModel, foldingProviders, () => this.triggerFoldingModelChanged(), this._maxFoldingRegions);\n            }\n        }\n        this.foldingStateMemento = null;\n        return this.rangeProvider;\n    }\n    getFoldingModel() {\n        return this.foldingModelPromise;\n    }\n    onDidChangeModelContent(e) {\n        var _a;\n        (_a = this.hiddenRangeModel) === null || _a === void 0 ? void 0 : _a.notifyChangeModelContent(e);\n        this.triggerFoldingModelChanged();\n    }\n    triggerFoldingModelChanged() {\n        if (this.updateScheduler) {\n            if (this.foldingRegionPromise) {\n                this.foldingRegionPromise.cancel();\n                this.foldingRegionPromise = null;\n            }\n            this.foldingModelPromise = this.updateScheduler.trigger(() => {\n                const foldingModel = this.foldingModel;\n                if (!foldingModel) { // null if editor has been disposed, or folding turned off\n                    return null;\n                }\n                const sw = new StopWatch(true);\n                const provider = this.getRangeProvider(foldingModel.textModel);\n                let foldingRegionPromise = this.foldingRegionPromise = createCancelablePromise(token => provider.compute(token, this._notifyTooManyRegions));\n                return foldingRegionPromise.then(foldingRanges => {\n                    if (foldingRanges && foldingRegionPromise === this.foldingRegionPromise) { // new request or cancelled in the meantime?\n                        let scrollState;\n                        if (this._foldingImportsByDefault && !this._currentModelHasFoldedImports) {\n                            const hasChanges = foldingRanges.setCollapsedAllOfType(FoldingRangeKind.Imports.value, true);\n                            if (hasChanges) {\n                                scrollState = StableEditorScrollState.capture(this.editor);\n                                this._currentModelHasFoldedImports = hasChanges;\n                            }\n                        }\n                        // some cursors might have moved into hidden regions, make sure they are in expanded regions\n                        let selections = this.editor.getSelections();\n                        let selectionLineNumbers = selections ? selections.map(s => s.startLineNumber) : [];\n                        foldingModel.update(foldingRanges, selectionLineNumbers);\n                        if (scrollState) {\n                            scrollState.restore(this.editor);\n                        }\n                        // update debounce info\n                        const newValue = this.updateDebounceInfo.update(foldingModel.textModel, sw.elapsed());\n                        if (this.updateScheduler) {\n                            this.updateScheduler.defaultDelay = newValue;\n                        }\n                    }\n                    return foldingModel;\n                });\n            }).then(undefined, (err) => {\n                onUnexpectedError(err);\n                return null;\n            });\n        }\n    }\n    onHiddenRangesChanges(hiddenRanges) {\n        if (this.hiddenRangeModel && hiddenRanges.length && !this._restoringViewState) {\n            let selections = this.editor.getSelections();\n            if (selections) {\n                if (this.hiddenRangeModel.adjustSelections(selections)) {\n                    this.editor.setSelections(selections);\n                }\n            }\n        }\n        this.editor.setHiddenAreas(hiddenRanges);\n    }\n    onCursorPositionChanged() {\n        if (this.hiddenRangeModel && this.hiddenRangeModel.hasRanges()) {\n            this.cursorChangedScheduler.schedule();\n        }\n    }\n    revealCursor() {\n        const foldingModel = this.getFoldingModel();\n        if (!foldingModel) {\n            return;\n        }\n        foldingModel.then(foldingModel => {\n            if (foldingModel) {\n                let selections = this.editor.getSelections();\n                if (selections && selections.length > 0) {\n                    let toToggle = [];\n                    for (let selection of selections) {\n                        let lineNumber = selection.selectionStartLineNumber;\n                        if (this.hiddenRangeModel && this.hiddenRangeModel.isHidden(lineNumber)) {\n                            toToggle.push(...foldingModel.getAllRegionsAtLine(lineNumber, r => r.isCollapsed && lineNumber > r.startLineNumber));\n                        }\n                    }\n                    if (toToggle.length) {\n                        foldingModel.toggleCollapseState(toToggle);\n                        this.reveal(selections[0].getPosition());\n                    }\n                }\n            }\n        }).then(undefined, onUnexpectedError);\n    }\n    onEditorMouseDown(e) {\n        this.mouseDownInfo = null;\n        if (!this.hiddenRangeModel || !e.target || !e.target.range) {\n            return;\n        }\n        if (!e.event.leftButton && !e.event.middleButton) {\n            return;\n        }\n        const range = e.target.range;\n        let iconClicked = false;\n        switch (e.target.type) {\n            case 4 /* GUTTER_LINE_DECORATIONS */: {\n                const data = e.target.detail;\n                const offsetLeftInGutter = e.target.element.offsetLeft;\n                const gutterOffsetX = data.offsetX - offsetLeftInGutter;\n                // const gutterOffsetX = data.offsetX - data.glyphMarginWidth - data.lineNumbersWidth - data.glyphMarginLeft;\n                // TODO@joao TODO@alex TODO@martin this is such that we don't collide with dirty diff\n                if (gutterOffsetX < 5) { // the whitespace between the border and the real folding icon border is 5px\n                    return;\n                }\n                iconClicked = true;\n                break;\n            }\n            case 7 /* CONTENT_EMPTY */: {\n                if (this._unfoldOnClickAfterEndOfLine && this.hiddenRangeModel.hasRanges()) {\n                    const data = e.target.detail;\n                    if (!data.isAfterLines) {\n                        break;\n                    }\n                }\n                return;\n            }\n            case 6 /* CONTENT_TEXT */: {\n                if (this.hiddenRangeModel.hasRanges()) {\n                    let model = this.editor.getModel();\n                    if (model && range.startColumn === model.getLineMaxColumn(range.startLineNumber)) {\n                        break;\n                    }\n                }\n                return;\n            }\n            default:\n                return;\n        }\n        this.mouseDownInfo = { lineNumber: range.startLineNumber, iconClicked };\n    }\n    onEditorMouseUp(e) {\n        const foldingModel = this.getFoldingModel();\n        if (!foldingModel || !this.mouseDownInfo || !e.target) {\n            return;\n        }\n        let lineNumber = this.mouseDownInfo.lineNumber;\n        let iconClicked = this.mouseDownInfo.iconClicked;\n        let range = e.target.range;\n        if (!range || range.startLineNumber !== lineNumber) {\n            return;\n        }\n        if (iconClicked) {\n            if (e.target.type !== 4 /* GUTTER_LINE_DECORATIONS */) {\n                return;\n            }\n        }\n        else {\n            let model = this.editor.getModel();\n            if (!model || range.startColumn !== model.getLineMaxColumn(lineNumber)) {\n                return;\n            }\n        }\n        foldingModel.then(foldingModel => {\n            if (foldingModel) {\n                let region = foldingModel.getRegionAtLine(lineNumber);\n                if (region && region.startLineNumber === lineNumber) {\n                    let isCollapsed = region.isCollapsed;\n                    if (iconClicked || isCollapsed) {\n                        let surrounding = e.event.altKey;\n                        let toToggle = [];\n                        if (surrounding) {\n                            let filter = (otherRegion) => !otherRegion.containedBy(region) && !region.containedBy(otherRegion);\n                            let toMaybeToggle = foldingModel.getRegionsInside(null, filter);\n                            for (const r of toMaybeToggle) {\n                                if (r.isCollapsed) {\n                                    toToggle.push(r);\n                                }\n                            }\n                            // if any surrounding regions are folded, unfold those. Otherwise, fold all surrounding\n                            if (toToggle.length === 0) {\n                                toToggle = toMaybeToggle;\n                            }\n                        }\n                        else {\n                            let recursive = e.event.middleButton || e.event.shiftKey;\n                            if (recursive) {\n                                for (const r of foldingModel.getRegionsInside(region)) {\n                                    if (r.isCollapsed === isCollapsed) {\n                                        toToggle.push(r);\n                                    }\n                                }\n                            }\n                            // when recursive, first only collapse all children. If all are already folded or there are no children, also fold parent.\n                            if (isCollapsed || !recursive || toToggle.length === 0) {\n                                toToggle.push(region);\n                            }\n                        }\n                        foldingModel.toggleCollapseState(toToggle);\n                        this.reveal({ lineNumber, column: 1 });\n                    }\n                }\n            }\n        }).then(undefined, onUnexpectedError);\n    }\n    reveal(position) {\n        this.editor.revealPositionInCenterIfOutsideViewport(position, 0 /* Smooth */);\n    }\n};\nFoldingController.ID = 'editor.contrib.folding';\nFoldingController = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ILanguageConfigurationService),\n    __param(3, INotificationService),\n    __param(4, ILanguageFeatureDebounceService),\n    __param(5, ILanguageFeaturesService)\n], FoldingController);\nexport { FoldingController };\nclass FoldingAction extends EditorAction {\n    runEditorCommand(accessor, editor, args) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const foldingController = FoldingController.get(editor);\n        if (!foldingController) {\n            return;\n        }\n        const foldingModelPromise = foldingController.getFoldingModel();\n        if (foldingModelPromise) {\n            this.reportTelemetry(accessor, editor);\n            return foldingModelPromise.then(foldingModel => {\n                if (foldingModel) {\n                    this.invoke(foldingController, foldingModel, editor, args, languageConfigurationService);\n                    const selection = editor.getSelection();\n                    if (selection) {\n                        foldingController.reveal(selection.getStartPosition());\n                    }\n                }\n            });\n        }\n    }\n    getSelectedLines(editor) {\n        let selections = editor.getSelections();\n        return selections ? selections.map(s => s.startLineNumber) : [];\n    }\n    getLineNumbers(args, editor) {\n        if (args && args.selectionLines) {\n            return args.selectionLines.map(l => l + 1); // to 0-bases line numbers\n        }\n        return this.getSelectedLines(editor);\n    }\n    run(_accessor, _editor) {\n    }\n}\nfunction foldingArgumentsConstraint(args) {\n    if (!types.isUndefined(args)) {\n        if (!types.isObject(args)) {\n            return false;\n        }\n        const foldingArgs = args;\n        if (!types.isUndefined(foldingArgs.levels) && !types.isNumber(foldingArgs.levels)) {\n            return false;\n        }\n        if (!types.isUndefined(foldingArgs.direction) && !types.isString(foldingArgs.direction)) {\n            return false;\n        }\n        if (!types.isUndefined(foldingArgs.selectionLines) && (!types.isArray(foldingArgs.selectionLines) || !foldingArgs.selectionLines.every(types.isNumber))) {\n            return false;\n        }\n    }\n    return true;\n}\nclass UnfoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfold',\n            label: nls.localize('unfoldAction.label', \"Unfold\"),\n            alias: 'Unfold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 89 /* BracketRight */,\n                mac: {\n                    primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 89 /* BracketRight */\n                },\n                weight: 100 /* EditorContrib */\n            },\n            description: {\n                description: 'Unfold the content in the editor',\n                args: [\n                    {\n                        name: 'Unfold editor argument',\n                        description: `Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t`,\n                        constraint: foldingArgumentsConstraint,\n                        schema: {\n                            'type': 'object',\n                            'properties': {\n                                'levels': {\n                                    'type': 'number',\n                                    'default': 1\n                                },\n                                'direction': {\n                                    'type': 'string',\n                                    'enum': ['up', 'down'],\n                                    'default': 'down'\n                                },\n                                'selectionLines': {\n                                    'type': 'array',\n                                    'items': {\n                                        'type': 'number'\n                                    }\n                                }\n                            }\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args) {\n        let levels = args && args.levels || 1;\n        let lineNumbers = this.getLineNumbers(args, editor);\n        if (args && args.direction === 'up') {\n            setCollapseStateLevelsUp(foldingModel, false, levels, lineNumbers);\n        }\n        else {\n            setCollapseStateLevelsDown(foldingModel, false, levels, lineNumbers);\n        }\n    }\n}\nclass UnFoldRecursivelyAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldRecursively',\n            label: nls.localize('unFoldRecursivelyAction.label', \"Unfold Recursively\"),\n            alias: 'Unfold Recursively',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 89 /* BracketRight */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, _args) {\n        setCollapseStateLevelsDown(foldingModel, false, Number.MAX_VALUE, this.getSelectedLines(editor));\n    }\n}\nclass FoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.fold',\n            label: nls.localize('foldAction.label', \"Fold\"),\n            alias: 'Fold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 87 /* BracketLeft */,\n                mac: {\n                    primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 87 /* BracketLeft */\n                },\n                weight: 100 /* EditorContrib */\n            },\n            description: {\n                description: 'Fold the content in the editor',\n                args: [\n                    {\n                        name: 'Fold editor argument',\n                        description: `Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t`,\n                        constraint: foldingArgumentsConstraint,\n                        schema: {\n                            'type': 'object',\n                            'properties': {\n                                'levels': {\n                                    'type': 'number',\n                                },\n                                'direction': {\n                                    'type': 'string',\n                                    'enum': ['up', 'down'],\n                                },\n                                'selectionLines': {\n                                    'type': 'array',\n                                    'items': {\n                                        'type': 'number'\n                                    }\n                                }\n                            }\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args) {\n        let lineNumbers = this.getLineNumbers(args, editor);\n        const levels = args && args.levels;\n        const direction = args && args.direction;\n        if (typeof levels !== 'number' && typeof direction !== 'string') {\n            // fold the region at the location or if already collapsed, the first uncollapsed parent instead.\n            setCollapseStateUp(foldingModel, true, lineNumbers);\n        }\n        else {\n            if (direction === 'up') {\n                setCollapseStateLevelsUp(foldingModel, true, levels || 1, lineNumbers);\n            }\n            else {\n                setCollapseStateLevelsDown(foldingModel, true, levels || 1, lineNumbers);\n            }\n        }\n    }\n}\nclass ToggleFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.toggleFold',\n            label: nls.localize('toggleFoldAction.label', \"Toggle Fold\"),\n            alias: 'Toggle Fold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 42 /* KeyL */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        let selectedLines = this.getSelectedLines(editor);\n        toggleCollapseState(foldingModel, 1, selectedLines);\n    }\n}\nclass FoldRecursivelyAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldRecursively',\n            label: nls.localize('foldRecursivelyAction.label', \"Fold Recursively\"),\n            alias: 'Fold Recursively',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 87 /* BracketLeft */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        let selectedLines = this.getSelectedLines(editor);\n        setCollapseStateLevelsDown(foldingModel, true, Number.MAX_VALUE, selectedLines);\n    }\n}\nclass FoldAllBlockCommentsAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAllBlockComments',\n            label: nls.localize('foldAllBlockComments.label', \"Fold All Block Comments\"),\n            alias: 'Fold All Block Comments',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 85 /* Slash */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\n        if (foldingModel.regions.hasTypes()) {\n            setCollapseStateForType(foldingModel, FoldingRangeKind.Comment.value, true);\n        }\n        else {\n            const editorModel = editor.getModel();\n            if (!editorModel) {\n                return;\n            }\n            const comments = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).comments;\n            if (comments && comments.blockCommentStartToken) {\n                let regExp = new RegExp('^\\\\s*' + escapeRegExpCharacters(comments.blockCommentStartToken));\n                setCollapseStateForMatchingLines(foldingModel, regExp, true);\n            }\n        }\n    }\n}\nclass FoldAllRegionsAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAllMarkerRegions',\n            label: nls.localize('foldAllMarkerRegions.label', \"Fold All Regions\"),\n            alias: 'Fold All Regions',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 29 /* Digit8 */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\n        if (foldingModel.regions.hasTypes()) {\n            setCollapseStateForType(foldingModel, FoldingRangeKind.Region.value, true);\n        }\n        else {\n            const editorModel = editor.getModel();\n            if (!editorModel) {\n                return;\n            }\n            const foldingRules = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).foldingRules;\n            if (foldingRules && foldingRules.markers && foldingRules.markers.start) {\n                let regExp = new RegExp(foldingRules.markers.start);\n                setCollapseStateForMatchingLines(foldingModel, regExp, true);\n            }\n        }\n    }\n}\nclass UnfoldAllRegionsAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldAllMarkerRegions',\n            label: nls.localize('unfoldAllMarkerRegions.label', \"Unfold All Regions\"),\n            alias: 'Unfold All Regions',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 30 /* Digit9 */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\n        if (foldingModel.regions.hasTypes()) {\n            setCollapseStateForType(foldingModel, FoldingRangeKind.Region.value, false);\n        }\n        else {\n            const editorModel = editor.getModel();\n            if (!editorModel) {\n                return;\n            }\n            const foldingRules = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).foldingRules;\n            if (foldingRules && foldingRules.markers && foldingRules.markers.start) {\n                let regExp = new RegExp(foldingRules.markers.start);\n                setCollapseStateForMatchingLines(foldingModel, regExp, false);\n            }\n        }\n    }\n}\nclass FoldAllRegionsExceptAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAllExcept',\n            label: nls.localize('foldAllExcept.label', \"Fold All Regions Except Selected\"),\n            alias: 'Fold All Regions Except Selected',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 83 /* Minus */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        let selectedLines = this.getSelectedLines(editor);\n        setCollapseStateForRest(foldingModel, true, selectedLines);\n    }\n}\nclass UnfoldAllRegionsExceptAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldAllExcept',\n            label: nls.localize('unfoldAllExcept.label', \"Unfold All Regions Except Selected\"),\n            alias: 'Unfold All Regions Except Selected',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 81 /* Equal */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        let selectedLines = this.getSelectedLines(editor);\n        setCollapseStateForRest(foldingModel, false, selectedLines);\n    }\n}\nclass FoldAllAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAll',\n            label: nls.localize('foldAllAction.label', \"Fold All\"),\n            alias: 'Fold All',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 21 /* Digit0 */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, _editor) {\n        setCollapseStateLevelsDown(foldingModel, true);\n    }\n}\nclass UnfoldAllAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldAll',\n            label: nls.localize('unfoldAllAction.label', \"Unfold All\"),\n            alias: 'Unfold All',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 40 /* KeyJ */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, _editor) {\n        setCollapseStateLevelsDown(foldingModel, false);\n    }\n}\nclass FoldLevelAction extends FoldingAction {\n    getFoldingLevel() {\n        return parseInt(this.id.substr(FoldLevelAction.ID_PREFIX.length));\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        setCollapseStateAtLevel(foldingModel, this.getFoldingLevel(), true, this.getSelectedLines(editor));\n    }\n}\nFoldLevelAction.ID_PREFIX = 'editor.foldLevel';\nFoldLevelAction.ID = (level) => FoldLevelAction.ID_PREFIX + level;\n/** Action to go to the parent fold of current line */\nclass GotoParentFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.gotoParentFold',\n            label: nls.localize('gotoParentFold.label', \"Go to Parent Fold\"),\n            alias: 'Go to Parent Fold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        let selectedLines = this.getSelectedLines(editor);\n        if (selectedLines.length > 0) {\n            let startLineNumber = getParentFoldLine(selectedLines[0], foldingModel);\n            if (startLineNumber !== null) {\n                editor.setSelection({\n                    startLineNumber: startLineNumber,\n                    startColumn: 1,\n                    endLineNumber: startLineNumber,\n                    endColumn: 1\n                });\n            }\n        }\n    }\n}\n/** Action to go to the previous fold of current line */\nclass GotoPreviousFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.gotoPreviousFold',\n            label: nls.localize('gotoPreviousFold.label', \"Go to Previous Folding Range\"),\n            alias: 'Go to Previous Folding Range',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        let selectedLines = this.getSelectedLines(editor);\n        if (selectedLines.length > 0) {\n            let startLineNumber = getPreviousFoldLine(selectedLines[0], foldingModel);\n            if (startLineNumber !== null) {\n                editor.setSelection({\n                    startLineNumber: startLineNumber,\n                    startColumn: 1,\n                    endLineNumber: startLineNumber,\n                    endColumn: 1\n                });\n            }\n        }\n    }\n}\n/** Action to go to the next fold of current line */\nclass GotoNextFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.gotoNextFold',\n            label: nls.localize('gotoNextFold.label', \"Go to Next Folding Range\"),\n            alias: 'Go to Next Folding Range',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        let selectedLines = this.getSelectedLines(editor);\n        if (selectedLines.length > 0) {\n            let startLineNumber = getNextFoldLine(selectedLines[0], foldingModel);\n            if (startLineNumber !== null) {\n                editor.setSelection({\n                    startLineNumber: startLineNumber,\n                    startColumn: 1,\n                    endLineNumber: startLineNumber,\n                    endColumn: 1\n                });\n            }\n        }\n    }\n}\nregisterEditorContribution(FoldingController.ID, FoldingController);\nregisterEditorAction(UnfoldAction);\nregisterEditorAction(UnFoldRecursivelyAction);\nregisterEditorAction(FoldAction);\nregisterEditorAction(FoldRecursivelyAction);\nregisterEditorAction(FoldAllAction);\nregisterEditorAction(UnfoldAllAction);\nregisterEditorAction(FoldAllBlockCommentsAction);\nregisterEditorAction(FoldAllRegionsAction);\nregisterEditorAction(UnfoldAllRegionsAction);\nregisterEditorAction(FoldAllRegionsExceptAction);\nregisterEditorAction(UnfoldAllRegionsExceptAction);\nregisterEditorAction(ToggleFoldAction);\nregisterEditorAction(GotoParentFoldAction);\nregisterEditorAction(GotoPreviousFoldAction);\nregisterEditorAction(GotoNextFoldAction);\nfor (let i = 1; i <= 7; i++) {\n    registerInstantiatedEditorAction(new FoldLevelAction({\n        id: FoldLevelAction.ID(i),\n        label: nls.localize('foldLevelAction.label', \"Fold Level {0}\", i),\n        alias: `Fold Level ${i}`,\n        precondition: CONTEXT_FOLDING_ENABLED,\n        kbOpts: {\n            kbExpr: EditorContextKeys.editorTextFocus,\n            primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | (21 /* Digit0 */ + i)),\n            weight: 100 /* EditorContrib */\n        }\n    }));\n}\nexport const foldBackgroundBackground = registerColor('editor.foldBackground', { light: transparent(editorSelectionBackground, 0.3), dark: transparent(editorSelectionBackground, 0.3), hc: null }, nls.localize('foldBackgroundBackground', \"Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations.\"), true);\nexport const editorFoldForeground = registerColor('editorGutter.foldingControlForeground', { dark: iconForeground, light: iconForeground, hc: iconForeground }, nls.localize('editorGutter.foldingControlForeground', 'Color of the folding control in the editor gutter.'));\nregisterThemingParticipant((theme, collector) => {\n    const foldBackground = theme.getColor(foldBackgroundBackground);\n    if (foldBackground) {\n        collector.addRule(`.monaco-editor .folded-background { background-color: ${foldBackground}; }`);\n    }\n    const editorFoldColor = theme.getColor(editorFoldForeground);\n    if (editorFoldColor) {\n        collector.addRule(`\n\t\t.monaco-editor .cldr${ThemeIcon.asCSSSelector(foldingExpandedIcon)},\n\t\t.monaco-editor .cldr${ThemeIcon.asCSSSelector(foldingCollapsedIcon)} {\n\t\t\tcolor: ${editorFoldColor} !important;\n\t\t}\n\t\t`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { FoldingRegions } from './foldingRanges.js';\nexport class FoldingModel {\n    constructor(textModel, decorationProvider) {\n        this._updateEventEmitter = new Emitter();\n        this.onDidChange = this._updateEventEmitter.event;\n        this._textModel = textModel;\n        this._decorationProvider = decorationProvider;\n        this._regions = new FoldingRegions(new Uint32Array(0), new Uint32Array(0));\n        this._editorDecorationIds = [];\n        this._isInitialized = false;\n    }\n    get regions() { return this._regions; }\n    get textModel() { return this._textModel; }\n    get isInitialized() { return this._isInitialized; }\n    toggleCollapseState(toggledRegions) {\n        if (!toggledRegions.length) {\n            return;\n        }\n        toggledRegions = toggledRegions.sort((r1, r2) => r1.regionIndex - r2.regionIndex);\n        const processed = {};\n        this._decorationProvider.changeDecorations(accessor => {\n            let k = 0; // index from [0 ... this.regions.length]\n            let dirtyRegionEndLine = -1; // end of the range where decorations need to be updated\n            let lastHiddenLine = -1; // the end of the last hidden lines\n            const updateDecorationsUntil = (index) => {\n                while (k < index) {\n                    const endLineNumber = this._regions.getEndLineNumber(k);\n                    const isCollapsed = this._regions.isCollapsed(k);\n                    if (endLineNumber <= dirtyRegionEndLine) {\n                        accessor.changeDecorationOptions(this._editorDecorationIds[k], this._decorationProvider.getDecorationOption(isCollapsed, endLineNumber <= lastHiddenLine));\n                    }\n                    if (isCollapsed && endLineNumber > lastHiddenLine) {\n                        lastHiddenLine = endLineNumber;\n                    }\n                    k++;\n                }\n            };\n            for (let region of toggledRegions) {\n                let index = region.regionIndex;\n                let editorDecorationId = this._editorDecorationIds[index];\n                if (editorDecorationId && !processed[editorDecorationId]) {\n                    processed[editorDecorationId] = true;\n                    updateDecorationsUntil(index); // update all decorations up to current index using the old dirtyRegionEndLine\n                    let newCollapseState = !this._regions.isCollapsed(index);\n                    this._regions.setCollapsed(index, newCollapseState);\n                    dirtyRegionEndLine = Math.max(dirtyRegionEndLine, this._regions.getEndLineNumber(index));\n                }\n            }\n            updateDecorationsUntil(this._regions.length);\n        });\n        this._updateEventEmitter.fire({ model: this, collapseStateChanged: toggledRegions });\n    }\n    update(newRegions, blockedLineNumers = []) {\n        let newEditorDecorations = [];\n        let isBlocked = (startLineNumber, endLineNumber) => {\n            for (let blockedLineNumber of blockedLineNumers) {\n                if (startLineNumber < blockedLineNumber && blockedLineNumber <= endLineNumber) { // first line is visible\n                    return true;\n                }\n            }\n            return false;\n        };\n        let lastHiddenLine = -1;\n        let initRange = (index, isCollapsed) => {\n            const startLineNumber = newRegions.getStartLineNumber(index);\n            const endLineNumber = newRegions.getEndLineNumber(index);\n            if (!isCollapsed) {\n                isCollapsed = newRegions.isCollapsed(index);\n            }\n            if (isCollapsed && isBlocked(startLineNumber, endLineNumber)) {\n                isCollapsed = false;\n            }\n            newRegions.setCollapsed(index, isCollapsed);\n            const maxColumn = this._textModel.getLineMaxColumn(startLineNumber);\n            const decorationRange = {\n                startLineNumber: startLineNumber,\n                startColumn: Math.max(maxColumn - 1, 1),\n                endLineNumber: startLineNumber,\n                endColumn: maxColumn\n            };\n            newEditorDecorations.push({ range: decorationRange, options: this._decorationProvider.getDecorationOption(isCollapsed, endLineNumber <= lastHiddenLine) });\n            if (isCollapsed && endLineNumber > lastHiddenLine) {\n                lastHiddenLine = endLineNumber;\n            }\n        };\n        let i = 0;\n        let nextCollapsed = () => {\n            while (i < this._regions.length) {\n                let isCollapsed = this._regions.isCollapsed(i);\n                i++;\n                if (isCollapsed) {\n                    return i - 1;\n                }\n            }\n            return -1;\n        };\n        let k = 0;\n        let collapsedIndex = nextCollapsed();\n        while (collapsedIndex !== -1 && k < newRegions.length) {\n            // get the latest range\n            let decRange = this._textModel.getDecorationRange(this._editorDecorationIds[collapsedIndex]);\n            if (decRange) {\n                let collapsedStartLineNumber = decRange.startLineNumber;\n                if (decRange.startColumn === Math.max(decRange.endColumn - 1, 1) && this._textModel.getLineMaxColumn(collapsedStartLineNumber) === decRange.endColumn) { // test that the decoration is still covering the full line else it got deleted\n                    while (k < newRegions.length) {\n                        let startLineNumber = newRegions.getStartLineNumber(k);\n                        if (collapsedStartLineNumber >= startLineNumber) {\n                            initRange(k, collapsedStartLineNumber === startLineNumber);\n                            k++;\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                }\n            }\n            collapsedIndex = nextCollapsed();\n        }\n        while (k < newRegions.length) {\n            initRange(k, false);\n            k++;\n        }\n        this._editorDecorationIds = this._decorationProvider.deltaDecorations(this._editorDecorationIds, newEditorDecorations);\n        this._regions = newRegions;\n        this._isInitialized = true;\n        this._updateEventEmitter.fire({ model: this });\n    }\n    /**\n     * Collapse state memento, for persistence only\n     */\n    getMemento() {\n        let collapsedRanges = [];\n        for (let i = 0; i < this._regions.length; i++) {\n            if (this._regions.isCollapsed(i)) {\n                let range = this._textModel.getDecorationRange(this._editorDecorationIds[i]);\n                if (range) {\n                    let startLineNumber = range.startLineNumber;\n                    let endLineNumber = range.endLineNumber + this._regions.getEndLineNumber(i) - this._regions.getStartLineNumber(i);\n                    collapsedRanges.push({ startLineNumber, endLineNumber });\n                }\n            }\n        }\n        if (collapsedRanges.length > 0) {\n            return collapsedRanges;\n        }\n        return undefined;\n    }\n    /**\n     * Apply persisted state, for persistence only\n     */\n    applyMemento(state) {\n        if (!Array.isArray(state)) {\n            return;\n        }\n        let toToogle = [];\n        for (let range of state) {\n            let region = this.getRegionAtLine(range.startLineNumber);\n            if (region && !region.isCollapsed) {\n                toToogle.push(region);\n            }\n        }\n        this.toggleCollapseState(toToogle);\n    }\n    dispose() {\n        this._decorationProvider.deltaDecorations(this._editorDecorationIds, []);\n    }\n    getAllRegionsAtLine(lineNumber, filter) {\n        let result = [];\n        if (this._regions) {\n            let index = this._regions.findRange(lineNumber);\n            let level = 1;\n            while (index >= 0) {\n                let current = this._regions.toRegion(index);\n                if (!filter || filter(current, level)) {\n                    result.push(current);\n                }\n                level++;\n                index = current.parentIndex;\n            }\n        }\n        return result;\n    }\n    getRegionAtLine(lineNumber) {\n        if (this._regions) {\n            let index = this._regions.findRange(lineNumber);\n            if (index >= 0) {\n                return this._regions.toRegion(index);\n            }\n        }\n        return null;\n    }\n    getRegionsInside(region, filter) {\n        let result = [];\n        let index = region ? region.regionIndex + 1 : 0;\n        let endLineNumber = region ? region.endLineNumber : Number.MAX_VALUE;\n        if (filter && filter.length === 2) {\n            const levelStack = [];\n            for (let i = index, len = this._regions.length; i < len; i++) {\n                let current = this._regions.toRegion(i);\n                if (this._regions.getStartLineNumber(i) < endLineNumber) {\n                    while (levelStack.length > 0 && !current.containedBy(levelStack[levelStack.length - 1])) {\n                        levelStack.pop();\n                    }\n                    levelStack.push(current);\n                    if (filter(current, levelStack.length)) {\n                        result.push(current);\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        else {\n            for (let i = index, len = this._regions.length; i < len; i++) {\n                let current = this._regions.toRegion(i);\n                if (this._regions.getStartLineNumber(i) < endLineNumber) {\n                    if (!filter || filter(current)) {\n                        result.push(current);\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        return result;\n    }\n}\n/**\n * Collapse or expand the regions at the given locations\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand, or if not set, all regions in the model.\n */\nexport function toggleCollapseState(foldingModel, levels, lineNumbers) {\n    let toToggle = [];\n    for (let lineNumber of lineNumbers) {\n        let region = foldingModel.getRegionAtLine(lineNumber);\n        if (region) {\n            const doCollapse = !region.isCollapsed;\n            toToggle.push(region);\n            if (levels > 1) {\n                let regionsInside = foldingModel.getRegionsInside(region, (r, level) => r.isCollapsed !== doCollapse && level < levels);\n                toToggle.push(...regionsInside);\n            }\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand the regions at the given locations including all children.\n * @param doCollapse Whether to collapse or expand\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand, or if not set, all regions in the model.\n */\nexport function setCollapseStateLevelsDown(foldingModel, doCollapse, levels = Number.MAX_VALUE, lineNumbers) {\n    let toToggle = [];\n    if (lineNumbers && lineNumbers.length > 0) {\n        for (let lineNumber of lineNumbers) {\n            let region = foldingModel.getRegionAtLine(lineNumber);\n            if (region) {\n                if (region.isCollapsed !== doCollapse) {\n                    toToggle.push(region);\n                }\n                if (levels > 1) {\n                    let regionsInside = foldingModel.getRegionsInside(region, (r, level) => r.isCollapsed !== doCollapse && level < levels);\n                    toToggle.push(...regionsInside);\n                }\n            }\n        }\n    }\n    else {\n        let regionsInside = foldingModel.getRegionsInside(null, (r, level) => r.isCollapsed !== doCollapse && level < levels);\n        toToggle.push(...regionsInside);\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand the regions at the given locations including all parents.\n * @param doCollapse Whether to collapse or expand\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand.\n */\nexport function setCollapseStateLevelsUp(foldingModel, doCollapse, levels, lineNumbers) {\n    let toToggle = [];\n    for (let lineNumber of lineNumbers) {\n        let regions = foldingModel.getAllRegionsAtLine(lineNumber, (region, level) => region.isCollapsed !== doCollapse && level <= levels);\n        toToggle.push(...regions);\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand a region at the given locations. If the inner most region is already collapsed/expanded, uses the first parent instead.\n * @param doCollapse Whether to collapse or expand\n * @param lineNumbers the location of the regions to collapse or expand.\n */\nexport function setCollapseStateUp(foldingModel, doCollapse, lineNumbers) {\n    let toToggle = [];\n    for (let lineNumber of lineNumbers) {\n        let regions = foldingModel.getAllRegionsAtLine(lineNumber, (region) => region.isCollapsed !== doCollapse);\n        if (regions.length > 0) {\n            toToggle.push(regions[0]);\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds or unfolds all regions that have a given level, except if they contain one of the blocked lines.\n * @param foldLevel level. Level == 1 is the top level\n * @param doCollapse Whether to collapse or expand\n*/\nexport function setCollapseStateAtLevel(foldingModel, foldLevel, doCollapse, blockedLineNumbers) {\n    let filter = (region, level) => level === foldLevel && region.isCollapsed !== doCollapse && !blockedLineNumbers.some(line => region.containsLine(line));\n    let toToggle = foldingModel.getRegionsInside(null, filter);\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds or unfolds all regions, except if they contain or are contained by a region of one of the blocked lines.\n * @param doCollapse Whether to collapse or expand\n * @param blockedLineNumbers the location of regions to not collapse or expand\n */\nexport function setCollapseStateForRest(foldingModel, doCollapse, blockedLineNumbers) {\n    let filteredRegions = [];\n    for (let lineNumber of blockedLineNumbers) {\n        const regions = foldingModel.getAllRegionsAtLine(lineNumber, undefined);\n        if (regions.length > 0) {\n            filteredRegions.push(regions[0]);\n        }\n    }\n    let filter = (region) => filteredRegions.every((filteredRegion) => !filteredRegion.containedBy(region) && !region.containedBy(filteredRegion)) && region.isCollapsed !== doCollapse;\n    let toToggle = foldingModel.getRegionsInside(null, filter);\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds all regions for which the lines start with a given regex\n * @param foldingModel the folding model\n */\nexport function setCollapseStateForMatchingLines(foldingModel, regExp, doCollapse) {\n    let editorModel = foldingModel.textModel;\n    let regions = foldingModel.regions;\n    let toToggle = [];\n    for (let i = regions.length - 1; i >= 0; i--) {\n        if (doCollapse !== regions.isCollapsed(i)) {\n            let startLineNumber = regions.getStartLineNumber(i);\n            if (regExp.test(editorModel.getLineContent(startLineNumber))) {\n                toToggle.push(regions.toRegion(i));\n            }\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds all regions of the given type\n * @param foldingModel the folding model\n */\nexport function setCollapseStateForType(foldingModel, type, doCollapse) {\n    let regions = foldingModel.regions;\n    let toToggle = [];\n    for (let i = regions.length - 1; i >= 0; i--) {\n        if (doCollapse !== regions.isCollapsed(i) && type === regions.getType(i)) {\n            toToggle.push(regions.toRegion(i));\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Get line to go to for parent fold of current line\n * @param lineNumber the current line number\n * @param foldingModel the folding model\n *\n * @return Parent fold start line\n */\nexport function getParentFoldLine(lineNumber, foldingModel) {\n    let startLineNumber = null;\n    let foldingRegion = foldingModel.getRegionAtLine(lineNumber);\n    if (foldingRegion !== null) {\n        startLineNumber = foldingRegion.startLineNumber;\n        // If current line is not the start of the current fold, go to top line of current fold. If not, go to parent fold\n        if (lineNumber === startLineNumber) {\n            let parentFoldingIdx = foldingRegion.parentIndex;\n            if (parentFoldingIdx !== -1) {\n                startLineNumber = foldingModel.regions.getStartLineNumber(parentFoldingIdx);\n            }\n            else {\n                startLineNumber = null;\n            }\n        }\n    }\n    return startLineNumber;\n}\n/**\n * Get line to go to for previous fold at the same level of current line\n * @param lineNumber the current line number\n * @param foldingModel the folding model\n *\n * @return Previous fold start line\n */\nexport function getPreviousFoldLine(lineNumber, foldingModel) {\n    let foldingRegion = foldingModel.getRegionAtLine(lineNumber);\n    // If on the folding range start line, go to previous sibling.\n    if (foldingRegion !== null && foldingRegion.startLineNumber === lineNumber) {\n        // If current line is not the start of the current fold, go to top line of current fold. If not, go to previous fold.\n        if (lineNumber !== foldingRegion.startLineNumber) {\n            return foldingRegion.startLineNumber;\n        }\n        else {\n            // Find min line number to stay within parent.\n            let expectedParentIndex = foldingRegion.parentIndex;\n            let minLineNumber = 0;\n            if (expectedParentIndex !== -1) {\n                minLineNumber = foldingModel.regions.getStartLineNumber(foldingRegion.parentIndex);\n            }\n            // Find fold at same level.\n            while (foldingRegion !== null) {\n                if (foldingRegion.regionIndex > 0) {\n                    foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex - 1);\n                    // Keep at same level.\n                    if (foldingRegion.startLineNumber <= minLineNumber) {\n                        return null;\n                    }\n                    else if (foldingRegion.parentIndex === expectedParentIndex) {\n                        return foldingRegion.startLineNumber;\n                    }\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n    }\n    else {\n        // Go to last fold that's before the current line.\n        if (foldingModel.regions.length > 0) {\n            foldingRegion = foldingModel.regions.toRegion(foldingModel.regions.length - 1);\n            while (foldingRegion !== null) {\n                // Found fold before current line.\n                if (foldingRegion.startLineNumber < lineNumber) {\n                    return foldingRegion.startLineNumber;\n                }\n                if (foldingRegion.regionIndex > 0) {\n                    foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex - 1);\n                }\n                else {\n                    foldingRegion = null;\n                }\n            }\n        }\n    }\n    return null;\n}\n/**\n * Get line to go to next fold at the same level of current line\n * @param lineNumber the current line number\n * @param foldingModel the folding model\n *\n * @return Next fold start line\n */\nexport function getNextFoldLine(lineNumber, foldingModel) {\n    let foldingRegion = foldingModel.getRegionAtLine(lineNumber);\n    // If on the folding range start line, go to next sibling.\n    if (foldingRegion !== null && foldingRegion.startLineNumber === lineNumber) {\n        // Find max line number to stay within parent.\n        let expectedParentIndex = foldingRegion.parentIndex;\n        let maxLineNumber = 0;\n        if (expectedParentIndex !== -1) {\n            maxLineNumber = foldingModel.regions.getEndLineNumber(foldingRegion.parentIndex);\n        }\n        else if (foldingModel.regions.length === 0) {\n            return null;\n        }\n        else {\n            maxLineNumber = foldingModel.regions.getEndLineNumber(foldingModel.regions.length - 1);\n        }\n        // Find fold at same level.\n        while (foldingRegion !== null) {\n            if (foldingRegion.regionIndex < foldingModel.regions.length) {\n                foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex + 1);\n                // Keep at same level.\n                if (foldingRegion.startLineNumber >= maxLineNumber) {\n                    return null;\n                }\n                else if (foldingRegion.parentIndex === expectedParentIndex) {\n                    return foldingRegion.startLineNumber;\n                }\n            }\n            else {\n                return null;\n            }\n        }\n    }\n    else {\n        // Go to first fold that's after the current line.\n        if (foldingModel.regions.length > 0) {\n            foldingRegion = foldingModel.regions.toRegion(0);\n            while (foldingRegion !== null) {\n                // Found fold after current line.\n                if (foldingRegion.startLineNumber > lineNumber) {\n                    return foldingRegion.startLineNumber;\n                }\n                if (foldingRegion.regionIndex < foldingModel.regions.length) {\n                    foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex + 1);\n                }\n                else {\n                    foldingRegion = null;\n                }\n            }\n        }\n    }\n    return null;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const MAX_FOLDING_REGIONS = 0xFFFF;\nexport const MAX_LINE_NUMBER = 0xFFFFFF;\nconst MASK_INDENT = 0xFF000000;\nexport class FoldingRegions {\n    constructor(startIndexes, endIndexes, types) {\n        if (startIndexes.length !== endIndexes.length || startIndexes.length > MAX_FOLDING_REGIONS) {\n            throw new Error('invalid startIndexes or endIndexes size');\n        }\n        this._startIndexes = startIndexes;\n        this._endIndexes = endIndexes;\n        this._collapseStates = new Uint32Array(Math.ceil(startIndexes.length / 32));\n        this._types = types;\n        this._parentsComputed = false;\n    }\n    ensureParentIndices() {\n        if (!this._parentsComputed) {\n            this._parentsComputed = true;\n            let parentIndexes = [];\n            let isInsideLast = (startLineNumber, endLineNumber) => {\n                let index = parentIndexes[parentIndexes.length - 1];\n                return this.getStartLineNumber(index) <= startLineNumber && this.getEndLineNumber(index) >= endLineNumber;\n            };\n            for (let i = 0, len = this._startIndexes.length; i < len; i++) {\n                let startLineNumber = this._startIndexes[i];\n                let endLineNumber = this._endIndexes[i];\n                if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n                    throw new Error('startLineNumber or endLineNumber must not exceed ' + MAX_LINE_NUMBER);\n                }\n                while (parentIndexes.length > 0 && !isInsideLast(startLineNumber, endLineNumber)) {\n                    parentIndexes.pop();\n                }\n                let parentIndex = parentIndexes.length > 0 ? parentIndexes[parentIndexes.length - 1] : -1;\n                parentIndexes.push(i);\n                this._startIndexes[i] = startLineNumber + ((parentIndex & 0xFF) << 24);\n                this._endIndexes[i] = endLineNumber + ((parentIndex & 0xFF00) << 16);\n            }\n        }\n    }\n    get length() {\n        return this._startIndexes.length;\n    }\n    getStartLineNumber(index) {\n        return this._startIndexes[index] & MAX_LINE_NUMBER;\n    }\n    getEndLineNumber(index) {\n        return this._endIndexes[index] & MAX_LINE_NUMBER;\n    }\n    getType(index) {\n        return this._types ? this._types[index] : undefined;\n    }\n    hasTypes() {\n        return !!this._types;\n    }\n    isCollapsed(index) {\n        let arrayIndex = (index / 32) | 0;\n        let bit = index % 32;\n        return (this._collapseStates[arrayIndex] & (1 << bit)) !== 0;\n    }\n    setCollapsed(index, newState) {\n        let arrayIndex = (index / 32) | 0;\n        let bit = index % 32;\n        let value = this._collapseStates[arrayIndex];\n        if (newState) {\n            this._collapseStates[arrayIndex] = value | (1 << bit);\n        }\n        else {\n            this._collapseStates[arrayIndex] = value & ~(1 << bit);\n        }\n    }\n    setCollapsedAllOfType(type, newState) {\n        let hasChanged = false;\n        if (this._types) {\n            for (let i = 0; i < this._types.length; i++) {\n                if (this._types[i] === type) {\n                    this.setCollapsed(i, newState);\n                    hasChanged = true;\n                }\n            }\n        }\n        return hasChanged;\n    }\n    toRegion(index) {\n        return new FoldingRegion(this, index);\n    }\n    getParentIndex(index) {\n        this.ensureParentIndices();\n        let parent = ((this._startIndexes[index] & MASK_INDENT) >>> 24) + ((this._endIndexes[index] & MASK_INDENT) >>> 16);\n        if (parent === MAX_FOLDING_REGIONS) {\n            return -1;\n        }\n        return parent;\n    }\n    contains(index, line) {\n        return this.getStartLineNumber(index) <= line && this.getEndLineNumber(index) >= line;\n    }\n    findIndex(line) {\n        let low = 0, high = this._startIndexes.length;\n        if (high === 0) {\n            return -1; // no children\n        }\n        while (low < high) {\n            let mid = Math.floor((low + high) / 2);\n            if (line < this.getStartLineNumber(mid)) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        return low - 1;\n    }\n    findRange(line) {\n        let index = this.findIndex(line);\n        if (index >= 0) {\n            let endLineNumber = this.getEndLineNumber(index);\n            if (endLineNumber >= line) {\n                return index;\n            }\n            index = this.getParentIndex(index);\n            while (index !== -1) {\n                if (this.contains(index, line)) {\n                    return index;\n                }\n                index = this.getParentIndex(index);\n            }\n        }\n        return -1;\n    }\n    toString() {\n        let res = [];\n        for (let i = 0; i < this.length; i++) {\n            res[i] = `[${this.isCollapsed(i) ? '+' : '-'}] ${this.getStartLineNumber(i)}/${this.getEndLineNumber(i)}`;\n        }\n        return res.join(', ');\n    }\n}\nexport class FoldingRegion {\n    constructor(ranges, index) {\n        this.ranges = ranges;\n        this.index = index;\n    }\n    get startLineNumber() {\n        return this.ranges.getStartLineNumber(this.index);\n    }\n    get endLineNumber() {\n        return this.ranges.getEndLineNumber(this.index);\n    }\n    get regionIndex() {\n        return this.index;\n    }\n    get parentIndex() {\n        return this.ranges.getParentIndex(this.index);\n    }\n    get isCollapsed() {\n        return this.ranges.isCollapsed(this.index);\n    }\n    containedBy(range) {\n        return range.startLineNumber <= this.startLineNumber && range.endLineNumber >= this.endLineNumber;\n    }\n    containsLine(lineNumber) {\n        return this.startLineNumber <= lineNumber && lineNumber <= this.endLineNumber;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findFirstInSorted } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Range } from '../../../common/core/range.js';\nimport { countEOL } from '../../../common/core/eolCounter.js';\nexport class HiddenRangeModel {\n    constructor(model) {\n        this._updateEventEmitter = new Emitter();\n        this._hasLineChanges = false;\n        this._foldingModel = model;\n        this._foldingModelListener = model.onDidChange(_ => this.updateHiddenRanges());\n        this._hiddenRanges = [];\n        if (model.regions.length) {\n            this.updateHiddenRanges();\n        }\n    }\n    get onDidChange() { return this._updateEventEmitter.event; }\n    get hiddenRanges() { return this._hiddenRanges; }\n    notifyChangeModelContent(e) {\n        if (this._hiddenRanges.length && !this._hasLineChanges) {\n            this._hasLineChanges = e.changes.some(change => {\n                return change.range.endLineNumber !== change.range.startLineNumber || countEOL(change.text)[0] !== 0;\n            });\n        }\n    }\n    updateHiddenRanges() {\n        let updateHiddenAreas = false;\n        let newHiddenAreas = [];\n        let i = 0; // index into hidden\n        let k = 0;\n        let lastCollapsedStart = Number.MAX_VALUE;\n        let lastCollapsedEnd = -1;\n        let ranges = this._foldingModel.regions;\n        for (; i < ranges.length; i++) {\n            if (!ranges.isCollapsed(i)) {\n                continue;\n            }\n            let startLineNumber = ranges.getStartLineNumber(i) + 1; // the first line is not hidden\n            let endLineNumber = ranges.getEndLineNumber(i);\n            if (lastCollapsedStart <= startLineNumber && endLineNumber <= lastCollapsedEnd) {\n                // ignore ranges contained in collapsed regions\n                continue;\n            }\n            if (!updateHiddenAreas && k < this._hiddenRanges.length && this._hiddenRanges[k].startLineNumber === startLineNumber && this._hiddenRanges[k].endLineNumber === endLineNumber) {\n                // reuse the old ranges\n                newHiddenAreas.push(this._hiddenRanges[k]);\n                k++;\n            }\n            else {\n                updateHiddenAreas = true;\n                newHiddenAreas.push(new Range(startLineNumber, 1, endLineNumber, 1));\n            }\n            lastCollapsedStart = startLineNumber;\n            lastCollapsedEnd = endLineNumber;\n        }\n        if (this._hasLineChanges || updateHiddenAreas || k < this._hiddenRanges.length) {\n            this.applyHiddenRanges(newHiddenAreas);\n        }\n    }\n    applyMemento(state) {\n        if (!Array.isArray(state) || state.length === 0) {\n            return false;\n        }\n        let hiddenRanges = [];\n        for (let r of state) {\n            if (!r.startLineNumber || !r.endLineNumber) {\n                return false;\n            }\n            hiddenRanges.push(new Range(r.startLineNumber + 1, 1, r.endLineNumber, 1));\n        }\n        this.applyHiddenRanges(hiddenRanges);\n        return true;\n    }\n    /**\n     * Collapse state memento, for persistence only, only used if folding model is not yet initialized\n     */\n    getMemento() {\n        return this._hiddenRanges.map(r => ({ startLineNumber: r.startLineNumber - 1, endLineNumber: r.endLineNumber }));\n    }\n    applyHiddenRanges(newHiddenAreas) {\n        this._hiddenRanges = newHiddenAreas;\n        this._hasLineChanges = false;\n        this._updateEventEmitter.fire(newHiddenAreas);\n    }\n    hasRanges() {\n        return this._hiddenRanges.length > 0;\n    }\n    isHidden(line) {\n        return findRange(this._hiddenRanges, line) !== null;\n    }\n    adjustSelections(selections) {\n        let hasChanges = false;\n        let editorModel = this._foldingModel.textModel;\n        let lastRange = null;\n        let adjustLine = (line) => {\n            if (!lastRange || !isInside(line, lastRange)) {\n                lastRange = findRange(this._hiddenRanges, line);\n            }\n            if (lastRange) {\n                return lastRange.startLineNumber - 1;\n            }\n            return null;\n        };\n        for (let i = 0, len = selections.length; i < len; i++) {\n            let selection = selections[i];\n            let adjustedStartLine = adjustLine(selection.startLineNumber);\n            if (adjustedStartLine) {\n                selection = selection.setStartPosition(adjustedStartLine, editorModel.getLineMaxColumn(adjustedStartLine));\n                hasChanges = true;\n            }\n            let adjustedEndLine = adjustLine(selection.endLineNumber);\n            if (adjustedEndLine) {\n                selection = selection.setEndPosition(adjustedEndLine, editorModel.getLineMaxColumn(adjustedEndLine));\n                hasChanges = true;\n            }\n            selections[i] = selection;\n        }\n        return hasChanges;\n    }\n    dispose() {\n        if (this.hiddenRanges.length > 0) {\n            this._hiddenRanges = [];\n            this._updateEventEmitter.fire(this._hiddenRanges);\n        }\n        if (this._foldingModelListener) {\n            this._foldingModelListener.dispose();\n            this._foldingModelListener = null;\n        }\n    }\n}\nfunction isInside(line, range) {\n    return line >= range.startLineNumber && line <= range.endLineNumber;\n}\nfunction findRange(ranges, line) {\n    let i = findFirstInSorted(ranges, r => line < r.startLineNumber) - 1;\n    if (i >= 0 && ranges[i].endLineNumber >= line) {\n        return ranges[i];\n    }\n    return null;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport { FoldingRegions, MAX_LINE_NUMBER } from './foldingRanges.js';\nconst MAX_FOLDING_REGIONS_FOR_INDENT_DEFAULT = 5000;\nexport const ID_INDENT_PROVIDER = 'indent';\nexport class IndentRangeProvider {\n    constructor(editorModel, languageConfigurationService, maxFoldingRegions) {\n        this.editorModel = editorModel;\n        this.languageConfigurationService = languageConfigurationService;\n        this.maxFoldingRegions = maxFoldingRegions;\n        this.id = ID_INDENT_PROVIDER;\n    }\n    dispose() { }\n    compute(cancelationToken, notifyTooManyRegions) {\n        let foldingRules = this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules;\n        let offSide = foldingRules && !!foldingRules.offSide;\n        let markers = foldingRules && foldingRules.markers;\n        return Promise.resolve(computeRanges(this.editorModel, offSide, markers, this.maxFoldingRegions, notifyTooManyRegions));\n    }\n}\n// public only for testing\nexport class RangesCollector {\n    constructor(foldingRangesLimit, _notifyTooManyRegions) {\n        this._notifyTooManyRegions = _notifyTooManyRegions;\n        this._startIndexes = [];\n        this._endIndexes = [];\n        this._indentOccurrences = [];\n        this._length = 0;\n        this._foldingRangesLimit = foldingRangesLimit;\n    }\n    insertFirst(startLineNumber, endLineNumber, indent) {\n        if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n            return;\n        }\n        let index = this._length;\n        this._startIndexes[index] = startLineNumber;\n        this._endIndexes[index] = endLineNumber;\n        this._length++;\n        if (indent < 1000) {\n            this._indentOccurrences[indent] = (this._indentOccurrences[indent] || 0) + 1;\n        }\n    }\n    toIndentRanges(model) {\n        if (this._length <= this._foldingRangesLimit) {\n            // reverse and create arrays of the exact length\n            let startIndexes = new Uint32Array(this._length);\n            let endIndexes = new Uint32Array(this._length);\n            for (let i = this._length - 1, k = 0; i >= 0; i--, k++) {\n                startIndexes[k] = this._startIndexes[i];\n                endIndexes[k] = this._endIndexes[i];\n            }\n            return new FoldingRegions(startIndexes, endIndexes);\n        }\n        else {\n            if (this._notifyTooManyRegions) {\n                this._notifyTooManyRegions(this._foldingRangesLimit);\n            }\n            let entries = 0;\n            let maxIndent = this._indentOccurrences.length;\n            for (let i = 0; i < this._indentOccurrences.length; i++) {\n                let n = this._indentOccurrences[i];\n                if (n) {\n                    if (n + entries > this._foldingRangesLimit) {\n                        maxIndent = i;\n                        break;\n                    }\n                    entries += n;\n                }\n            }\n            const tabSize = model.getOptions().tabSize;\n            // reverse and create arrays of the exact length\n            let startIndexes = new Uint32Array(this._foldingRangesLimit);\n            let endIndexes = new Uint32Array(this._foldingRangesLimit);\n            for (let i = this._length - 1, k = 0; i >= 0; i--) {\n                let startIndex = this._startIndexes[i];\n                let lineContent = model.getLineContent(startIndex);\n                let indent = computeIndentLevel(lineContent, tabSize);\n                if (indent < maxIndent || (indent === maxIndent && entries++ < this._foldingRangesLimit)) {\n                    startIndexes[k] = startIndex;\n                    endIndexes[k] = this._endIndexes[i];\n                    k++;\n                }\n            }\n            return new FoldingRegions(startIndexes, endIndexes);\n        }\n    }\n}\nexport function computeRanges(model, offSide, markers, foldingRangesLimit, notifyTooManyRegions) {\n    const tabSize = model.getOptions().tabSize;\n    foldingRangesLimit = foldingRangesLimit !== null && foldingRangesLimit !== void 0 ? foldingRangesLimit : MAX_FOLDING_REGIONS_FOR_INDENT_DEFAULT;\n    let result = new RangesCollector(foldingRangesLimit, notifyTooManyRegions);\n    let pattern = undefined;\n    if (markers) {\n        pattern = new RegExp(`(${markers.start.source})|(?:${markers.end.source})`);\n    }\n    let previousRegions = [];\n    let line = model.getLineCount() + 1;\n    previousRegions.push({ indent: -1, endAbove: line, line }); // sentinel, to make sure there's at least one entry\n    for (let line = model.getLineCount(); line > 0; line--) {\n        let lineContent = model.getLineContent(line);\n        let indent = computeIndentLevel(lineContent, tabSize);\n        let previous = previousRegions[previousRegions.length - 1];\n        if (indent === -1) {\n            if (offSide) {\n                // for offSide languages, empty lines are associated to the previous block\n                // note: the next block is already written to the results, so this only\n                // impacts the end position of the block before\n                previous.endAbove = line;\n            }\n            continue; // only whitespace\n        }\n        let m;\n        if (pattern && (m = lineContent.match(pattern))) {\n            // folding pattern match\n            if (m[1]) { // start pattern match\n                // discard all regions until the folding pattern\n                let i = previousRegions.length - 1;\n                while (i > 0 && previousRegions[i].indent !== -2) {\n                    i--;\n                }\n                if (i > 0) {\n                    previousRegions.length = i + 1;\n                    previous = previousRegions[i];\n                    // new folding range from pattern, includes the end line\n                    result.insertFirst(line, previous.line, indent);\n                    previous.line = line;\n                    previous.indent = indent;\n                    previous.endAbove = line;\n                    continue;\n                }\n                else {\n                    // no end marker found, treat line as a regular line\n                }\n            }\n            else { // end pattern match\n                previousRegions.push({ indent: -2, endAbove: line, line });\n                continue;\n            }\n        }\n        if (previous.indent > indent) {\n            // discard all regions with larger indent\n            do {\n                previousRegions.pop();\n                previous = previousRegions[previousRegions.length - 1];\n            } while (previous.indent > indent);\n            // new folding range\n            let endLineNumber = previous.endAbove - 1;\n            if (endLineNumber - line >= 1) { // needs at east size 1\n                result.insertFirst(line, endLineNumber, indent);\n            }\n        }\n        if (previous.indent === indent) {\n            previous.endAbove = line;\n        }\n        else { // previous.indent < indent\n            // new region with a bigger indent\n            previousRegions.push({ indent, endAbove: line, line });\n        }\n    }\n    return result.toIndentRanges(model);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { FoldingRegions, MAX_LINE_NUMBER } from './foldingRanges.js';\nconst foldingContext = {};\nexport const ID_SYNTAX_PROVIDER = 'syntax';\nexport class SyntaxRangeProvider {\n    constructor(editorModel, providers, handleFoldingRangesChange, limit) {\n        this.editorModel = editorModel;\n        this.providers = providers;\n        this.limit = limit;\n        this.id = ID_SYNTAX_PROVIDER;\n        for (const provider of providers) {\n            if (typeof provider.onDidChange === 'function') {\n                if (!this.disposables) {\n                    this.disposables = new DisposableStore();\n                }\n                this.disposables.add(provider.onDidChange(handleFoldingRangesChange));\n            }\n        }\n    }\n    compute(cancellationToken, notifyTooManyRegions) {\n        return collectSyntaxRanges(this.providers, this.editorModel, cancellationToken).then(ranges => {\n            if (ranges) {\n                let res = sanitizeRanges(ranges, this.limit, notifyTooManyRegions);\n                return res;\n            }\n            return null;\n        });\n    }\n    dispose() {\n        var _a;\n        (_a = this.disposables) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n}\nfunction collectSyntaxRanges(providers, model, cancellationToken) {\n    let rangeData = null;\n    let promises = providers.map((provider, i) => {\n        return Promise.resolve(provider.provideFoldingRanges(model, foldingContext, cancellationToken)).then(ranges => {\n            if (cancellationToken.isCancellationRequested) {\n                return;\n            }\n            if (Array.isArray(ranges)) {\n                if (!Array.isArray(rangeData)) {\n                    rangeData = [];\n                }\n                let nLines = model.getLineCount();\n                for (let r of ranges) {\n                    if (r.start > 0 && r.end > r.start && r.end <= nLines) {\n                        rangeData.push({ start: r.start, end: r.end, rank: i, kind: r.kind });\n                    }\n                }\n            }\n        }, onUnexpectedExternalError);\n    });\n    return Promise.all(promises).then(_ => {\n        return rangeData;\n    });\n}\nexport class RangesCollector {\n    constructor(foldingRangesLimit, _notifyTooManyRegions) {\n        this._notifyTooManyRegions = _notifyTooManyRegions;\n        this._startIndexes = [];\n        this._endIndexes = [];\n        this._nestingLevels = [];\n        this._nestingLevelCounts = [];\n        this._types = [];\n        this._length = 0;\n        this._foldingRangesLimit = foldingRangesLimit;\n    }\n    add(startLineNumber, endLineNumber, type, nestingLevel) {\n        if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n            return;\n        }\n        let index = this._length;\n        this._startIndexes[index] = startLineNumber;\n        this._endIndexes[index] = endLineNumber;\n        this._nestingLevels[index] = nestingLevel;\n        this._types[index] = type;\n        this._length++;\n        if (nestingLevel < 30) {\n            this._nestingLevelCounts[nestingLevel] = (this._nestingLevelCounts[nestingLevel] || 0) + 1;\n        }\n    }\n    toIndentRanges() {\n        if (this._length <= this._foldingRangesLimit) {\n            let startIndexes = new Uint32Array(this._length);\n            let endIndexes = new Uint32Array(this._length);\n            for (let i = 0; i < this._length; i++) {\n                startIndexes[i] = this._startIndexes[i];\n                endIndexes[i] = this._endIndexes[i];\n            }\n            return new FoldingRegions(startIndexes, endIndexes, this._types);\n        }\n        else {\n            if (this._notifyTooManyRegions) {\n                this._notifyTooManyRegions(this._foldingRangesLimit);\n            }\n            let entries = 0;\n            let maxLevel = this._nestingLevelCounts.length;\n            for (let i = 0; i < this._nestingLevelCounts.length; i++) {\n                let n = this._nestingLevelCounts[i];\n                if (n) {\n                    if (n + entries > this._foldingRangesLimit) {\n                        maxLevel = i;\n                        break;\n                    }\n                    entries += n;\n                }\n            }\n            let startIndexes = new Uint32Array(this._foldingRangesLimit);\n            let endIndexes = new Uint32Array(this._foldingRangesLimit);\n            let types = [];\n            for (let i = 0, k = 0; i < this._length; i++) {\n                let level = this._nestingLevels[i];\n                if (level < maxLevel || (level === maxLevel && entries++ < this._foldingRangesLimit)) {\n                    startIndexes[k] = this._startIndexes[i];\n                    endIndexes[k] = this._endIndexes[i];\n                    types[k] = this._types[i];\n                    k++;\n                }\n            }\n            return new FoldingRegions(startIndexes, endIndexes, types);\n        }\n    }\n}\nexport function sanitizeRanges(rangeData, limit, notifyTooManyRegions) {\n    let sorted = rangeData.sort((d1, d2) => {\n        let diff = d1.start - d2.start;\n        if (diff === 0) {\n            diff = d1.rank - d2.rank;\n        }\n        return diff;\n    });\n    let collector = new RangesCollector(limit, notifyTooManyRegions);\n    let top = undefined;\n    let previous = [];\n    for (let entry of sorted) {\n        if (!top) {\n            top = entry;\n            collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n        }\n        else {\n            if (entry.start > top.start) {\n                if (entry.end <= top.end) {\n                    previous.push(top);\n                    top = entry;\n                    collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n                }\n                else {\n                    if (entry.start > top.end) {\n                        do {\n                            top = previous.pop();\n                        } while (top && entry.start > top.end);\n                        if (top) {\n                            previous.push(top);\n                        }\n                        top = entry;\n                    }\n                    collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n                }\n            }\n        }\n    }\n    return collector.toIndentRanges();\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { sanitizeRanges } from './syntaxRangeProvider.js';\nexport const ID_INIT_PROVIDER = 'init';\nexport class InitializingRangeProvider {\n    constructor(editorModel, initialRanges, onTimeout, timeoutTime) {\n        this.editorModel = editorModel;\n        this.id = ID_INIT_PROVIDER;\n        if (initialRanges.length) {\n            let toDecorationRange = (range) => {\n                return {\n                    range: {\n                        startLineNumber: range.startLineNumber,\n                        startColumn: 0,\n                        endLineNumber: range.endLineNumber,\n                        endColumn: editorModel.getLineLength(range.endLineNumber)\n                    },\n                    options: {\n                        description: 'folding-initializing-range-provider',\n                        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */\n                    }\n                };\n            };\n            this.decorationIds = editorModel.deltaDecorations([], initialRanges.map(toDecorationRange));\n            this.timeout = setTimeout(onTimeout, timeoutTime);\n        }\n    }\n    dispose() {\n        if (this.decorationIds) {\n            this.editorModel.deltaDecorations(this.decorationIds, []);\n            this.decorationIds = undefined;\n        }\n        if (typeof this.timeout === 'number') {\n            clearTimeout(this.timeout);\n            this.timeout = undefined;\n        }\n    }\n    compute(cancelationToken) {\n        let foldingRangeData = [];\n        if (this.decorationIds) {\n            for (let id of this.decorationIds) {\n                let range = this.editorModel.getDecorationRange(id);\n                if (range) {\n                    foldingRangeData.push({ start: range.startLineNumber, end: range.endLineNumber, rank: 1 });\n                }\n            }\n        }\n        return Promise.resolve(sanitizeRanges(foldingRangeData, Number.MAX_VALUE));\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { localize } from '../../../../nls.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nexport const foldingExpandedIcon = registerIcon('folding-expanded', Codicon.chevronDown, localize('foldingExpandedIcon', 'Icon for expanded ranges in the editor glyph margin.'));\nexport const foldingCollapsedIcon = registerIcon('folding-collapsed', Codicon.chevronRight, localize('foldingCollapsedIcon', 'Icon for collapsed ranges in the editor glyph margin.'));\nexport class FoldingDecorationProvider {\n    constructor(editor) {\n        this.editor = editor;\n        this.autoHideFoldingControls = true;\n        this.showFoldingHighlights = true;\n    }\n    getDecorationOption(isCollapsed, isHidden) {\n        if (isHidden) {\n            return FoldingDecorationProvider.HIDDEN_RANGE_DECORATION;\n        }\n        if (isCollapsed) {\n            return this.showFoldingHighlights ? FoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION : FoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION;\n        }\n        else if (this.autoHideFoldingControls) {\n            return FoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION;\n        }\n        else {\n            return FoldingDecorationProvider.EXPANDED_VISUAL_DECORATION;\n        }\n    }\n    deltaDecorations(oldDecorations, newDecorations) {\n        return this.editor.deltaDecorations(oldDecorations, newDecorations);\n    }\n    changeDecorations(callback) {\n        return this.editor.changeDecorations(callback);\n    }\n}\nFoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-collapsed-visual-decoration',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingCollapsedIcon)\n});\nFoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-collapsed-highlighted-visual-decoration',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    className: 'folded-background',\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingCollapsedIcon)\n});\nFoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-expanded-auto-hide-visual-decoration',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingExpandedIcon)\n});\nFoldingDecorationProvider.EXPANDED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-expanded-visual-decoration',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    isWholeLine: true,\n    firstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingExpandedIcon)\n});\nFoldingDecorationProvider.HIDDEN_RANGE_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-hidden-range-decoration',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorZoom } from '../../../common/config/editorZoom.js';\nimport * as nls from '../../../../nls.js';\nclass EditorFontZoomIn extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomIn',\n            label: nls.localize('EditorFontZoomIn.label', \"Editor Font Zoom In\"),\n            alias: 'Editor Font Zoom In',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() + 1);\n    }\n}\nclass EditorFontZoomOut extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomOut',\n            label: nls.localize('EditorFontZoomOut.label', \"Editor Font Zoom Out\"),\n            alias: 'Editor Font Zoom Out',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() - 1);\n    }\n}\nclass EditorFontZoomReset extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomReset',\n            label: nls.localize('EditorFontZoomReset.label', \"Editor Font Zoom Reset\"),\n            alias: 'Editor Font Zoom Reset',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(0);\n    }\n}\nregisterEditorAction(EditorFontZoomIn);\nregisterEditorAction(EditorFontZoomOut);\nregisterEditorAction(EditorFontZoomReset);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './browser/coreCommands.js';\nimport './browser/widget/codeEditorWidget.js';\nimport './browser/widget/diffEditorWidget.js';\nimport './browser/widget/diffNavigator.js';\nimport './contrib/anchorSelect/browser/anchorSelect.js';\nimport './contrib/bracketMatching/browser/bracketMatching.js';\nimport './contrib/caretOperations/browser/caretOperations.js';\nimport './contrib/caretOperations/browser/transpose.js';\nimport './contrib/clipboard/browser/clipboard.js';\nimport './contrib/codeAction/browser/codeActionContributions.js';\nimport './contrib/codelens/browser/codelensController.js';\nimport './contrib/colorPicker/browser/colorContributions.js';\nimport './contrib/comment/browser/comment.js';\nimport './contrib/contextmenu/browser/contextmenu.js';\nimport './contrib/cursorUndo/browser/cursorUndo.js';\nimport './contrib/dnd/browser/dnd.js';\nimport './contrib/find/browser/findController.js';\nimport './contrib/folding/browser/folding.js';\nimport './contrib/fontZoom/browser/fontZoom.js';\nimport './contrib/format/browser/formatActions.js';\nimport './contrib/documentSymbols/browser/documentSymbols.js';\nimport './contrib/inlineCompletions/browser/inlineCompletionsContribution.js';\nimport './contrib/gotoSymbol/browser/goToCommands.js';\nimport './contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js';\nimport './contrib/gotoError/browser/gotoError.js';\nimport './contrib/hover/browser/hover.js';\nimport './contrib/indentation/browser/indentation.js';\nimport './contrib/inlayHints/browser/inlayHintsContribution.js';\nimport './contrib/inPlaceReplace/browser/inPlaceReplace.js';\nimport './contrib/lineSelection/browser/lineSelection.js';\nimport './contrib/linesOperations/browser/linesOperations.js';\nimport './contrib/linkedEditing/browser/linkedEditing.js';\nimport './contrib/links/browser/links.js';\nimport './contrib/multicursor/browser/multicursor.js';\nimport './contrib/parameterHints/browser/parameterHints.js';\nimport './contrib/rename/browser/rename.js';\nimport './contrib/smartSelect/browser/smartSelect.js';\nimport './contrib/snippet/browser/snippetController2.js';\nimport './contrib/suggest/browser/suggestController.js';\nimport './contrib/tokenization/browser/tokenization.js';\nimport './contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js';\nimport './contrib/unicodeHighlighter/browser/unicodeHighlighter.js';\nimport './contrib/unusualLineTerminators/browser/unusualLineTerminators.js';\nimport './contrib/viewportSemanticTokens/browser/viewportSemanticTokens.js';\nimport './contrib/wordHighlighter/browser/wordHighlighter.js';\nimport './contrib/wordOperations/browser/wordOperations.js';\nimport './contrib/wordPartOperations/browser/wordPartOperations.js';\n// Load up these strings even in VSCode, even if they are not used\n// in order to get them translated\nimport './common/standaloneStrings.js';\nimport '../base/browser/ui/codicons/codiconStyles.js'; // The codicons are defined here and must be loaded\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { GhostTextController, ShowNextInlineSuggestionAction, ShowPreviousInlineSuggestionAction, TriggerInlineSuggestionAction } from './ghostTextController.js';\nimport { InlineCompletionsHoverParticipant } from './inlineCompletionsHoverParticipant.js';\nregisterEditorContribution(GhostTextController.ID, GhostTextController);\nregisterEditorAction(TriggerInlineSuggestionAction);\nregisterEditorAction(ShowNextInlineSuggestionAction);\nregisterEditorAction(ShowPreviousInlineSuggestionAction);\nHoverParticipantRegistry.register(InlineCompletionsHoverParticipant);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { firstNonWhitespaceIndex } from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { CursorColumns } from '../../../common/core/cursorColumns.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { inlineSuggestCommitId } from './consts.js';\nimport { GhostTextModel } from './ghostTextModel.js';\nimport { GhostTextWidget } from './ghostTextWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nlet GhostTextController = class GhostTextController extends Disposable {\n    constructor(editor, instantiationService) {\n        super();\n        this.editor = editor;\n        this.instantiationService = instantiationService;\n        this.triggeredExplicitly = false;\n        this.activeController = this._register(new MutableDisposable());\n        this.activeModelDidChangeEmitter = this._register(new Emitter());\n        this._register(this.editor.onDidChangeModel(() => {\n            this.updateModelController();\n        }));\n        this._register(this.editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(106 /* suggest */)) {\n                this.updateModelController();\n            }\n            if (e.hasChanged(55 /* inlineSuggest */)) {\n                this.updateModelController();\n            }\n        }));\n        this.updateModelController();\n    }\n    static get(editor) {\n        return editor.getContribution(GhostTextController.ID);\n    }\n    get activeModel() {\n        var _a;\n        return (_a = this.activeController.value) === null || _a === void 0 ? void 0 : _a.model;\n    }\n    // Don't call this method when not necessary. It will recreate the activeController.\n    updateModelController() {\n        const suggestOptions = this.editor.getOption(106 /* suggest */);\n        const inlineSuggestOptions = this.editor.getOption(55 /* inlineSuggest */);\n        this.activeController.value = undefined;\n        // ActiveGhostTextController is only created if one of those settings is set or if the inline completions are triggered explicitly.\n        this.activeController.value =\n            this.editor.hasModel() && (suggestOptions.preview || inlineSuggestOptions.enabled || this.triggeredExplicitly)\n                ? this.instantiationService.createInstance(ActiveGhostTextController, this.editor)\n                : undefined;\n        this.activeModelDidChangeEmitter.fire();\n    }\n    shouldShowHoverAt(hoverRange) {\n        var _a;\n        return ((_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.shouldShowHoverAt(hoverRange)) || false;\n    }\n    shouldShowHoverAtViewZone(viewZoneId) {\n        var _a, _b;\n        return ((_b = (_a = this.activeController.value) === null || _a === void 0 ? void 0 : _a.widget) === null || _b === void 0 ? void 0 : _b.shouldShowHoverAtViewZone(viewZoneId)) || false;\n    }\n    trigger() {\n        var _a;\n        this.triggeredExplicitly = true;\n        if (!this.activeController.value) {\n            this.updateModelController();\n        }\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.triggerInlineCompletion();\n    }\n    commit() {\n        var _a;\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.commitInlineCompletion();\n    }\n    hide() {\n        var _a;\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.hideInlineCompletion();\n    }\n    showNextInlineCompletion() {\n        var _a;\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.showNextInlineCompletion();\n    }\n    showPreviousInlineCompletion() {\n        var _a;\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.showPreviousInlineCompletion();\n    }\n    hasMultipleInlineCompletions() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield ((_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.hasMultipleInlineCompletions());\n            return result !== undefined ? result : false;\n        });\n    }\n};\nGhostTextController.inlineSuggestionVisible = new RawContextKey('inlineSuggestionVisible', false, nls.localize('inlineSuggestionVisible', \"Whether an inline suggestion is visible\"));\nGhostTextController.inlineSuggestionHasIndentation = new RawContextKey('inlineSuggestionHasIndentation', false, nls.localize('inlineSuggestionHasIndentation', \"Whether the inline suggestion starts with whitespace\"));\nGhostTextController.inlineSuggestionHasIndentationLessThanTabSize = new RawContextKey('inlineSuggestionHasIndentationLessThanTabSize', true, nls.localize('inlineSuggestionHasIndentationLessThanTabSize', \"Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab\"));\nGhostTextController.ID = 'editor.contrib.ghostTextController';\nGhostTextController = __decorate([\n    __param(1, IInstantiationService)\n], GhostTextController);\nexport { GhostTextController };\nclass GhostTextContextKeys {\n    constructor(contextKeyService) {\n        this.contextKeyService = contextKeyService;\n        this.inlineCompletionVisible = GhostTextController.inlineSuggestionVisible.bindTo(this.contextKeyService);\n        this.inlineCompletionSuggestsIndentation = GhostTextController.inlineSuggestionHasIndentation.bindTo(this.contextKeyService);\n        this.inlineCompletionSuggestsIndentationLessThanTabSize = GhostTextController.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService);\n    }\n}\n/**\n * The controller for a text editor with an initialized text model.\n * Must be disposed as soon as the model detaches from the editor.\n*/\nlet ActiveGhostTextController = class ActiveGhostTextController extends Disposable {\n    constructor(editor, instantiationService, contextKeyService) {\n        super();\n        this.editor = editor;\n        this.instantiationService = instantiationService;\n        this.contextKeyService = contextKeyService;\n        this.contextKeys = new GhostTextContextKeys(this.contextKeyService);\n        this.model = this._register(this.instantiationService.createInstance(GhostTextModel, this.editor));\n        this.widget = this._register(this.instantiationService.createInstance(GhostTextWidget, this.editor, this.model));\n        this._register(toDisposable(() => {\n            this.contextKeys.inlineCompletionVisible.set(false);\n            this.contextKeys.inlineCompletionSuggestsIndentation.set(false);\n            this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(true);\n        }));\n        this._register(this.model.onDidChange(() => {\n            this.updateContextKeys();\n        }));\n        this.updateContextKeys();\n    }\n    updateContextKeys() {\n        var _a;\n        this.contextKeys.inlineCompletionVisible.set(((_a = this.model.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.ghostText) !== undefined);\n        let startsWithIndentation = false;\n        let startsWithIndentationLessThanTabSize = true;\n        const ghostText = this.model.inlineCompletionsModel.ghostText;\n        if (!!this.model.activeInlineCompletionsModel && ghostText && ghostText.parts.length > 0) {\n            const { column, lines } = ghostText.parts[0];\n            const firstLine = lines[0];\n            const indentationEndColumn = this.editor.getModel().getLineIndentColumn(ghostText.lineNumber);\n            const inIndentation = column <= indentationEndColumn;\n            if (inIndentation) {\n                let firstNonWsIdx = firstNonWhitespaceIndex(firstLine);\n                if (firstNonWsIdx === -1) {\n                    firstNonWsIdx = firstLine.length - 1;\n                }\n                startsWithIndentation = firstNonWsIdx > 0;\n                const tabSize = this.editor.getModel().getOptions().tabSize;\n                const visibleColumnIndentation = CursorColumns.visibleColumnFromColumn(firstLine, firstNonWsIdx + 1, tabSize);\n                startsWithIndentationLessThanTabSize = visibleColumnIndentation < tabSize;\n            }\n        }\n        this.contextKeys.inlineCompletionSuggestsIndentation.set(startsWithIndentation);\n        this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(startsWithIndentationLessThanTabSize);\n    }\n};\nActiveGhostTextController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IContextKeyService)\n], ActiveGhostTextController);\nexport { ActiveGhostTextController };\nconst GhostTextCommand = EditorCommand.bindToContribution(GhostTextController.get);\nexport const commitInlineSuggestionAction = new GhostTextCommand({\n    id: inlineSuggestCommitId,\n    precondition: GhostTextController.inlineSuggestionVisible,\n    handler(x) {\n        x.commit();\n        x.editor.focus();\n    }\n});\nregisterEditorCommand(commitInlineSuggestionAction);\nKeybindingsRegistry.registerKeybindingRule({\n    primary: 2 /* Tab */,\n    weight: 200,\n    id: commitInlineSuggestionAction.id,\n    when: ContextKeyExpr.and(commitInlineSuggestionAction.precondition, EditorContextKeys.tabMovesFocus.toNegated(), GhostTextController.inlineSuggestionHasIndentationLessThanTabSize),\n});\nregisterEditorCommand(new GhostTextCommand({\n    id: 'editor.action.inlineSuggest.hide',\n    precondition: GhostTextController.inlineSuggestionVisible,\n    kbOpts: {\n        weight: 100,\n        primary: 9 /* Escape */,\n    },\n    handler(x) {\n        x.hide();\n    }\n}));\nexport class ShowNextInlineSuggestionAction extends EditorAction {\n    constructor() {\n        super({\n            id: ShowNextInlineSuggestionAction.ID,\n            label: nls.localize('action.inlineSuggest.showNext', \"Show Next Inline Suggestion\"),\n            alias: 'Show Next Inline Suggestion',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, GhostTextController.inlineSuggestionVisible),\n            kbOpts: {\n                weight: 100,\n                primary: 512 /* Alt */ | 89 /* BracketRight */,\n            },\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = GhostTextController.get(editor);\n            if (controller) {\n                controller.showNextInlineCompletion();\n                editor.focus();\n            }\n        });\n    }\n}\nShowNextInlineSuggestionAction.ID = 'editor.action.inlineSuggest.showNext';\nexport class ShowPreviousInlineSuggestionAction extends EditorAction {\n    constructor() {\n        super({\n            id: ShowPreviousInlineSuggestionAction.ID,\n            label: nls.localize('action.inlineSuggest.showPrevious', \"Show Previous Inline Suggestion\"),\n            alias: 'Show Previous Inline Suggestion',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, GhostTextController.inlineSuggestionVisible),\n            kbOpts: {\n                weight: 100,\n                primary: 512 /* Alt */ | 87 /* BracketLeft */,\n            },\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = GhostTextController.get(editor);\n            if (controller) {\n                controller.showPreviousInlineCompletion();\n                editor.focus();\n            }\n        });\n    }\n}\nShowPreviousInlineSuggestionAction.ID = 'editor.action.inlineSuggest.showPrevious';\nexport class TriggerInlineSuggestionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inlineSuggest.trigger',\n            label: nls.localize('action.inlineSuggest.trigger', \"Trigger Inline Suggestion\"),\n            alias: 'Trigger Inline Suggestion',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = GhostTextController.get(editor);\n            if (controller) {\n                controller.trigger();\n            }\n        });\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const inlineSuggestCommitId = 'editor.action.inlineSuggest.commit';\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\nimport { InlineCompletionsModel, SynchronizedInlineCompletionsCache } from './inlineCompletionsModel.js';\nimport { SuggestWidgetPreviewModel } from './suggestWidgetPreviewModel.js';\nimport { createDisposableRef } from './utils.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport class DelegatingModel extends Disposable {\n    constructor() {\n        super(...arguments);\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        this.hasCachedGhostText = false;\n        this.currentModelRef = this._register(new MutableDisposable());\n    }\n    get targetModel() {\n        var _a;\n        return (_a = this.currentModelRef.value) === null || _a === void 0 ? void 0 : _a.object;\n    }\n    setTargetModel(model) {\n        var _a;\n        if (((_a = this.currentModelRef.value) === null || _a === void 0 ? void 0 : _a.object) === model) {\n            return;\n        }\n        this.currentModelRef.clear();\n        this.currentModelRef.value = model ? createDisposableRef(model, model.onDidChange(() => {\n            this.hasCachedGhostText = false;\n            this.onDidChangeEmitter.fire();\n        })) : undefined;\n        this.hasCachedGhostText = false;\n        this.onDidChangeEmitter.fire();\n    }\n    get ghostText() {\n        var _a, _b;\n        if (!this.hasCachedGhostText) {\n            this.cachedGhostText = (_b = (_a = this.currentModelRef.value) === null || _a === void 0 ? void 0 : _a.object) === null || _b === void 0 ? void 0 : _b.ghostText;\n            this.hasCachedGhostText = true;\n        }\n        return this.cachedGhostText;\n    }\n    setExpanded(expanded) {\n        var _a;\n        (_a = this.targetModel) === null || _a === void 0 ? void 0 : _a.setExpanded(expanded);\n    }\n    get minReservedLineCount() {\n        return this.targetModel ? this.targetModel.minReservedLineCount : 0;\n    }\n}\n/**\n * A ghost text model that is both driven by inline completions and the suggest widget.\n*/\nlet GhostTextModel = class GhostTextModel extends DelegatingModel {\n    constructor(editor, instantiationService) {\n        super();\n        this.editor = editor;\n        this.instantiationService = instantiationService;\n        this.sharedCache = this._register(new SharedInlineCompletionCache());\n        this.suggestWidgetAdapterModel = this._register(this.instantiationService.createInstance(SuggestWidgetPreviewModel, this.editor, this.sharedCache));\n        this.inlineCompletionsModel = this._register(this.instantiationService.createInstance(InlineCompletionsModel, this.editor, this.sharedCache));\n        this._register(this.suggestWidgetAdapterModel.onDidChange(() => {\n            this.updateModel();\n        }));\n        this.updateModel();\n    }\n    get activeInlineCompletionsModel() {\n        if (this.targetModel === this.inlineCompletionsModel) {\n            return this.inlineCompletionsModel;\n        }\n        return undefined;\n    }\n    updateModel() {\n        this.setTargetModel(this.suggestWidgetAdapterModel.isActive\n            ? this.suggestWidgetAdapterModel\n            : this.inlineCompletionsModel);\n        this.inlineCompletionsModel.setActive(this.targetModel === this.inlineCompletionsModel);\n    }\n    shouldShowHoverAt(hoverRange) {\n        var _a;\n        const ghostText = (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.ghostText;\n        if (ghostText) {\n            return ghostText.parts.some(p => hoverRange.containsPosition(new Position(ghostText.lineNumber, p.column)));\n        }\n        return false;\n    }\n    triggerInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.trigger(InlineCompletionTriggerKind.Explicit);\n    }\n    commitInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.commitCurrentSuggestion();\n    }\n    hideInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.hide();\n    }\n    showNextInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.showNext();\n    }\n    showPreviousInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.showPrevious();\n    }\n    hasMultipleInlineCompletions() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield ((_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.hasMultipleInlineCompletions());\n            return result !== undefined ? result : false;\n        });\n    }\n};\nGhostTextModel = __decorate([\n    __param(1, IInstantiationService)\n], GhostTextModel);\nexport { GhostTextModel };\nexport class SharedInlineCompletionCache extends Disposable {\n    constructor() {\n        super(...arguments);\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        this.cache = this._register(new MutableDisposable());\n    }\n    get value() {\n        return this.cache.value;\n    }\n    setValue(editor, completionsSource, triggerKind) {\n        this.cache.value = new SynchronizedInlineCompletionsCache(editor, completionsSource, () => this.onDidChangeEmitter.fire(), triggerKind);\n    }\n    clearAndLeak() {\n        return this.cache.clearAndLeak();\n    }\n    clear() {\n        this.cache.clear();\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { commonPrefixLength, commonSuffixLength } from '../../../../base/common/strings.js';\nimport { CoreEditingCommands } from '../../../browser/coreCommands.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\nimport { BaseGhostTextWidgetModel } from './ghostText.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { inlineSuggestCommitId } from './consts.js';\nimport { inlineCompletionToGhostText } from './inlineCompletionToGhostText.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { fixBracketsInLine } from '../../../common/model/bracketPairsTextModelPart/fixBrackets.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nlet InlineCompletionsModel = class InlineCompletionsModel extends Disposable {\n    constructor(editor, cache, commandService, languageConfigurationService, languageFeaturesService, debounceService) {\n        super();\n        this.editor = editor;\n        this.cache = cache;\n        this.commandService = commandService;\n        this.languageConfigurationService = languageConfigurationService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.debounceService = debounceService;\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        this.completionSession = this._register(new MutableDisposable());\n        this.active = false;\n        this.disposed = false;\n        this.debounceValue = this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider, 'InlineCompletionsDebounce', { min: 50, max: 200 });\n        this._register(commandService.onDidExecuteCommand((e) => {\n            // These commands don't trigger onDidType.\n            const commands = new Set([\n                CoreEditingCommands.Tab.id,\n                CoreEditingCommands.DeleteLeft.id,\n                CoreEditingCommands.DeleteRight.id,\n                inlineSuggestCommitId,\n                'acceptSelectedSuggestion',\n            ]);\n            if (commands.has(e.commandId) && editor.hasTextFocus()) {\n                this.handleUserInput();\n            }\n        }));\n        this._register(this.editor.onDidType((e) => {\n            this.handleUserInput();\n        }));\n        this._register(this.editor.onDidChangeCursorPosition((e) => {\n            if (this.session && !this.session.isValid) {\n                this.hide();\n            }\n        }));\n        this._register(toDisposable(() => {\n            this.disposed = true;\n        }));\n        this._register(this.editor.onDidBlurEditorWidget(() => {\n            this.hide();\n        }));\n    }\n    handleUserInput() {\n        if (this.session && !this.session.isValid) {\n            this.hide();\n        }\n        setTimeout(() => {\n            if (this.disposed) {\n                return;\n            }\n            // Wait for the cursor update that happens in the same iteration loop iteration\n            this.startSessionIfTriggered();\n        }, 0);\n    }\n    get session() {\n        return this.completionSession.value;\n    }\n    get ghostText() {\n        var _a;\n        return (_a = this.session) === null || _a === void 0 ? void 0 : _a.ghostText;\n    }\n    get minReservedLineCount() {\n        return this.session ? this.session.minReservedLineCount : 0;\n    }\n    setExpanded(expanded) {\n        var _a;\n        (_a = this.session) === null || _a === void 0 ? void 0 : _a.setExpanded(expanded);\n    }\n    setActive(active) {\n        var _a;\n        this.active = active;\n        if (active) {\n            (_a = this.session) === null || _a === void 0 ? void 0 : _a.scheduleAutomaticUpdate();\n        }\n    }\n    startSessionIfTriggered() {\n        const suggestOptions = this.editor.getOption(55 /* inlineSuggest */);\n        if (!suggestOptions.enabled) {\n            return;\n        }\n        if (this.session && this.session.isValid) {\n            return;\n        }\n        this.trigger(InlineCompletionTriggerKind.Automatic);\n    }\n    trigger(triggerKind) {\n        if (this.completionSession.value) {\n            if (triggerKind === InlineCompletionTriggerKind.Explicit) {\n                void this.completionSession.value.ensureUpdateWithExplicitContext();\n            }\n            return;\n        }\n        this.completionSession.value = new InlineCompletionsSession(this.editor, this.editor.getPosition(), () => this.active, this.commandService, this.cache, triggerKind, this.languageConfigurationService, this.languageFeaturesService.inlineCompletionsProvider, this.debounceValue);\n        this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(() => {\n            this.onDidChangeEmitter.fire();\n        }));\n    }\n    hide() {\n        this.completionSession.clear();\n        this.onDidChangeEmitter.fire();\n    }\n    commitCurrentSuggestion() {\n        var _a;\n        // Don't dispose the session, so that after committing, more suggestions are shown.\n        (_a = this.session) === null || _a === void 0 ? void 0 : _a.commitCurrentCompletion();\n    }\n    showNext() {\n        var _a;\n        (_a = this.session) === null || _a === void 0 ? void 0 : _a.showNextInlineCompletion();\n    }\n    showPrevious() {\n        var _a;\n        (_a = this.session) === null || _a === void 0 ? void 0 : _a.showPreviousInlineCompletion();\n    }\n    hasMultipleInlineCompletions() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield ((_a = this.session) === null || _a === void 0 ? void 0 : _a.hasMultipleInlineCompletions());\n            return result !== undefined ? result : false;\n        });\n    }\n};\nInlineCompletionsModel = __decorate([\n    __param(2, ICommandService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeaturesService),\n    __param(5, ILanguageFeatureDebounceService)\n], InlineCompletionsModel);\nexport { InlineCompletionsModel };\nexport class InlineCompletionsSession extends BaseGhostTextWidgetModel {\n    constructor(editor, triggerPosition, shouldUpdate, commandService, cache, initialTriggerKind, languageConfigurationService, registry, debounce) {\n        super(editor);\n        this.triggerPosition = triggerPosition;\n        this.shouldUpdate = shouldUpdate;\n        this.commandService = commandService;\n        this.cache = cache;\n        this.initialTriggerKind = initialTriggerKind;\n        this.languageConfigurationService = languageConfigurationService;\n        this.registry = registry;\n        this.debounce = debounce;\n        this.minReservedLineCount = 0;\n        this.updateOperation = this._register(new MutableDisposable());\n        this.updateSoon = this._register(new RunOnceScheduler(() => {\n            let triggerKind = this.initialTriggerKind;\n            // All subsequent triggers are automatic.\n            this.initialTriggerKind = InlineCompletionTriggerKind.Automatic;\n            return this.update(triggerKind);\n        }, 50));\n        //#region Selection\n        // We use a semantic id to track the selection even if the cache changes.\n        this.currentlySelectedCompletionId = undefined;\n        let lastCompletionItem = undefined;\n        this._register(this.onDidChange(() => {\n            const currentCompletion = this.currentCompletion;\n            if (currentCompletion && currentCompletion.sourceInlineCompletion !== lastCompletionItem) {\n                lastCompletionItem = currentCompletion.sourceInlineCompletion;\n                const provider = currentCompletion.sourceProvider;\n                if (provider.handleItemDidShow) {\n                    provider.handleItemDidShow(currentCompletion.sourceInlineCompletions, lastCompletionItem);\n                }\n            }\n        }));\n        this._register(toDisposable(() => {\n            this.cache.clear();\n        }));\n        this._register(this.editor.onDidChangeCursorPosition((e) => {\n            if (this.cache.value) {\n                this.onDidChangeEmitter.fire();\n            }\n        }));\n        this._register(this.editor.onDidChangeModelContent((e) => {\n            this.scheduleAutomaticUpdate();\n        }));\n        this._register(this.registry.onDidChange(() => {\n            this.updateSoon.schedule(this.debounce.get(this.editor.getModel()));\n        }));\n        this.scheduleAutomaticUpdate();\n    }\n    fixAndGetIndexOfCurrentSelection() {\n        if (!this.currentlySelectedCompletionId || !this.cache.value) {\n            return 0;\n        }\n        if (this.cache.value.completions.length === 0) {\n            // don't reset the selection in this case\n            return 0;\n        }\n        const idx = this.cache.value.completions.findIndex(v => v.semanticId === this.currentlySelectedCompletionId);\n        if (idx === -1) {\n            // Reset the selection so that the selection does not jump back when it appears again\n            this.currentlySelectedCompletionId = undefined;\n            return 0;\n        }\n        return idx;\n    }\n    get currentCachedCompletion() {\n        if (!this.cache.value) {\n            return undefined;\n        }\n        return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()];\n    }\n    showNextInlineCompletion() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.ensureUpdateWithExplicitContext();\n            const completions = ((_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.completions) || [];\n            if (completions.length > 0) {\n                const newIdx = (this.fixAndGetIndexOfCurrentSelection() + 1) % completions.length;\n                this.currentlySelectedCompletionId = completions[newIdx].semanticId;\n            }\n            else {\n                this.currentlySelectedCompletionId = undefined;\n            }\n            this.onDidChangeEmitter.fire();\n        });\n    }\n    showPreviousInlineCompletion() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.ensureUpdateWithExplicitContext();\n            const completions = ((_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.completions) || [];\n            if (completions.length > 0) {\n                const newIdx = (this.fixAndGetIndexOfCurrentSelection() + completions.length - 1) % completions.length;\n                this.currentlySelectedCompletionId = completions[newIdx].semanticId;\n            }\n            else {\n                this.currentlySelectedCompletionId = undefined;\n            }\n            this.onDidChangeEmitter.fire();\n        });\n    }\n    ensureUpdateWithExplicitContext() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.updateOperation.value) {\n                // Restart or wait for current update operation\n                if (this.updateOperation.value.triggerKind === InlineCompletionTriggerKind.Explicit) {\n                    yield this.updateOperation.value.promise;\n                }\n                else {\n                    yield this.update(InlineCompletionTriggerKind.Explicit);\n                }\n            }\n            else if (((_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.triggerKind) !== InlineCompletionTriggerKind.Explicit) {\n                // Refresh cache\n                yield this.update(InlineCompletionTriggerKind.Explicit);\n            }\n        });\n    }\n    hasMultipleInlineCompletions() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.ensureUpdateWithExplicitContext();\n            return (((_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.completions.length) || 0) > 1;\n        });\n    }\n    //#endregion\n    get ghostText() {\n        const currentCompletion = this.currentCompletion;\n        const mode = this.editor.getOptions().get(55 /* inlineSuggest */).mode;\n        return currentCompletion ? inlineCompletionToGhostText(currentCompletion, this.editor.getModel(), mode, this.editor.getPosition()) : undefined;\n    }\n    get currentCompletion() {\n        const completion = this.currentCachedCompletion;\n        if (!completion) {\n            return undefined;\n        }\n        return completion.toLiveInlineCompletion();\n    }\n    get isValid() {\n        return this.editor.getPosition().lineNumber === this.triggerPosition.lineNumber;\n    }\n    scheduleAutomaticUpdate() {\n        // Since updateSoon debounces, starvation can happen.\n        // To prevent stale cache, we clear the current update operation.\n        this.updateOperation.clear();\n        this.updateSoon.schedule(this.debounce.get(this.editor.getModel()));\n    }\n    update(triggerKind) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.shouldUpdate()) {\n                return;\n            }\n            const position = this.editor.getPosition();\n            const startTime = new Date();\n            const promise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                let result;\n                try {\n                    result = yield provideInlineCompletions(this.registry, position, this.editor.getModel(), { triggerKind, selectedSuggestionInfo: undefined }, token, this.languageConfigurationService);\n                    const endTime = new Date();\n                    this.debounce.update(this.editor.getModel(), endTime.getTime() - startTime.getTime());\n                }\n                catch (e) {\n                    onUnexpectedError(e);\n                    return;\n                }\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                this.cache.setValue(this.editor, result, triggerKind);\n                this.onDidChangeEmitter.fire();\n            }));\n            const operation = new UpdateOperation(promise, triggerKind);\n            this.updateOperation.value = operation;\n            yield promise;\n            if (this.updateOperation.value === operation) {\n                this.updateOperation.clear();\n            }\n        });\n    }\n    takeOwnership(disposable) {\n        this._register(disposable);\n    }\n    commitCurrentCompletion() {\n        if (!this.ghostText) {\n            // No ghost text was shown for this completion.\n            // Thus, we don't want to commit anything.\n            return;\n        }\n        const completion = this.currentCompletion;\n        if (completion) {\n            this.commit(completion);\n        }\n    }\n    commit(completion) {\n        // Mark the cache as stale, but don't dispose it yet,\n        // otherwise command args might get disposed.\n        const cache = this.cache.clearAndLeak();\n        this.editor.executeEdits('inlineSuggestion.accept', [\n            EditOperation.replaceMove(completion.range, completion.text)\n        ]);\n        if (completion.command) {\n            this.commandService\n                .executeCommand(completion.command.id, ...(completion.command.arguments || []))\n                .finally(() => {\n                cache === null || cache === void 0 ? void 0 : cache.dispose();\n            })\n                .then(undefined, onUnexpectedExternalError);\n        }\n        else {\n            cache === null || cache === void 0 ? void 0 : cache.dispose();\n        }\n        this.onDidChangeEmitter.fire();\n    }\n}\nexport class UpdateOperation {\n    constructor(promise, triggerKind) {\n        this.promise = promise;\n        this.triggerKind = triggerKind;\n    }\n    dispose() {\n        this.promise.cancel();\n    }\n}\n/**\n * The cache keeps itself in sync with the editor.\n * It also owns the completions result and disposes it when the cache is diposed.\n*/\nexport class SynchronizedInlineCompletionsCache extends Disposable {\n    constructor(editor, completionsSource, onChange, triggerKind) {\n        super();\n        this.triggerKind = triggerKind;\n        const decorationIds = editor.deltaDecorations([], completionsSource.items.map(i => ({\n            range: i.range,\n            options: {\n                description: 'inline-completion-tracking-range'\n            },\n        })));\n        this._register(toDisposable(() => {\n            editor.deltaDecorations(decorationIds, []);\n        }));\n        this.completions = completionsSource.items.map((c, idx) => new CachedInlineCompletion(c, decorationIds[idx]));\n        this._register(editor.onDidChangeModelContent(() => {\n            let hasChanged = false;\n            const model = editor.getModel();\n            for (const c of this.completions) {\n                const newRange = model.getDecorationRange(c.decorationId);\n                if (!newRange) {\n                    onUnexpectedError(new Error('Decoration has no range'));\n                    continue;\n                }\n                if (!c.synchronizedRange.equalsRange(newRange)) {\n                    hasChanged = true;\n                    c.synchronizedRange = newRange;\n                }\n            }\n            if (hasChanged) {\n                onChange();\n            }\n        }));\n        this._register(completionsSource);\n    }\n}\nclass CachedInlineCompletion {\n    constructor(inlineCompletion, decorationId) {\n        this.inlineCompletion = inlineCompletion;\n        this.decorationId = decorationId;\n        this.semanticId = JSON.stringify({\n            text: this.inlineCompletion.text,\n            startLine: this.inlineCompletion.range.startLineNumber,\n            startColumn: this.inlineCompletion.range.startColumn,\n            command: this.inlineCompletion.command\n        });\n        this.synchronizedRange = inlineCompletion.range;\n    }\n    toLiveInlineCompletion() {\n        return {\n            text: this.inlineCompletion.text,\n            range: this.synchronizedRange,\n            command: this.inlineCompletion.command,\n            sourceProvider: this.inlineCompletion.sourceProvider,\n            sourceInlineCompletions: this.inlineCompletion.sourceInlineCompletions,\n            sourceInlineCompletion: this.inlineCompletion.sourceInlineCompletion,\n        };\n    }\n}\nfunction getDefaultRange(position, model) {\n    const word = model.getWordAtPosition(position);\n    const maxColumn = model.getLineMaxColumn(position.lineNumber);\n    // By default, always replace up until the end of the current line.\n    // This default might be subject to change!\n    return word\n        ? new Range(position.lineNumber, word.startColumn, position.lineNumber, maxColumn)\n        : Range.fromPositions(position, position.with(undefined, maxColumn));\n}\nexport function provideInlineCompletions(registry, position, model, context, token = CancellationToken.None, languageConfigurationService) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const defaultReplaceRange = getDefaultRange(position, model);\n        const providers = registry.all(model);\n        const results = yield Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n            const completions = yield Promise.resolve(provider.provideInlineCompletions(model, position, context, token)).catch(onUnexpectedExternalError);\n            return ({\n                completions,\n                provider,\n                dispose: () => {\n                    if (completions) {\n                        provider.freeInlineCompletions(completions);\n                    }\n                }\n            });\n        })));\n        const itemsByHash = new Map();\n        for (const result of results) {\n            const completions = result.completions;\n            if (completions) {\n                for (const item of completions.items) {\n                    const range = item.range ? Range.lift(item.range) : defaultReplaceRange;\n                    if (range.startLineNumber !== range.endLineNumber) {\n                        // Ignore invalid ranges.\n                        continue;\n                    }\n                    const text = languageConfigurationService && item.completeBracketPairs\n                        ? closeBrackets(item.text, range.getStartPosition(), model, languageConfigurationService)\n                        : item.text;\n                    const trackedItem = ({\n                        text,\n                        range,\n                        command: item.command,\n                        sourceProvider: result.provider,\n                        sourceInlineCompletions: completions,\n                        sourceInlineCompletion: item\n                    });\n                    itemsByHash.set(JSON.stringify({ text, range: item.range }), trackedItem);\n                }\n            }\n        }\n        return {\n            items: [...itemsByHash.values()],\n            dispose: () => {\n                for (const result of results) {\n                    result.dispose();\n                }\n            },\n        };\n    });\n}\nfunction closeBrackets(text, position, model, languageConfigurationService) {\n    const lineStart = model.getLineContent(position.lineNumber).substring(0, position.column - 1);\n    const newLine = lineStart + text;\n    const newTokens = model.tokenizeLineWithEdit(position, newLine.length - (position.column - 1), text);\n    const slicedTokens = newTokens === null || newTokens === void 0 ? void 0 : newTokens.sliceAndInflate(position.column - 1, newLine.length, 0);\n    if (!slicedTokens) {\n        return text;\n    }\n    console.log(slicedTokens);\n    const newText = fixBracketsInLine(slicedTokens, languageConfigurationService);\n    return newText;\n}\nexport function minimizeInlineCompletion(model, inlineCompletion) {\n    if (!inlineCompletion) {\n        return inlineCompletion;\n    }\n    const valueToReplace = model.getValueInRange(inlineCompletion.range);\n    const commonPrefixLen = commonPrefixLength(valueToReplace, inlineCompletion.text);\n    const startOffset = model.getOffsetAt(inlineCompletion.range.getStartPosition()) + commonPrefixLen;\n    const start = model.getPositionAt(startOffset);\n    const remainingValueToReplace = valueToReplace.substr(commonPrefixLen);\n    const commonSuffixLen = commonSuffixLength(remainingValueToReplace, inlineCompletion.text);\n    const end = model.getPositionAt(Math.max(startOffset, model.getOffsetAt(inlineCompletion.range.getEndPosition()) - commonSuffixLen));\n    return {\n        range: Range.fromPositions(start, end),\n        text: inlineCompletion.text.substr(commonPrefixLen, inlineCompletion.text.length - commonPrefixLen - commonSuffixLen),\n    };\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nexport class GhostText {\n    constructor(lineNumber, parts, additionalReservedLineCount = 0) {\n        this.lineNumber = lineNumber;\n        this.parts = parts;\n        this.additionalReservedLineCount = additionalReservedLineCount;\n    }\n    renderForScreenReader(lineText) {\n        if (this.parts.length === 0) {\n            return '';\n        }\n        const lastPart = this.parts[this.parts.length - 1];\n        const cappedLineText = lineText.substr(0, lastPart.column - 1);\n        const text = applyEdits(cappedLineText, this.parts.map(p => ({\n            range: { startLineNumber: 1, endLineNumber: 1, startColumn: p.column, endColumn: p.column },\n            text: p.lines.join('\\n')\n        })));\n        return text.substring(this.parts[0].column - 1);\n    }\n}\nclass PositionOffsetTransformer {\n    constructor(text) {\n        this.lineStartOffsetByLineIdx = [];\n        this.lineStartOffsetByLineIdx.push(0);\n        for (let i = 0; i < text.length; i++) {\n            if (text.charAt(i) === '\\n') {\n                this.lineStartOffsetByLineIdx.push(i + 1);\n            }\n        }\n    }\n    getOffset(position) {\n        return this.lineStartOffsetByLineIdx[position.lineNumber - 1] + position.column - 1;\n    }\n}\nfunction applyEdits(text, edits) {\n    const transformer = new PositionOffsetTransformer(text);\n    const offsetEdits = edits.map(e => {\n        const range = Range.lift(e.range);\n        return ({\n            startOffset: transformer.getOffset(range.getStartPosition()),\n            endOffset: transformer.getOffset(range.getEndPosition()),\n            text: e.text\n        });\n    });\n    offsetEdits.sort((a, b) => b.startOffset - a.startOffset);\n    for (const edit of offsetEdits) {\n        text = text.substring(0, edit.startOffset) + edit.text + text.substring(edit.endOffset);\n    }\n    return text;\n}\nexport class GhostTextPart {\n    constructor(column, lines, \n    /**\n     * Indicates if this part is a preview of an inline suggestion when a suggestion is previewed.\n    */\n    preview) {\n        this.column = column;\n        this.lines = lines;\n        this.preview = preview;\n    }\n}\nexport class BaseGhostTextWidgetModel extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this._expanded = undefined;\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(106 /* suggest */) && this._expanded === undefined) {\n                this.onDidChangeEmitter.fire();\n            }\n        }));\n    }\n    setExpanded(expanded) {\n        this._expanded = true;\n        this.onDidChangeEmitter.fire();\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { LcsDiff } from '../../../../base/common/diff/diff.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { GhostText, GhostTextPart } from './ghostText.js';\nexport function normalizedInlineCompletionsEquals(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (!a || !b) {\n        return false;\n    }\n    return a.range.equalsRange(b.range) && a.text === b.text && a.command === b.command;\n}\n/**\n * @param previewSuffixLength Sets where to split `inlineCompletion.text`.\n * \tIf the text is `hello` and the suffix length is 2, the non-preview part is `hel` and the preview-part is `lo`.\n*/\nexport function inlineCompletionToGhostText(inlineCompletion, textModel, mode, cursorPosition, previewSuffixLength = 0) {\n    if (inlineCompletion.range.startLineNumber !== inlineCompletion.range.endLineNumber) {\n        // Only single line replacements are supported.\n        return undefined;\n    }\n    const sourceLine = textModel.getLineContent(inlineCompletion.range.startLineNumber);\n    const sourceIndentationLength = strings.getLeadingWhitespace(sourceLine).length;\n    const suggestionTouchesIndentation = inlineCompletion.range.startColumn - 1 <= sourceIndentationLength;\n    if (suggestionTouchesIndentation) {\n        // source:      \u00B7\u00B7\u00B7\u00B7\u00B7\u00B7\u00B7\u00B7\u00B7\u00B7[\u00B7\u00B7\u00B7\u00B7\u00B7\u00B7abc]\n        //                         ^^^^^^^^^ inlineCompletion.range\n        //              ^^^^^^^^^^ ^^^^^^ sourceIndentationLength\n        //                         ^^^^^^ replacedIndentation.length\n        //                               ^^^ rangeThatDoesNotReplaceIndentation\n        // inlineCompletion.text: '\u00B7\u00B7foo'\n        //                         ^^ suggestionAddedIndentationLength\n        const suggestionAddedIndentationLength = strings.getLeadingWhitespace(inlineCompletion.text).length;\n        const replacedIndentation = sourceLine.substring(inlineCompletion.range.startColumn - 1, sourceIndentationLength);\n        const rangeThatDoesNotReplaceIndentation = Range.fromPositions(inlineCompletion.range.getStartPosition().delta(0, replacedIndentation.length), inlineCompletion.range.getEndPosition());\n        const suggestionWithoutIndentationChange = inlineCompletion.text.startsWith(replacedIndentation)\n            // Adds more indentation without changing existing indentation: We can add ghost text for this\n            ? inlineCompletion.text.substring(replacedIndentation.length)\n            // Changes or removes existing indentation. Only add ghost text for the non-indentation part.\n            : inlineCompletion.text.substring(suggestionAddedIndentationLength);\n        inlineCompletion = {\n            range: rangeThatDoesNotReplaceIndentation,\n            text: suggestionWithoutIndentationChange,\n            command: inlineCompletion.command\n        };\n    }\n    // This is a single line string\n    const valueToBeReplaced = textModel.getValueInRange(inlineCompletion.range);\n    const changes = cachingDiff(valueToBeReplaced, inlineCompletion.text);\n    if (!changes) {\n        // No ghost text in case the diff would be too slow to compute\n        return undefined;\n    }\n    const lineNumber = inlineCompletion.range.startLineNumber;\n    const parts = new Array();\n    if (mode === 'prefix') {\n        const filteredChanges = changes.filter(c => c.originalLength === 0);\n        if (filteredChanges.length > 1 || filteredChanges.length === 1 && filteredChanges[0].originalStart !== valueToBeReplaced.length) {\n            // Prefixes only have a single change.\n            return undefined;\n        }\n    }\n    const previewStartInCompletionText = inlineCompletion.text.length - previewSuffixLength;\n    for (const c of changes) {\n        const insertColumn = inlineCompletion.range.startColumn + c.originalStart + c.originalLength;\n        if (mode === 'subwordSmart' && cursorPosition && cursorPosition.lineNumber === inlineCompletion.range.startLineNumber && insertColumn < cursorPosition.column) {\n            // No ghost text before cursor\n            return undefined;\n        }\n        if (c.originalLength > 0) {\n            return undefined;\n        }\n        if (c.modifiedLength === 0) {\n            continue;\n        }\n        const modifiedEnd = c.modifiedStart + c.modifiedLength;\n        const nonPreviewTextEnd = Math.max(c.modifiedStart, Math.min(modifiedEnd, previewStartInCompletionText));\n        const nonPreviewText = inlineCompletion.text.substring(c.modifiedStart, nonPreviewTextEnd);\n        const italicText = inlineCompletion.text.substring(nonPreviewTextEnd, Math.max(c.modifiedStart, modifiedEnd));\n        if (nonPreviewText.length > 0) {\n            const lines = strings.splitLines(nonPreviewText);\n            parts.push(new GhostTextPart(insertColumn, lines, false));\n        }\n        if (italicText.length > 0) {\n            const lines = strings.splitLines(italicText);\n            parts.push(new GhostTextPart(insertColumn, lines, true));\n        }\n    }\n    return new GhostText(lineNumber, parts, 0);\n}\nlet lastRequest = undefined;\nfunction cachingDiff(originalValue, newValue) {\n    if ((lastRequest === null || lastRequest === void 0 ? void 0 : lastRequest.originalValue) === originalValue && (lastRequest === null || lastRequest === void 0 ? void 0 : lastRequest.newValue) === newValue) {\n        return lastRequest === null || lastRequest === void 0 ? void 0 : lastRequest.changes;\n    }\n    else {\n        const changes = smartDiff(originalValue, newValue);\n        lastRequest = {\n            originalValue,\n            newValue,\n            changes\n        };\n        return changes;\n    }\n}\n/**\n * When matching `if ()` with `if (f() = 1) { g(); }`,\n * align it like this:        `if (       )`\n * Not like this:\t\t\t  `if (  )`\n * Also not like this:\t\t  `if (             )`.\n *\n * The parenthesis are preprocessed to ensure that they match correctly.\n */\nfunction smartDiff(originalValue, newValue) {\n    if (originalValue.length > 5000 || newValue.length > 5000) {\n        // We don't want to work on strings that are too big\n        return undefined;\n    }\n    function getMaxCharCode(val) {\n        let maxCharCode = 0;\n        for (let i = 0, len = val.length; i < len; i++) {\n            const charCode = val.charCodeAt(i);\n            if (charCode > maxCharCode) {\n                maxCharCode = charCode;\n            }\n        }\n        return maxCharCode;\n    }\n    const maxCharCode = Math.max(getMaxCharCode(originalValue), getMaxCharCode(newValue));\n    function getUniqueCharCode(id) {\n        if (id < 0) {\n            throw new Error('unexpected');\n        }\n        return maxCharCode + id + 1;\n    }\n    function getElements(source) {\n        let level = 0;\n        let group = 0;\n        const characters = new Int32Array(source.length);\n        for (let i = 0, len = source.length; i < len; i++) {\n            const id = group * 100 + level;\n            // TODO support more brackets\n            if (source[i] === '(') {\n                characters[i] = getUniqueCharCode(2 * id);\n                level++;\n            }\n            else if (source[i] === ')') {\n                characters[i] = getUniqueCharCode(2 * id + 1);\n                if (level === 1) {\n                    group++;\n                }\n                level = Math.max(level - 1, 0);\n            }\n            else {\n                characters[i] = source.charCodeAt(i);\n            }\n        }\n        return characters;\n    }\n    const elements1 = getElements(originalValue);\n    const elements2 = getElements(newValue);\n    return new LcsDiff({ getElements: () => elements1 }, { getElements: () => elements2 }).ComputeDiff(false).changes;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { LanguageAgnosticBracketTokens } from './bracketPairsTree/brackets.js';\nimport { lengthAdd, lengthGetColumnCountIfZeroLineCount, lengthZero } from './bracketPairsTree/length.js';\nimport { parseDocument } from './bracketPairsTree/parser.js';\nimport { DenseKeyProvider } from './bracketPairsTree/smallImmutableSet.js';\nimport { TextBufferTokenizer } from './bracketPairsTree/tokenizer.js';\nexport function fixBracketsInLine(tokens, languageConfigurationService) {\n    const denseKeyProvider = new DenseKeyProvider();\n    const bracketTokens = new LanguageAgnosticBracketTokens(denseKeyProvider, (languageId) => languageConfigurationService.getLanguageConfiguration(languageId));\n    const tokenizer = new TextBufferTokenizer(new StaticTokenizerSource([tokens]), bracketTokens);\n    const node = parseDocument(tokenizer, [], undefined, true);\n    let str = '';\n    const line = tokens.getLineContent();\n    function processNode(node, offset) {\n        if (node.kind === 2 /* Pair */) {\n            processNode(node.openingBracket, offset);\n            offset = lengthAdd(offset, node.openingBracket.length);\n            if (node.child) {\n                processNode(node.child, offset);\n                offset = lengthAdd(offset, node.child.length);\n            }\n            if (node.closingBracket) {\n                processNode(node.closingBracket, offset);\n                offset = lengthAdd(offset, node.closingBracket.length);\n            }\n            else {\n                const singleLangBracketTokens = bracketTokens.getSingleLanguageBracketTokens(node.openingBracket.languageId);\n                const closingTokenText = singleLangBracketTokens.findClosingTokenText(node.openingBracket.bracketIds);\n                str += closingTokenText;\n            }\n        }\n        else if (node.kind === 3 /* UnexpectedClosingBracket */) {\n            // remove the bracket\n        }\n        else if (node.kind === 0 /* Text */ || node.kind === 1 /* Bracket */) {\n            str += line.substring(lengthGetColumnCountIfZeroLineCount(offset), lengthGetColumnCountIfZeroLineCount(lengthAdd(offset, node.length)));\n        }\n        else if (node.kind === 4 /* List */) {\n            for (const child of node.children) {\n                processNode(child, offset);\n                offset = lengthAdd(offset, child.length);\n            }\n        }\n    }\n    processNode(node, lengthZero);\n    return str;\n}\nclass StaticTokenizerSource {\n    constructor(lines) {\n        this.lines = lines;\n    }\n    getLineCount() {\n        return this.lines.length;\n    }\n    getLineLength(lineNumber) {\n        return this.lines[lineNumber - 1].getLineContent().length;\n    }\n    getLineTokens(lineNumber) {\n        return this.lines[lineNumber - 1];\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { BaseGhostTextWidgetModel, GhostText } from './ghostText.js';\nimport { minimizeInlineCompletion, provideInlineCompletions, UpdateOperation } from './inlineCompletionsModel.js';\nimport { inlineCompletionToGhostText } from './inlineCompletionToGhostText.js';\nimport { SuggestWidgetInlineCompletionProvider } from './suggestWidgetInlineCompletionProvider.js';\nlet SuggestWidgetPreviewModel = class SuggestWidgetPreviewModel extends BaseGhostTextWidgetModel {\n    constructor(editor, cache, languageFeaturesService) {\n        super(editor);\n        this.cache = cache;\n        this.languageFeaturesService = languageFeaturesService;\n        this.suggestionInlineCompletionSource = this._register(new SuggestWidgetInlineCompletionProvider(this.editor, \n        // Use the first cache item (if any) as preselection.\n        () => { var _a, _b; return (_b = (_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.completions[0]) === null || _b === void 0 ? void 0 : _b.toLiveInlineCompletion(); }));\n        this.updateOperation = this._register(new MutableDisposable());\n        this.updateCacheSoon = this._register(new RunOnceScheduler(() => this.updateCache(), 50));\n        this.minReservedLineCount = 0;\n        this._register(this.suggestionInlineCompletionSource.onDidChange(() => {\n            this.updateCacheSoon.schedule();\n            const suggestWidgetState = this.suggestionInlineCompletionSource.state;\n            if (!suggestWidgetState) {\n                this.minReservedLineCount = 0;\n            }\n            const newGhostText = this.ghostText;\n            if (newGhostText) {\n                this.minReservedLineCount = Math.max(this.minReservedLineCount, sum(newGhostText.parts.map(p => p.lines.length - 1)));\n            }\n            if (this.minReservedLineCount >= 1) {\n                this.suggestionInlineCompletionSource.forceRenderingAbove();\n            }\n            else {\n                this.suggestionInlineCompletionSource.stopForceRenderingAbove();\n            }\n            this.onDidChangeEmitter.fire();\n        }));\n        this._register(this.cache.onDidChange(() => {\n            this.onDidChangeEmitter.fire();\n        }));\n        this._register(this.editor.onDidChangeCursorPosition((e) => {\n            this.minReservedLineCount = 0;\n            this.updateCacheSoon.schedule();\n            this.onDidChangeEmitter.fire();\n        }));\n        this._register(toDisposable(() => this.suggestionInlineCompletionSource.stopForceRenderingAbove()));\n    }\n    get isActive() {\n        return this.suggestionInlineCompletionSource.state !== undefined;\n    }\n    isSuggestionPreviewEnabled() {\n        const suggestOptions = this.editor.getOption(106 /* suggest */);\n        return suggestOptions.preview;\n    }\n    updateCache() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const state = this.suggestionInlineCompletionSource.state;\n            if (!state || !state.selectedItem) {\n                return;\n            }\n            const info = {\n                text: state.selectedItem.normalizedInlineCompletion.text,\n                range: state.selectedItem.normalizedInlineCompletion.range,\n                isSnippetText: state.selectedItem.isSnippetText,\n                completionKind: state.selectedItem.completionItemKind,\n            };\n            const position = this.editor.getPosition();\n            const promise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                let result;\n                try {\n                    result = yield provideInlineCompletions(this.languageFeaturesService.inlineCompletionsProvider, position, this.editor.getModel(), { triggerKind: InlineCompletionTriggerKind.Automatic, selectedSuggestionInfo: info }, token);\n                }\n                catch (e) {\n                    onUnexpectedError(e);\n                    return;\n                }\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                this.cache.setValue(this.editor, result, InlineCompletionTriggerKind.Automatic);\n                this.onDidChangeEmitter.fire();\n            }));\n            const operation = new UpdateOperation(promise, InlineCompletionTriggerKind.Automatic);\n            this.updateOperation.value = operation;\n            yield promise;\n            if (this.updateOperation.value === operation) {\n                this.updateOperation.clear();\n            }\n        });\n    }\n    get ghostText() {\n        var _a, _b, _c;\n        const isSuggestionPreviewEnabled = this.isSuggestionPreviewEnabled();\n        const augmentedCompletion = minimizeInlineCompletion(this.editor.getModel(), (_b = (_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.completions[0]) === null || _b === void 0 ? void 0 : _b.toLiveInlineCompletion());\n        const suggestWidgetState = this.suggestionInlineCompletionSource.state;\n        const suggestInlineCompletion = minimizeInlineCompletion(this.editor.getModel(), (_c = suggestWidgetState === null || suggestWidgetState === void 0 ? void 0 : suggestWidgetState.selectedItem) === null || _c === void 0 ? void 0 : _c.normalizedInlineCompletion);\n        const isAugmentedCompletionValid = augmentedCompletion\n            && suggestInlineCompletion\n            && augmentedCompletion.text.startsWith(suggestInlineCompletion.text)\n            && augmentedCompletion.range.equalsRange(suggestInlineCompletion.range);\n        if (!isSuggestionPreviewEnabled && !isAugmentedCompletionValid) {\n            return undefined;\n        }\n        // If the augmented completion is not valid and there is no suggest inline completion, we still show the augmented completion.\n        const finalCompletion = isAugmentedCompletionValid ? augmentedCompletion : (suggestInlineCompletion || augmentedCompletion);\n        const inlineCompletionPreviewLength = isAugmentedCompletionValid ? finalCompletion.text.length - suggestInlineCompletion.text.length : 0;\n        const newGhostText = this.toGhostText(finalCompletion, inlineCompletionPreviewLength);\n        return newGhostText;\n    }\n    toGhostText(completion, inlineCompletionPreviewLength) {\n        const mode = this.editor.getOptions().get(106 /* suggest */).previewMode;\n        return completion\n            ? (inlineCompletionToGhostText(completion, this.editor.getModel(), mode, this.editor.getPosition(), inlineCompletionPreviewLength) ||\n                // Show an invisible ghost text to reserve space\n                new GhostText(completion.range.endLineNumber, [], this.minReservedLineCount))\n            : undefined;\n    }\n};\nSuggestWidgetPreviewModel = __decorate([\n    __param(2, ILanguageFeaturesService)\n], SuggestWidgetPreviewModel);\nexport { SuggestWidgetPreviewModel };\nfunction sum(arr) {\n    return arr.reduce((a, b) => a + b, 0);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { compareBy, findMaxBy, numberComparator } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { SnippetSession } from '../../snippet/browser/snippetSession.js';\nimport { SuggestController } from '../../suggest/browser/suggestController.js';\nimport { minimizeInlineCompletion } from './inlineCompletionsModel.js';\nimport { normalizedInlineCompletionsEquals } from './inlineCompletionToGhostText.js';\nexport class SuggestWidgetInlineCompletionProvider extends Disposable {\n    constructor(editor, suggestControllerPreselector) {\n        super();\n        this.editor = editor;\n        this.suggestControllerPreselector = suggestControllerPreselector;\n        this.isSuggestWidgetVisible = false;\n        this.isShiftKeyPressed = false;\n        this._isActive = false;\n        this._currentSuggestItemInfo = undefined;\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        // This delay fixes a suggest widget issue when typing \".\" immediately restarts the suggestion session.\n        this.setInactiveDelayed = this._register(new RunOnceScheduler(() => {\n            if (!this.isSuggestWidgetVisible) {\n                if (this._isActive) {\n                    this._isActive = false;\n                    this.onDidChangeEmitter.fire();\n                }\n            }\n        }, 100));\n        // See the command acceptAlternativeSelectedSuggestion that is bound to shift+tab\n        this._register(editor.onKeyDown(e => {\n            if (e.shiftKey && !this.isShiftKeyPressed) {\n                this.isShiftKeyPressed = true;\n                this.update(this._isActive);\n            }\n        }));\n        this._register(editor.onKeyUp(e => {\n            if (e.shiftKey && this.isShiftKeyPressed) {\n                this.isShiftKeyPressed = false;\n                this.update(this._isActive);\n            }\n        }));\n        const suggestController = SuggestController.get(this.editor);\n        if (suggestController) {\n            this._register(suggestController.registerSelector({\n                priority: 100,\n                select: (model, pos, suggestItems) => {\n                    const textModel = this.editor.getModel();\n                    const normalizedItemToPreselect = minimizeInlineCompletion(textModel, this.suggestControllerPreselector());\n                    if (!normalizedItemToPreselect) {\n                        return -1;\n                    }\n                    const position = Position.lift(pos);\n                    const candidates = suggestItems\n                        .map((suggestItem, index) => {\n                        const inlineSuggestItem = suggestionToSuggestItemInfo(suggestController, position, suggestItem, this.isShiftKeyPressed);\n                        const normalizedSuggestItem = minimizeInlineCompletion(textModel, inlineSuggestItem === null || inlineSuggestItem === void 0 ? void 0 : inlineSuggestItem.normalizedInlineCompletion);\n                        if (!normalizedSuggestItem) {\n                            return undefined;\n                        }\n                        const valid = rangeStartsWith(normalizedItemToPreselect.range, normalizedSuggestItem.range) &&\n                            normalizedItemToPreselect.text.startsWith(normalizedSuggestItem.text);\n                        return { index, valid, prefixLength: normalizedSuggestItem.text.length, suggestItem };\n                    })\n                        .filter(item => item && item.valid);\n                    const result = findMaxBy(candidates, compareBy(s => s.prefixLength, numberComparator));\n                    return result ? result.index : -1;\n                }\n            }));\n            let isBoundToSuggestWidget = false;\n            const bindToSuggestWidget = () => {\n                if (isBoundToSuggestWidget) {\n                    return;\n                }\n                isBoundToSuggestWidget = true;\n                this._register(suggestController.widget.value.onDidShow(() => {\n                    this.isSuggestWidgetVisible = true;\n                    this.update(true);\n                }));\n                this._register(suggestController.widget.value.onDidHide(() => {\n                    this.isSuggestWidgetVisible = false;\n                    this.setInactiveDelayed.schedule();\n                    this.update(this._isActive);\n                }));\n                this._register(suggestController.widget.value.onDidFocus(() => {\n                    this.isSuggestWidgetVisible = true;\n                    this.update(true);\n                }));\n            };\n            this._register(Event.once(suggestController.model.onDidTrigger)(e => {\n                bindToSuggestWidget();\n            }));\n        }\n        this.update(this._isActive);\n    }\n    /**\n     * Returns undefined if the suggest widget is not active.\n    */\n    get state() {\n        if (!this._isActive) {\n            return undefined;\n        }\n        return { selectedItem: this._currentSuggestItemInfo };\n    }\n    update(newActive) {\n        const newInlineCompletion = this.getSuggestItemInfo();\n        let shouldFire = false;\n        if (!suggestItemInfoEquals(this._currentSuggestItemInfo, newInlineCompletion)) {\n            this._currentSuggestItemInfo = newInlineCompletion;\n            shouldFire = true;\n        }\n        if (this._isActive !== newActive) {\n            this._isActive = newActive;\n            shouldFire = true;\n        }\n        if (shouldFire) {\n            this.onDidChangeEmitter.fire();\n        }\n    }\n    getSuggestItemInfo() {\n        const suggestController = SuggestController.get(this.editor);\n        if (!suggestController) {\n            return undefined;\n        }\n        if (!this.isSuggestWidgetVisible) {\n            return undefined;\n        }\n        const focusedItem = suggestController.widget.value.getFocusedItem();\n        if (!focusedItem) {\n            return undefined;\n        }\n        // TODO: item.isResolved\n        return suggestionToSuggestItemInfo(suggestController, this.editor.getPosition(), focusedItem.item, this.isShiftKeyPressed);\n    }\n    stopForceRenderingAbove() {\n        const suggestController = SuggestController.get(this.editor);\n        if (suggestController) {\n            suggestController.stopForceRenderingAbove();\n        }\n    }\n    forceRenderingAbove() {\n        const suggestController = SuggestController.get(this.editor);\n        if (suggestController) {\n            suggestController.forceRenderingAbove();\n        }\n    }\n}\nexport function rangeStartsWith(rangeToTest, prefix) {\n    return (prefix.startLineNumber === rangeToTest.startLineNumber &&\n        prefix.startColumn === rangeToTest.startColumn &&\n        (prefix.endLineNumber < rangeToTest.endLineNumber ||\n            (prefix.endLineNumber === rangeToTest.endLineNumber &&\n                prefix.endColumn <= rangeToTest.endColumn)));\n}\nfunction suggestItemInfoEquals(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (!a || !b) {\n        return false;\n    }\n    return a.completionItemKind === b.completionItemKind &&\n        a.isSnippetText === b.isSnippetText &&\n        normalizedInlineCompletionsEquals(a.normalizedInlineCompletion, b.normalizedInlineCompletion);\n}\nfunction suggestionToSuggestItemInfo(suggestController, position, item, toggleMode) {\n    // additionalTextEdits might not be resolved here, this could be problematic.\n    if (Array.isArray(item.completion.additionalTextEdits) && item.completion.additionalTextEdits.length > 0) {\n        // cannot represent additional text edits\n        return {\n            completionItemKind: item.completion.kind,\n            isSnippetText: false,\n            normalizedInlineCompletion: {\n                // Dummy element, so that space is reserved, but no text is shown\n                range: Range.fromPositions(position, position),\n                text: ''\n            },\n        };\n    }\n    let { insertText } = item.completion;\n    let isSnippetText = false;\n    if (item.completion.insertTextRules & 4 /* InsertAsSnippet */) {\n        const snippet = new SnippetParser().parse(insertText);\n        const model = suggestController.editor.getModel();\n        // Ignore snippets that are too large.\n        // Adjust whitespace is expensive for them.\n        if (snippet.children.length > 100) {\n            return undefined;\n        }\n        SnippetSession.adjustWhitespace(model, position, snippet, true, true);\n        insertText = snippet.toString();\n        isSnippetText = true;\n    }\n    const info = suggestController.getOverwriteInfo(item, toggleMode);\n    return {\n        isSnippetText,\n        completionItemKind: item.completion.kind,\n        normalizedInlineCompletion: {\n            text: insertText,\n            range: Range.fromPositions(position.delta(0, -info.overwriteBefore), position.delta(0, Math.max(info.overwriteAfter, 0))),\n        }\n    };\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { groupBy } from '../../../../base/common/arrays.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace } from '../../../../base/common/strings.js';\nimport './snippetSession.css';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { Choice, Placeholder, SnippetParser, Text } from './snippetParser.js';\nimport { ClipboardBasedVariableResolver, CommentBasedVariableResolver, CompositeSnippetVariableResolver, ModelBasedVariableResolver, RandomBasedVariableResolver, SelectionBasedVariableResolver, TimeBasedVariableResolver, WorkspaceBasedVariableResolver } from './snippetVariables.js';\nexport class OneSnippet {\n    constructor(_editor, _snippet, _offset, _snippetLineLeadingWhitespace) {\n        this._editor = _editor;\n        this._snippet = _snippet;\n        this._offset = _offset;\n        this._snippetLineLeadingWhitespace = _snippetLineLeadingWhitespace;\n        this._nestingLevel = 1;\n        this._placeholderGroups = groupBy(_snippet.placeholders, Placeholder.compareByIndex);\n        this._placeholderGroupsIdx = -1;\n    }\n    dispose() {\n        if (this._placeholderDecorations) {\n            this._editor.deltaDecorations([...this._placeholderDecorations.values()], []);\n        }\n        this._placeholderGroups.length = 0;\n    }\n    _initDecorations() {\n        if (this._placeholderDecorations) {\n            // already initialized\n            return;\n        }\n        this._placeholderDecorations = new Map();\n        const model = this._editor.getModel();\n        this._editor.changeDecorations(accessor => {\n            // create a decoration for each placeholder\n            for (const placeholder of this._snippet.placeholders) {\n                const placeholderOffset = this._snippet.offset(placeholder);\n                const placeholderLen = this._snippet.fullLen(placeholder);\n                const range = Range.fromPositions(model.getPositionAt(this._offset + placeholderOffset), model.getPositionAt(this._offset + placeholderOffset + placeholderLen));\n                const options = placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive;\n                const handle = accessor.addDecoration(range, options);\n                this._placeholderDecorations.set(placeholder, handle);\n            }\n        });\n    }\n    move(fwd) {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        this._initDecorations();\n        // Transform placeholder text if necessary\n        if (this._placeholderGroupsIdx >= 0) {\n            let operations = [];\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                // Check if the placeholder has a transformation\n                if (placeholder.transform) {\n                    const id = this._placeholderDecorations.get(placeholder);\n                    const range = this._editor.getModel().getDecorationRange(id);\n                    const currentValue = this._editor.getModel().getValueInRange(range);\n                    const transformedValueLines = placeholder.transform.resolve(currentValue).split(/\\r\\n|\\r|\\n/);\n                    // fix indentation for transformed lines\n                    for (let i = 1; i < transformedValueLines.length; i++) {\n                        transformedValueLines[i] = this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace + transformedValueLines[i]);\n                    }\n                    operations.push(EditOperation.replace(range, transformedValueLines.join(this._editor.getModel().getEOL())));\n                }\n            }\n            if (operations.length > 0) {\n                this._editor.executeEdits('snippet.placeholderTransform', operations);\n            }\n        }\n        let couldSkipThisPlaceholder = false;\n        if (fwd === true && this._placeholderGroupsIdx < this._placeholderGroups.length - 1) {\n            this._placeholderGroupsIdx += 1;\n            couldSkipThisPlaceholder = true;\n        }\n        else if (fwd === false && this._placeholderGroupsIdx > 0) {\n            this._placeholderGroupsIdx -= 1;\n            couldSkipThisPlaceholder = true;\n        }\n        else {\n            // the selection of the current placeholder might\n            // not acurate any more -> simply restore it\n        }\n        const newSelections = this._editor.getModel().changeDecorations(accessor => {\n            const activePlaceholders = new Set();\n            // change stickiness to always grow when typing at its edges\n            // because these decorations represent the currently active\n            // tabstop.\n            // Special case #1: reaching the final tabstop\n            // Special case #2: placeholders enclosing active placeholders\n            const selections = [];\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                const id = this._placeholderDecorations.get(placeholder);\n                const range = this._editor.getModel().getDecorationRange(id);\n                selections.push(new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn));\n                // consider to skip this placeholder index when the decoration\n                // range is empty but when the placeholder wasn't. that's a strong\n                // hint that the placeholder has been deleted. (all placeholder must match this)\n                couldSkipThisPlaceholder = couldSkipThisPlaceholder && this._hasPlaceholderBeenCollapsed(placeholder);\n                accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n                activePlaceholders.add(placeholder);\n                for (const enclosingPlaceholder of this._snippet.enclosingPlaceholders(placeholder)) {\n                    const id = this._placeholderDecorations.get(enclosingPlaceholder);\n                    accessor.changeDecorationOptions(id, enclosingPlaceholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n                    activePlaceholders.add(enclosingPlaceholder);\n                }\n            }\n            // change stickness to never grow when typing at its edges\n            // so that in-active tabstops never grow\n            for (const [placeholder, id] of this._placeholderDecorations) {\n                if (!activePlaceholders.has(placeholder)) {\n                    accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive);\n                }\n            }\n            return selections;\n        });\n        return !couldSkipThisPlaceholder ? newSelections !== null && newSelections !== void 0 ? newSelections : [] : this.move(fwd);\n    }\n    _hasPlaceholderBeenCollapsed(placeholder) {\n        // A placeholder is empty when it wasn't empty when authored but\n        // when its tracking decoration is empty. This also applies to all\n        // potential parent placeholders\n        let marker = placeholder;\n        while (marker) {\n            if (marker instanceof Placeholder) {\n                const id = this._placeholderDecorations.get(marker);\n                const range = this._editor.getModel().getDecorationRange(id);\n                if (range.isEmpty() && marker.toString().length > 0) {\n                    return true;\n                }\n            }\n            marker = marker.parent;\n        }\n        return false;\n    }\n    get isAtFirstPlaceholder() {\n        return this._placeholderGroupsIdx <= 0 || this._placeholderGroups.length === 0;\n    }\n    get isAtLastPlaceholder() {\n        return this._placeholderGroupsIdx === this._placeholderGroups.length - 1;\n    }\n    get hasPlaceholder() {\n        return this._snippet.placeholders.length > 0;\n    }\n    computePossibleSelections() {\n        const result = new Map();\n        for (const placeholdersWithEqualIndex of this._placeholderGroups) {\n            let ranges;\n            for (const placeholder of placeholdersWithEqualIndex) {\n                if (placeholder.isFinalTabstop) {\n                    // ignore those\n                    break;\n                }\n                if (!ranges) {\n                    ranges = [];\n                    result.set(placeholder.index, ranges);\n                }\n                const id = this._placeholderDecorations.get(placeholder);\n                const range = this._editor.getModel().getDecorationRange(id);\n                if (!range) {\n                    // one of the placeholder lost its decoration and\n                    // therefore we bail out and pretend the placeholder\n                    // (with its mirrors) doesn't exist anymore.\n                    result.delete(placeholder.index);\n                    break;\n                }\n                ranges.push(range);\n            }\n        }\n        return result;\n    }\n    get choice() {\n        return this._placeholderGroups[this._placeholderGroupsIdx][0].choice;\n    }\n    merge(others) {\n        const model = this._editor.getModel();\n        this._nestingLevel *= 10;\n        this._editor.changeDecorations(accessor => {\n            // For each active placeholder take one snippet and merge it\n            // in that the placeholder (can be many for `$1foo$1foo`). Because\n            // everything is sorted by editor selection we can simply remove\n            // elements from the beginning of the array\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                const nested = others.shift();\n                console.assert(!nested._placeholderDecorations);\n                // Massage placeholder-indicies of the nested snippet to be\n                // sorted right after the insertion point. This ensures we move\n                // through the placeholders in the correct order\n                const indexLastPlaceholder = nested._snippet.placeholderInfo.last.index;\n                for (const nestedPlaceholder of nested._snippet.placeholderInfo.all) {\n                    if (nestedPlaceholder.isFinalTabstop) {\n                        nestedPlaceholder.index = placeholder.index + ((indexLastPlaceholder + 1) / this._nestingLevel);\n                    }\n                    else {\n                        nestedPlaceholder.index = placeholder.index + (nestedPlaceholder.index / this._nestingLevel);\n                    }\n                }\n                this._snippet.replace(placeholder, nested._snippet.children);\n                // Remove the placeholder at which position are inserting\n                // the snippet and also remove its decoration.\n                const id = this._placeholderDecorations.get(placeholder);\n                accessor.removeDecoration(id);\n                this._placeholderDecorations.delete(placeholder);\n                // For each *new* placeholder we create decoration to monitor\n                // how and if it grows/shrinks.\n                for (const placeholder of nested._snippet.placeholders) {\n                    const placeholderOffset = nested._snippet.offset(placeholder);\n                    const placeholderLen = nested._snippet.fullLen(placeholder);\n                    const range = Range.fromPositions(model.getPositionAt(nested._offset + placeholderOffset), model.getPositionAt(nested._offset + placeholderOffset + placeholderLen));\n                    const handle = accessor.addDecoration(range, OneSnippet._decor.inactive);\n                    this._placeholderDecorations.set(placeholder, handle);\n                }\n            }\n            // Last, re-create the placeholder groups by sorting placeholders by their index.\n            this._placeholderGroups = groupBy(this._snippet.placeholders, Placeholder.compareByIndex);\n        });\n    }\n}\nOneSnippet._decor = {\n    active: ModelDecorationOptions.register({ description: 'snippet-placeholder-1', stickiness: 0 /* AlwaysGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\n    inactive: ModelDecorationOptions.register({ description: 'snippet-placeholder-2', stickiness: 1 /* NeverGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\n    activeFinal: ModelDecorationOptions.register({ description: 'snippet-placeholder-3', stickiness: 1 /* NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\n    inactiveFinal: ModelDecorationOptions.register({ description: 'snippet-placeholder-4', stickiness: 1 /* NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\n};\nconst _defaultOptions = {\n    overwriteBefore: 0,\n    overwriteAfter: 0,\n    adjustWhitespace: true,\n    clipboardText: undefined,\n    overtypingCapturer: undefined\n};\nexport class SnippetSession {\n    constructor(editor, template, options = _defaultOptions) {\n        this._templateMerges = [];\n        this._snippets = [];\n        this._editor = editor;\n        this._template = template;\n        this._options = options;\n    }\n    static adjustWhitespace(model, position, snippet, adjustIndentation, adjustNewlines) {\n        const line = model.getLineContent(position.lineNumber);\n        const lineLeadingWhitespace = getLeadingWhitespace(line, 0, position.column - 1);\n        // the snippet as inserted\n        let snippetTextString;\n        snippet.walk(marker => {\n            // all text elements that are not inside choice\n            if (!(marker instanceof Text) || marker.parent instanceof Choice) {\n                return true;\n            }\n            const lines = marker.value.split(/\\r\\n|\\r|\\n/);\n            if (adjustIndentation) {\n                // adjust indentation of snippet test\n                // -the snippet-start doesn't get extra-indented (lineLeadingWhitespace), only normalized\n                // -all N+1 lines get extra-indented and normalized\n                // -the text start get extra-indented and normalized when following a linebreak\n                const offset = snippet.offset(marker);\n                if (offset === 0) {\n                    // snippet start\n                    lines[0] = model.normalizeIndentation(lines[0]);\n                }\n                else {\n                    // check if text start is after a linebreak\n                    snippetTextString = snippetTextString !== null && snippetTextString !== void 0 ? snippetTextString : snippet.toString();\n                    let prevChar = snippetTextString.charCodeAt(offset - 1);\n                    if (prevChar === 10 /* LineFeed */ || prevChar === 13 /* CarriageReturn */) {\n                        lines[0] = model.normalizeIndentation(lineLeadingWhitespace + lines[0]);\n                    }\n                }\n                for (let i = 1; i < lines.length; i++) {\n                    lines[i] = model.normalizeIndentation(lineLeadingWhitespace + lines[i]);\n                }\n            }\n            const newValue = lines.join(model.getEOL());\n            if (newValue !== marker.value) {\n                marker.parent.replace(marker, [new Text(newValue)]);\n                snippetTextString = undefined;\n            }\n            return true;\n        });\n        return lineLeadingWhitespace;\n    }\n    static adjustSelection(model, selection, overwriteBefore, overwriteAfter) {\n        if (overwriteBefore !== 0 || overwriteAfter !== 0) {\n            // overwrite[Before|After] is compute using the position, not the whole\n            // selection. therefore we adjust the selection around that position\n            const { positionLineNumber, positionColumn } = selection;\n            const positionColumnBefore = positionColumn - overwriteBefore;\n            const positionColumnAfter = positionColumn + overwriteAfter;\n            const range = model.validateRange({\n                startLineNumber: positionLineNumber,\n                startColumn: positionColumnBefore,\n                endLineNumber: positionLineNumber,\n                endColumn: positionColumnAfter\n            });\n            selection = Selection.createWithDirection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn, selection.getDirection());\n        }\n        return selection;\n    }\n    static createEditsAndSnippets(editor, template, overwriteBefore, overwriteAfter, enforceFinalTabstop, adjustWhitespace, clipboardText, overtypingCapturer) {\n        const edits = [];\n        const snippets = [];\n        if (!editor.hasModel()) {\n            return { edits, snippets };\n        }\n        const model = editor.getModel();\n        const workspaceService = editor.invokeWithinContext(accessor => accessor.get(IWorkspaceContextService));\n        const modelBasedVariableResolver = editor.invokeWithinContext(accessor => new ModelBasedVariableResolver(accessor.get(ILabelService), model));\n        const readClipboardText = () => clipboardText;\n        let delta = 0;\n        // know what text the overwrite[Before|After] extensions\n        // of the primary curser have selected because only when\n        // secondary selections extend to the same text we can grow them\n        let firstBeforeText = model.getValueInRange(SnippetSession.adjustSelection(model, editor.getSelection(), overwriteBefore, 0));\n        let firstAfterText = model.getValueInRange(SnippetSession.adjustSelection(model, editor.getSelection(), 0, overwriteAfter));\n        // remember the first non-whitespace column to decide if\n        // `keepWhitespace` should be overruled for secondary selections\n        let firstLineFirstNonWhitespace = model.getLineFirstNonWhitespaceColumn(editor.getSelection().positionLineNumber);\n        // sort selections by their start position but remeber\n        // the original index. that allows you to create correct\n        // offset-based selection logic without changing the\n        // primary selection\n        const indexedSelections = editor.getSelections()\n            .map((selection, idx) => ({ selection, idx }))\n            .sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        for (const { selection, idx } of indexedSelections) {\n            // extend selection with the `overwriteBefore` and `overwriteAfter` and then\n            // compare if this matches the extensions of the primary selection\n            let extensionBefore = SnippetSession.adjustSelection(model, selection, overwriteBefore, 0);\n            let extensionAfter = SnippetSession.adjustSelection(model, selection, 0, overwriteAfter);\n            if (firstBeforeText !== model.getValueInRange(extensionBefore)) {\n                extensionBefore = selection;\n            }\n            if (firstAfterText !== model.getValueInRange(extensionAfter)) {\n                extensionAfter = selection;\n            }\n            // merge the before and after selection into one\n            const snippetSelection = selection\n                .setStartPosition(extensionBefore.startLineNumber, extensionBefore.startColumn)\n                .setEndPosition(extensionAfter.endLineNumber, extensionAfter.endColumn);\n            const snippet = new SnippetParser().parse(template, true, enforceFinalTabstop);\n            // adjust the template string to match the indentation and\n            // whitespace rules of this insert location (can be different for each cursor)\n            // happens when being asked for (default) or when this is a secondary\n            // cursor and the leading whitespace is different\n            const start = snippetSelection.getStartPosition();\n            const snippetLineLeadingWhitespace = SnippetSession.adjustWhitespace(model, start, snippet, adjustWhitespace || (idx > 0 && firstLineFirstNonWhitespace !== model.getLineFirstNonWhitespaceColumn(selection.positionLineNumber)), true);\n            snippet.resolveVariables(new CompositeSnippetVariableResolver([\n                modelBasedVariableResolver,\n                new ClipboardBasedVariableResolver(readClipboardText, idx, indexedSelections.length, editor.getOption(71 /* multiCursorPaste */) === 'spread'),\n                new SelectionBasedVariableResolver(model, selection, idx, overtypingCapturer),\n                new CommentBasedVariableResolver(model, selection),\n                new TimeBasedVariableResolver,\n                new WorkspaceBasedVariableResolver(workspaceService),\n                new RandomBasedVariableResolver,\n            ]));\n            const offset = model.getOffsetAt(start) + delta;\n            delta += snippet.toString().length - model.getValueLengthInRange(snippetSelection);\n            // store snippets with the index of their originating selection.\n            // that ensures the primiary cursor stays primary despite not being\n            // the one with lowest start position\n            edits[idx] = EditOperation.replace(snippetSelection, snippet.toString());\n            edits[idx].identifier = { major: idx, minor: 0 }; // mark the edit so only our undo edits will be used to generate end cursors\n            snippets[idx] = new OneSnippet(editor, snippet, offset, snippetLineLeadingWhitespace);\n        }\n        return { edits, snippets };\n    }\n    dispose() {\n        dispose(this._snippets);\n    }\n    _logInfo() {\n        return `template=\"${this._template}\", merged_templates=\"${this._templateMerges.join(' -> ')}\"`;\n    }\n    insert() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // make insert edit and start with first selections\n        const { edits, snippets } = SnippetSession.createEditsAndSnippets(this._editor, this._template, this._options.overwriteBefore, this._options.overwriteAfter, false, this._options.adjustWhitespace, this._options.clipboardText, this._options.overtypingCapturer);\n        this._snippets = snippets;\n        this._editor.executeEdits('snippet', edits, undoEdits => {\n            if (this._snippets[0].hasPlaceholder) {\n                return this._move(true);\n            }\n            else {\n                return undoEdits\n                    .filter(edit => !!edit.identifier) // only use our undo edits\n                    .map(edit => Selection.fromPositions(edit.range.getEndPosition()));\n            }\n        });\n        this._editor.revealRange(this._editor.getSelections()[0]);\n    }\n    merge(template, options = _defaultOptions) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._templateMerges.push([this._snippets[0]._nestingLevel, this._snippets[0]._placeholderGroupsIdx, template]);\n        const { edits, snippets } = SnippetSession.createEditsAndSnippets(this._editor, template, options.overwriteBefore, options.overwriteAfter, true, options.adjustWhitespace, options.clipboardText, options.overtypingCapturer);\n        this._editor.executeEdits('snippet', edits, undoEdits => {\n            for (const snippet of this._snippets) {\n                snippet.merge(snippets);\n            }\n            console.assert(snippets.length === 0);\n            if (this._snippets[0].hasPlaceholder) {\n                return this._move(undefined);\n            }\n            else {\n                return (undoEdits\n                    .filter(edit => !!edit.identifier) // only use our undo edits\n                    .map(edit => Selection.fromPositions(edit.range.getEndPosition())));\n            }\n        });\n    }\n    next() {\n        const newSelections = this._move(true);\n        this._editor.setSelections(newSelections);\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n    }\n    prev() {\n        const newSelections = this._move(false);\n        this._editor.setSelections(newSelections);\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n    }\n    _move(fwd) {\n        const selections = [];\n        for (const snippet of this._snippets) {\n            const oneSelection = snippet.move(fwd);\n            selections.push(...oneSelection);\n        }\n        return selections;\n    }\n    get isAtFirstPlaceholder() {\n        return this._snippets[0].isAtFirstPlaceholder;\n    }\n    get isAtLastPlaceholder() {\n        return this._snippets[0].isAtLastPlaceholder;\n    }\n    get hasPlaceholder() {\n        return this._snippets[0].hasPlaceholder;\n    }\n    get choice() {\n        return this._snippets[0].choice;\n    }\n    isSelectionWithinPlaceholders() {\n        if (!this.hasPlaceholder) {\n            return false;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length < this._snippets.length) {\n            // this means we started snippet mode with N\n            // selections and have M (N > M) selections.\n            // So one snippet is without selection -> cancel\n            return false;\n        }\n        let allPossibleSelections = new Map();\n        for (const snippet of this._snippets) {\n            const possibleSelections = snippet.computePossibleSelections();\n            // for the first snippet find the placeholder (and its ranges)\n            // that contain at least one selection. for all remaining snippets\n            // the same placeholder (and their ranges) must be used.\n            if (allPossibleSelections.size === 0) {\n                for (const [index, ranges] of possibleSelections) {\n                    ranges.sort(Range.compareRangesUsingStarts);\n                    for (const selection of selections) {\n                        if (ranges[0].containsRange(selection)) {\n                            allPossibleSelections.set(index, []);\n                            break;\n                        }\n                    }\n                }\n            }\n            if (allPossibleSelections.size === 0) {\n                // return false if we couldn't associate a selection to\n                // this (the first) snippet\n                return false;\n            }\n            // add selections from 'this' snippet so that we know all\n            // selections for this placeholder\n            allPossibleSelections.forEach((array, index) => {\n                array.push(...possibleSelections.get(index));\n            });\n        }\n        // sort selections (and later placeholder-ranges). then walk both\n        // arrays and make sure the placeholder-ranges contain the corresponding\n        // selection\n        selections.sort(Range.compareRangesUsingStarts);\n        for (let [index, ranges] of allPossibleSelections) {\n            if (ranges.length !== selections.length) {\n                allPossibleSelections.delete(index);\n                continue;\n            }\n            ranges.sort(Range.compareRangesUsingStarts);\n            for (let i = 0; i < ranges.length; i++) {\n                if (!ranges[i].containsRange(selections[i])) {\n                    allPossibleSelections.delete(index);\n                    continue;\n                }\n            }\n        }\n        // from all possible selections we have deleted those\n        // that don't match with the current selection. if we don't\n        // have any left, we don't have a selection anymore\n        return allPossibleSelections.size > 0;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { normalizeDriveLetter } from '../../../../base/common/labels.js';\nimport * as path from '../../../../base/common/path.js';\nimport { dirname } from '../../../../base/common/resources.js';\nimport { commonPrefixLength, getLeadingWhitespace, isFalsyOrWhitespace, splitLines } from '../../../../base/common/strings.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { LanguageConfigurationRegistry } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { Text } from './snippetParser.js';\nimport * as nls from '../../../../nls.js';\nimport { WORKSPACE_EXTENSION, isSingleFolderWorkspaceIdentifier, toWorkspaceIdentifier } from '../../../../platform/workspace/common/workspace.js';\nexport const KnownSnippetVariableNames = Object.freeze({\n    'CURRENT_YEAR': true,\n    'CURRENT_YEAR_SHORT': true,\n    'CURRENT_MONTH': true,\n    'CURRENT_DATE': true,\n    'CURRENT_HOUR': true,\n    'CURRENT_MINUTE': true,\n    'CURRENT_SECOND': true,\n    'CURRENT_DAY_NAME': true,\n    'CURRENT_DAY_NAME_SHORT': true,\n    'CURRENT_MONTH_NAME': true,\n    'CURRENT_MONTH_NAME_SHORT': true,\n    'CURRENT_SECONDS_UNIX': true,\n    'SELECTION': true,\n    'CLIPBOARD': true,\n    'TM_SELECTED_TEXT': true,\n    'TM_CURRENT_LINE': true,\n    'TM_CURRENT_WORD': true,\n    'TM_LINE_INDEX': true,\n    'TM_LINE_NUMBER': true,\n    'TM_FILENAME': true,\n    'TM_FILENAME_BASE': true,\n    'TM_DIRECTORY': true,\n    'TM_FILEPATH': true,\n    'RELATIVE_FILEPATH': true,\n    'BLOCK_COMMENT_START': true,\n    'BLOCK_COMMENT_END': true,\n    'LINE_COMMENT': true,\n    'WORKSPACE_NAME': true,\n    'WORKSPACE_FOLDER': true,\n    'RANDOM': true,\n    'RANDOM_HEX': true,\n    'UUID': true\n});\nexport class CompositeSnippetVariableResolver {\n    constructor(_delegates) {\n        this._delegates = _delegates;\n        //\n    }\n    resolve(variable) {\n        for (const delegate of this._delegates) {\n            let value = delegate.resolve(variable);\n            if (value !== undefined) {\n                return value;\n            }\n        }\n        return undefined;\n    }\n}\nexport class SelectionBasedVariableResolver {\n    constructor(_model, _selection, _selectionIdx, _overtypingCapturer) {\n        this._model = _model;\n        this._selection = _selection;\n        this._selectionIdx = _selectionIdx;\n        this._overtypingCapturer = _overtypingCapturer;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'SELECTION' || name === 'TM_SELECTED_TEXT') {\n            let value = this._model.getValueInRange(this._selection) || undefined;\n            let isMultiline = this._selection.startLineNumber !== this._selection.endLineNumber;\n            // If there was no selected text, try to get last overtyped text\n            if (!value && this._overtypingCapturer) {\n                const info = this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);\n                if (info) {\n                    value = info.value;\n                    isMultiline = info.multiline;\n                }\n            }\n            if (value && isMultiline && variable.snippet) {\n                // Selection is a multiline string which we indentation we now\n                // need to adjust. We compare the indentation of this variable\n                // with the indentation at the editor position and add potential\n                // extra indentation to the value\n                const line = this._model.getLineContent(this._selection.startLineNumber);\n                const lineLeadingWhitespace = getLeadingWhitespace(line, 0, this._selection.startColumn - 1);\n                let varLeadingWhitespace = lineLeadingWhitespace;\n                variable.snippet.walk(marker => {\n                    if (marker === variable) {\n                        return false;\n                    }\n                    if (marker instanceof Text) {\n                        varLeadingWhitespace = getLeadingWhitespace(splitLines(marker.value).pop());\n                    }\n                    return true;\n                });\n                const whitespaceCommonLength = commonPrefixLength(varLeadingWhitespace, lineLeadingWhitespace);\n                value = value.replace(/(\\r\\n|\\r|\\n)(.*)/g, (m, newline, rest) => `${newline}${varLeadingWhitespace.substr(whitespaceCommonLength)}${rest}`);\n            }\n            return value;\n        }\n        else if (name === 'TM_CURRENT_LINE') {\n            return this._model.getLineContent(this._selection.positionLineNumber);\n        }\n        else if (name === 'TM_CURRENT_WORD') {\n            const info = this._model.getWordAtPosition({\n                lineNumber: this._selection.positionLineNumber,\n                column: this._selection.positionColumn\n            });\n            return info && info.word || undefined;\n        }\n        else if (name === 'TM_LINE_INDEX') {\n            return String(this._selection.positionLineNumber - 1);\n        }\n        else if (name === 'TM_LINE_NUMBER') {\n            return String(this._selection.positionLineNumber);\n        }\n        return undefined;\n    }\n}\nexport class ModelBasedVariableResolver {\n    constructor(_labelService, _model) {\n        this._labelService = _labelService;\n        this._model = _model;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'TM_FILENAME') {\n            return path.basename(this._model.uri.fsPath);\n        }\n        else if (name === 'TM_FILENAME_BASE') {\n            const name = path.basename(this._model.uri.fsPath);\n            const idx = name.lastIndexOf('.');\n            if (idx <= 0) {\n                return name;\n            }\n            else {\n                return name.slice(0, idx);\n            }\n        }\n        else if (name === 'TM_DIRECTORY') {\n            if (path.dirname(this._model.uri.fsPath) === '.') {\n                return '';\n            }\n            return this._labelService.getUriLabel(dirname(this._model.uri));\n        }\n        else if (name === 'TM_FILEPATH') {\n            return this._labelService.getUriLabel(this._model.uri);\n        }\n        else if (name === 'RELATIVE_FILEPATH') {\n            return this._labelService.getUriLabel(this._model.uri, { relative: true, noPrefix: true });\n        }\n        return undefined;\n    }\n}\nexport class ClipboardBasedVariableResolver {\n    constructor(_readClipboardText, _selectionIdx, _selectionCount, _spread) {\n        this._readClipboardText = _readClipboardText;\n        this._selectionIdx = _selectionIdx;\n        this._selectionCount = _selectionCount;\n        this._spread = _spread;\n        //\n    }\n    resolve(variable) {\n        if (variable.name !== 'CLIPBOARD') {\n            return undefined;\n        }\n        const clipboardText = this._readClipboardText();\n        if (!clipboardText) {\n            return undefined;\n        }\n        // `spread` is assigning each cursor a line of the clipboard\n        // text whenever there the line count equals the cursor count\n        // and when enabled\n        if (this._spread) {\n            const lines = clipboardText.split(/\\r\\n|\\n|\\r/).filter(s => !isFalsyOrWhitespace(s));\n            if (lines.length === this._selectionCount) {\n                return lines[this._selectionIdx];\n            }\n        }\n        return clipboardText;\n    }\n}\nexport class CommentBasedVariableResolver {\n    constructor(_model, _selection) {\n        this._model = _model;\n        this._selection = _selection;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        const langId = this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber, this._selection.selectionStartColumn);\n        const config = LanguageConfigurationRegistry.getComments(langId);\n        if (!config) {\n            return undefined;\n        }\n        if (name === 'LINE_COMMENT') {\n            return config.lineCommentToken || undefined;\n        }\n        else if (name === 'BLOCK_COMMENT_START') {\n            return config.blockCommentStartToken || undefined;\n        }\n        else if (name === 'BLOCK_COMMENT_END') {\n            return config.blockCommentEndToken || undefined;\n        }\n        return undefined;\n    }\n}\nexport class TimeBasedVariableResolver {\n    constructor() {\n        this._date = new Date();\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'CURRENT_YEAR') {\n            return String(this._date.getFullYear());\n        }\n        else if (name === 'CURRENT_YEAR_SHORT') {\n            return String(this._date.getFullYear()).slice(-2);\n        }\n        else if (name === 'CURRENT_MONTH') {\n            return String(this._date.getMonth().valueOf() + 1).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_DATE') {\n            return String(this._date.getDate().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_HOUR') {\n            return String(this._date.getHours().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_MINUTE') {\n            return String(this._date.getMinutes().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_SECOND') {\n            return String(this._date.getSeconds().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_DAY_NAME') {\n            return TimeBasedVariableResolver.dayNames[this._date.getDay()];\n        }\n        else if (name === 'CURRENT_DAY_NAME_SHORT') {\n            return TimeBasedVariableResolver.dayNamesShort[this._date.getDay()];\n        }\n        else if (name === 'CURRENT_MONTH_NAME') {\n            return TimeBasedVariableResolver.monthNames[this._date.getMonth()];\n        }\n        else if (name === 'CURRENT_MONTH_NAME_SHORT') {\n            return TimeBasedVariableResolver.monthNamesShort[this._date.getMonth()];\n        }\n        else if (name === 'CURRENT_SECONDS_UNIX') {\n            return String(Math.floor(this._date.getTime() / 1000));\n        }\n        return undefined;\n    }\n}\nTimeBasedVariableResolver.dayNames = [nls.localize('Sunday', \"Sunday\"), nls.localize('Monday', \"Monday\"), nls.localize('Tuesday', \"Tuesday\"), nls.localize('Wednesday', \"Wednesday\"), nls.localize('Thursday', \"Thursday\"), nls.localize('Friday', \"Friday\"), nls.localize('Saturday', \"Saturday\")];\nTimeBasedVariableResolver.dayNamesShort = [nls.localize('SundayShort', \"Sun\"), nls.localize('MondayShort', \"Mon\"), nls.localize('TuesdayShort', \"Tue\"), nls.localize('WednesdayShort', \"Wed\"), nls.localize('ThursdayShort', \"Thu\"), nls.localize('FridayShort', \"Fri\"), nls.localize('SaturdayShort', \"Sat\")];\nTimeBasedVariableResolver.monthNames = [nls.localize('January', \"January\"), nls.localize('February', \"February\"), nls.localize('March', \"March\"), nls.localize('April', \"April\"), nls.localize('May', \"May\"), nls.localize('June', \"June\"), nls.localize('July', \"July\"), nls.localize('August', \"August\"), nls.localize('September', \"September\"), nls.localize('October', \"October\"), nls.localize('November', \"November\"), nls.localize('December', \"December\")];\nTimeBasedVariableResolver.monthNamesShort = [nls.localize('JanuaryShort', \"Jan\"), nls.localize('FebruaryShort', \"Feb\"), nls.localize('MarchShort', \"Mar\"), nls.localize('AprilShort', \"Apr\"), nls.localize('MayShort', \"May\"), nls.localize('JuneShort', \"Jun\"), nls.localize('JulyShort', \"Jul\"), nls.localize('AugustShort', \"Aug\"), nls.localize('SeptemberShort', \"Sep\"), nls.localize('OctoberShort', \"Oct\"), nls.localize('NovemberShort', \"Nov\"), nls.localize('DecemberShort', \"Dec\")];\nexport class WorkspaceBasedVariableResolver {\n    constructor(_workspaceService) {\n        this._workspaceService = _workspaceService;\n        //\n    }\n    resolve(variable) {\n        if (!this._workspaceService) {\n            return undefined;\n        }\n        const workspaceIdentifier = toWorkspaceIdentifier(this._workspaceService.getWorkspace());\n        if (!workspaceIdentifier) {\n            return undefined;\n        }\n        if (variable.name === 'WORKSPACE_NAME') {\n            return this._resolveWorkspaceName(workspaceIdentifier);\n        }\n        else if (variable.name === 'WORKSPACE_FOLDER') {\n            return this._resoveWorkspacePath(workspaceIdentifier);\n        }\n        return undefined;\n    }\n    _resolveWorkspaceName(workspaceIdentifier) {\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n            return path.basename(workspaceIdentifier.uri.path);\n        }\n        let filename = path.basename(workspaceIdentifier.configPath.path);\n        if (filename.endsWith(WORKSPACE_EXTENSION)) {\n            filename = filename.substr(0, filename.length - WORKSPACE_EXTENSION.length - 1);\n        }\n        return filename;\n    }\n    _resoveWorkspacePath(workspaceIdentifier) {\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n            return normalizeDriveLetter(workspaceIdentifier.uri.fsPath);\n        }\n        let filename = path.basename(workspaceIdentifier.configPath.path);\n        let folderpath = workspaceIdentifier.configPath.fsPath;\n        if (folderpath.endsWith(filename)) {\n            folderpath = folderpath.substr(0, folderpath.length - filename.length - 1);\n        }\n        return (folderpath ? normalizeDriveLetter(folderpath) : '/');\n    }\n}\nexport class RandomBasedVariableResolver {\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'RANDOM') {\n            return Math.random().toString().slice(-6);\n        }\n        else if (name === 'RANDOM_HEX') {\n            return Math.random().toString(16).slice(-6);\n        }\n        else if (name === 'UUID') {\n            return generateUuid();\n        }\n        return undefined;\n    }\n}\n", "// prep-work\nconst _data = new Uint8Array(16);\nconst _hex = [];\nfor (let i = 0; i < 256; i++) {\n    _hex.push(i.toString(16).padStart(2, '0'));\n}\n// todo@jrieken - with node@15 crypto#getRandomBytes is available everywhere, https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues#browser_compatibility\nlet _fillRandomValues;\nif (typeof crypto === 'object' && typeof crypto.getRandomValues === 'function') {\n    // browser\n    _fillRandomValues = crypto.getRandomValues.bind(crypto);\n}\nelse {\n    _fillRandomValues = function (bucket) {\n        for (let i = 0; i < bucket.length; i++) {\n            bucket[i] = Math.floor(Math.random() * 256);\n        }\n        return bucket;\n    };\n}\nexport function generateUuid() {\n    // get data\n    _fillRandomValues(_data);\n    // set version bits\n    _data[6] = (_data[6] & 0x0f) | 0x40;\n    _data[8] = (_data[8] & 0x3f) | 0x80;\n    // print as string\n    let i = 0;\n    let result = '';\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += '-';\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += '-';\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += '-';\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += '-';\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    return result;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { IdleValue } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { SimpleKeybinding } from '../../../../base/common/keybindings.js';\nimport { DisposableStore, dispose, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isObject } from '../../../../base/common/types.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordContextKey } from './wordContextKey.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { SuggestAlternatives } from './suggestAlternatives.js';\nimport { CommitCharacterController } from './suggestCommitCharacters.js';\nimport { SuggestModel } from './suggestModel.js';\nimport { OvertypingCapturer } from './suggestOvertypingCapturer.js';\nimport { SuggestWidget } from './suggestWidget.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { basename, extname } from '../../../../base/common/resources.js';\nimport { hash } from '../../../../base/common/hash.js';\n// sticky suggest widget which doesn't disappear on focus out and such\nlet _sticky = false;\n// _sticky = Boolean(\"true\"); // done \"weirdly\" so that a lint warning prevents you from pushing this\nclass LineSuffix {\n    constructor(_model, _position) {\n        this._model = _model;\n        this._position = _position;\n        // spy on what's happening right of the cursor. two cases:\n        // 1. end of line -> check that it's still end of line\n        // 2. mid of line -> add a marker and compute the delta\n        const maxColumn = _model.getLineMaxColumn(_position.lineNumber);\n        if (maxColumn !== _position.column) {\n            const offset = _model.getOffsetAt(_position);\n            const end = _model.getPositionAt(offset + 1);\n            this._marker = _model.deltaDecorations([], [{\n                    range: Range.fromPositions(_position, end),\n                    options: { description: 'suggest-line-suffix', stickiness: 1 /* NeverGrowsWhenTypingAtEdges */ }\n                }]);\n        }\n    }\n    dispose() {\n        if (this._marker && !this._model.isDisposed()) {\n            this._model.deltaDecorations(this._marker, []);\n        }\n    }\n    delta(position) {\n        if (this._model.isDisposed() || this._position.lineNumber !== position.lineNumber) {\n            // bail out early if things seems fishy\n            return 0;\n        }\n        // read the marker (in case suggest was triggered at line end) or compare\n        // the cursor to the line end.\n        if (this._marker) {\n            const range = this._model.getDecorationRange(this._marker[0]);\n            const end = this._model.getOffsetAt(range.getStartPosition());\n            return end - this._model.getOffsetAt(position);\n        }\n        else {\n            return this._model.getLineMaxColumn(position.lineNumber) - position.column;\n        }\n    }\n}\nlet SuggestController = class SuggestController {\n    constructor(editor, _memoryService, _commandService, _contextKeyService, _instantiationService, _logService, _telemetryService) {\n        this._memoryService = _memoryService;\n        this._commandService = _commandService;\n        this._contextKeyService = _contextKeyService;\n        this._instantiationService = _instantiationService;\n        this._logService = _logService;\n        this._telemetryService = _telemetryService;\n        this._lineSuffix = new MutableDisposable();\n        this._toDispose = new DisposableStore();\n        this._selectors = new PriorityRegistry(s => s.priority);\n        this._telemetryGate = 0;\n        this.editor = editor;\n        this.model = _instantiationService.createInstance(SuggestModel, this.editor);\n        // context key: update insert/replace mode\n        const ctxInsertMode = SuggestContext.InsertMode.bindTo(_contextKeyService);\n        ctxInsertMode.set(editor.getOption(106 /* suggest */).insertMode);\n        this.model.onDidTrigger(() => ctxInsertMode.set(editor.getOption(106 /* suggest */).insertMode));\n        this.widget = this._toDispose.add(new IdleValue(() => {\n            const widget = this._instantiationService.createInstance(SuggestWidget, this.editor);\n            this._toDispose.add(widget);\n            this._toDispose.add(widget.onDidSelect(item => this._insertSuggestion(item, 0), this));\n            // Wire up logic to accept a suggestion on certain characters\n            const commitCharacterController = new CommitCharacterController(this.editor, widget, item => this._insertSuggestion(item, 2 /* NoAfterUndoStop */));\n            this._toDispose.add(commitCharacterController);\n            this._toDispose.add(this.model.onDidSuggest(e => {\n                if (e.completionModel.items.length === 0) {\n                    commitCharacterController.reset();\n                }\n            }));\n            // Wire up makes text edit context key\n            const ctxMakesTextEdit = SuggestContext.MakesTextEdit.bindTo(this._contextKeyService);\n            const ctxHasInsertAndReplace = SuggestContext.HasInsertAndReplaceRange.bindTo(this._contextKeyService);\n            const ctxCanResolve = SuggestContext.CanResolve.bindTo(this._contextKeyService);\n            this._toDispose.add(toDisposable(() => {\n                ctxMakesTextEdit.reset();\n                ctxHasInsertAndReplace.reset();\n                ctxCanResolve.reset();\n            }));\n            this._toDispose.add(widget.onDidFocus(({ item }) => {\n                // (ctx: makesTextEdit)\n                const position = this.editor.getPosition();\n                const startColumn = item.editStart.column;\n                const endColumn = position.column;\n                let value = true;\n                if (this.editor.getOption(1 /* acceptSuggestionOnEnter */) === 'smart'\n                    && this.model.state === 2 /* Auto */\n                    && !item.completion.additionalTextEdits\n                    && !(item.completion.insertTextRules & 4 /* InsertAsSnippet */)\n                    && endColumn - startColumn === item.completion.insertText.length) {\n                    const oldText = this.editor.getModel().getValueInRange({\n                        startLineNumber: position.lineNumber,\n                        startColumn,\n                        endLineNumber: position.lineNumber,\n                        endColumn\n                    });\n                    value = oldText !== item.completion.insertText;\n                }\n                ctxMakesTextEdit.set(value);\n                // (ctx: hasInsertAndReplaceRange)\n                ctxHasInsertAndReplace.set(!Position.equals(item.editInsertEnd, item.editReplaceEnd));\n                // (ctx: canResolve)\n                ctxCanResolve.set(Boolean(item.provider.resolveCompletionItem) || Boolean(item.completion.documentation) || item.completion.detail !== item.completion.label);\n            }));\n            this._toDispose.add(widget.onDetailsKeyDown(e => {\n                // cmd + c on macOS, ctrl + c on Win / Linux\n                if (e.toKeybinding().equals(new SimpleKeybinding(true, false, false, false, 33 /* KeyC */)) ||\n                    (platform.isMacintosh && e.toKeybinding().equals(new SimpleKeybinding(false, false, false, true, 33 /* KeyC */)))) {\n                    e.stopPropagation();\n                    return;\n                }\n                if (!e.toKeybinding().isModifierKey()) {\n                    this.editor.focus();\n                }\n            }));\n            return widget;\n        }));\n        // Wire up text overtyping capture\n        this._overtypingCapturer = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new OvertypingCapturer(this.editor, this.model));\n        }));\n        this._alternatives = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new SuggestAlternatives(this.editor, this._contextKeyService));\n        }));\n        this._toDispose.add(_instantiationService.createInstance(WordContextKey, editor));\n        this._toDispose.add(this.model.onDidTrigger(e => {\n            this.widget.value.showTriggered(e.auto, e.shy ? 250 : 50);\n            this._lineSuffix.value = new LineSuffix(this.editor.getModel(), e.position);\n        }));\n        this._toDispose.add(this.model.onDidSuggest(e => {\n            if (!e.shy) {\n                let index = -1;\n                for (const selector of this._selectors.itemsOrderedByPriorityDesc) {\n                    index = selector.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                    if (index !== -1) {\n                        break;\n                    }\n                }\n                if (index === -1) {\n                    index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                }\n                this.widget.value.showSuggestions(e.completionModel, index, e.isFrozen, e.auto);\n            }\n        }));\n        this._toDispose.add(this.model.onDidCancel(e => {\n            if (!e.retrigger) {\n                this.widget.value.hideWidget();\n            }\n        }));\n        this._toDispose.add(this.editor.onDidBlurEditorWidget(() => {\n            if (!_sticky) {\n                this.model.cancel();\n                this.model.clear();\n            }\n        }));\n        // Manage the acceptSuggestionsOnEnter context key\n        let acceptSuggestionsOnEnter = SuggestContext.AcceptSuggestionsOnEnter.bindTo(_contextKeyService);\n        let updateFromConfig = () => {\n            const acceptSuggestionOnEnter = this.editor.getOption(1 /* acceptSuggestionOnEnter */);\n            acceptSuggestionsOnEnter.set(acceptSuggestionOnEnter === 'on' || acceptSuggestionOnEnter === 'smart');\n        };\n        this._toDispose.add(this.editor.onDidChangeConfiguration(() => updateFromConfig()));\n        updateFromConfig();\n    }\n    static get(editor) {\n        return editor.getContribution(SuggestController.ID);\n    }\n    dispose() {\n        this._alternatives.dispose();\n        this._toDispose.dispose();\n        this.widget.dispose();\n        this.model.dispose();\n        this._lineSuffix.dispose();\n    }\n    _insertSuggestion(event, flags) {\n        if (!event || !event.item) {\n            this._alternatives.value.reset();\n            this.model.cancel();\n            this.model.clear();\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const snippetController = SnippetController2.get(this.editor);\n        if (!snippetController) {\n            return;\n        }\n        const model = this.editor.getModel();\n        const modelVersionNow = model.getAlternativeVersionId();\n        const { item } = event;\n        //\n        const tasks = [];\n        const cts = new CancellationTokenSource();\n        // pushing undo stops *before* additional text edits and\n        // *after* the main edit\n        if (!(flags & 1 /* NoBeforeUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        // compute overwrite[Before|After] deltas BEFORE applying extra edits\n        const info = this.getOverwriteInfo(item, Boolean(flags & 8 /* AlternativeOverwriteConfig */));\n        // keep item in memory\n        this._memoryService.memorize(model, this.editor.getPosition(), item);\n        if (Array.isArray(item.completion.additionalTextEdits)) {\n            // sync additional edits\n            const scrollState = StableEditorScrollState.capture(this.editor);\n            this.editor.executeEdits('suggestController.additionalTextEdits.sync', item.completion.additionalTextEdits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text)));\n            scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n        }\n        else if (!item.isResolved) {\n            // async additional edits\n            const sw = new StopWatch(true);\n            let position;\n            const docListener = model.onDidChangeContent(e => {\n                if (e.isFlush) {\n                    cts.cancel();\n                    docListener.dispose();\n                    return;\n                }\n                for (let change of e.changes) {\n                    const thisPosition = Range.getEndPosition(change.range);\n                    if (!position || Position.isBefore(thisPosition, position)) {\n                        position = thisPosition;\n                    }\n                }\n            });\n            let oldFlags = flags;\n            flags |= 2 /* NoAfterUndoStop */;\n            let didType = false;\n            let typeListener = this.editor.onWillType(() => {\n                typeListener.dispose();\n                didType = true;\n                if (!(oldFlags & 2 /* NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n            });\n            tasks.push(item.resolve(cts.token).then(() => {\n                if (!item.completion.additionalTextEdits || cts.token.isCancellationRequested) {\n                    return false;\n                }\n                if (position && item.completion.additionalTextEdits.some(edit => Position.isBefore(position, Range.getStartPosition(edit.range)))) {\n                    return false;\n                }\n                if (didType) {\n                    this.editor.pushUndoStop();\n                }\n                const scrollState = StableEditorScrollState.capture(this.editor);\n                this.editor.executeEdits('suggestController.additionalTextEdits.async', item.completion.additionalTextEdits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text)));\n                scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n                if (didType || !(oldFlags & 2 /* NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n                return true;\n            }).then(applied => {\n                this._logService.trace('[suggest] async resolving of edits DONE (ms, applied?)', sw.elapsed(), applied);\n                docListener.dispose();\n                typeListener.dispose();\n            }));\n        }\n        let { insertText } = item.completion;\n        if (!(item.completion.insertTextRules & 4 /* InsertAsSnippet */)) {\n            insertText = SnippetParser.escape(insertText);\n        }\n        snippetController.insert(insertText, {\n            overwriteBefore: info.overwriteBefore,\n            overwriteAfter: info.overwriteAfter,\n            undoStopBefore: false,\n            undoStopAfter: false,\n            adjustWhitespace: !(item.completion.insertTextRules & 1 /* KeepWhitespace */),\n            clipboardText: event.model.clipboardText,\n            overtypingCapturer: this._overtypingCapturer.value\n        });\n        if (!(flags & 2 /* NoAfterUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        if (!item.completion.command) {\n            // done\n            this.model.cancel();\n        }\n        else if (item.completion.command.id === TriggerSuggestAction.id) {\n            // retigger\n            this.model.trigger({ auto: true, shy: false }, true);\n        }\n        else {\n            // exec command, done\n            tasks.push(this._commandService.executeCommand(item.completion.command.id, ...(item.completion.command.arguments ? [...item.completion.command.arguments] : [])).catch(onUnexpectedError));\n            this.model.cancel();\n        }\n        if (flags & 4 /* KeepAlternativeSuggestions */) {\n            this._alternatives.value.set(event, next => {\n                // cancel resolving of additional edits\n                cts.cancel();\n                // this is not so pretty. when inserting the 'next'\n                // suggestion we undo until we are at the state at\n                // which we were before inserting the previous suggestion...\n                while (model.canUndo()) {\n                    if (modelVersionNow !== model.getAlternativeVersionId()) {\n                        model.undo();\n                    }\n                    this._insertSuggestion(next, 1 /* NoBeforeUndoStop */ | 2 /* NoAfterUndoStop */ | (flags & 8 /* AlternativeOverwriteConfig */ ? 8 /* AlternativeOverwriteConfig */ : 0));\n                    break;\n                }\n            });\n        }\n        this._alertCompletionItem(item);\n        // clear only now - after all tasks are done\n        Promise.all(tasks).finally(() => {\n            this._reportSuggestionAcceptedTelemetry(model, event);\n            this.model.clear();\n            cts.dispose();\n        });\n    }\n    _reportSuggestionAcceptedTelemetry(model, acceptedSuggestion) {\n        var _a;\n        if (this._telemetryGate++ % 100 !== 0) {\n            return;\n        }\n        // _debugDisplayName looks like `vscode.css-language-features(/-:)`, where the last bit is the trigger chars\n        // normalize it to just the extension ID and lowercase\n        const providerId = ((_a = acceptedSuggestion.item.provider._debugDisplayName) !== null && _a !== void 0 ? _a : 'unknown').split('(', 1)[0].toLowerCase();\n        this._telemetryService.publicLog2('suggest.acceptedSuggestion', {\n            providerId,\n            basenameHash: hash(basename(model.uri)).toString(16),\n            languageId: model.getLanguageId(),\n            fileExtension: extname(model.uri),\n        });\n    }\n    getOverwriteInfo(item, toggleMode) {\n        assertType(this.editor.hasModel());\n        let replace = this.editor.getOption(106 /* suggest */).insertMode === 'replace';\n        if (toggleMode) {\n            replace = !replace;\n        }\n        const overwriteBefore = item.position.column - item.editStart.column;\n        const overwriteAfter = (replace ? item.editReplaceEnd.column : item.editInsertEnd.column) - item.position.column;\n        const columnDelta = this.editor.getPosition().column - item.position.column;\n        const suffixDelta = this._lineSuffix.value ? this._lineSuffix.value.delta(this.editor.getPosition()) : 0;\n        return {\n            overwriteBefore: overwriteBefore + columnDelta,\n            overwriteAfter: overwriteAfter + suffixDelta\n        };\n    }\n    _alertCompletionItem(item) {\n        if (isNonEmptyArray(item.completion.additionalTextEdits)) {\n            let msg = nls.localize('aria.alert.snippet', \"Accepting '{0}' made {1} additional edits\", item.textLabel, item.completion.additionalTextEdits.length);\n            alert(msg);\n        }\n    }\n    triggerSuggest(onlyFrom, auto) {\n        if (this.editor.hasModel()) {\n            this.model.trigger({ auto: auto !== null && auto !== void 0 ? auto : false, shy: false }, false, onlyFrom);\n            this.editor.revealPosition(this.editor.getPosition(), 0 /* Smooth */);\n            this.editor.focus();\n        }\n    }\n    triggerSuggestAndAcceptBest(arg) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const positionNow = this.editor.getPosition();\n        const fallback = () => {\n            if (positionNow.equals(this.editor.getPosition())) {\n                this._commandService.executeCommand(arg.fallback);\n            }\n        };\n        const makesTextEdit = (item) => {\n            if (item.completion.insertTextRules & 4 /* InsertAsSnippet */ || item.completion.additionalTextEdits) {\n                // snippet, other editor -> makes edit\n                return true;\n            }\n            const position = this.editor.getPosition();\n            const startColumn = item.editStart.column;\n            const endColumn = position.column;\n            if (endColumn - startColumn !== item.completion.insertText.length) {\n                // unequal lengths -> makes edit\n                return true;\n            }\n            const textNow = this.editor.getModel().getValueInRange({\n                startLineNumber: position.lineNumber,\n                startColumn,\n                endLineNumber: position.lineNumber,\n                endColumn\n            });\n            // unequal text -> makes edit\n            return textNow !== item.completion.insertText;\n        };\n        Event.once(this.model.onDidTrigger)(_ => {\n            // wait for trigger because only then the cancel-event is trustworthy\n            let listener = [];\n            Event.any(this.model.onDidTrigger, this.model.onDidCancel)(() => {\n                // retrigger or cancel -> try to type default text\n                dispose(listener);\n                fallback();\n            }, undefined, listener);\n            this.model.onDidSuggest(({ completionModel }) => {\n                dispose(listener);\n                if (completionModel.items.length === 0) {\n                    fallback();\n                    return;\n                }\n                const index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), completionModel.items);\n                const item = completionModel.items[index];\n                if (!makesTextEdit(item)) {\n                    fallback();\n                    return;\n                }\n                this.editor.pushUndoStop();\n                this._insertSuggestion({ index, item, model: completionModel }, 4 /* KeepAlternativeSuggestions */ | 1 /* NoBeforeUndoStop */ | 2 /* NoAfterUndoStop */);\n            }, undefined, listener);\n        });\n        this.model.trigger({ auto: false, shy: true });\n        this.editor.revealPosition(positionNow, 0 /* Smooth */);\n        this.editor.focus();\n    }\n    acceptSelectedSuggestion(keepAlternativeSuggestions, alternativeOverwriteConfig) {\n        const item = this.widget.value.getFocusedItem();\n        let flags = 0;\n        if (keepAlternativeSuggestions) {\n            flags |= 4 /* KeepAlternativeSuggestions */;\n        }\n        if (alternativeOverwriteConfig) {\n            flags |= 8 /* AlternativeOverwriteConfig */;\n        }\n        this._insertSuggestion(item, flags);\n    }\n    acceptNextSuggestion() {\n        this._alternatives.value.next();\n    }\n    acceptPrevSuggestion() {\n        this._alternatives.value.prev();\n    }\n    cancelSuggestWidget() {\n        this.model.cancel();\n        this.model.clear();\n        this.widget.value.hideWidget();\n    }\n    selectNextSuggestion() {\n        this.widget.value.selectNext();\n    }\n    selectNextPageSuggestion() {\n        this.widget.value.selectNextPage();\n    }\n    selectLastSuggestion() {\n        this.widget.value.selectLast();\n    }\n    selectPrevSuggestion() {\n        this.widget.value.selectPrevious();\n    }\n    selectPrevPageSuggestion() {\n        this.widget.value.selectPreviousPage();\n    }\n    selectFirstSuggestion() {\n        this.widget.value.selectFirst();\n    }\n    toggleSuggestionDetails() {\n        this.widget.value.toggleDetails();\n    }\n    toggleExplainMode() {\n        this.widget.value.toggleExplainMode();\n    }\n    toggleSuggestionFocus() {\n        this.widget.value.toggleDetailsFocus();\n    }\n    resetWidgetSize() {\n        this.widget.value.resetPersistedSize();\n    }\n    forceRenderingAbove() {\n        this.widget.value.forceRenderingAbove();\n    }\n    stopForceRenderingAbove() {\n        if (!this.widget.isInitialized) {\n            // This method has no effect if the widget is not initialized yet.\n            return;\n        }\n        this.widget.value.stopForceRenderingAbove();\n    }\n    registerSelector(selector) {\n        return this._selectors.register(selector);\n    }\n};\nSuggestController.ID = 'editor.contrib.suggestController';\nSuggestController = __decorate([\n    __param(1, ISuggestMemoryService),\n    __param(2, ICommandService),\n    __param(3, IContextKeyService),\n    __param(4, IInstantiationService),\n    __param(5, ILogService),\n    __param(6, ITelemetryService)\n], SuggestController);\nexport { SuggestController };\nclass PriorityRegistry {\n    constructor(prioritySelector) {\n        this.prioritySelector = prioritySelector;\n        this._items = new Array();\n    }\n    register(value) {\n        if (this._items.indexOf(value) !== -1) {\n            throw new Error('Value is already registered');\n        }\n        this._items.push(value);\n        this._items.sort((s1, s2) => this.prioritySelector(s2) - this.prioritySelector(s1));\n        return {\n            dispose: () => {\n                const idx = this._items.indexOf(value);\n                if (idx >= 0) {\n                    this._items.splice(idx, 1);\n                }\n            }\n        };\n    }\n    get itemsOrderedByPriorityDesc() {\n        return this._items;\n    }\n}\nexport class TriggerSuggestAction extends EditorAction {\n    constructor() {\n        super({\n            id: TriggerSuggestAction.id,\n            label: nls.localize('suggest.trigger.label', \"Trigger Suggest\"),\n            alias: 'Trigger Suggest',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCompletionItemProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* CtrlCmd */ | 10 /* Space */,\n                secondary: [2048 /* CtrlCmd */ | 39 /* KeyI */],\n                mac: { primary: 256 /* WinCtrl */ | 10 /* Space */, secondary: [512 /* Alt */ | 9 /* Escape */, 2048 /* CtrlCmd */ | 39 /* KeyI */] },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        const controller = SuggestController.get(editor);\n        if (!controller) {\n            return;\n        }\n        let auto;\n        if (args && typeof args === 'object') {\n            if (args.auto === true) {\n                auto = true;\n            }\n        }\n        controller.triggerSuggest(undefined, auto);\n    }\n}\nTriggerSuggestAction.id = 'editor.action.triggerSuggest';\nregisterEditorContribution(SuggestController.ID, SuggestController);\nregisterEditorAction(TriggerSuggestAction);\nconst weight = 100 /* EditorContrib */ + 90;\nconst SuggestCommand = EditorCommand.bindToContribution(SuggestController.get);\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptSelectedSuggestion',\n    precondition: SuggestContext.Visible,\n    handler(x) {\n        x.acceptSelectedSuggestion(true, false);\n    }\n}));\n// normal tab\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'acceptSelectedSuggestion',\n    when: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\n    primary: 2 /* Tab */,\n    weight\n});\n// accept on enter has special rules\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'acceptSelectedSuggestion',\n    when: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.AcceptSuggestionsOnEnter, SuggestContext.MakesTextEdit),\n    primary: 3 /* Enter */,\n    weight,\n});\nMenuRegistry.appendMenuItem(suggestWidgetStatusbarMenu, {\n    command: { id: 'acceptSelectedSuggestion', title: nls.localize('accept.insert', \"Insert\") },\n    group: 'left',\n    order: 1,\n    when: SuggestContext.HasInsertAndReplaceRange.toNegated()\n});\nMenuRegistry.appendMenuItem(suggestWidgetStatusbarMenu, {\n    command: { id: 'acceptSelectedSuggestion', title: nls.localize('accept.insert', \"Insert\") },\n    group: 'left',\n    order: 1,\n    when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert'))\n});\nMenuRegistry.appendMenuItem(suggestWidgetStatusbarMenu, {\n    command: { id: 'acceptSelectedSuggestion', title: nls.localize('accept.replace', \"Replace\") },\n    group: 'left',\n    order: 1,\n    when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace'))\n});\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptAlternativeSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* Shift */ | 3 /* Enter */,\n        secondary: [1024 /* Shift */ | 2 /* Tab */],\n    },\n    handler(x) {\n        x.acceptSelectedSuggestion(false, true);\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert')),\n            title: nls.localize('accept.replace', \"Replace\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace')),\n            title: nls.localize('accept.insert', \"Insert\")\n        }]\n}));\n// continue to support the old command\nCommandsRegistry.registerCommandAlias('acceptSelectedSuggestionOnEnter', 'acceptSelectedSuggestion');\nregisterEditorCommand(new SuggestCommand({\n    id: 'hideSuggestWidget',\n    precondition: SuggestContext.Visible,\n    handler: x => x.cancelSuggestWidget(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 9 /* Escape */,\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 18 /* DownArrow */,\n        secondary: [2048 /* CtrlCmd */ | 18 /* DownArrow */],\n        mac: { primary: 18 /* DownArrow */, secondary: [2048 /* CtrlCmd */ | 18 /* DownArrow */, 256 /* WinCtrl */ | 44 /* KeyN */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectNextPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 12 /* PageDown */,\n        secondary: [2048 /* CtrlCmd */ | 12 /* PageDown */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectLastSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectLastSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 16 /* UpArrow */,\n        secondary: [2048 /* CtrlCmd */ | 16 /* UpArrow */],\n        mac: { primary: 16 /* UpArrow */, secondary: [2048 /* CtrlCmd */ | 16 /* UpArrow */, 256 /* WinCtrl */ | 46 /* KeyP */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectPrevPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 11 /* PageUp */,\n        secondary: [2048 /* CtrlCmd */ | 11 /* PageUp */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectFirstSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectFirstSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionDetails',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionDetails(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* CtrlCmd */ | 10 /* Space */,\n        secondary: [2048 /* CtrlCmd */ | 39 /* KeyI */],\n        mac: { primary: 256 /* WinCtrl */ | 10 /* Space */, secondary: [2048 /* CtrlCmd */ | 39 /* KeyI */] }\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible, SuggestContext.CanResolve),\n            title: nls.localize('detail.more', \"show less\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible.toNegated(), SuggestContext.CanResolve),\n            title: nls.localize('detail.less', \"show more\")\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleExplainMode',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleExplainMode(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */,\n        primary: 2048 /* CtrlCmd */ | 85 /* Slash */,\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionFocus',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionFocus(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 10 /* Space */,\n        mac: { primary: 256 /* WinCtrl */ | 512 /* Alt */ | 10 /* Space */ }\n    }\n}));\n//#region tab completions\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertBestCompletion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), WordContextKey.AtEnd, SuggestContext.Visible.toNegated(), SuggestAlternatives.OtherSuggestions.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: (x, arg) => {\n        x.triggerSuggestAndAcceptBest(isObject(arg) ? Object.assign({ fallback: 'tab' }, arg) : { fallback: 'tab' });\n    },\n    kbOpts: {\n        weight,\n        primary: 2 /* Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertNextSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2 /* Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertPrevSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* Shift */ | 2 /* Tab */\n    }\n}));\nregisterEditorAction(class extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.resetSuggestSize',\n            label: nls.localize('suggest.reset.label', \"Reset Suggest Widget Size\"),\n            alias: 'Reset Suggest Widget Size',\n            precondition: undefined\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        (_a = SuggestController.get(editor)) === null || _a === void 0 ? void 0 : _a.resetWidgetSize();\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { showSimpleSuggestions } from '../../suggest/browser/suggest.js';\nimport { localize } from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { SnippetSession } from './snippetSession.js';\nconst _defaultOptions = {\n    overwriteBefore: 0,\n    overwriteAfter: 0,\n    undoStopBefore: true,\n    undoStopAfter: true,\n    adjustWhitespace: true,\n    clipboardText: undefined,\n    overtypingCapturer: undefined\n};\nlet SnippetController2 = class SnippetController2 {\n    constructor(_editor, _instantiationService, _logService, contextKeyService) {\n        this._editor = _editor;\n        this._instantiationService = _instantiationService;\n        this._logService = _logService;\n        this._snippetListener = new DisposableStore();\n        this._modelVersionId = -1;\n        this._inSnippet = SnippetController2.InSnippetMode.bindTo(contextKeyService);\n        this._hasNextTabstop = SnippetController2.HasNextTabstop.bindTo(contextKeyService);\n        this._hasPrevTabstop = SnippetController2.HasPrevTabstop.bindTo(contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(SnippetController2.ID);\n    }\n    dispose() {\n        var _a;\n        this._inSnippet.reset();\n        this._hasPrevTabstop.reset();\n        this._hasNextTabstop.reset();\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._snippetListener.dispose();\n    }\n    insert(template, opts) {\n        // this is here to find out more about the yet-not-understood\n        // error that sometimes happens when we fail to inserted a nested\n        // snippet\n        try {\n            this._doInsert(template, typeof opts === 'undefined' ? _defaultOptions : Object.assign(Object.assign({}, _defaultOptions), opts));\n        }\n        catch (e) {\n            this.cancel();\n            this._logService.error(e);\n            this._logService.error('snippet_error');\n            this._logService.error('insert_template=', template);\n            this._logService.error('existing_template=', this._session ? this._session._logInfo() : '<no_session>');\n        }\n    }\n    _doInsert(template, opts) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // don't listen while inserting the snippet\n        // as that is the inflight state causing cancelation\n        this._snippetListener.clear();\n        if (opts.undoStopBefore) {\n            this._editor.getModel().pushStackElement();\n        }\n        if (!this._session) {\n            this._modelVersionId = this._editor.getModel().getAlternativeVersionId();\n            this._session = new SnippetSession(this._editor, template, opts);\n            this._session.insert();\n        }\n        else {\n            this._session.merge(template, opts);\n        }\n        if (opts.undoStopAfter) {\n            this._editor.getModel().pushStackElement();\n        }\n        this._updateState();\n        this._snippetListener.add(this._editor.onDidChangeModelContent(e => e.isFlush && this.cancel()));\n        this._snippetListener.add(this._editor.onDidChangeModel(() => this.cancel()));\n        this._snippetListener.add(this._editor.onDidChangeCursorSelection(() => this._updateState()));\n    }\n    _updateState() {\n        if (!this._session || !this._editor.hasModel()) {\n            // canceled in the meanwhile\n            return;\n        }\n        if (this._modelVersionId === this._editor.getModel().getAlternativeVersionId()) {\n            // undo until the 'before' state happened\n            // and makes use cancel snippet mode\n            return this.cancel();\n        }\n        if (!this._session.hasPlaceholder) {\n            // don't listen for selection changes and don't\n            // update context keys when the snippet is plain text\n            return this.cancel();\n        }\n        if (this._session.isAtLastPlaceholder || !this._session.isSelectionWithinPlaceholders()) {\n            this._editor.getModel().pushStackElement();\n            return this.cancel();\n        }\n        this._inSnippet.set(true);\n        this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder);\n        this._hasNextTabstop.set(!this._session.isAtLastPlaceholder);\n        this._handleChoice();\n    }\n    _handleChoice() {\n        if (!this._session || !this._editor.hasModel()) {\n            this._currentChoice = undefined;\n            return;\n        }\n        const { choice } = this._session;\n        if (!choice) {\n            this._currentChoice = undefined;\n            return;\n        }\n        if (this._currentChoice !== choice) {\n            this._currentChoice = choice;\n            this._editor.setSelections(this._editor.getSelections()\n                .map(s => Selection.fromPositions(s.getStartPosition())));\n            const [first] = choice.options;\n            this._instantiationService.invokeFunction(showSimpleSuggestions, this._editor, choice.options.map((option, i) => {\n                // let before = choice.options.slice(0, i);\n                // let after = choice.options.slice(i);\n                return {\n                    kind: 13 /* Value */,\n                    label: option.value,\n                    insertText: option.value,\n                    // insertText: `\\${1|${after.concat(before).join(',')}|}$0`,\n                    // snippetType: 'textmate',\n                    sortText: 'a'.repeat(i + 1),\n                    range: Range.fromPositions(this._editor.getPosition(), this._editor.getPosition().delta(0, first.value.length))\n                };\n            }));\n        }\n    }\n    finish() {\n        while (this._inSnippet.get()) {\n            this.next();\n        }\n    }\n    cancel(resetSelection = false) {\n        var _a;\n        this._inSnippet.reset();\n        this._hasPrevTabstop.reset();\n        this._hasNextTabstop.reset();\n        this._snippetListener.clear();\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._session = undefined;\n        this._modelVersionId = -1;\n        if (resetSelection) {\n            // reset selection to the primary cursor when being asked\n            // for. this happens when explicitly cancelling snippet mode,\n            // e.g. when pressing ESC\n            this._editor.setSelections([this._editor.getSelection()]);\n        }\n    }\n    prev() {\n        if (this._session) {\n            this._session.prev();\n        }\n        this._updateState();\n    }\n    next() {\n        if (this._session) {\n            this._session.next();\n        }\n        this._updateState();\n    }\n    isInSnippet() {\n        return Boolean(this._inSnippet.get());\n    }\n};\nSnippetController2.ID = 'snippetController2';\nSnippetController2.InSnippetMode = new RawContextKey('inSnippetMode', false, localize('inSnippetMode', \"Whether the editor in current in snippet mode\"));\nSnippetController2.HasNextTabstop = new RawContextKey('hasNextTabstop', false, localize('hasNextTabstop', \"Whether there is a next tab stop when in snippet mode\"));\nSnippetController2.HasPrevTabstop = new RawContextKey('hasPrevTabstop', false, localize('hasPrevTabstop', \"Whether there is a previous tab stop when in snippet mode\"));\nSnippetController2 = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, ILogService),\n    __param(3, IContextKeyService)\n], SnippetController2);\nexport { SnippetController2 };\nregisterEditorContribution(SnippetController2.ID, SnippetController2);\nconst CommandCtor = EditorCommand.bindToContribution(SnippetController2.get);\nregisterEditorCommand(new CommandCtor({\n    id: 'jumpToNextSnippetPlaceholder',\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasNextTabstop),\n    handler: ctrl => ctrl.next(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2 /* Tab */\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'jumpToPrevSnippetPlaceholder',\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasPrevTabstop),\n    handler: ctrl => ctrl.prev(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* Shift */ | 2 /* Tab */\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'leaveSnippet',\n    precondition: SnippetController2.InSnippetMode,\n    handler: ctrl => ctrl.cancel(true),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 9 /* Escape */,\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'acceptSnippet',\n    precondition: SnippetController2.InSnippetMode,\n    handler: ctrl => ctrl.finish(),\n    // kbOpts: {\n    // \tweight: KeybindingWeight.EditorContrib + 30,\n    // \tkbExpr: EditorContextKeys.textFocus,\n    // \tprimary: KeyCode.Enter,\n    // }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LRUCache, TernarySearchTree } from '../../../../base/common/map.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport class Memory {\n    constructor(name) {\n        this.name = name;\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        let topScore = items[0].score[0];\n        for (let i = 0; i < items.length; i++) {\n            const { score, completion: suggestion } = items[i];\n            if (score[0] !== topScore) {\n                // stop when leaving the group of top matches\n                break;\n            }\n            if (suggestion.preselect) {\n                // stop when seeing an auto-select-item\n                return i;\n            }\n        }\n        return 0;\n    }\n}\nexport class NoMemory extends Memory {\n    constructor() {\n        super('first');\n    }\n    memorize(model, pos, item) {\n        // no-op\n    }\n    toJSON() {\n        return undefined;\n    }\n    fromJSON() {\n        //\n    }\n}\nexport class LRUMemory extends Memory {\n    constructor() {\n        super('recentlyUsed');\n        this._cache = new LRUCache(300, 0.66);\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const key = `${model.getLanguageId()}/${item.textLabel}`;\n        this._cache.set(key, {\n            touch: this._seq++,\n            type: item.completion.kind,\n            insertText: item.completion.insertText\n        });\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const lineSuffix = model.getLineContent(pos.lineNumber).substr(pos.column - 10, pos.column - 1);\n        if (/\\s$/.test(lineSuffix)) {\n            return super.select(model, pos, items);\n        }\n        let topScore = items[0].score[0];\n        let indexPreselect = -1;\n        let indexRecency = -1;\n        let seq = -1;\n        for (let i = 0; i < items.length; i++) {\n            if (items[i].score[0] !== topScore) {\n                // consider only top items\n                break;\n            }\n            const key = `${model.getLanguageId()}/${items[i].textLabel}`;\n            const item = this._cache.peek(key);\n            if (item && item.touch > seq && item.type === items[i].completion.kind && item.insertText === items[i].completion.insertText) {\n                seq = item.touch;\n                indexRecency = i;\n            }\n            if (items[i].completion.preselect && indexPreselect === -1) {\n                // stop when seeing an auto-select-item\n                return indexPreselect = i;\n            }\n        }\n        if (indexRecency !== -1) {\n            return indexRecency;\n        }\n        else if (indexPreselect !== -1) {\n            return indexPreselect;\n        }\n        else {\n            return 0;\n        }\n    }\n    toJSON() {\n        return this._cache.toJSON();\n    }\n    fromJSON(data) {\n        this._cache.clear();\n        let seq = 0;\n        for (const [key, value] of data) {\n            value.touch = seq;\n            value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n            this._cache.set(key, value);\n        }\n        this._seq = this._cache.size;\n    }\n}\nexport class PrefixMemory extends Memory {\n    constructor() {\n        super('recentlyUsedByPrefix');\n        this._trie = TernarySearchTree.forStrings();\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const { word } = model.getWordUntilPosition(pos);\n        const key = `${model.getLanguageId()}/${word}`;\n        this._trie.set(key, {\n            type: item.completion.kind,\n            insertText: item.completion.insertText,\n            touch: this._seq++\n        });\n    }\n    select(model, pos, items) {\n        let { word } = model.getWordUntilPosition(pos);\n        if (!word) {\n            return super.select(model, pos, items);\n        }\n        let key = `${model.getLanguageId()}/${word}`;\n        let item = this._trie.get(key);\n        if (!item) {\n            item = this._trie.findSubstr(key);\n        }\n        if (item) {\n            for (let i = 0; i < items.length; i++) {\n                let { kind, insertText } = items[i].completion;\n                if (kind === item.type && insertText === item.insertText) {\n                    return i;\n                }\n            }\n        }\n        return super.select(model, pos, items);\n    }\n    toJSON() {\n        let entries = [];\n        this._trie.forEach((value, key) => entries.push([key, value]));\n        // sort by last recently used (touch), then\n        // take the top 200 item and normalize their\n        // touch\n        entries\n            .sort((a, b) => -(a[1].touch - b[1].touch))\n            .forEach((value, i) => value[1].touch = i);\n        return entries.slice(0, 200);\n    }\n    fromJSON(data) {\n        this._trie.clear();\n        if (data.length > 0) {\n            this._seq = data[0][1].touch + 1;\n            for (const [key, value] of data) {\n                value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n                this._trie.set(key, value);\n            }\n        }\n    }\n}\nlet SuggestMemoryService = class SuggestMemoryService {\n    constructor(_storageService, _configService) {\n        this._storageService = _storageService;\n        this._configService = _configService;\n        this._disposables = new DisposableStore();\n        this._persistSoon = new RunOnceScheduler(() => this._saveState(), 500);\n        this._disposables.add(_storageService.onWillSaveState(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                this._saveState();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._persistSoon.dispose();\n    }\n    memorize(model, pos, item) {\n        this._withStrategy(model, pos).memorize(model, pos, item);\n        this._persistSoon.schedule();\n    }\n    select(model, pos, items) {\n        return this._withStrategy(model, pos).select(model, pos, items);\n    }\n    _withStrategy(model, pos) {\n        var _a;\n        const mode = this._configService.getValue('editor.suggestSelection', {\n            overrideIdentifier: model.getLanguageIdAtPosition(pos.lineNumber, pos.column),\n            resource: model.uri\n        });\n        if (((_a = this._strategy) === null || _a === void 0 ? void 0 : _a.name) !== mode) {\n            this._saveState();\n            const ctor = SuggestMemoryService._strategyCtors.get(mode) || NoMemory;\n            this._strategy = new ctor();\n            try {\n                const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n                const scope = share ? 0 /* GLOBAL */ : 1 /* WORKSPACE */;\n                const raw = this._storageService.get(`${SuggestMemoryService._storagePrefix}/${mode}`, scope);\n                if (raw) {\n                    this._strategy.fromJSON(JSON.parse(raw));\n                }\n            }\n            catch (e) {\n                // things can go wrong with JSON...\n            }\n        }\n        return this._strategy;\n    }\n    _saveState() {\n        if (this._strategy) {\n            const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n            const scope = share ? 0 /* GLOBAL */ : 1 /* WORKSPACE */;\n            const raw = JSON.stringify(this._strategy);\n            this._storageService.store(`${SuggestMemoryService._storagePrefix}/${this._strategy.name}`, raw, scope, 1 /* MACHINE */);\n        }\n    }\n};\nSuggestMemoryService._strategyCtors = new Map([\n    ['recentlyUsedByPrefix', PrefixMemory],\n    ['recentlyUsed', LRUMemory],\n    ['first', NoMemory]\n]);\nSuggestMemoryService._storagePrefix = 'suggest/memories';\nSuggestMemoryService = __decorate([\n    __param(0, IStorageService),\n    __param(1, IConfigurationService)\n], SuggestMemoryService);\nexport { SuggestMemoryService };\nexport const ISuggestMemoryService = createDecorator('ISuggestMemories');\nregisterSingleton(ISuggestMemoryService, SuggestMemoryService, true);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet WordContextKey = class WordContextKey {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._enabled = false;\n        this._ckAtEnd = WordContextKey.AtEnd.bindTo(contextKeyService);\n        this._configListener = this._editor.onDidChangeConfiguration(e => e.hasChanged(111 /* tabCompletion */) && this._update());\n        this._update();\n    }\n    dispose() {\n        var _a;\n        this._configListener.dispose();\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._ckAtEnd.reset();\n    }\n    _update() {\n        // only update this when tab completions are enabled\n        const enabled = this._editor.getOption(111 /* tabCompletion */) === 'on';\n        if (this._enabled === enabled) {\n            return;\n        }\n        this._enabled = enabled;\n        if (this._enabled) {\n            const checkForWordEnd = () => {\n                if (!this._editor.hasModel()) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                const model = this._editor.getModel();\n                const selection = this._editor.getSelection();\n                const word = model.getWordAtPosition(selection.getStartPosition());\n                if (!word) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                this._ckAtEnd.set(word.endColumn === selection.getStartPosition().column);\n            };\n            this._selectionListener = this._editor.onDidChangeCursorSelection(checkForWordEnd);\n            checkForWordEnd();\n        }\n        else if (this._selectionListener) {\n            this._ckAtEnd.reset();\n            this._selectionListener.dispose();\n            this._selectionListener = undefined;\n        }\n    }\n};\nWordContextKey.AtEnd = new RawContextKey('atEndOfWord', false);\nWordContextKey = __decorate([\n    __param(1, IContextKeyService)\n], WordContextKey);\nexport { WordContextKey };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet SuggestAlternatives = class SuggestAlternatives {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._index = 0;\n        this._ckOtherSuggestions = SuggestAlternatives.OtherSuggestions.bindTo(contextKeyService);\n    }\n    dispose() {\n        this.reset();\n    }\n    reset() {\n        var _a;\n        this._ckOtherSuggestions.reset();\n        (_a = this._listener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._model = undefined;\n        this._acceptNext = undefined;\n        this._ignore = false;\n    }\n    set({ model, index }, acceptNext) {\n        // no suggestions -> nothing to do\n        if (model.items.length === 0) {\n            this.reset();\n            return;\n        }\n        // no alternative suggestions -> nothing to do\n        let nextIndex = SuggestAlternatives._moveIndex(true, model, index);\n        if (nextIndex === index) {\n            this.reset();\n            return;\n        }\n        this._acceptNext = acceptNext;\n        this._model = model;\n        this._index = index;\n        this._listener = this._editor.onDidChangeCursorPosition(() => {\n            if (!this._ignore) {\n                this.reset();\n            }\n        });\n        this._ckOtherSuggestions.set(true);\n    }\n    static _moveIndex(fwd, model, index) {\n        let newIndex = index;\n        while (true) {\n            newIndex = (newIndex + model.items.length + (fwd ? +1 : -1)) % model.items.length;\n            if (newIndex === index) {\n                break;\n            }\n            if (!model.items[newIndex].completion.additionalTextEdits) {\n                break;\n            }\n        }\n        return newIndex;\n    }\n    next() {\n        this._move(true);\n    }\n    prev() {\n        this._move(false);\n    }\n    _move(fwd) {\n        if (!this._model) {\n            // nothing to reason about\n            return;\n        }\n        try {\n            this._ignore = true;\n            this._index = SuggestAlternatives._moveIndex(fwd, this._model, this._index);\n            this._acceptNext({ index: this._index, item: this._model.items[this._index], model: this._model });\n        }\n        finally {\n            this._ignore = false;\n        }\n    }\n};\nSuggestAlternatives.OtherSuggestions = new RawContextKey('hasOtherSuggestions', false);\nSuggestAlternatives = __decorate([\n    __param(1, IContextKeyService)\n], SuggestAlternatives);\nexport { SuggestAlternatives };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nexport class CommitCharacterController {\n    constructor(editor, widget, accept) {\n        this._disposables = new DisposableStore();\n        this._disposables.add(widget.onDidShow(() => this._onItem(widget.getFocusedItem())));\n        this._disposables.add(widget.onDidFocus(this._onItem, this));\n        this._disposables.add(widget.onDidHide(this.reset, this));\n        this._disposables.add(editor.onWillType(text => {\n            if (this._active && !widget.isFrozen()) {\n                const ch = text.charCodeAt(text.length - 1);\n                if (this._active.acceptCharacters.has(ch) && editor.getOption(0 /* acceptSuggestionOnCommitCharacter */)) {\n                    accept(this._active.item);\n                }\n            }\n        }));\n    }\n    _onItem(selected) {\n        if (!selected || !isNonEmptyArray(selected.item.completion.commitCharacters)) {\n            // no item or no commit characters\n            this.reset();\n            return;\n        }\n        if (this._active && this._active.item.item === selected.item) {\n            // still the same item\n            return;\n        }\n        // keep item and its commit characters\n        const acceptCharacters = new CharacterSet();\n        for (const ch of selected.item.completion.commitCharacters) {\n            if (ch.length > 0) {\n                acceptCharacters.add(ch.charCodeAt(0));\n            }\n        }\n        this._active = { acceptCharacters, item: selected };\n    }\n    reset() {\n        this._active = undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace, isHighSurrogate, isLowSurrogate } from '../../../../base/common/strings.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CompletionModel } from './completionModel.js';\nimport { CompletionOptions, getSnippetSuggestSupport, getSuggestionComparator, provideSuggestionItems } from './suggest.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class LineContext {\n    constructor(model, position, auto, shy) {\n        this.leadingLineContent = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n        this.leadingWord = model.getWordUntilPosition(position);\n        this.lineNumber = position.lineNumber;\n        this.column = position.column;\n        this.auto = auto;\n        this.shy = shy;\n    }\n    static shouldAutoTrigger(editor) {\n        if (!editor.hasModel()) {\n            return false;\n        }\n        const model = editor.getModel();\n        const pos = editor.getPosition();\n        model.tokenizeIfCheap(pos.lineNumber);\n        const word = model.getWordAtPosition(pos);\n        if (!word) {\n            return false;\n        }\n        if (word.endColumn !== pos.column) {\n            return false;\n        }\n        if (!isNaN(Number(word.word))) {\n            return false;\n        }\n        return true;\n    }\n}\nfunction isSuggestPreviewEnabled(editor) {\n    return editor.getOption(106 /* suggest */).preview;\n}\nfunction canShowQuickSuggest(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const allowQuickSuggestions = configurationService.getValue('editor.inlineSuggest.allowQuickSuggestions');\n    if (allowQuickSuggestions !== undefined) {\n        // Use setting if available.\n        return Boolean(allowQuickSuggestions);\n    }\n    // Don't allow if inline suggestions are visible and no suggest preview is configured.\n    // TODO disabled for copilot\n    return false && isSuggestPreviewEnabled(editor);\n}\nfunction canShowSuggestOnTriggerCharacters(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const allowQuickSuggestions = configurationService.getValue('editor.inlineSuggest.allowSuggestOnTriggerCharacters');\n    if (allowQuickSuggestions !== undefined) {\n        // Use setting if available.\n        return Boolean(allowQuickSuggestions);\n    }\n    // Don't allow if inline suggestions are visible and no suggest preview is configured.\n    // TODO disabled for copilot\n    return false && isSuggestPreviewEnabled(editor);\n}\nlet SuggestModel = class SuggestModel {\n    constructor(_editor, _editorWorkerService, _clipboardService, _telemetryService, _logService, _contextKeyService, _configurationService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._clipboardService = _clipboardService;\n        this._telemetryService = _telemetryService;\n        this._logService = _logService;\n        this._contextKeyService = _contextKeyService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._toDispose = new DisposableStore();\n        this._quickSuggestDelay = 10;\n        this._triggerCharacterListener = new DisposableStore();\n        this._triggerQuickSuggest = new TimeoutTimer();\n        this._state = 0 /* Idle */;\n        this._completionDisposables = new DisposableStore();\n        this._onDidCancel = new Emitter();\n        this._onDidTrigger = new Emitter();\n        this._onDidSuggest = new Emitter();\n        this.onDidCancel = this._onDidCancel.event;\n        this.onDidTrigger = this._onDidTrigger.event;\n        this.onDidSuggest = this._onDidSuggest.event;\n        this._telemetryGate = 0;\n        this._currentSelection = this._editor.getSelection() || new Selection(1, 1, 1, 1);\n        // wire up various listeners\n        this._toDispose.add(this._editor.onDidChangeModel(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelLanguage(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeConfiguration(() => {\n            this._updateTriggerCharacters();\n            this._updateQuickSuggest();\n        }));\n        this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(() => {\n            this._updateTriggerCharacters();\n            this._updateActiveSuggestSession();\n        }));\n        let editorIsComposing = false;\n        this._toDispose.add(this._editor.onDidCompositionStart(() => {\n            editorIsComposing = true;\n        }));\n        this._toDispose.add(this._editor.onDidCompositionEnd(() => {\n            editorIsComposing = false;\n            this._onCompositionEnd();\n        }));\n        this._toDispose.add(this._editor.onDidChangeCursorSelection(e => {\n            // only trigger suggest when the editor isn't composing a character\n            if (!editorIsComposing) {\n                this._onCursorChange(e);\n            }\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelContent(() => {\n            // only filter completions when the editor isn't composing a character\n            // allow-any-unicode-next-line\n            // e.g. \u00A8 + u makes \u00FC but just \u00A8 cannot be used for filtering\n            if (!editorIsComposing) {\n                this._refilterCompletionItems();\n            }\n        }));\n        this._updateTriggerCharacters();\n        this._updateQuickSuggest();\n    }\n    dispose() {\n        dispose(this._triggerCharacterListener);\n        dispose([this._onDidCancel, this._onDidSuggest, this._onDidTrigger, this._triggerQuickSuggest]);\n        this._toDispose.dispose();\n        this._completionDisposables.dispose();\n        this.cancel();\n    }\n    // --- handle configuration & precondition changes\n    _updateQuickSuggest() {\n        this._quickSuggestDelay = this._editor.getOption(80 /* quickSuggestionsDelay */);\n        if (isNaN(this._quickSuggestDelay) || (!this._quickSuggestDelay && this._quickSuggestDelay !== 0) || this._quickSuggestDelay < 0) {\n            this._quickSuggestDelay = 10;\n        }\n    }\n    _updateTriggerCharacters() {\n        this._triggerCharacterListener.clear();\n        if (this._editor.getOption(81 /* readOnly */)\n            || !this._editor.hasModel()\n            || !this._editor.getOption(109 /* suggestOnTriggerCharacters */)) {\n            return;\n        }\n        const supportsByTriggerCharacter = new Map();\n        for (const support of this._languageFeaturesService.completionProvider.all(this._editor.getModel())) {\n            for (const ch of support.triggerCharacters || []) {\n                let set = supportsByTriggerCharacter.get(ch);\n                if (!set) {\n                    set = new Set();\n                    set.add(getSnippetSuggestSupport());\n                    supportsByTriggerCharacter.set(ch, set);\n                }\n                set.add(support);\n            }\n        }\n        const checkTriggerCharacter = (text) => {\n            if (!canShowSuggestOnTriggerCharacters(this._editor, this._contextKeyService, this._configurationService)) {\n                return;\n            }\n            if (LineContext.shouldAutoTrigger(this._editor)) {\n                // don't trigger by trigger characters when this is a case for quick suggest\n                return;\n            }\n            if (!text) {\n                // came here from the compositionEnd-event\n                const position = this._editor.getPosition();\n                const model = this._editor.getModel();\n                text = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n            }\n            let lastChar = '';\n            if (isLowSurrogate(text.charCodeAt(text.length - 1))) {\n                if (isHighSurrogate(text.charCodeAt(text.length - 2))) {\n                    lastChar = text.substr(text.length - 2);\n                }\n            }\n            else {\n                lastChar = text.charAt(text.length - 1);\n            }\n            const supports = supportsByTriggerCharacter.get(lastChar);\n            if (supports) {\n                // keep existing items that where not computed by the\n                // supports/providers that want to trigger now\n                const existing = this._completionModel\n                    ? { items: this._completionModel.adopt(supports), clipboardText: this._completionModel.clipboardText }\n                    : undefined;\n                this.trigger({ auto: true, shy: false, triggerCharacter: lastChar }, Boolean(this._completionModel), supports, existing);\n            }\n        };\n        this._triggerCharacterListener.add(this._editor.onDidType(checkTriggerCharacter));\n        this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(() => checkTriggerCharacter()));\n    }\n    // --- trigger/retrigger/cancel suggest\n    get state() {\n        return this._state;\n    }\n    cancel(retrigger = false) {\n        var _a;\n        if (this._state !== 0 /* Idle */) {\n            this._triggerQuickSuggest.cancel();\n            (_a = this._requestToken) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._requestToken = undefined;\n            this._state = 0 /* Idle */;\n            this._completionModel = undefined;\n            this._context = undefined;\n            this._onDidCancel.fire({ retrigger });\n        }\n    }\n    clear() {\n        this._completionDisposables.clear();\n    }\n    _updateActiveSuggestSession() {\n        if (this._state !== 0 /* Idle */) {\n            if (!this._editor.hasModel() || !this._languageFeaturesService.completionProvider.has(this._editor.getModel())) {\n                this.cancel();\n            }\n            else {\n                this.trigger({ auto: this._state === 2 /* Auto */, shy: false }, true);\n            }\n        }\n    }\n    _onCursorChange(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const prevSelection = this._currentSelection;\n        this._currentSelection = this._editor.getSelection();\n        if (!e.selection.isEmpty()\n            || (e.reason !== 0 /* NotSet */ && e.reason !== 3 /* Explicit */)\n            || (e.source !== 'keyboard' && e.source !== 'deleteLeft')) {\n            // Early exit if nothing needs to be done!\n            // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n            this.cancel();\n            return;\n        }\n        if (this._state === 0 /* Idle */ && e.reason === 0 /* NotSet */) {\n            if (prevSelection.containsRange(this._currentSelection) || prevSelection.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition())) {\n                // cursor did move RIGHT due to typing -> trigger quick suggest\n                this._doTriggerQuickSuggest();\n            }\n        }\n        else if (this._state !== 0 /* Idle */ && e.reason === 3 /* Explicit */) {\n            // suggest is active and something like cursor keys are used to move\n            // the cursor. this means we can refilter at the new position\n            this._refilterCompletionItems();\n        }\n    }\n    _onCompositionEnd() {\n        // trigger or refilter when composition ends\n        if (this._state === 0 /* Idle */) {\n            this._doTriggerQuickSuggest();\n        }\n        else {\n            this._refilterCompletionItems();\n        }\n    }\n    _doTriggerQuickSuggest() {\n        var _a;\n        if (this._editor.getOption(79 /* quickSuggestions */) === false) {\n            // not enabled\n            return;\n        }\n        if (this._editor.getOption(106 /* suggest */).snippetsPreventQuickSuggestions && ((_a = SnippetController2.get(this._editor)) === null || _a === void 0 ? void 0 : _a.isInSnippet())) {\n            // no quick suggestion when in snippet mode\n            return;\n        }\n        this.cancel();\n        this._triggerQuickSuggest.cancelAndSet(() => {\n            if (this._state !== 0 /* Idle */) {\n                return;\n            }\n            if (!LineContext.shouldAutoTrigger(this._editor)) {\n                return;\n            }\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const pos = this._editor.getPosition();\n            // validate enabled now\n            const quickSuggestions = this._editor.getOption(79 /* quickSuggestions */);\n            if (quickSuggestions === false) {\n                return;\n            }\n            else if (quickSuggestions === true) {\n                // all good\n            }\n            else {\n                // Check the type of the token that triggered this\n                model.tokenizeIfCheap(pos.lineNumber);\n                const lineTokens = model.getLineTokens(pos.lineNumber);\n                const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(pos.column - 1 - 1, 0)));\n                const inValidScope = quickSuggestions.other && tokenType === 0 /* Other */\n                    || quickSuggestions.comments && tokenType === 1 /* Comment */\n                    || quickSuggestions.strings && tokenType === 2 /* String */;\n                if (!inValidScope) {\n                    return;\n                }\n            }\n            if (!canShowQuickSuggest(this._editor, this._contextKeyService, this._configurationService)) {\n                // do not trigger quick suggestions if inline suggestions are shown\n                return;\n            }\n            if (!this._languageFeaturesService.completionProvider.has(model)) {\n                return;\n            }\n            // we made it till here -> trigger now\n            this.trigger({ auto: true, shy: false });\n        }, this._quickSuggestDelay);\n    }\n    _refilterCompletionItems() {\n        // Re-filter suggestions. This MUST run async because filtering/scoring\n        // uses the model content AND the cursor position. The latter is NOT\n        // updated when the document has changed (the event which drives this method)\n        // and therefore a little pause (next mirco task) is needed. See:\n        // https://stackoverflow.com/questions/25915634/difference-between-microtask-and-macrotask-within-an-event-loop-context#25933985\n        Promise.resolve().then(() => {\n            if (this._state === 0 /* Idle */) {\n                return;\n            }\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const position = this._editor.getPosition();\n            const ctx = new LineContext(model, position, this._state === 2 /* Auto */, false);\n            this._onNewContext(ctx);\n        });\n    }\n    trigger(context, retrigger = false, onlyFrom, existing) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const auto = context.auto;\n        const ctx = new LineContext(model, this._editor.getPosition(), auto, context.shy);\n        // Cancel previous requests, change state & update UI\n        this.cancel(retrigger);\n        this._state = auto ? 2 /* Auto */ : 1 /* Manual */;\n        this._onDidTrigger.fire({ auto, shy: context.shy, position: this._editor.getPosition() });\n        // Capture context when request was sent\n        this._context = ctx;\n        // Build context for request\n        let suggestCtx = { triggerKind: (_a = context.triggerKind) !== null && _a !== void 0 ? _a : 0 /* Invoke */ };\n        if (context.triggerCharacter) {\n            suggestCtx = {\n                triggerKind: 1 /* TriggerCharacter */,\n                triggerCharacter: context.triggerCharacter\n            };\n        }\n        this._requestToken = new CancellationTokenSource();\n        // kind filter and snippet sort rules\n        const snippetSuggestions = this._editor.getOption(101 /* snippetSuggestions */);\n        let snippetSortOrder = 1 /* Inline */;\n        switch (snippetSuggestions) {\n            case 'top':\n                snippetSortOrder = 0 /* Top */;\n                break;\n            // \t\u2193 that's the default anyways...\n            // case 'inline':\n            // \tsnippetSortOrder = SnippetSortOrder.Inline;\n            // \tbreak;\n            case 'bottom':\n                snippetSortOrder = 2 /* Bottom */;\n                break;\n        }\n        const { itemKind: itemKindFilter, showDeprecated } = SuggestModel._createSuggestFilter(this._editor);\n        const wordDistance = WordDistance.create(this._editorWorkerService, this._editor);\n        const completions = provideSuggestionItems(this._languageFeaturesService.completionProvider, model, this._editor.getPosition(), new CompletionOptions(snippetSortOrder, itemKindFilter, onlyFrom, showDeprecated), suggestCtx, this._requestToken.token);\n        Promise.all([completions, wordDistance]).then(([completions, wordDistance]) => __awaiter(this, void 0, void 0, function* () {\n            var _b;\n            (_b = this._requestToken) === null || _b === void 0 ? void 0 : _b.dispose();\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            let clipboardText = existing === null || existing === void 0 ? void 0 : existing.clipboardText;\n            if (!clipboardText && completions.needsClipboard) {\n                clipboardText = yield this._clipboardService.readText();\n            }\n            if (this._state === 0 /* Idle */) {\n                return;\n            }\n            const model = this._editor.getModel();\n            let items = completions.items;\n            if (existing) {\n                const cmpFn = getSuggestionComparator(snippetSortOrder);\n                items = items.concat(existing.items).sort(cmpFn);\n            }\n            const ctx = new LineContext(model, this._editor.getPosition(), auto, context.shy);\n            this._completionModel = new CompletionModel(items, this._context.column, {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            }, wordDistance, this._editor.getOption(106 /* suggest */), this._editor.getOption(101 /* snippetSuggestions */), clipboardText);\n            // store containers so that they can be disposed later\n            this._completionDisposables.add(completions.disposable);\n            this._onNewContext(ctx);\n            // finally report telemetry about durations\n            this._reportDurationsTelemetry(completions.durations);\n        })).catch(onUnexpectedError);\n    }\n    _reportDurationsTelemetry(durations) {\n        if (this._telemetryGate++ % 230 !== 0) {\n            return;\n        }\n        setTimeout(() => {\n            this._telemetryService.publicLog2('suggest.durations.json', { data: JSON.stringify(durations) });\n            this._logService.debug('suggest.durations.json', durations);\n        });\n    }\n    static _createSuggestFilter(editor) {\n        // kind filter and snippet sort rules\n        const result = new Set();\n        // snippet setting\n        const snippetSuggestions = editor.getOption(101 /* snippetSuggestions */);\n        if (snippetSuggestions === 'none') {\n            result.add(27 /* Snippet */);\n        }\n        // type setting\n        const suggestOptions = editor.getOption(106 /* suggest */);\n        if (!suggestOptions.showMethods) {\n            result.add(0 /* Method */);\n        }\n        if (!suggestOptions.showFunctions) {\n            result.add(1 /* Function */);\n        }\n        if (!suggestOptions.showConstructors) {\n            result.add(2 /* Constructor */);\n        }\n        if (!suggestOptions.showFields) {\n            result.add(3 /* Field */);\n        }\n        if (!suggestOptions.showVariables) {\n            result.add(4 /* Variable */);\n        }\n        if (!suggestOptions.showClasses) {\n            result.add(5 /* Class */);\n        }\n        if (!suggestOptions.showStructs) {\n            result.add(6 /* Struct */);\n        }\n        if (!suggestOptions.showInterfaces) {\n            result.add(7 /* Interface */);\n        }\n        if (!suggestOptions.showModules) {\n            result.add(8 /* Module */);\n        }\n        if (!suggestOptions.showProperties) {\n            result.add(9 /* Property */);\n        }\n        if (!suggestOptions.showEvents) {\n            result.add(10 /* Event */);\n        }\n        if (!suggestOptions.showOperators) {\n            result.add(11 /* Operator */);\n        }\n        if (!suggestOptions.showUnits) {\n            result.add(12 /* Unit */);\n        }\n        if (!suggestOptions.showValues) {\n            result.add(13 /* Value */);\n        }\n        if (!suggestOptions.showConstants) {\n            result.add(14 /* Constant */);\n        }\n        if (!suggestOptions.showEnums) {\n            result.add(15 /* Enum */);\n        }\n        if (!suggestOptions.showEnumMembers) {\n            result.add(16 /* EnumMember */);\n        }\n        if (!suggestOptions.showKeywords) {\n            result.add(17 /* Keyword */);\n        }\n        if (!suggestOptions.showWords) {\n            result.add(18 /* Text */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(19 /* Color */);\n        }\n        if (!suggestOptions.showFiles) {\n            result.add(20 /* File */);\n        }\n        if (!suggestOptions.showReferences) {\n            result.add(21 /* Reference */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(22 /* Customcolor */);\n        }\n        if (!suggestOptions.showFolders) {\n            result.add(23 /* Folder */);\n        }\n        if (!suggestOptions.showTypeParameters) {\n            result.add(24 /* TypeParameter */);\n        }\n        if (!suggestOptions.showSnippets) {\n            result.add(27 /* Snippet */);\n        }\n        if (!suggestOptions.showUsers) {\n            result.add(25 /* User */);\n        }\n        if (!suggestOptions.showIssues) {\n            result.add(26 /* Issue */);\n        }\n        return { itemKind: result, showDeprecated: suggestOptions.showDeprecated };\n    }\n    _onNewContext(ctx) {\n        if (!this._context) {\n            // happens when 24x7 IntelliSense is enabled and still in its delay\n            return;\n        }\n        if (ctx.lineNumber !== this._context.lineNumber) {\n            // e.g. happens when pressing Enter while IntelliSense is computed\n            this.cancel();\n            return;\n        }\n        if (getLeadingWhitespace(ctx.leadingLineContent) !== getLeadingWhitespace(this._context.leadingLineContent)) {\n            // cancel IntelliSense when line start changes\n            // happens when the current word gets outdented\n            this.cancel();\n            return;\n        }\n        if (ctx.column < this._context.column) {\n            // typed -> moved cursor LEFT -> retrigger if still on a word\n            if (ctx.leadingWord.word) {\n                this.trigger({ auto: this._context.auto, shy: false }, true);\n            }\n            else {\n                this.cancel();\n            }\n            return;\n        }\n        if (!this._completionModel) {\n            // happens when IntelliSense is not yet computed\n            return;\n        }\n        if (ctx.leadingWord.word.length !== 0 && ctx.leadingWord.startColumn > this._context.leadingWord.startColumn) {\n            // started a new word while IntelliSense shows -> retrigger\n            // Select those providers have not contributed to this completion model and re-trigger completions for\n            // them. Also adopt the existing items and merge them into the new completion model\n            const inactiveProvider = new Set(this._languageFeaturesService.completionProvider.all(this._editor.getModel()));\n            for (let provider of this._completionModel.allProvider) {\n                inactiveProvider.delete(provider);\n            }\n            const items = this._completionModel.adopt(new Set());\n            this.trigger({ auto: this._context.auto, shy: false }, true, inactiveProvider, { items, clipboardText: this._completionModel.clipboardText });\n            return;\n        }\n        if (ctx.column > this._context.column && this._completionModel.incomplete.size > 0 && ctx.leadingWord.word.length !== 0) {\n            // typed -> moved cursor RIGHT & incomple model & still on a word -> retrigger\n            const { incomplete } = this._completionModel;\n            const items = this._completionModel.adopt(incomplete);\n            this.trigger({ auto: this._state === 2 /* Auto */, shy: false, triggerKind: 2 /* TriggerForIncompleteCompletions */ }, true, incomplete, { items, clipboardText: this._completionModel.clipboardText });\n        }\n        else {\n            // typed -> moved cursor RIGHT -> update UI\n            let oldLineContext = this._completionModel.lineContext;\n            let isFrozen = false;\n            this._completionModel.lineContext = {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            };\n            if (this._completionModel.items.length === 0) {\n                if (LineContext.shouldAutoTrigger(this._editor) && this._context.leadingWord.endColumn < ctx.leadingWord.startColumn) {\n                    // retrigger when heading into a new word\n                    this.trigger({ auto: this._context.auto, shy: false }, true);\n                    return;\n                }\n                if (!this._context.auto) {\n                    // freeze when IntelliSense was manually requested\n                    this._completionModel.lineContext = oldLineContext;\n                    isFrozen = this._completionModel.items.length > 0;\n                    if (isFrozen && ctx.leadingWord.word.length === 0) {\n                        // there were results before but now there aren't\n                        // and also we are not on a word anymore -> cancel\n                        this.cancel();\n                        return;\n                    }\n                }\n                else {\n                    // nothing left\n                    this.cancel();\n                    return;\n                }\n            }\n            this._onDidSuggest.fire({\n                completionModel: this._completionModel,\n                auto: this._context.auto,\n                shy: this._context.shy,\n                isFrozen,\n            });\n        }\n    }\n};\nSuggestModel = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IClipboardService),\n    __param(3, ITelemetryService),\n    __param(4, ILogService),\n    __param(5, IContextKeyService),\n    __param(6, IConfigurationService),\n    __param(7, ILanguageFeaturesService)\n], SuggestModel);\nexport { SuggestModel };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { binarySearch, isFalsyOrEmpty } from '../../../../base/common/arrays.js';\nimport { Range } from '../../../common/core/range.js';\nimport { BracketSelectionRangeProvider } from '../../smartSelect/browser/bracketSelections.js';\nexport class WordDistance {\n    static create(service, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.getOption(106 /* suggest */).localityBonus) {\n                return WordDistance.None;\n            }\n            if (!editor.hasModel()) {\n                return WordDistance.None;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!service.canComputeWordRanges(model.uri)) {\n                return WordDistance.None;\n            }\n            const [ranges] = yield new BracketSelectionRangeProvider().provideSelectionRanges(model, [position]);\n            if (ranges.length === 0) {\n                return WordDistance.None;\n            }\n            const wordRanges = yield service.computeWordRanges(model.uri, ranges[0].range);\n            if (!wordRanges) {\n                return WordDistance.None;\n            }\n            // remove current word\n            const wordUntilPos = model.getWordUntilPosition(position);\n            delete wordRanges[wordUntilPos.word];\n            return new class extends WordDistance {\n                distance(anchor, item) {\n                    if (!position.equals(editor.getPosition())) {\n                        return 0;\n                    }\n                    if (item.kind === 17 /* Keyword */) {\n                        return 2 << 20;\n                    }\n                    let word = typeof item.label === 'string' ? item.label : item.label.label;\n                    let wordLines = wordRanges[word];\n                    if (isFalsyOrEmpty(wordLines)) {\n                        return 2 << 20;\n                    }\n                    let idx = binarySearch(wordLines, Range.fromPositions(anchor), Range.compareRangesUsingStarts);\n                    let bestWordRange = idx >= 0 ? wordLines[idx] : wordLines[Math.max(0, ~idx - 1)];\n                    let blockDistance = ranges.length;\n                    for (const range of ranges) {\n                        if (!Range.containsRange(range.range, bestWordRange)) {\n                            break;\n                        }\n                        blockDistance -= 1;\n                    }\n                    return blockDistance;\n                }\n            };\n        });\n    }\n}\nWordDistance.None = new class extends WordDistance {\n    distance() { return 0; }\n};\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nexport class BracketSelectionRangeProvider {\n    provideSelectionRanges(model, positions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = [];\n            for (const position of positions) {\n                const bucket = [];\n                result.push(bucket);\n                const ranges = new Map();\n                yield new Promise(resolve => BracketSelectionRangeProvider._bracketsRightYield(resolve, 0, model, position, ranges));\n                yield new Promise(resolve => BracketSelectionRangeProvider._bracketsLeftYield(resolve, 0, model, position, ranges, bucket));\n            }\n            return result;\n        });\n    }\n    static _bracketsRightYield(resolve, round, model, pos, ranges) {\n        const counts = new Map();\n        const t1 = Date.now();\n        while (true) {\n            if (round >= BracketSelectionRangeProvider._maxRounds) {\n                resolve();\n                break;\n            }\n            if (!pos) {\n                resolve();\n                break;\n            }\n            let bracket = model.bracketPairs.findNextBracket(pos);\n            if (!bracket) {\n                resolve();\n                break;\n            }\n            let d = Date.now() - t1;\n            if (d > BracketSelectionRangeProvider._maxDuration) {\n                setTimeout(() => BracketSelectionRangeProvider._bracketsRightYield(resolve, round + 1, model, pos, ranges));\n                break;\n            }\n            const key = bracket.close[0];\n            if (bracket.isOpen) {\n                // wait for closing\n                let val = counts.has(key) ? counts.get(key) : 0;\n                counts.set(key, val + 1);\n            }\n            else {\n                // process closing\n                let val = counts.has(key) ? counts.get(key) : 0;\n                val -= 1;\n                counts.set(key, Math.max(0, val));\n                if (val < 0) {\n                    let list = ranges.get(key);\n                    if (!list) {\n                        list = new LinkedList();\n                        ranges.set(key, list);\n                    }\n                    list.push(bracket.range);\n                }\n            }\n            pos = bracket.range.getEndPosition();\n        }\n    }\n    static _bracketsLeftYield(resolve, round, model, pos, ranges, bucket) {\n        const counts = new Map();\n        const t1 = Date.now();\n        while (true) {\n            if (round >= BracketSelectionRangeProvider._maxRounds && ranges.size === 0) {\n                resolve();\n                break;\n            }\n            if (!pos) {\n                resolve();\n                break;\n            }\n            let bracket = model.bracketPairs.findPrevBracket(pos);\n            if (!bracket) {\n                resolve();\n                break;\n            }\n            let d = Date.now() - t1;\n            if (d > BracketSelectionRangeProvider._maxDuration) {\n                setTimeout(() => BracketSelectionRangeProvider._bracketsLeftYield(resolve, round + 1, model, pos, ranges, bucket));\n                break;\n            }\n            const key = bracket.close[0];\n            if (!bracket.isOpen) {\n                // wait for opening\n                let val = counts.has(key) ? counts.get(key) : 0;\n                counts.set(key, val + 1);\n            }\n            else {\n                // opening\n                let val = counts.has(key) ? counts.get(key) : 0;\n                val -= 1;\n                counts.set(key, Math.max(0, val));\n                if (val < 0) {\n                    let list = ranges.get(key);\n                    if (list) {\n                        let closing = list.shift();\n                        if (list.size === 0) {\n                            ranges.delete(key);\n                        }\n                        const innerBracket = Range.fromPositions(bracket.range.getEndPosition(), closing.getStartPosition());\n                        const outerBracket = Range.fromPositions(bracket.range.getStartPosition(), closing.getEndPosition());\n                        bucket.push({ range: innerBracket });\n                        bucket.push({ range: outerBracket });\n                        BracketSelectionRangeProvider._addBracketLeading(model, outerBracket, bucket);\n                    }\n                }\n            }\n            pos = bracket.range.getStartPosition();\n        }\n    }\n    static _addBracketLeading(model, bracket, bucket) {\n        if (bracket.startLineNumber === bracket.endLineNumber) {\n            return;\n        }\n        // xxxxxxxx {\n        //\n        // }\n        const startLine = bracket.startLineNumber;\n        const column = model.getLineFirstNonWhitespaceColumn(startLine);\n        if (column !== 0 && column !== bracket.startColumn) {\n            bucket.push({ range: Range.fromPositions(new Position(startLine, column), bracket.getEndPosition()) });\n            bucket.push({ range: Range.fromPositions(new Position(startLine, 1), bracket.getEndPosition()) });\n        }\n        // xxxxxxxx\n        // {\n        //\n        // }\n        const aboveLine = startLine - 1;\n        if (aboveLine > 0) {\n            const column = model.getLineFirstNonWhitespaceColumn(aboveLine);\n            if (column === bracket.startColumn && column !== model.getLineLastNonWhitespaceColumn(aboveLine)) {\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, column), bracket.getEndPosition()) });\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, 1), bracket.getEndPosition()) });\n            }\n        }\n    }\n}\nBracketSelectionRangeProvider._maxDuration = 30;\nBracketSelectionRangeProvider._maxRounds = 2;\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { quickSelect } from '../../../../base/common/arrays.js';\nimport { anyScore, fuzzyScore, FuzzyScore, fuzzyScoreGracefulAggressive } from '../../../../base/common/filters.js';\nimport { compareIgnoreCase } from '../../../../base/common/strings.js';\nexport class LineContext {\n    constructor(leadingLineContent, characterCountDelta) {\n        this.leadingLineContent = leadingLineContent;\n        this.characterCountDelta = characterCountDelta;\n    }\n}\n/**\n * Sorted, filtered completion view model\n * */\nexport class CompletionModel {\n    constructor(items, column, lineContext, wordDistance, options, snippetSuggestions, clipboardText) {\n        this.clipboardText = clipboardText;\n        this._snippetCompareFn = CompletionModel._compareCompletionItems;\n        this._items = items;\n        this._column = column;\n        this._wordDistance = wordDistance;\n        this._options = options;\n        this._refilterKind = 1 /* All */;\n        this._lineContext = lineContext;\n        if (snippetSuggestions === 'top') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsUp;\n        }\n        else if (snippetSuggestions === 'bottom') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsDown;\n        }\n    }\n    get lineContext() {\n        return this._lineContext;\n    }\n    set lineContext(value) {\n        if (this._lineContext.leadingLineContent !== value.leadingLineContent\n            || this._lineContext.characterCountDelta !== value.characterCountDelta) {\n            this._refilterKind = this._lineContext.characterCountDelta < value.characterCountDelta && this._filteredItems ? 2 /* Incr */ : 1 /* All */;\n            this._lineContext = value;\n        }\n    }\n    get items() {\n        this._ensureCachedState();\n        return this._filteredItems;\n    }\n    get allProvider() {\n        this._ensureCachedState();\n        return this._providerInfo.keys();\n    }\n    get incomplete() {\n        this._ensureCachedState();\n        const result = new Set();\n        for (let [provider, incomplete] of this._providerInfo) {\n            if (incomplete) {\n                result.add(provider);\n            }\n        }\n        return result;\n    }\n    adopt(except) {\n        let res = [];\n        for (let i = 0; i < this._items.length;) {\n            if (!except.has(this._items[i].provider)) {\n                res.push(this._items[i]);\n                // unordered removed\n                this._items[i] = this._items[this._items.length - 1];\n                this._items.pop();\n            }\n            else {\n                // continue with next item\n                i++;\n            }\n        }\n        this._refilterKind = 1 /* All */;\n        return res;\n    }\n    get stats() {\n        this._ensureCachedState();\n        return this._stats;\n    }\n    _ensureCachedState() {\n        if (this._refilterKind !== 0 /* Nothing */) {\n            this._createCachedState();\n        }\n    }\n    _createCachedState() {\n        this._providerInfo = new Map();\n        const labelLengths = [];\n        const { leadingLineContent, characterCountDelta } = this._lineContext;\n        let word = '';\n        let wordLow = '';\n        // incrementally filter less\n        const source = this._refilterKind === 1 /* All */ ? this._items : this._filteredItems;\n        const target = [];\n        // picks a score function based on the number of\n        // items that we have to score/filter and based on the\n        // user-configuration\n        const scoreFn = (!this._options.filterGraceful || source.length > 2000) ? fuzzyScore : fuzzyScoreGracefulAggressive;\n        for (let i = 0; i < source.length; i++) {\n            const item = source[i];\n            if (item.isInvalid) {\n                continue; // SKIP invalid items\n            }\n            // collect all support, know if their result is incomplete\n            this._providerInfo.set(item.provider, Boolean(item.container.incomplete));\n            // 'word' is that remainder of the current line that we\n            // filter and score against. In theory each suggestion uses a\n            // different word, but in practice not - that's why we cache\n            const overwriteBefore = item.position.column - item.editStart.column;\n            const wordLen = overwriteBefore + characterCountDelta - (item.position.column - this._column);\n            if (word.length !== wordLen) {\n                word = wordLen === 0 ? '' : leadingLineContent.slice(-wordLen);\n                wordLow = word.toLowerCase();\n            }\n            // remember the word against which this item was\n            // scored\n            item.word = word;\n            if (wordLen === 0) {\n                // when there is nothing to score against, don't\n                // event try to do. Use a const rank and rely on\n                // the fallback-sort using the initial sort order.\n                // use a score of `-100` because that is out of the\n                // bound of values `fuzzyScore` will return\n                item.score = FuzzyScore.Default;\n            }\n            else {\n                // skip word characters that are whitespace until\n                // we have hit the replace range (overwriteBefore)\n                let wordPos = 0;\n                while (wordPos < overwriteBefore) {\n                    const ch = word.charCodeAt(wordPos);\n                    if (ch === 32 /* Space */ || ch === 9 /* Tab */) {\n                        wordPos += 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n                if (wordPos >= wordLen) {\n                    // the wordPos at which scoring starts is the whole word\n                    // and therefore the same rules as not having a word apply\n                    item.score = FuzzyScore.Default;\n                }\n                else if (typeof item.completion.filterText === 'string') {\n                    // when there is a `filterText` it must match the `word`.\n                    // if it matches we check with the label to compute highlights\n                    // and if that doesn't yield a result we have no highlights,\n                    // despite having the match\n                    let match = scoreFn(word, wordLow, wordPos, item.completion.filterText, item.filterTextLow, 0, false);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    if (compareIgnoreCase(item.completion.filterText, item.textLabel) === 0) {\n                        // filterText and label are actually the same -> use good highlights\n                        item.score = match;\n                    }\n                    else {\n                        // re-run the scorer on the label in the hope of a result BUT use the rank\n                        // of the filterText-match\n                        item.score = anyScore(word, wordLow, wordPos, item.textLabel, item.labelLow, 0);\n                        item.score[0] = match[0]; // use score from filterText\n                    }\n                }\n                else {\n                    // by default match `word` against the `label`\n                    let match = scoreFn(word, wordLow, wordPos, item.textLabel, item.labelLow, 0, false);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    item.score = match;\n                }\n            }\n            item.idx = i;\n            item.distance = this._wordDistance.distance(item.position, item.completion);\n            target.push(item);\n            // update stats\n            labelLengths.push(item.textLabel.length);\n        }\n        this._filteredItems = target.sort(this._snippetCompareFn);\n        this._refilterKind = 0 /* Nothing */;\n        this._stats = {\n            pLabelLen: labelLengths.length ?\n                quickSelect(labelLengths.length - .85, labelLengths, (a, b) => a - b)\n                : 0\n        };\n    }\n    static _compareCompletionItems(a, b) {\n        if (a.score[0] > b.score[0]) {\n            return -1;\n        }\n        else if (a.score[0] < b.score[0]) {\n            return 1;\n        }\n        else if (a.distance < b.distance) {\n            return -1;\n        }\n        else if (a.distance > b.distance) {\n            return 1;\n        }\n        else if (a.idx < b.idx) {\n            return -1;\n        }\n        else if (a.idx > b.idx) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    static _compareCompletionItemsSnippetsDown(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* Snippet */) {\n                return 1;\n            }\n            else if (b.completion.kind === 27 /* Snippet */) {\n                return -1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n    static _compareCompletionItemsSnippetsUp(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* Snippet */) {\n                return -1;\n            }\n            else if (b.completion.kind === 27 /* Snippet */) {\n                return 1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nexport class OvertypingCapturer {\n    constructor(editor, suggestModel) {\n        this._disposables = new DisposableStore();\n        this._lastOvertyped = [];\n        this._empty = true;\n        this._disposables.add(editor.onWillType(() => {\n            if (!this._empty) {\n                return;\n            }\n            if (!editor.hasModel()) {\n                return;\n            }\n            const selections = editor.getSelections();\n            const selectionsLength = selections.length;\n            // Check if it will overtype any selections\n            let willOvertype = false;\n            for (let i = 0; i < selectionsLength; i++) {\n                if (!selections[i].isEmpty()) {\n                    willOvertype = true;\n                    break;\n                }\n            }\n            if (!willOvertype) {\n                return;\n            }\n            this._lastOvertyped = [];\n            const model = editor.getModel();\n            for (let i = 0; i < selectionsLength; i++) {\n                const selection = selections[i];\n                // Check for overtyping capturer restrictions\n                if (model.getValueLengthInRange(selection) > OvertypingCapturer._maxSelectionLength) {\n                    return;\n                }\n                this._lastOvertyped[i] = { value: model.getValueInRange(selection), multiline: selection.startLineNumber !== selection.endLineNumber };\n            }\n            this._empty = false;\n        }));\n        this._disposables.add(suggestModel.onDidCancel(e => {\n            if (!this._empty && !e.retrigger) {\n                this._empty = true;\n            }\n        }));\n    }\n    getLastOvertypedInfo(idx) {\n        if (!this._empty && idx >= 0 && idx < this._lastOvertyped.length) {\n            return this._lastOvertyped[idx];\n        }\n        return undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\nOvertypingCapturer._maxSelectionLength = 51200;\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport { createCancelablePromise, disposableTimeout, TimeoutTimer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './media/suggest.css';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { SuggestWidgetStatus } from './suggestWidgetStatus.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { activeContrastBorder, editorForeground, editorWidgetBackground, editorWidgetBorder, listFocusHighlightForeground, listHighlightForeground, quickInputListFocusBackground, quickInputListFocusForeground, quickInputListFocusIconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { attachListStyler } from '../../../../platform/theme/common/styler.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ResizableHTMLElement } from './resizable.js';\nimport { Context as SuggestContext } from './suggest.js';\nimport { canExpandCompletionItem, SuggestDetailsOverlay, SuggestDetailsWidget } from './suggestWidgetDetails.js';\nimport { getAriaId, ItemRenderer } from './suggestWidgetRenderer.js';\n/**\n * Suggest widget colors\n */\nexport const editorSuggestWidgetBackground = registerColor('editorSuggestWidget.background', { dark: editorWidgetBackground, light: editorWidgetBackground, hc: editorWidgetBackground }, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\nexport const editorSuggestWidgetBorder = registerColor('editorSuggestWidget.border', { dark: editorWidgetBorder, light: editorWidgetBorder, hc: editorWidgetBorder }, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\nexport const editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', { dark: editorForeground, light: editorForeground, hc: editorForeground }, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\nexport const editorSuggestWidgetSelectedForeground = registerColor('editorSuggestWidget.selectedForeground', { dark: quickInputListFocusForeground, light: quickInputListFocusForeground, hc: quickInputListFocusForeground }, nls.localize('editorSuggestWidgetSelectedForeground', 'Foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedIconForeground = registerColor('editorSuggestWidget.selectedIconForeground', { dark: quickInputListFocusIconForeground, light: quickInputListFocusIconForeground, hc: quickInputListFocusIconForeground }, nls.localize('editorSuggestWidgetSelectedIconForeground', 'Icon foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', { dark: quickInputListFocusBackground, light: quickInputListFocusBackground, hc: quickInputListFocusBackground }, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetHighlightForeground = registerColor('editorSuggestWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hc: listHighlightForeground }, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\nexport const editorSuggestWidgetHighlightFocusForeground = registerColor('editorSuggestWidget.focusHighlightForeground', { dark: listFocusHighlightForeground, light: listFocusHighlightForeground, hc: listFocusHighlightForeground }, nls.localize('editorSuggestWidgetFocusHighlightForeground', 'Color of the match highlights in the suggest widget when an item is focused.'));\nexport const editorSuggestWidgetStatusForeground = registerColor('editorSuggestWidgetStatus.foreground', { dark: transparent(editorSuggestWidgetForeground, .5), light: transparent(editorSuggestWidgetForeground, .5), hc: transparent(editorSuggestWidgetForeground, .5) }, nls.localize('editorSuggestWidgetStatusForeground', 'Foreground color of the suggest widget status.'));\nclass PersistedWidgetSize {\n    constructor(_service, editor) {\n        this._service = _service;\n        this._key = `suggestWidget.size/${editor.getEditorType()}/${editor instanceof EmbeddedCodeEditorWidget}`;\n    }\n    restore() {\n        var _a;\n        const raw = (_a = this._service.get(this._key, 0 /* GLOBAL */)) !== null && _a !== void 0 ? _a : '';\n        try {\n            const obj = JSON.parse(raw);\n            if (dom.Dimension.is(obj)) {\n                return dom.Dimension.lift(obj);\n            }\n        }\n        catch (_b) {\n            // ignore\n        }\n        return undefined;\n    }\n    store(size) {\n        this._service.store(this._key, JSON.stringify(size), 0 /* GLOBAL */, 1 /* MACHINE */);\n    }\n    reset() {\n        this._service.remove(this._key, 0 /* GLOBAL */);\n    }\n}\nlet SuggestWidget = class SuggestWidget {\n    constructor(editor, _storageService, _contextKeyService, _themeService, instantiationService) {\n        this.editor = editor;\n        this._storageService = _storageService;\n        this._state = 0 /* Hidden */;\n        this._isAuto = false;\n        this._ignoreFocusEvents = false;\n        this._forceRenderingAbove = false;\n        this._explainMode = false;\n        this._showTimeout = new TimeoutTimer();\n        this._disposables = new DisposableStore();\n        this._onDidSelect = new Emitter();\n        this._onDidFocus = new Emitter();\n        this._onDidHide = new Emitter();\n        this._onDidShow = new Emitter();\n        this.onDidSelect = this._onDidSelect.event;\n        this.onDidFocus = this._onDidFocus.event;\n        this.onDidHide = this._onDidHide.event;\n        this.onDidShow = this._onDidShow.event;\n        this._onDetailsKeydown = new Emitter();\n        this.onDetailsKeyDown = this._onDetailsKeydown.event;\n        this.element = new ResizableHTMLElement();\n        this.element.domNode.classList.add('editor-widget', 'suggest-widget');\n        this._contentWidget = new SuggestContentWidget(this, editor);\n        this._persistedSize = new PersistedWidgetSize(_storageService, editor);\n        class ResizeState {\n            constructor(persistedSize, currentSize, persistHeight = false, persistWidth = false) {\n                this.persistedSize = persistedSize;\n                this.currentSize = currentSize;\n                this.persistHeight = persistHeight;\n                this.persistWidth = persistWidth;\n            }\n        }\n        let state;\n        this._disposables.add(this.element.onDidWillResize(() => {\n            this._contentWidget.lockPreference();\n            state = new ResizeState(this._persistedSize.restore(), this.element.size);\n        }));\n        this._disposables.add(this.element.onDidResize(e => {\n            var _a, _b, _c, _d;\n            this._resize(e.dimension.width, e.dimension.height);\n            if (state) {\n                state.persistHeight = state.persistHeight || !!e.north || !!e.south;\n                state.persistWidth = state.persistWidth || !!e.east || !!e.west;\n            }\n            if (!e.done) {\n                return;\n            }\n            if (state) {\n                // only store width or height value that have changed and also\n                // only store changes that are above a certain threshold\n                const { itemHeight, defaultSize } = this.getLayoutInfo();\n                const threshold = Math.round(itemHeight / 2);\n                let { width, height } = this.element.size;\n                if (!state.persistHeight || Math.abs(state.currentSize.height - height) <= threshold) {\n                    height = (_b = (_a = state.persistedSize) === null || _a === void 0 ? void 0 : _a.height) !== null && _b !== void 0 ? _b : defaultSize.height;\n                }\n                if (!state.persistWidth || Math.abs(state.currentSize.width - width) <= threshold) {\n                    width = (_d = (_c = state.persistedSize) === null || _c === void 0 ? void 0 : _c.width) !== null && _d !== void 0 ? _d : defaultSize.width;\n                }\n                this._persistedSize.store(new dom.Dimension(width, height));\n            }\n            // reset working state\n            this._contentWidget.unlockPreference();\n            state = undefined;\n        }));\n        this._messageElement = dom.append(this.element.domNode, dom.$('.message'));\n        this._listElement = dom.append(this.element.domNode, dom.$('.tree'));\n        const details = instantiationService.createInstance(SuggestDetailsWidget, this.editor);\n        details.onDidClose(this.toggleDetails, this, this._disposables);\n        this._details = new SuggestDetailsOverlay(details, this.editor);\n        const applyIconStyle = () => this.element.domNode.classList.toggle('no-icons', !this.editor.getOption(106 /* suggest */).showIcons);\n        applyIconStyle();\n        const renderer = instantiationService.createInstance(ItemRenderer, this.editor);\n        this._disposables.add(renderer);\n        this._disposables.add(renderer.onDidToggleDetails(() => this.toggleDetails()));\n        this._list = new List('SuggestWidget', this._listElement, {\n            getHeight: (_element) => this.getLayoutInfo().itemHeight,\n            getTemplateId: (_element) => 'suggestion'\n        }, [renderer], {\n            alwaysConsumeMouseWheel: true,\n            useShadows: false,\n            mouseSupport: false,\n            accessibilityProvider: {\n                getRole: () => 'option',\n                getWidgetAriaLabel: () => nls.localize('suggest', \"Suggest\"),\n                getWidgetRole: () => 'listbox',\n                getAriaLabel: (item) => {\n                    let label = item.textLabel;\n                    if (typeof item.completion.label !== 'string') {\n                        const { detail, description } = item.completion.label;\n                        if (detail && description) {\n                            label = nls.localize('label.full', '{0}{1}, {2}', label, detail, description);\n                        }\n                        else if (detail) {\n                            label = nls.localize('label.detail', '{0}{1}', label, detail);\n                        }\n                        else if (description) {\n                            label = nls.localize('label.desc', '{0}, {1}', label, description);\n                        }\n                    }\n                    if (!item.isResolved || !this._isDetailsVisible()) {\n                        return label;\n                    }\n                    const { documentation, detail } = item.completion;\n                    const docs = strings.format('{0}{1}', detail || '', documentation ? (typeof documentation === 'string' ? documentation : documentation.value) : '');\n                    return nls.localize('ariaCurrenttSuggestionReadDetails', \"{0}, docs: {1}\", label, docs);\n                },\n            }\n        });\n        this._status = instantiationService.createInstance(SuggestWidgetStatus, this.element.domNode);\n        const applyStatusBarStyle = () => this.element.domNode.classList.toggle('with-status-bar', this.editor.getOption(106 /* suggest */).showStatusBar);\n        applyStatusBarStyle();\n        this._disposables.add(attachListStyler(this._list, _themeService, {\n            listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\n            listInactiveFocusOutline: activeContrastBorder\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(t => this._onThemeChange(t)));\n        this._onThemeChange(_themeService.getColorTheme());\n        this._disposables.add(this._list.onMouseDown(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onTap(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onDidChangeSelection(e => this._onListSelection(e)));\n        this._disposables.add(this._list.onDidChangeFocus(e => this._onListFocus(e)));\n        this._disposables.add(this.editor.onDidChangeCursorSelection(() => this._onCursorSelectionChanged()));\n        this._disposables.add(this.editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(106 /* suggest */)) {\n                applyStatusBarStyle();\n                applyIconStyle();\n            }\n        }));\n        this._ctxSuggestWidgetVisible = SuggestContext.Visible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetDetailsVisible = SuggestContext.DetailsVisible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(_contextKeyService);\n        this._disposables.add(dom.addStandardDisposableListener(this._details.widget.domNode, 'keydown', e => {\n            this._onDetailsKeydown.fire(e);\n        }));\n        this._disposables.add(this.editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n    }\n    dispose() {\n        var _a;\n        this._details.widget.dispose();\n        this._details.dispose();\n        this._list.dispose();\n        this._status.dispose();\n        this._disposables.dispose();\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._showTimeout.dispose();\n        this._contentWidget.dispose();\n        this.element.dispose();\n    }\n    _onEditorMouseDown(mouseEvent) {\n        if (this._details.widget.domNode.contains(mouseEvent.target.element)) {\n            // Clicking inside details\n            this._details.widget.domNode.focus();\n        }\n        else {\n            // Clicking outside details and inside suggest\n            if (this.element.domNode.contains(mouseEvent.target.element)) {\n                this.editor.focus();\n            }\n        }\n    }\n    _onCursorSelectionChanged() {\n        if (this._state !== 0 /* Hidden */) {\n            this._contentWidget.layout();\n        }\n    }\n    _onListMouseDownOrTap(e) {\n        if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\n            return;\n        }\n        // prevent stealing browser focus from the editor\n        e.browserEvent.preventDefault();\n        e.browserEvent.stopPropagation();\n        this._select(e.element, e.index);\n    }\n    _onListSelection(e) {\n        if (e.elements.length) {\n            this._select(e.elements[0], e.indexes[0]);\n        }\n    }\n    _select(item, index) {\n        const completionModel = this._completionModel;\n        if (completionModel) {\n            this._onDidSelect.fire({ item, index, model: completionModel });\n            this.editor.focus();\n        }\n    }\n    _onThemeChange(theme) {\n        this._details.widget.borderWidth = theme.type === 'hc' ? 2 : 1;\n    }\n    _onListFocus(e) {\n        var _a;\n        if (this._ignoreFocusEvents) {\n            return;\n        }\n        if (!e.elements.length) {\n            if (this._currentSuggestionDetails) {\n                this._currentSuggestionDetails.cancel();\n                this._currentSuggestionDetails = undefined;\n                this._focusedItem = undefined;\n            }\n            this.editor.setAriaOptions({ activeDescendant: undefined });\n            return;\n        }\n        if (!this._completionModel) {\n            return;\n        }\n        const item = e.elements[0];\n        const index = e.indexes[0];\n        if (item !== this._focusedItem) {\n            (_a = this._currentSuggestionDetails) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._currentSuggestionDetails = undefined;\n            this._focusedItem = item;\n            this._list.reveal(index);\n            this._currentSuggestionDetails = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                const loading = disposableTimeout(() => {\n                    if (this._isDetailsVisible()) {\n                        this.showDetails(true);\n                    }\n                }, 250);\n                const sub = token.onCancellationRequested(() => loading.dispose());\n                const result = yield item.resolve(token);\n                loading.dispose();\n                sub.dispose();\n                return result;\n            }));\n            this._currentSuggestionDetails.then(() => {\n                if (index >= this._list.length || item !== this._list.element(index)) {\n                    return;\n                }\n                // item can have extra information, so re-render\n                this._ignoreFocusEvents = true;\n                this._list.splice(index, 1, [item]);\n                this._list.setFocus([index]);\n                this._ignoreFocusEvents = false;\n                if (this._isDetailsVisible()) {\n                    this.showDetails(false);\n                }\n                else {\n                    this.element.domNode.classList.remove('docs-side');\n                }\n                this.editor.setAriaOptions({ activeDescendant: getAriaId(index) });\n            }).catch(onUnexpectedError);\n        }\n        // emit an event\n        this._onDidFocus.fire({ item, index, model: this._completionModel });\n    }\n    _setState(state) {\n        if (this._state === state) {\n            return;\n        }\n        this._state = state;\n        this.element.domNode.classList.toggle('frozen', state === 4 /* Frozen */);\n        this.element.domNode.classList.remove('message');\n        switch (state) {\n            case 0 /* Hidden */:\n                dom.hide(this._messageElement, this._listElement, this._status.element);\n                this._details.hide(true);\n                this._status.hide();\n                this._contentWidget.hide();\n                this._ctxSuggestWidgetVisible.reset();\n                this._ctxSuggestWidgetMultipleSuggestions.reset();\n                this._showTimeout.cancel();\n                this.element.domNode.classList.remove('visible');\n                this._list.splice(0, this._list.length);\n                this._focusedItem = undefined;\n                this._cappedHeight = undefined;\n                this._explainMode = false;\n                break;\n            case 1 /* Loading */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.LOADING_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 2 /* Empty */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 3 /* Open */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 4 /* Frozen */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 5 /* Details */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._details.show();\n                this._show();\n                break;\n        }\n    }\n    _show() {\n        this._status.show();\n        this._contentWidget.show();\n        this._layout(this._persistedSize.restore());\n        this._ctxSuggestWidgetVisible.set(true);\n        this._showTimeout.cancelAndSet(() => {\n            this.element.domNode.classList.add('visible');\n            this._onDidShow.fire(this);\n        }, 100);\n    }\n    showTriggered(auto, delay) {\n        if (this._state !== 0 /* Hidden */) {\n            return;\n        }\n        this._contentWidget.setPosition(this.editor.getPosition());\n        this._isAuto = !!auto;\n        if (!this._isAuto) {\n            this._loadingTimeout = disposableTimeout(() => this._setState(1 /* Loading */), delay);\n        }\n    }\n    showSuggestions(completionModel, selectionIndex, isFrozen, isAuto) {\n        var _a, _b;\n        this._contentWidget.setPosition(this.editor.getPosition());\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentSuggestionDetails) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._currentSuggestionDetails = undefined;\n        if (this._completionModel !== completionModel) {\n            this._completionModel = completionModel;\n        }\n        if (isFrozen && this._state !== 2 /* Empty */ && this._state !== 0 /* Hidden */) {\n            this._setState(4 /* Frozen */);\n            return;\n        }\n        const visibleCount = this._completionModel.items.length;\n        const isEmpty = visibleCount === 0;\n        this._ctxSuggestWidgetMultipleSuggestions.set(visibleCount > 1);\n        if (isEmpty) {\n            this._setState(isAuto ? 0 /* Hidden */ : 2 /* Empty */);\n            this._completionModel = undefined;\n            return;\n        }\n        this._focusedItem = undefined;\n        this._list.splice(0, this._list.length, this._completionModel.items);\n        this._setState(isFrozen ? 4 /* Frozen */ : 3 /* Open */);\n        this._list.reveal(selectionIndex, 0);\n        this._list.setFocus([selectionIndex]);\n        this._layout(this.element.size);\n        // Reset focus border\n        this._details.widget.domNode.classList.remove('focused');\n    }\n    selectNextPage() {\n        switch (this._state) {\n            case 0 /* Hidden */:\n                return false;\n            case 5 /* Details */:\n                this._details.widget.pageDown();\n                return true;\n            case 1 /* Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNextPage();\n                return true;\n        }\n    }\n    selectNext() {\n        switch (this._state) {\n            case 0 /* Hidden */:\n                return false;\n            case 1 /* Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNext(1, true);\n                return true;\n        }\n    }\n    selectLast() {\n        switch (this._state) {\n            case 0 /* Hidden */:\n                return false;\n            case 5 /* Details */:\n                this._details.widget.scrollBottom();\n                return true;\n            case 1 /* Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusLast();\n                return true;\n        }\n    }\n    selectPreviousPage() {\n        switch (this._state) {\n            case 0 /* Hidden */:\n                return false;\n            case 5 /* Details */:\n                this._details.widget.pageUp();\n                return true;\n            case 1 /* Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPreviousPage();\n                return true;\n        }\n    }\n    selectPrevious() {\n        switch (this._state) {\n            case 0 /* Hidden */:\n                return false;\n            case 1 /* Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPrevious(1, true);\n                return false;\n        }\n    }\n    selectFirst() {\n        switch (this._state) {\n            case 0 /* Hidden */:\n                return false;\n            case 5 /* Details */:\n                this._details.widget.scrollTop();\n                return true;\n            case 1 /* Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusFirst();\n                return true;\n        }\n    }\n    getFocusedItem() {\n        if (this._state !== 0 /* Hidden */\n            && this._state !== 2 /* Empty */\n            && this._state !== 1 /* Loading */\n            && this._completionModel) {\n            return {\n                item: this._list.getFocusedElements()[0],\n                index: this._list.getFocus()[0],\n                model: this._completionModel\n            };\n        }\n        return undefined;\n    }\n    toggleDetailsFocus() {\n        if (this._state === 5 /* Details */) {\n            this._setState(3 /* Open */);\n            this._details.widget.domNode.classList.remove('focused');\n        }\n        else if (this._state === 3 /* Open */ && this._isDetailsVisible()) {\n            this._setState(5 /* Details */);\n            this._details.widget.domNode.classList.add('focused');\n        }\n    }\n    toggleDetails() {\n        if (this._isDetailsVisible()) {\n            // hide details widget\n            this._ctxSuggestWidgetDetailsVisible.set(false);\n            this._setDetailsVisible(false);\n            this._details.hide();\n            this.element.domNode.classList.remove('shows-details');\n        }\n        else if ((canExpandCompletionItem(this._list.getFocusedElements()[0]) || this._explainMode) && (this._state === 3 /* Open */ || this._state === 5 /* Details */ || this._state === 4 /* Frozen */)) {\n            // show details widget (iff possible)\n            this._ctxSuggestWidgetDetailsVisible.set(true);\n            this._setDetailsVisible(true);\n            this.showDetails(false);\n        }\n    }\n    showDetails(loading) {\n        this._details.show();\n        if (loading) {\n            this._details.widget.renderLoading();\n        }\n        else {\n            this._details.widget.renderItem(this._list.getFocusedElements()[0], this._explainMode);\n        }\n        this._positionDetails();\n        this.editor.focus();\n        this.element.domNode.classList.add('shows-details');\n    }\n    toggleExplainMode() {\n        if (this._list.getFocusedElements()[0]) {\n            this._explainMode = !this._explainMode;\n            if (!this._isDetailsVisible()) {\n                this.toggleDetails();\n            }\n            else {\n                this.showDetails(false);\n            }\n        }\n    }\n    resetPersistedSize() {\n        this._persistedSize.reset();\n    }\n    hideWidget() {\n        var _a;\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._setState(0 /* Hidden */);\n        this._onDidHide.fire(this);\n        this.element.clearSashHoverState();\n        // ensure that a reasonable widget height is persisted so that\n        // accidential \"resize-to-single-items\" cases aren't happening\n        const dim = this._persistedSize.restore();\n        const minPersistedHeight = Math.ceil(this.getLayoutInfo().itemHeight * 4.3);\n        if (dim && dim.height < minPersistedHeight) {\n            this._persistedSize.store(dim.with(undefined, minPersistedHeight));\n        }\n    }\n    isFrozen() {\n        return this._state === 4 /* Frozen */;\n    }\n    _afterRender(position) {\n        if (position === null) {\n            if (this._isDetailsVisible()) {\n                this._details.hide(); //todo@jrieken soft-hide\n            }\n            return;\n        }\n        if (this._state === 2 /* Empty */ || this._state === 1 /* Loading */) {\n            // no special positioning when widget isn't showing list\n            return;\n        }\n        if (this._isDetailsVisible()) {\n            this._details.show();\n        }\n        this._positionDetails();\n    }\n    _layout(size) {\n        var _a, _b, _c;\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (!this.editor.getDomNode()) {\n            // happens when running tests\n            return;\n        }\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.getLayoutInfo();\n        if (!size) {\n            size = info.defaultSize;\n        }\n        let height = size.height;\n        let width = size.width;\n        // status bar\n        this._status.element.style.lineHeight = `${info.itemHeight}px`;\n        if (this._state === 2 /* Empty */ || this._state === 1 /* Loading */) {\n            // showing a message only\n            height = info.itemHeight + info.borderHeight;\n            width = info.defaultSize.width / 2;\n            this.element.enableSashes(false, false, false, false);\n            this.element.minSize = this.element.maxSize = new dom.Dimension(width, height);\n            this._contentWidget.setPreference(2 /* BELOW */);\n        }\n        else {\n            // showing items\n            // width math\n            const maxWidth = bodyBox.width - info.borderHeight - 2 * info.horizontalPadding;\n            if (width > maxWidth) {\n                width = maxWidth;\n            }\n            const preferredWidth = this._completionModel ? this._completionModel.stats.pLabelLen * info.typicalHalfwidthCharacterWidth : width;\n            // height math\n            const fullHeight = info.statusBarHeight + this._list.contentHeight + info.borderHeight;\n            const minHeight = info.itemHeight + info.statusBarHeight;\n            const editorBox = dom.getDomNodePagePosition(this.editor.getDomNode());\n            const cursorBox = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\n            const cursorBottom = editorBox.top + cursorBox.top + cursorBox.height;\n            const maxHeightBelow = Math.min(bodyBox.height - cursorBottom - info.verticalPadding, fullHeight);\n            const availableSpaceAbove = editorBox.top + cursorBox.top - info.verticalPadding;\n            const maxHeightAbove = Math.min(availableSpaceAbove, fullHeight);\n            let maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow) + info.borderHeight, fullHeight);\n            if (height === ((_a = this._cappedHeight) === null || _a === void 0 ? void 0 : _a.capped)) {\n                // Restore the old (wanted) height when the current\n                // height is capped to fit\n                height = this._cappedHeight.wanted;\n            }\n            if (height < minHeight) {\n                height = minHeight;\n            }\n            if (height > maxHeight) {\n                height = maxHeight;\n            }\n            const forceRenderingAboveRequiredSpace = 150;\n            if (height > maxHeightBelow || (this._forceRenderingAbove && availableSpaceAbove > forceRenderingAboveRequiredSpace)) {\n                this._contentWidget.setPreference(1 /* ABOVE */);\n                this.element.enableSashes(true, true, false, false);\n                maxHeight = maxHeightAbove;\n            }\n            else {\n                this._contentWidget.setPreference(2 /* BELOW */);\n                this.element.enableSashes(false, true, true, false);\n                maxHeight = maxHeightBelow;\n            }\n            this.element.preferredSize = new dom.Dimension(preferredWidth, info.defaultSize.height);\n            this.element.maxSize = new dom.Dimension(maxWidth, maxHeight);\n            this.element.minSize = new dom.Dimension(220, minHeight);\n            // Know when the height was capped to fit and remember\n            // the wanted height for later. This is required when going\n            // left to widen suggestions.\n            this._cappedHeight = height === fullHeight\n                ? { wanted: (_c = (_b = this._cappedHeight) === null || _b === void 0 ? void 0 : _b.wanted) !== null && _c !== void 0 ? _c : size.height, capped: height }\n                : undefined;\n        }\n        this._resize(width, height);\n    }\n    _resize(width, height) {\n        const { width: maxWidth, height: maxHeight } = this.element.maxSize;\n        width = Math.min(maxWidth, width);\n        height = Math.min(maxHeight, height);\n        const { statusBarHeight } = this.getLayoutInfo();\n        this._list.layout(height - statusBarHeight, width);\n        this._listElement.style.height = `${height - statusBarHeight}px`;\n        this.element.layout(height, width);\n        this._contentWidget.layout();\n        this._positionDetails();\n    }\n    _positionDetails() {\n        var _a;\n        if (this._isDetailsVisible()) {\n            this._details.placeAtAnchor(this.element.domNode, ((_a = this._contentWidget.getPosition()) === null || _a === void 0 ? void 0 : _a.preference[0]) === 2 /* BELOW */);\n        }\n    }\n    getLayoutInfo() {\n        const fontInfo = this.editor.getOption(44 /* fontInfo */);\n        const itemHeight = clamp(this.editor.getOption(108 /* suggestLineHeight */) || fontInfo.lineHeight, 8, 1000);\n        const statusBarHeight = !this.editor.getOption(106 /* suggest */).showStatusBar || this._state === 2 /* Empty */ || this._state === 1 /* Loading */ ? 0 : itemHeight;\n        const borderWidth = this._details.widget.borderWidth;\n        const borderHeight = 2 * borderWidth;\n        return {\n            itemHeight,\n            statusBarHeight,\n            borderWidth,\n            borderHeight,\n            typicalHalfwidthCharacterWidth: fontInfo.typicalHalfwidthCharacterWidth,\n            verticalPadding: 22,\n            horizontalPadding: 14,\n            defaultSize: new dom.Dimension(430, statusBarHeight + 12 * itemHeight + borderHeight)\n        };\n    }\n    _isDetailsVisible() {\n        return this._storageService.getBoolean('expandSuggestionDocs', 0 /* GLOBAL */, false);\n    }\n    _setDetailsVisible(value) {\n        this._storageService.store('expandSuggestionDocs', value, 0 /* GLOBAL */, 0 /* USER */);\n    }\n    forceRenderingAbove() {\n        if (!this._forceRenderingAbove) {\n            this._forceRenderingAbove = true;\n            this._layout(this._persistedSize.restore());\n        }\n    }\n    stopForceRenderingAbove() {\n        this._forceRenderingAbove = false;\n    }\n};\nSuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\nSuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\nSuggestWidget = __decorate([\n    __param(1, IStorageService),\n    __param(2, IContextKeyService),\n    __param(3, IThemeService),\n    __param(4, IInstantiationService)\n], SuggestWidget);\nexport { SuggestWidget };\nexport class SuggestContentWidget {\n    constructor(_widget, _editor) {\n        this._widget = _widget;\n        this._editor = _editor;\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._preferenceLocked = false;\n        this._added = false;\n        this._hidden = false;\n    }\n    dispose() {\n        if (this._added) {\n            this._added = false;\n            this._editor.removeContentWidget(this);\n        }\n    }\n    getId() {\n        return 'editor.widget.suggestWidget';\n    }\n    getDomNode() {\n        return this._widget.element.domNode;\n    }\n    show() {\n        this._hidden = false;\n        if (!this._added) {\n            this._added = true;\n            this._editor.addContentWidget(this);\n        }\n    }\n    hide() {\n        if (!this._hidden) {\n            this._hidden = true;\n            this.layout();\n        }\n    }\n    layout() {\n        this._editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this._hidden || !this._position || !this._preference) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [this._preference]\n        };\n    }\n    beforeRender() {\n        const { height, width } = this._widget.element.size;\n        const { borderWidth, horizontalPadding } = this._widget.getLayoutInfo();\n        return new dom.Dimension(width + 2 * borderWidth + horizontalPadding, height + 2 * borderWidth);\n    }\n    afterRender(position) {\n        this._widget._afterRender(position);\n    }\n    setPreference(preference) {\n        if (!this._preferenceLocked) {\n            this._preference = preference;\n        }\n    }\n    lockPreference() {\n        this._preferenceLocked = true;\n    }\n    unlockPreference() {\n        this._preferenceLocked = false;\n    }\n    setPosition(position) {\n        this._position = position;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { suggestWidgetStatusbarMenu } from './suggest.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuEntryActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass StatusBarViewItem extends MenuEntryActionViewItem {\n    updateLabel() {\n        const kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\n        if (!kb) {\n            return super.updateLabel();\n        }\n        if (this.label) {\n            this.label.textContent = localize('ddd', '{0} ({1})', this._action.label, StatusBarViewItem.symbolPrintEnter(kb));\n        }\n    }\n    static symbolPrintEnter(kb) {\n        var _a;\n        return (_a = kb.getLabel()) === null || _a === void 0 ? void 0 : _a.replace(/\\benter\\b/gi, '\\u23CE');\n    }\n}\nlet SuggestWidgetStatus = class SuggestWidgetStatus {\n    constructor(container, instantiationService, _menuService, _contextKeyService) {\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._menuDisposables = new DisposableStore();\n        this.element = dom.append(container, dom.$('.suggest-status-bar'));\n        const actionViewItemProvider = (action => {\n            return action instanceof MenuItemAction ? instantiationService.createInstance(StatusBarViewItem, action, undefined) : undefined;\n        });\n        this._leftActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._rightActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._leftActions.domNode.classList.add('left');\n        this._rightActions.domNode.classList.add('right');\n    }\n    dispose() {\n        this._menuDisposables.dispose();\n        this.element.remove();\n    }\n    show() {\n        const menu = this._menuService.createMenu(suggestWidgetStatusbarMenu, this._contextKeyService);\n        const renderMenu = () => {\n            const left = [];\n            const right = [];\n            for (let [group, actions] of menu.getActions()) {\n                if (group === 'left') {\n                    left.push(...actions);\n                }\n                else {\n                    right.push(...actions);\n                }\n            }\n            this._leftActions.clear();\n            this._leftActions.push(left);\n            this._rightActions.clear();\n            this._rightActions.push(right);\n        };\n        this._menuDisposables.add(menu.onDidChange(() => renderMenu()));\n        this._menuDisposables.add(menu);\n    }\n    hide() {\n        this._menuDisposables.clear();\n    }\n};\nSuggestWidgetStatus = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IMenuService),\n    __param(3, IContextKeyService)\n], SuggestWidgetStatus);\nexport { SuggestWidgetStatus };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { localize } from '../../../../nls.js';\nimport { foreground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nexport const SYMBOL_ICON_ARRAY_FOREGROUND = registerColor('symbolIcon.arrayForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.arrayForeground', 'The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_BOOLEAN_FOREGROUND = registerColor('symbolIcon.booleanForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.booleanForeground', 'The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CLASS_FOREGROUND = registerColor('symbolIcon.classForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hc: '#EE9D28'\n}, localize('symbolIcon.classForeground', 'The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_COLOR_FOREGROUND = registerColor('symbolIcon.colorForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.colorForeground', 'The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTANT_FOREGROUND = registerColor('symbolIcon.constantForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.constantForeground', 'The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTRUCTOR_FOREGROUND = registerColor('symbolIcon.constructorForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hc: '#B180D7'\n}, localize('symbolIcon.constructorForeground', 'The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_FOREGROUND = registerColor('symbolIcon.enumeratorForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hc: '#EE9D28'\n}, localize('symbolIcon.enumeratorForeground', 'The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND = registerColor('symbolIcon.enumeratorMemberForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hc: '#75BEFF'\n}, localize('symbolIcon.enumeratorMemberForeground', 'The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_EVENT_FOREGROUND = registerColor('symbolIcon.eventForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hc: '#EE9D28'\n}, localize('symbolIcon.eventForeground', 'The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FIELD_FOREGROUND = registerColor('symbolIcon.fieldForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hc: '#75BEFF'\n}, localize('symbolIcon.fieldForeground', 'The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FILE_FOREGROUND = registerColor('symbolIcon.fileForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.fileForeground', 'The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FOLDER_FOREGROUND = registerColor('symbolIcon.folderForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.folderForeground', 'The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FUNCTION_FOREGROUND = registerColor('symbolIcon.functionForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hc: '#B180D7'\n}, localize('symbolIcon.functionForeground', 'The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_INTERFACE_FOREGROUND = registerColor('symbolIcon.interfaceForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hc: '#75BEFF'\n}, localize('symbolIcon.interfaceForeground', 'The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEY_FOREGROUND = registerColor('symbolIcon.keyForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.keyForeground', 'The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEYWORD_FOREGROUND = registerColor('symbolIcon.keywordForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.keywordForeground', 'The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_METHOD_FOREGROUND = registerColor('symbolIcon.methodForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hc: '#B180D7'\n}, localize('symbolIcon.methodForeground', 'The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_MODULE_FOREGROUND = registerColor('symbolIcon.moduleForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.moduleForeground', 'The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NAMESPACE_FOREGROUND = registerColor('symbolIcon.namespaceForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.namespaceForeground', 'The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NULL_FOREGROUND = registerColor('symbolIcon.nullForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.nullForeground', 'The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NUMBER_FOREGROUND = registerColor('symbolIcon.numberForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.numberForeground', 'The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OBJECT_FOREGROUND = registerColor('symbolIcon.objectForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.objectForeground', 'The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OPERATOR_FOREGROUND = registerColor('symbolIcon.operatorForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.operatorForeground', 'The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PACKAGE_FOREGROUND = registerColor('symbolIcon.packageForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.packageForeground', 'The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PROPERTY_FOREGROUND = registerColor('symbolIcon.propertyForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.propertyForeground', 'The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_REFERENCE_FOREGROUND = registerColor('symbolIcon.referenceForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.referenceForeground', 'The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_SNIPPET_FOREGROUND = registerColor('symbolIcon.snippetForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.snippetForeground', 'The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRING_FOREGROUND = registerColor('symbolIcon.stringForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.stringForeground', 'The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRUCT_FOREGROUND = registerColor('symbolIcon.structForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.structForeground', 'The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TEXT_FOREGROUND = registerColor('symbolIcon.textForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.textForeground', 'The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TYPEPARAMETER_FOREGROUND = registerColor('symbolIcon.typeParameterForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.typeParameterForeground', 'The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_UNIT_FOREGROUND = registerColor('symbolIcon.unitForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.unitForeground', 'The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_VARIABLE_FOREGROUND = registerColor('symbolIcon.variableForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hc: '#75BEFF'\n}, localize('symbolIcon.variableForeground', 'The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nregisterThemingParticipant((theme, collector) => {\n    const symbolIconArrayColor = theme.getColor(SYMBOL_ICON_ARRAY_FOREGROUND);\n    if (symbolIconArrayColor) {\n        collector.addRule(`${Codicon.symbolArray.cssSelector} { color: ${symbolIconArrayColor}; }`);\n    }\n    const symbolIconBooleanColor = theme.getColor(SYMBOL_ICON_BOOLEAN_FOREGROUND);\n    if (symbolIconBooleanColor) {\n        collector.addRule(`${Codicon.symbolBoolean.cssSelector} { color: ${symbolIconBooleanColor}; }`);\n    }\n    const symbolIconClassColor = theme.getColor(SYMBOL_ICON_CLASS_FOREGROUND);\n    if (symbolIconClassColor) {\n        collector.addRule(`${Codicon.symbolClass.cssSelector} { color: ${symbolIconClassColor}; }`);\n    }\n    const symbolIconMethodColor = theme.getColor(SYMBOL_ICON_METHOD_FOREGROUND);\n    if (symbolIconMethodColor) {\n        collector.addRule(`${Codicon.symbolMethod.cssSelector} { color: ${symbolIconMethodColor}; }`);\n    }\n    const symbolIconColorColor = theme.getColor(SYMBOL_ICON_COLOR_FOREGROUND);\n    if (symbolIconColorColor) {\n        collector.addRule(`${Codicon.symbolColor.cssSelector} { color: ${symbolIconColorColor}; }`);\n    }\n    const symbolIconConstantColor = theme.getColor(SYMBOL_ICON_CONSTANT_FOREGROUND);\n    if (symbolIconConstantColor) {\n        collector.addRule(`${Codicon.symbolConstant.cssSelector} { color: ${symbolIconConstantColor}; }`);\n    }\n    const symbolIconConstructorColor = theme.getColor(SYMBOL_ICON_CONSTRUCTOR_FOREGROUND);\n    if (symbolIconConstructorColor) {\n        collector.addRule(`${Codicon.symbolConstructor.cssSelector} { color: ${symbolIconConstructorColor}; }`);\n    }\n    const symbolIconEnumeratorColor = theme.getColor(SYMBOL_ICON_ENUMERATOR_FOREGROUND);\n    if (symbolIconEnumeratorColor) {\n        collector.addRule(`\n\t\t\t${Codicon.symbolValue.cssSelector},${Codicon.symbolEnum.cssSelector} { color: ${symbolIconEnumeratorColor}; }`);\n    }\n    const symbolIconEnumeratorMemberColor = theme.getColor(SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND);\n    if (symbolIconEnumeratorMemberColor) {\n        collector.addRule(`${Codicon.symbolEnumMember.cssSelector} { color: ${symbolIconEnumeratorMemberColor}; }`);\n    }\n    const symbolIconEventColor = theme.getColor(SYMBOL_ICON_EVENT_FOREGROUND);\n    if (symbolIconEventColor) {\n        collector.addRule(`${Codicon.symbolEvent.cssSelector} { color: ${symbolIconEventColor}; }`);\n    }\n    const symbolIconFieldColor = theme.getColor(SYMBOL_ICON_FIELD_FOREGROUND);\n    if (symbolIconFieldColor) {\n        collector.addRule(`${Codicon.symbolField.cssSelector} { color: ${symbolIconFieldColor}; }`);\n    }\n    const symbolIconFileColor = theme.getColor(SYMBOL_ICON_FILE_FOREGROUND);\n    if (symbolIconFileColor) {\n        collector.addRule(`${Codicon.symbolFile.cssSelector} { color: ${symbolIconFileColor}; }`);\n    }\n    const symbolIconFolderColor = theme.getColor(SYMBOL_ICON_FOLDER_FOREGROUND);\n    if (symbolIconFolderColor) {\n        collector.addRule(`${Codicon.symbolFolder.cssSelector} { color: ${symbolIconFolderColor}; }`);\n    }\n    const symbolIconFunctionColor = theme.getColor(SYMBOL_ICON_FUNCTION_FOREGROUND);\n    if (symbolIconFunctionColor) {\n        collector.addRule(`${Codicon.symbolFunction.cssSelector} { color: ${symbolIconFunctionColor}; }`);\n    }\n    const symbolIconInterfaceColor = theme.getColor(SYMBOL_ICON_INTERFACE_FOREGROUND);\n    if (symbolIconInterfaceColor) {\n        collector.addRule(`${Codicon.symbolInterface.cssSelector} { color: ${symbolIconInterfaceColor}; }`);\n    }\n    const symbolIconKeyColor = theme.getColor(SYMBOL_ICON_KEY_FOREGROUND);\n    if (symbolIconKeyColor) {\n        collector.addRule(`${Codicon.symbolKey.cssSelector} { color: ${symbolIconKeyColor}; }`);\n    }\n    const symbolIconKeywordColor = theme.getColor(SYMBOL_ICON_KEYWORD_FOREGROUND);\n    if (symbolIconKeywordColor) {\n        collector.addRule(`${Codicon.symbolKeyword.cssSelector} { color: ${symbolIconKeywordColor}; }`);\n    }\n    const symbolIconModuleColor = theme.getColor(SYMBOL_ICON_MODULE_FOREGROUND);\n    if (symbolIconModuleColor) {\n        collector.addRule(`${Codicon.symbolModule.cssSelector} { color: ${symbolIconModuleColor}; }`);\n    }\n    const outlineNamespaceColor = theme.getColor(SYMBOL_ICON_NAMESPACE_FOREGROUND);\n    if (outlineNamespaceColor) {\n        collector.addRule(`${Codicon.symbolNamespace.cssSelector} { color: ${outlineNamespaceColor}; }`);\n    }\n    const symbolIconNullColor = theme.getColor(SYMBOL_ICON_NULL_FOREGROUND);\n    if (symbolIconNullColor) {\n        collector.addRule(`${Codicon.symbolNull.cssSelector} { color: ${symbolIconNullColor}; }`);\n    }\n    const symbolIconNumberColor = theme.getColor(SYMBOL_ICON_NUMBER_FOREGROUND);\n    if (symbolIconNumberColor) {\n        collector.addRule(`${Codicon.symbolNumber.cssSelector} { color: ${symbolIconNumberColor}; }`);\n    }\n    const symbolIconObjectColor = theme.getColor(SYMBOL_ICON_OBJECT_FOREGROUND);\n    if (symbolIconObjectColor) {\n        collector.addRule(`${Codicon.symbolObject.cssSelector} { color: ${symbolIconObjectColor}; }`);\n    }\n    const symbolIconOperatorColor = theme.getColor(SYMBOL_ICON_OPERATOR_FOREGROUND);\n    if (symbolIconOperatorColor) {\n        collector.addRule(`${Codicon.symbolOperator.cssSelector} { color: ${symbolIconOperatorColor}; }`);\n    }\n    const symbolIconPackageColor = theme.getColor(SYMBOL_ICON_PACKAGE_FOREGROUND);\n    if (symbolIconPackageColor) {\n        collector.addRule(`${Codicon.symbolPackage.cssSelector} { color: ${symbolIconPackageColor}; }`);\n    }\n    const symbolIconPropertyColor = theme.getColor(SYMBOL_ICON_PROPERTY_FOREGROUND);\n    if (symbolIconPropertyColor) {\n        collector.addRule(`${Codicon.symbolProperty.cssSelector} { color: ${symbolIconPropertyColor}; }`);\n    }\n    const symbolIconReferenceColor = theme.getColor(SYMBOL_ICON_REFERENCE_FOREGROUND);\n    if (symbolIconReferenceColor) {\n        collector.addRule(`${Codicon.symbolReference.cssSelector} { color: ${symbolIconReferenceColor}; }`);\n    }\n    const symbolIconSnippetColor = theme.getColor(SYMBOL_ICON_SNIPPET_FOREGROUND);\n    if (symbolIconSnippetColor) {\n        collector.addRule(`${Codicon.symbolSnippet.cssSelector} { color: ${symbolIconSnippetColor}; }`);\n    }\n    const symbolIconStringColor = theme.getColor(SYMBOL_ICON_STRING_FOREGROUND);\n    if (symbolIconStringColor) {\n        collector.addRule(`${Codicon.symbolString.cssSelector} { color: ${symbolIconStringColor}; }`);\n    }\n    const symbolIconStructColor = theme.getColor(SYMBOL_ICON_STRUCT_FOREGROUND);\n    if (symbolIconStructColor) {\n        collector.addRule(`${Codicon.symbolStruct.cssSelector} { color: ${symbolIconStructColor}; }`);\n    }\n    const symbolIconTextColor = theme.getColor(SYMBOL_ICON_TEXT_FOREGROUND);\n    if (symbolIconTextColor) {\n        collector.addRule(`${Codicon.symbolText.cssSelector} { color: ${symbolIconTextColor}; }`);\n    }\n    const symbolIconTypeParameterColor = theme.getColor(SYMBOL_ICON_TYPEPARAMETER_FOREGROUND);\n    if (symbolIconTypeParameterColor) {\n        collector.addRule(`${Codicon.symbolTypeParameter.cssSelector} { color: ${symbolIconTypeParameterColor}; }`);\n    }\n    const symbolIconUnitColor = theme.getColor(SYMBOL_ICON_UNIT_FOREGROUND);\n    if (symbolIconUnitColor) {\n        collector.addRule(`${Codicon.symbolUnit.cssSelector} { color: ${symbolIconUnitColor}; }`);\n    }\n    const symbolIconVariableColor = theme.getColor(SYMBOL_ICON_VARIABLE_FOREGROUND);\n    if (symbolIconVariableColor) {\n        collector.addRule(`${Codicon.symbolVariable.cssSelector} { color: ${symbolIconVariableColor}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Dimension } from '../../../../base/browser/dom.js';\nimport { OrthogonalEdge, Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nexport class ResizableHTMLElement {\n    constructor() {\n        this._onDidWillResize = new Emitter();\n        this.onDidWillResize = this._onDidWillResize.event;\n        this._onDidResize = new Emitter();\n        this.onDidResize = this._onDidResize.event;\n        this._sashListener = new DisposableStore();\n        this._size = new Dimension(0, 0);\n        this._minSize = new Dimension(0, 0);\n        this._maxSize = new Dimension(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\n        this.domNode = document.createElement('div');\n        this._eastSash = new Sash(this.domNode, { getVerticalSashLeft: () => this._size.width }, { orientation: 0 /* VERTICAL */ });\n        this._westSash = new Sash(this.domNode, { getVerticalSashLeft: () => 0 }, { orientation: 0 /* VERTICAL */ });\n        this._northSash = new Sash(this.domNode, { getHorizontalSashTop: () => 0 }, { orientation: 1 /* HORIZONTAL */, orthogonalEdge: OrthogonalEdge.North });\n        this._southSash = new Sash(this.domNode, { getHorizontalSashTop: () => this._size.height }, { orientation: 1 /* HORIZONTAL */, orthogonalEdge: OrthogonalEdge.South });\n        this._northSash.orthogonalStartSash = this._westSash;\n        this._northSash.orthogonalEndSash = this._eastSash;\n        this._southSash.orthogonalStartSash = this._westSash;\n        this._southSash.orthogonalEndSash = this._eastSash;\n        let currentSize;\n        let deltaY = 0;\n        let deltaX = 0;\n        this._sashListener.add(Event.any(this._northSash.onDidStart, this._eastSash.onDidStart, this._southSash.onDidStart, this._westSash.onDidStart)(() => {\n            if (currentSize === undefined) {\n                this._onDidWillResize.fire();\n                currentSize = this._size;\n                deltaY = 0;\n                deltaX = 0;\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidEnd, this._eastSash.onDidEnd, this._southSash.onDidEnd, this._westSash.onDidEnd)(() => {\n            if (currentSize !== undefined) {\n                currentSize = undefined;\n                deltaY = 0;\n                deltaX = 0;\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(this._eastSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = e.currentX - e.startX;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, east: true });\n            }\n        }));\n        this._sashListener.add(this._westSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = -(e.currentX - e.startX);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, west: true });\n            }\n        }));\n        this._sashListener.add(this._northSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = -(e.currentY - e.startY);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, north: true });\n            }\n        }));\n        this._sashListener.add(this._southSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = e.currentY - e.startY;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, south: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._eastSash.onDidReset, this._westSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._size.height, this._preferredSize.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidReset, this._southSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._preferredSize.height, this._size.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n    }\n    dispose() {\n        this._northSash.dispose();\n        this._southSash.dispose();\n        this._eastSash.dispose();\n        this._westSash.dispose();\n        this._sashListener.dispose();\n        this._onDidResize.dispose();\n        this._onDidWillResize.dispose();\n        this.domNode.remove();\n    }\n    enableSashes(north, east, south, west) {\n        this._northSash.state = north ? 3 /* Enabled */ : 0 /* Disabled */;\n        this._eastSash.state = east ? 3 /* Enabled */ : 0 /* Disabled */;\n        this._southSash.state = south ? 3 /* Enabled */ : 0 /* Disabled */;\n        this._westSash.state = west ? 3 /* Enabled */ : 0 /* Disabled */;\n    }\n    layout(height = this.size.height, width = this.size.width) {\n        const { height: minHeight, width: minWidth } = this._minSize;\n        const { height: maxHeight, width: maxWidth } = this._maxSize;\n        height = Math.max(minHeight, Math.min(maxHeight, height));\n        width = Math.max(minWidth, Math.min(maxWidth, width));\n        const newSize = new Dimension(width, height);\n        if (!Dimension.equals(newSize, this._size)) {\n            this.domNode.style.height = height + 'px';\n            this.domNode.style.width = width + 'px';\n            this._size = newSize;\n            this._northSash.layout();\n            this._eastSash.layout();\n            this._southSash.layout();\n            this._westSash.layout();\n        }\n    }\n    clearSashHoverState() {\n        this._eastSash.clearSashHoverState();\n        this._westSash.clearSashHoverState();\n        this._northSash.clearSashHoverState();\n        this._southSash.clearSashHoverState();\n    }\n    get size() {\n        return this._size;\n    }\n    set maxSize(value) {\n        this._maxSize = value;\n    }\n    get maxSize() {\n        return this._maxSize;\n    }\n    set minSize(value) {\n        this._minSize = value;\n    }\n    get minSize() {\n        return this._minSize;\n    }\n    set preferredSize(value) {\n        this._preferredSize = value;\n    }\n    get preferredSize() {\n        return this._preferredSize;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { isSafari } from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { ResizableHTMLElement } from './resizable.js';\nimport * as nls from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport function canExpandCompletionItem(item) {\n    return !!item && Boolean(item.completion.documentation || item.completion.detail && item.completion.detail !== item.completion.label);\n}\nlet SuggestDetailsWidget = class SuggestDetailsWidget {\n    constructor(_editor, instaService) {\n        this._editor = _editor;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        this._onDidChangeContents = new Emitter();\n        this.onDidChangeContents = this._onDidChangeContents.event;\n        this._disposables = new DisposableStore();\n        this._renderDisposeable = new DisposableStore();\n        this._borderWidth = 1;\n        this._size = new dom.Dimension(330, 0);\n        this.domNode = dom.$('.suggest-details');\n        this.domNode.classList.add('no-docs');\n        this._markdownRenderer = instaService.createInstance(MarkdownRenderer, { editor: _editor });\n        this._body = dom.$('.body');\n        this._scrollbar = new DomScrollableElement(this._body, {});\n        dom.append(this.domNode, this._scrollbar.getDomNode());\n        this._disposables.add(this._scrollbar);\n        this._header = dom.append(this._body, dom.$('.header'));\n        this._close = dom.append(this._header, dom.$('span' + Codicon.close.cssSelector));\n        this._close.title = nls.localize('details.close', \"Close\");\n        this._type = dom.append(this._header, dom.$('p.type'));\n        this._docs = dom.append(this._body, dom.$('p.docs'));\n        this._configureFont();\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(44 /* fontInfo */)) {\n                this._configureFont();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._renderDisposeable.dispose();\n    }\n    _configureFont() {\n        const options = this._editor.getOptions();\n        const fontInfo = options.get(44 /* fontInfo */);\n        const fontFamily = fontInfo.getMassagedFontFamily(isSafari ? EDITOR_FONT_DEFAULTS.fontFamily : null);\n        const fontSize = options.get(107 /* suggestFontSize */) || fontInfo.fontSize;\n        const lineHeight = options.get(108 /* suggestLineHeight */) || fontInfo.lineHeight;\n        const fontWeight = fontInfo.fontWeight;\n        const fontSizePx = `${fontSize}px`;\n        const lineHeightPx = `${lineHeight}px`;\n        this.domNode.style.fontSize = fontSizePx;\n        this.domNode.style.lineHeight = `${lineHeight / fontSize}`;\n        this.domNode.style.fontWeight = fontWeight;\n        this.domNode.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\n        this._type.style.fontFamily = fontFamily;\n        this._close.style.height = lineHeightPx;\n        this._close.style.width = lineHeightPx;\n    }\n    getLayoutInfo() {\n        const lineHeight = this._editor.getOption(108 /* suggestLineHeight */) || this._editor.getOption(44 /* fontInfo */).lineHeight;\n        const borderWidth = this._borderWidth;\n        const borderHeight = borderWidth * 2;\n        return {\n            lineHeight,\n            borderWidth,\n            borderHeight,\n            verticalPadding: 22,\n            horizontalPadding: 14\n        };\n    }\n    renderLoading() {\n        this._type.textContent = nls.localize('loading', \"Loading...\");\n        this._docs.textContent = '';\n        this.domNode.classList.remove('no-docs', 'no-type');\n        this.layout(this.size.width, this.getLayoutInfo().lineHeight * 2);\n        this._onDidChangeContents.fire(this);\n    }\n    renderItem(item, explainMode) {\n        var _a, _b;\n        this._renderDisposeable.clear();\n        let { detail, documentation } = item.completion;\n        if (explainMode) {\n            let md = '';\n            md += `score: ${item.score[0]}\\n`;\n            md += `prefix: ${(_a = item.word) !== null && _a !== void 0 ? _a : '(no prefix)'}\\n`;\n            md += `word: ${item.completion.filterText ? item.completion.filterText + ' (filterText)' : item.textLabel}\\n`;\n            md += `distance: ${item.distance} (localityBonus-setting)\\n`;\n            md += `index: ${item.idx}, based on ${item.completion.sortText && `sortText: \"${item.completion.sortText}\"` || 'label'}\\n`;\n            md += `commit_chars: ${(_b = item.completion.commitCharacters) === null || _b === void 0 ? void 0 : _b.join('')}\\n`;\n            documentation = new MarkdownString().appendCodeblock('empty', md);\n            detail = `Provider: ${item.provider._debugDisplayName}`;\n        }\n        if (!explainMode && !canExpandCompletionItem(item)) {\n            this.clearContents();\n            return;\n        }\n        this.domNode.classList.remove('no-docs', 'no-type');\n        // --- details\n        if (detail) {\n            const cappedDetail = detail.length > 100000 ? `${detail.substr(0, 100000)}\u2026` : detail;\n            this._type.textContent = cappedDetail;\n            this._type.title = cappedDetail;\n            dom.show(this._type);\n            this._type.classList.toggle('auto-wrap', !/\\r?\\n^\\s+/gmi.test(cappedDetail));\n        }\n        else {\n            dom.clearNode(this._type);\n            this._type.title = '';\n            dom.hide(this._type);\n            this.domNode.classList.add('no-type');\n        }\n        // --- documentation\n        dom.clearNode(this._docs);\n        if (typeof documentation === 'string') {\n            this._docs.classList.remove('markdown-docs');\n            this._docs.textContent = documentation;\n        }\n        else if (documentation) {\n            this._docs.classList.add('markdown-docs');\n            dom.clearNode(this._docs);\n            const renderedContents = this._markdownRenderer.render(documentation);\n            this._docs.appendChild(renderedContents.element);\n            this._renderDisposeable.add(renderedContents);\n            this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(() => {\n                this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n                this._onDidChangeContents.fire(this);\n            }));\n        }\n        this.domNode.style.userSelect = 'text';\n        this.domNode.tabIndex = -1;\n        this._close.onmousedown = e => {\n            e.preventDefault();\n            e.stopPropagation();\n        };\n        this._close.onclick = e => {\n            e.preventDefault();\n            e.stopPropagation();\n            this._onDidClose.fire();\n        };\n        this._body.scrollTop = 0;\n        this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n        this._onDidChangeContents.fire(this);\n    }\n    clearContents() {\n        this.domNode.classList.add('no-docs');\n        this._type.textContent = '';\n        this._docs.textContent = '';\n    }\n    get size() {\n        return this._size;\n    }\n    layout(width, height) {\n        const newSize = new dom.Dimension(width, height);\n        if (!dom.Dimension.equals(newSize, this._size)) {\n            this._size = newSize;\n            dom.size(this.domNode, width, height);\n        }\n        this._scrollbar.scanDomNode();\n    }\n    scrollDown(much = 8) {\n        this._body.scrollTop += much;\n    }\n    scrollUp(much = 8) {\n        this._body.scrollTop -= much;\n    }\n    scrollTop() {\n        this._body.scrollTop = 0;\n    }\n    scrollBottom() {\n        this._body.scrollTop = this._body.scrollHeight;\n    }\n    pageDown() {\n        this.scrollDown(80);\n    }\n    pageUp() {\n        this.scrollUp(80);\n    }\n    set borderWidth(width) {\n        this._borderWidth = width;\n    }\n    get borderWidth() {\n        return this._borderWidth;\n    }\n};\nSuggestDetailsWidget = __decorate([\n    __param(1, IInstantiationService)\n], SuggestDetailsWidget);\nexport { SuggestDetailsWidget };\nexport class SuggestDetailsOverlay {\n    constructor(widget, _editor) {\n        this.widget = widget;\n        this._editor = _editor;\n        this._disposables = new DisposableStore();\n        this._added = false;\n        this._preferAlignAtTop = true;\n        this._resizable = new ResizableHTMLElement();\n        this._resizable.domNode.classList.add('suggest-details-container');\n        this._resizable.domNode.appendChild(widget.domNode);\n        this._resizable.enableSashes(false, true, true, false);\n        let topLeftNow;\n        let sizeNow;\n        let deltaTop = 0;\n        let deltaLeft = 0;\n        this._disposables.add(this._resizable.onDidWillResize(() => {\n            topLeftNow = this._topLeft;\n            sizeNow = this._resizable.size;\n        }));\n        this._disposables.add(this._resizable.onDidResize(e => {\n            if (topLeftNow && sizeNow) {\n                this.widget.layout(e.dimension.width, e.dimension.height);\n                let updateTopLeft = false;\n                if (e.west) {\n                    deltaLeft = sizeNow.width - e.dimension.width;\n                    updateTopLeft = true;\n                }\n                if (e.north) {\n                    deltaTop = sizeNow.height - e.dimension.height;\n                    updateTopLeft = true;\n                }\n                if (updateTopLeft) {\n                    this._applyTopLeft({\n                        top: topLeftNow.top + deltaTop,\n                        left: topLeftNow.left + deltaLeft,\n                    });\n                }\n            }\n            if (e.done) {\n                topLeftNow = undefined;\n                sizeNow = undefined;\n                deltaTop = 0;\n                deltaLeft = 0;\n                this._userSize = e.dimension;\n            }\n        }));\n        this._disposables.add(this.widget.onDidChangeContents(() => {\n            var _a;\n            if (this._anchorBox) {\n                this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, this._preferAlignAtTop);\n            }\n        }));\n    }\n    dispose() {\n        this._resizable.dispose();\n        this._disposables.dispose();\n        this.hide();\n    }\n    getId() {\n        return 'suggest.details';\n    }\n    getDomNode() {\n        return this._resizable.domNode;\n    }\n    getPosition() {\n        return null;\n    }\n    show() {\n        if (!this._added) {\n            this._editor.addOverlayWidget(this);\n            this.getDomNode().style.position = 'fixed';\n            this._added = true;\n        }\n    }\n    hide(sessionEnded = false) {\n        this._resizable.clearSashHoverState();\n        if (this._added) {\n            this._editor.removeOverlayWidget(this);\n            this._added = false;\n            this._anchorBox = undefined;\n            this._topLeft = undefined;\n        }\n        if (sessionEnded) {\n            this._userSize = undefined;\n            this.widget.clearContents();\n        }\n    }\n    placeAtAnchor(anchor, preferAlignAtTop) {\n        var _a;\n        const anchorBox = anchor.getBoundingClientRect();\n        this._anchorBox = anchorBox;\n        this._preferAlignAtTop = preferAlignAtTop;\n        this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, preferAlignAtTop);\n    }\n    _placeAtAnchor(anchorBox, size, preferAlignAtTop) {\n        var _a;\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.widget.getLayoutInfo();\n        const defaultMinSize = new dom.Dimension(220, 2 * info.lineHeight);\n        const defaultTop = anchorBox.top;\n        // EAST\n        const eastPlacement = (function () {\n            const width = bodyBox.width - (anchorBox.left + anchorBox.width + info.borderWidth + info.horizontalPadding);\n            const left = -info.borderWidth + anchorBox.left + anchorBox.width;\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // WEST\n        const westPlacement = (function () {\n            const width = anchorBox.left - info.borderWidth - info.horizontalPadding;\n            const left = Math.max(info.horizontalPadding, anchorBox.left - size.width - info.borderWidth);\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // SOUTH\n        const southPacement = (function () {\n            const left = anchorBox.left;\n            const top = -info.borderWidth + anchorBox.top + anchorBox.height;\n            const maxSizeBottom = new dom.Dimension(anchorBox.width - info.borderHeight, bodyBox.height - anchorBox.top - anchorBox.height - info.verticalPadding);\n            return { top, left, fit: maxSizeBottom.height - size.height, maxSizeBottom, maxSizeTop: maxSizeBottom, minSize: defaultMinSize.with(maxSizeBottom.width) };\n        })();\n        // take first placement that fits or the first with \"least bad\" fit\n        const placements = [eastPlacement, westPlacement, southPacement];\n        const placement = (_a = placements.find(p => p.fit >= 0)) !== null && _a !== void 0 ? _a : placements.sort((a, b) => b.fit - a.fit)[0];\n        // top/bottom placement\n        const bottom = anchorBox.top + anchorBox.height - info.borderHeight;\n        let alignAtTop;\n        let height = size.height;\n        const maxHeight = Math.max(placement.maxSizeTop.height, placement.maxSizeBottom.height);\n        if (height > maxHeight) {\n            height = maxHeight;\n        }\n        let maxSize;\n        if (preferAlignAtTop) {\n            if (height <= placement.maxSizeTop.height) {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n            else {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n        }\n        else {\n            if (height <= placement.maxSizeBottom.height) {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n            else {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n        }\n        this._applyTopLeft({ left: placement.left, top: alignAtTop ? placement.top : bottom - height });\n        this.getDomNode().style.position = 'fixed';\n        this._resizable.enableSashes(!alignAtTop, placement === eastPlacement, alignAtTop, placement !== eastPlacement);\n        this._resizable.minSize = placement.minSize;\n        this._resizable.maxSize = maxSize;\n        this._resizable.layout(height, Math.min(maxSize.width, size.width));\n        this.widget.layout(this._resizable.size.width, this._resizable.size.height);\n    }\n    _applyTopLeft(topLeft) {\n        this._topLeft = topLeft;\n        this.getDomNode().style.left = `${this._topLeft.left}px`;\n        this.getDomNode().style.top = `${this._topLeft.top}px`;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a;\nimport { isSafari } from '../../../../base/browser/browser.js';\nimport { $, append, hide, show } from '../../../../base/browser/dom.js';\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { flatten } from '../../../../base/common/arrays.js';\nimport { Codicon, CSSIcon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { createMatches } from '../../../../base/common/filters.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { getIconClasses } from '../../../common/services/getIconClasses.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport * as nls from '../../../../nls.js';\nimport { FileKind } from '../../../../platform/files/common/files.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IThemeService, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nimport { canExpandCompletionItem } from './suggestWidgetDetails.js';\nexport function getAriaId(index) {\n    return `suggest-aria-id:${index}`;\n}\nexport const suggestMoreInfoIcon = registerIcon('suggest-more-info', Codicon.chevronRight, nls.localize('suggestMoreInfoIcon', 'Icon for more information in the suggest widget.'));\nconst _completionItemColor = new (_a = class ColorExtractor {\n        extract(item, out) {\n            if (item.textLabel.match(ColorExtractor._regexStrict)) {\n                out[0] = item.textLabel;\n                return true;\n            }\n            if (item.completion.detail && item.completion.detail.match(ColorExtractor._regexStrict)) {\n                out[0] = item.completion.detail;\n                return true;\n            }\n            if (typeof item.completion.documentation === 'string') {\n                const match = ColorExtractor._regexRelaxed.exec(item.completion.documentation);\n                if (match && (match.index === 0 || match.index + match[0].length === item.completion.documentation.length)) {\n                    out[0] = match[0];\n                    return true;\n                }\n            }\n            return false;\n        }\n    },\n    _a._regexRelaxed = /(#([\\da-fA-F]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))/,\n    _a._regexStrict = new RegExp(`^${_a._regexRelaxed.source}$`, 'i'),\n    _a);\nlet ItemRenderer = class ItemRenderer {\n    constructor(_editor, _modelService, _languageService, _themeService) {\n        this._editor = _editor;\n        this._modelService = _modelService;\n        this._languageService = _languageService;\n        this._themeService = _themeService;\n        this._onDidToggleDetails = new Emitter();\n        this.onDidToggleDetails = this._onDidToggleDetails.event;\n        this.templateId = 'suggestion';\n    }\n    dispose() {\n        this._onDidToggleDetails.dispose();\n    }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.disposables = new DisposableStore();\n        data.root = container;\n        data.root.classList.add('show-file-icons');\n        data.icon = append(container, $('.icon'));\n        data.colorspan = append(data.icon, $('span.colorspan'));\n        const text = append(container, $('.contents'));\n        const main = append(text, $('.main'));\n        data.iconContainer = append(main, $('.icon-label.codicon'));\n        data.left = append(main, $('span.left'));\n        data.right = append(main, $('span.right'));\n        data.iconLabel = new IconLabel(data.left, { supportHighlights: true, supportIcons: true });\n        data.disposables.add(data.iconLabel);\n        data.parametersLabel = append(data.left, $('span.signature-label'));\n        data.qualifierLabel = append(data.left, $('span.qualifier-label'));\n        data.detailsLabel = append(data.right, $('span.details-label'));\n        data.readMore = append(data.right, $('span.readMore' + ThemeIcon.asCSSSelector(suggestMoreInfoIcon)));\n        data.readMore.title = nls.localize('readMore', \"Read More\");\n        const configureFont = () => {\n            const options = this._editor.getOptions();\n            const fontInfo = options.get(44 /* fontInfo */);\n            const fontFamily = fontInfo.getMassagedFontFamily(isSafari ? EDITOR_FONT_DEFAULTS.fontFamily : null);\n            const fontFeatureSettings = fontInfo.fontFeatureSettings;\n            const fontSize = options.get(107 /* suggestFontSize */) || fontInfo.fontSize;\n            const lineHeight = options.get(108 /* suggestLineHeight */) || fontInfo.lineHeight;\n            const fontWeight = fontInfo.fontWeight;\n            const fontSizePx = `${fontSize}px`;\n            const lineHeightPx = `${lineHeight}px`;\n            data.root.style.fontSize = fontSizePx;\n            data.root.style.fontWeight = fontWeight;\n            main.style.fontFamily = fontFamily;\n            main.style.fontFeatureSettings = fontFeatureSettings;\n            main.style.lineHeight = lineHeightPx;\n            data.icon.style.height = lineHeightPx;\n            data.icon.style.width = lineHeightPx;\n            data.readMore.style.height = lineHeightPx;\n            data.readMore.style.width = lineHeightPx;\n        };\n        configureFont();\n        data.disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(44 /* fontInfo */) || e.hasChanged(107 /* suggestFontSize */) || e.hasChanged(108 /* suggestLineHeight */)) {\n                configureFont();\n            }\n        }));\n        return data;\n    }\n    renderElement(element, index, data) {\n        const { completion } = element;\n        data.root.id = getAriaId(index);\n        data.colorspan.style.backgroundColor = '';\n        const labelOptions = {\n            labelEscapeNewLines: true,\n            matches: createMatches(element.score)\n        };\n        let color = [];\n        if (completion.kind === 19 /* Color */ && _completionItemColor.extract(element, color)) {\n            // special logic for 'color' completion items\n            data.icon.className = 'icon customcolor';\n            data.iconContainer.className = 'icon hide';\n            data.colorspan.style.backgroundColor = color[0];\n        }\n        else if (completion.kind === 20 /* File */ && this._themeService.getFileIconTheme().hasFileIcons) {\n            // special logic for 'file' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            const labelClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FILE);\n            const detailClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FILE);\n            labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\n        }\n        else if (completion.kind === 23 /* Folder */ && this._themeService.getFileIconTheme().hasFolderIcons) {\n            // special logic for 'folder' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            labelOptions.extraClasses = flatten([\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FOLDER),\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FOLDER)\n            ]);\n        }\n        else {\n            // normal icon\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = '';\n            data.iconContainer.classList.add('suggest-icon', ...CSSIcon.asClassNameArray(CompletionItemKinds.toIcon(completion.kind)));\n        }\n        if (completion.tags && completion.tags.indexOf(1 /* Deprecated */) >= 0) {\n            labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\n            labelOptions.matches = [];\n        }\n        data.iconLabel.setLabel(element.textLabel, undefined, labelOptions);\n        if (typeof completion.label === 'string') {\n            data.parametersLabel.textContent = '';\n            data.detailsLabel.textContent = stripNewLines(completion.detail || '');\n            data.root.classList.add('string-label');\n        }\n        else {\n            data.parametersLabel.textContent = stripNewLines(completion.label.detail || '');\n            data.detailsLabel.textContent = stripNewLines(completion.label.description || '');\n            data.root.classList.remove('string-label');\n        }\n        if (this._editor.getOption(106 /* suggest */).showInlineDetails) {\n            show(data.detailsLabel);\n        }\n        else {\n            hide(data.detailsLabel);\n        }\n        if (canExpandCompletionItem(element)) {\n            data.right.classList.add('can-expand-details');\n            show(data.readMore);\n            data.readMore.onmousedown = e => {\n                e.stopPropagation();\n                e.preventDefault();\n            };\n            data.readMore.onclick = e => {\n                e.stopPropagation();\n                e.preventDefault();\n                this._onDidToggleDetails.fire();\n            };\n        }\n        else {\n            data.right.classList.remove('can-expand-details');\n            hide(data.readMore);\n            data.readMore.onmousedown = null;\n            data.readMore.onclick = null;\n        }\n    }\n    disposeTemplate(templateData) {\n        templateData.disposables.dispose();\n    }\n};\nItemRenderer = __decorate([\n    __param(1, IModelService),\n    __param(2, ILanguageService),\n    __param(3, IThemeService)\n], ItemRenderer);\nexport { ItemRenderer };\nfunction stripNewLines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, '');\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Schemas } from '../../../base/common/network.js';\nimport { DataUri } from '../../../base/common/resources.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../languages/modesRegistry.js';\nimport { FileKind } from '../../../platform/files/common/files.js';\nconst fileIconDirectoryRegex = /(?:\\/|^)(?:([^\\/]+)\\/)?([^\\/]+)$/;\nexport function getIconClasses(modelService, languageService, resource, fileKind) {\n    // we always set these base classes even if we do not have a path\n    const classes = fileKind === FileKind.ROOT_FOLDER ? ['rootfolder-icon'] : fileKind === FileKind.FOLDER ? ['folder-icon'] : ['file-icon'];\n    if (resource) {\n        // Get the path and name of the resource. For data-URIs, we need to parse specially\n        let name;\n        if (resource.scheme === Schemas.data) {\n            const metadata = DataUri.parseMetaData(resource);\n            name = metadata.get(DataUri.META_DATA_LABEL);\n        }\n        else {\n            const match = resource.path.match(fileIconDirectoryRegex);\n            if (match) {\n                name = cssEscape(match[2].toLowerCase());\n                if (match[1]) {\n                    classes.push(`${cssEscape(match[1].toLowerCase())}-name-dir-icon`); // parent directory\n                }\n            }\n            else {\n                name = cssEscape(resource.authority.toLowerCase());\n            }\n        }\n        // Folders\n        if (fileKind === FileKind.FOLDER) {\n            classes.push(`${name}-name-folder-icon`);\n        }\n        // Files\n        else {\n            // Name & Extension(s)\n            if (name) {\n                classes.push(`${name}-name-file-icon`);\n                classes.push(`name-file-icon`); // extra segment to increase file-name score\n                // Avoid doing an explosive combination of extensions for very long filenames\n                // (most file systems do not allow files > 255 length) with lots of `.` characters\n                // https://github.com/microsoft/vscode/issues/116199\n                if (name.length <= 255) {\n                    const dotSegments = name.split('.');\n                    for (let i = 1; i < dotSegments.length; i++) {\n                        classes.push(`${dotSegments.slice(i).join('.')}-ext-file-icon`); // add each combination of all found extensions if more than one\n                    }\n                }\n                classes.push(`ext-file-icon`); // extra segment to increase file-ext score\n            }\n            // Detected Mode\n            const detectedLanguageId = detectLanguageId(modelService, languageService, resource);\n            if (detectedLanguageId) {\n                classes.push(`${cssEscape(detectedLanguageId)}-lang-file-icon`);\n            }\n        }\n    }\n    return classes;\n}\nfunction detectLanguageId(modelService, languageService, resource) {\n    if (!resource) {\n        return null; // we need a resource at least\n    }\n    let languageId = null;\n    // Data URI: check for encoded metadata\n    if (resource.scheme === Schemas.data) {\n        const metadata = DataUri.parseMetaData(resource);\n        const mime = metadata.get(DataUri.META_DATA_MIME);\n        if (mime) {\n            languageId = languageService.getLanguageIdByMimeType(mime);\n        }\n    }\n    // Any other URI: check for model if existing\n    else {\n        const model = modelService.getModel(resource);\n        if (model) {\n            languageId = model.getLanguageId();\n        }\n    }\n    // only take if the language id is specific (aka no just plain text)\n    if (languageId && languageId !== PLAINTEXT_LANGUAGE_ID) {\n        return languageId;\n    }\n    // otherwise fallback to path based detection\n    return languageService.guessLanguageIdByFilepathOrFirstLine(resource);\n}\nexport function cssEscape(str) {\n    return str.replace(/[\\11\\12\\14\\15\\40]/g, '/'); // HTML class names can not contain certain whitespace characters, use / instead, which doesn't exist in file names.\n}\n", "//#endregion\n//#region Utilities\nexport var FileKind;\n(function (FileKind) {\n    FileKind[FileKind[\"FILE\"] = 0] = \"FILE\";\n    FileKind[FileKind[\"FOLDER\"] = 1] = \"FOLDER\";\n    FileKind[FileKind[\"ROOT_FOLDER\"] = 2] = \"ROOT_FOLDER\";\n})(FileKind || (FileKind = {}));\n//#endregion\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function createDisposableRef(object, disposable) {\n    return {\n        object,\n        dispose: () => disposable === null || disposable === void 0 ? void 0 : disposable.dispose(),\n    };\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './ghostText.css';\nimport { applyFontInfo } from '../../../browser/config/domFontInfo.js';\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\nimport { LineTokens } from '../../../common/tokens/lineTokens.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { createStringBuilder } from '../../../common/core/stringBuilder.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { ghostTextBackground, ghostTextBorder, ghostTextForeground } from '../../../common/core/editorColorRegistry.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nconst ttPolicy = (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy('editorGhostText', { createHTML: value => value });\nlet GhostTextWidget = class GhostTextWidget extends Disposable {\n    constructor(editor, model, instantiationService, languageService) {\n        super();\n        this.editor = editor;\n        this.model = model;\n        this.instantiationService = instantiationService;\n        this.languageService = languageService;\n        this.disposed = false;\n        this.partsWidget = this._register(this.instantiationService.createInstance(DecorationsWidget, this.editor));\n        this.additionalLinesWidget = this._register(new AdditionalLinesWidget(this.editor, this.languageService.languageIdCodec));\n        this.viewMoreContentWidget = undefined;\n        this._register(this.editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(29 /* disableMonospaceOptimizations */)\n                || e.hasChanged(105 /* stopRenderingLineAfter */)\n                || e.hasChanged(88 /* renderWhitespace */)\n                || e.hasChanged(83 /* renderControlCharacters */)\n                || e.hasChanged(45 /* fontLigatures */)\n                || e.hasChanged(44 /* fontInfo */)\n                || e.hasChanged(59 /* lineHeight */)) {\n                this.update();\n            }\n        }));\n        this._register(toDisposable(() => {\n            var _a;\n            this.disposed = true;\n            this.update();\n            (_a = this.viewMoreContentWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n            this.viewMoreContentWidget = undefined;\n        }));\n        this._register(model.onDidChange(() => {\n            this.update();\n        }));\n        this.update();\n    }\n    shouldShowHoverAtViewZone(viewZoneId) {\n        return (this.additionalLinesWidget.viewZoneId === viewZoneId);\n    }\n    update() {\n        var _a;\n        const ghostText = this.model.ghostText;\n        if (!this.editor.hasModel() || !ghostText || this.disposed) {\n            this.partsWidget.clear();\n            this.additionalLinesWidget.clear();\n            return;\n        }\n        const inlineTexts = new Array();\n        const additionalLines = new Array();\n        function addToAdditionalLines(lines, className) {\n            if (additionalLines.length > 0) {\n                const lastLine = additionalLines[additionalLines.length - 1];\n                if (className) {\n                    lastLine.decorations.push(new LineDecoration(lastLine.content.length + 1, lastLine.content.length + 1 + lines[0].length, className, 0 /* Regular */));\n                }\n                lastLine.content += lines[0];\n                lines = lines.slice(1);\n            }\n            for (const line of lines) {\n                additionalLines.push({\n                    content: line,\n                    decorations: className ? [new LineDecoration(1, line.length + 1, className, 0 /* Regular */)] : []\n                });\n            }\n        }\n        const textBufferLine = this.editor.getModel().getLineContent(ghostText.lineNumber);\n        this.editor.getModel().getLineTokens(ghostText.lineNumber);\n        let hiddenTextStartColumn = undefined;\n        let lastIdx = 0;\n        for (const part of ghostText.parts) {\n            let lines = part.lines;\n            if (hiddenTextStartColumn === undefined) {\n                inlineTexts.push({\n                    column: part.column,\n                    text: lines[0],\n                    preview: part.preview,\n                });\n                lines = lines.slice(1);\n            }\n            else {\n                addToAdditionalLines([textBufferLine.substring(lastIdx, part.column - 1)], undefined);\n            }\n            if (lines.length > 0) {\n                addToAdditionalLines(lines, 'ghost-text');\n                if (hiddenTextStartColumn === undefined && part.column <= textBufferLine.length) {\n                    hiddenTextStartColumn = part.column;\n                }\n            }\n            lastIdx = part.column - 1;\n        }\n        if (hiddenTextStartColumn !== undefined) {\n            addToAdditionalLines([textBufferLine.substring(lastIdx)], undefined);\n        }\n        this.partsWidget.setParts(ghostText.lineNumber, inlineTexts, hiddenTextStartColumn !== undefined ? { column: hiddenTextStartColumn, length: textBufferLine.length + 1 - hiddenTextStartColumn } : undefined);\n        this.additionalLinesWidget.updateLines(ghostText.lineNumber, additionalLines, ghostText.additionalReservedLineCount);\n        if (ghostText.parts.some(p => p.lines.length < 0)) {\n            // Not supported at the moment, condition is always false.\n            this.viewMoreContentWidget = this.renderViewMoreLines(new Position(ghostText.lineNumber, this.editor.getModel().getLineMaxColumn(ghostText.lineNumber)), '', 0);\n        }\n        else {\n            (_a = this.viewMoreContentWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n            this.viewMoreContentWidget = undefined;\n        }\n    }\n    renderViewMoreLines(position, firstLineText, remainingLinesLength) {\n        const fontInfo = this.editor.getOption(44 /* fontInfo */);\n        const domNode = document.createElement('div');\n        domNode.className = 'suggest-preview-additional-widget';\n        applyFontInfo(domNode, fontInfo);\n        const spacer = document.createElement('span');\n        spacer.className = 'content-spacer';\n        spacer.append(firstLineText);\n        domNode.append(spacer);\n        const newline = document.createElement('span');\n        newline.className = 'content-newline suggest-preview-text';\n        newline.append('\u23CE  ');\n        domNode.append(newline);\n        const disposableStore = new DisposableStore();\n        const button = document.createElement('div');\n        button.className = 'button suggest-preview-text';\n        button.append(`+${remainingLinesLength} lines\u2026`);\n        disposableStore.add(dom.addStandardDisposableListener(button, 'mousedown', (e) => {\n            var _a;\n            (_a = this.model) === null || _a === void 0 ? void 0 : _a.setExpanded(true);\n            e.preventDefault();\n            this.editor.focus();\n        }));\n        domNode.append(button);\n        return new ViewMoreLinesContentWidget(this.editor, position, domNode, disposableStore);\n    }\n};\nGhostTextWidget = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, ILanguageService)\n], GhostTextWidget);\nexport { GhostTextWidget };\nclass DecorationsWidget {\n    constructor(editor) {\n        this.editor = editor;\n        this.decorationIds = [];\n        this.disposableStore = new DisposableStore();\n    }\n    dispose() {\n        this.clear();\n        this.disposableStore.dispose();\n    }\n    clear() {\n        this.editor.deltaDecorations(this.decorationIds, []);\n        this.disposableStore.clear();\n    }\n    setParts(lineNumber, parts, hiddenText) {\n        this.disposableStore.clear();\n        const textModel = this.editor.getModel();\n        if (!textModel) {\n            return;\n        }\n        const hiddenTextDecorations = new Array();\n        if (hiddenText) {\n            hiddenTextDecorations.push({\n                range: Range.fromPositions(new Position(lineNumber, hiddenText.column), new Position(lineNumber, hiddenText.column + hiddenText.length)),\n                options: {\n                    inlineClassName: 'ghost-text-hidden',\n                    description: 'ghost-text-hidden'\n                }\n            });\n        }\n        this.decorationIds = this.editor.deltaDecorations(this.decorationIds, parts.map(p => {\n            return ({\n                range: Range.fromPositions(new Position(lineNumber, p.column)),\n                options: {\n                    description: 'ghost-text',\n                    after: { content: p.text, inlineClassName: p.preview ? 'ghost-text-decoration-preview' : 'ghost-text-decoration' },\n                    showIfCollapsed: true,\n                }\n            });\n        }).concat(hiddenTextDecorations));\n    }\n}\nclass AdditionalLinesWidget {\n    constructor(editor, languageIdCodec) {\n        this.editor = editor;\n        this.languageIdCodec = languageIdCodec;\n        this._viewZoneId = undefined;\n    }\n    get viewZoneId() { return this._viewZoneId; }\n    dispose() {\n        this.clear();\n    }\n    clear() {\n        this.editor.changeViewZones((changeAccessor) => {\n            if (this._viewZoneId) {\n                changeAccessor.removeZone(this._viewZoneId);\n                this._viewZoneId = undefined;\n            }\n        });\n    }\n    updateLines(lineNumber, additionalLines, minReservedLineCount) {\n        const textModel = this.editor.getModel();\n        if (!textModel) {\n            return;\n        }\n        const { tabSize } = textModel.getOptions();\n        this.editor.changeViewZones((changeAccessor) => {\n            if (this._viewZoneId) {\n                changeAccessor.removeZone(this._viewZoneId);\n                this._viewZoneId = undefined;\n            }\n            const heightInLines = Math.max(additionalLines.length, minReservedLineCount);\n            if (heightInLines > 0) {\n                const domNode = document.createElement('div');\n                renderLines(domNode, tabSize, additionalLines, this.editor.getOptions(), this.languageIdCodec);\n                this._viewZoneId = changeAccessor.addZone({\n                    afterLineNumber: lineNumber,\n                    heightInLines: heightInLines,\n                    domNode,\n                    afterColumnAffinity: 1 /* Right */\n                });\n            }\n        });\n    }\n}\nfunction renderLines(domNode, tabSize, lines, opts, languageIdCodec) {\n    const disableMonospaceOptimizations = opts.get(29 /* disableMonospaceOptimizations */);\n    const stopRenderingLineAfter = opts.get(105 /* stopRenderingLineAfter */);\n    // To avoid visual confusion, we don't want to render visible whitespace\n    const renderWhitespace = 'none';\n    const renderControlCharacters = opts.get(83 /* renderControlCharacters */);\n    const fontLigatures = opts.get(45 /* fontLigatures */);\n    const fontInfo = opts.get(44 /* fontInfo */);\n    const lineHeight = opts.get(59 /* lineHeight */);\n    const sb = createStringBuilder(10000);\n    sb.appendASCIIString('<div class=\"suggest-preview-text\">');\n    for (let i = 0, len = lines.length; i < len; i++) {\n        const lineData = lines[i];\n        const line = lineData.content;\n        sb.appendASCIIString('<div class=\"view-line');\n        sb.appendASCIIString('\" style=\"top:');\n        sb.appendASCIIString(String(i * lineHeight));\n        sb.appendASCIIString('px;width:1000000px;\">');\n        const isBasicASCII = strings.isBasicASCII(line);\n        const containsRTL = strings.containsRTL(line);\n        const lineTokens = LineTokens.createEmpty(line, languageIdCodec);\n        renderViewLine(new RenderLineInput((fontInfo.isMonospace && !disableMonospaceOptimizations), fontInfo.canUseHalfwidthRightwardsArrow, line, false, isBasicASCII, containsRTL, 0, lineTokens, lineData.decorations, tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures !== EditorFontLigatures.OFF, null), sb);\n        sb.appendASCIIString('</div>');\n    }\n    sb.appendASCIIString('</div>');\n    applyFontInfo(domNode, fontInfo);\n    const html = sb.build();\n    const trustedhtml = ttPolicy ? ttPolicy.createHTML(html) : html;\n    domNode.innerHTML = trustedhtml;\n}\nclass ViewMoreLinesContentWidget extends Disposable {\n    constructor(editor, position, domNode, disposableStore) {\n        super();\n        this.editor = editor;\n        this.position = position;\n        this.domNode = domNode;\n        this.allowEditorOverflow = false;\n        this.suppressMouseDown = false;\n        this._register(disposableStore);\n        this._register(toDisposable(() => {\n            this.editor.removeContentWidget(this);\n        }));\n        this.editor.addContentWidget(this);\n    }\n    getId() {\n        return 'editor.widget.viewMoreLinesWidget';\n    }\n    getDomNode() {\n        return this.domNode;\n    }\n    getPosition() {\n        return {\n            position: this.position,\n            preference: [0 /* EXACT */]\n        };\n    }\n}\nregisterThemingParticipant((theme, collector) => {\n    const foreground = theme.getColor(ghostTextForeground);\n    if (foreground) {\n        // `!important` ensures that other decorations don't cause a style conflict (#132017).\n        collector.addRule(`.monaco-editor .ghost-text-decoration { color: ${foreground.toString()} !important; }`);\n        collector.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${foreground.toString()} !important; }`);\n        collector.addRule(`.monaco-editor .suggest-preview-text .ghost-text { color: ${foreground.toString()} !important; }`);\n    }\n    const background = theme.getColor(ghostTextBackground);\n    if (background) {\n        collector.addRule(`.monaco-editor .ghost-text-decoration { background-color: ${background.toString()}; }`);\n        collector.addRule(`.monaco-editor .ghost-text-decoration-preview { background-color: ${background.toString()}; }`);\n        collector.addRule(`.monaco-editor .suggest-preview-text .ghost-text { background-color: ${background.toString()}; }`);\n    }\n    const border = theme.getColor(ghostTextBorder);\n    if (border) {\n        collector.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${border}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { HoverForeignElementAnchor } from '../../hover/browser/hoverTypes.js';\nimport { commitInlineSuggestionAction, GhostTextController, ShowNextInlineSuggestionAction, ShowPreviousInlineSuggestionAction } from './ghostTextController.js';\nimport * as nls from '../../../../nls.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { IMenuService, MenuId, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nexport class InlineCompletionsHover {\n    constructor(owner, range, controller) {\n        this.owner = owner;\n        this.range = range;\n        this.controller = controller;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n    hasMultipleSuggestions() {\n        return this.controller.hasMultipleInlineCompletions();\n    }\n}\nlet InlineCompletionsHoverParticipant = class InlineCompletionsHoverParticipant {\n    constructor(_editor, _commandService, _menuService, _contextKeyService, _languageService, _openerService, accessibilityService) {\n        this._editor = _editor;\n        this._commandService = _commandService;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this.accessibilityService = accessibilityService;\n        this.hoverOrdinal = 3;\n    }\n    suggestHoverAnchor(mouseEvent) {\n        const controller = GhostTextController.get(this._editor);\n        if (!controller) {\n            return null;\n        }\n        const target = mouseEvent.target;\n        if (target.type === 8 /* CONTENT_VIEW_ZONE */) {\n            // handle the case where the mouse is over the view zone\n            const viewZoneData = target.detail;\n            if (controller.shouldShowHoverAtViewZone(viewZoneData.viewZoneId)) {\n                return new HoverForeignElementAnchor(1000, this, Range.fromPositions(viewZoneData.positionBefore || viewZoneData.position, viewZoneData.positionBefore || viewZoneData.position));\n            }\n        }\n        if (target.type === 7 /* CONTENT_EMPTY */) {\n            // handle the case where the mouse is over the empty portion of a line following ghost text\n            if (controller.shouldShowHoverAt(target.range)) {\n                return new HoverForeignElementAnchor(1000, this, target.range);\n            }\n        }\n        if (target.type === 6 /* CONTENT_TEXT */) {\n            // handle the case where the mouse is directly over ghost text\n            const mightBeForeignElement = target.detail.mightBeForeignElement;\n            if (mightBeForeignElement && controller.shouldShowHoverAt(target.range)) {\n                return new HoverForeignElementAnchor(1000, this, target.range);\n            }\n        }\n        return null;\n    }\n    computeSync(anchor, lineDecorations) {\n        const controller = GhostTextController.get(this._editor);\n        if (controller && controller.shouldShowHoverAt(anchor.range)) {\n            return [new InlineCompletionsHover(this, anchor.range, controller)];\n        }\n        return [];\n    }\n    renderHoverParts(context, hoverParts) {\n        const disposableStore = new DisposableStore();\n        const part = hoverParts[0];\n        if (this.accessibilityService.isScreenReaderOptimized()) {\n            this.renderScreenReaderText(context, part, disposableStore);\n        }\n        const menu = disposableStore.add(this._menuService.createMenu(MenuId.InlineCompletionsActions, this._contextKeyService));\n        const previousAction = context.statusBar.addAction({\n            label: nls.localize('showNextInlineSuggestion', \"Next\"),\n            commandId: ShowNextInlineSuggestionAction.ID,\n            run: () => this._commandService.executeCommand(ShowNextInlineSuggestionAction.ID)\n        });\n        const nextAction = context.statusBar.addAction({\n            label: nls.localize('showPreviousInlineSuggestion', \"Previous\"),\n            commandId: ShowPreviousInlineSuggestionAction.ID,\n            run: () => this._commandService.executeCommand(ShowPreviousInlineSuggestionAction.ID)\n        });\n        context.statusBar.addAction({\n            label: nls.localize('acceptInlineSuggestion', \"Accept\"),\n            commandId: commitInlineSuggestionAction.id,\n            run: () => this._commandService.executeCommand(commitInlineSuggestionAction.id)\n        });\n        const actions = [previousAction, nextAction];\n        for (const action of actions) {\n            action.setEnabled(false);\n        }\n        part.hasMultipleSuggestions().then(hasMore => {\n            for (const action of actions) {\n                action.setEnabled(hasMore);\n            }\n        });\n        for (const [_, group] of menu.getActions()) {\n            for (const action of group) {\n                if (action instanceof MenuItemAction) {\n                    context.statusBar.addAction({\n                        label: action.label,\n                        commandId: action.item.id,\n                        run: () => this._commandService.executeCommand(action.item.id)\n                    });\n                }\n            }\n        }\n        return disposableStore;\n    }\n    renderScreenReaderText(context, part, disposableStore) {\n        var _a, _b;\n        const $ = dom.$;\n        const markdownHoverElement = $('div.hover-row.markdown-hover');\n        const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n        const renderer = disposableStore.add(new MarkdownRenderer({ editor: this._editor }, this._languageService, this._openerService));\n        const render = (code) => {\n            disposableStore.add(renderer.onDidRenderAsync(() => {\n                hoverContentsElement.className = 'hover-contents code-hover-contents';\n                context.onContentsChanged();\n            }));\n            const inlineSuggestionAvailable = nls.localize('inlineSuggestionFollows', \"Suggestion:\");\n            const renderedContents = disposableStore.add(renderer.render(new MarkdownString().appendText(inlineSuggestionAvailable).appendCodeblock('text', code)));\n            hoverContentsElement.replaceChildren(renderedContents.element);\n        };\n        const ghostText = (_b = (_a = part.controller.activeModel) === null || _a === void 0 ? void 0 : _a.inlineCompletionsModel) === null || _b === void 0 ? void 0 : _b.ghostText;\n        if (ghostText) {\n            const lineText = this._editor.getModel().getLineContent(ghostText.lineNumber);\n            render(ghostText.renderForScreenReader(lineText));\n        }\n        context.fragment.appendChild(markdownHoverElement);\n    }\n};\nInlineCompletionsHoverParticipant = __decorate([\n    __param(1, ICommandService),\n    __param(2, IMenuService),\n    __param(3, IContextKeyService),\n    __param(4, ILanguageService),\n    __param(5, IOpenerService),\n    __param(6, IAccessibilityService)\n], InlineCompletionsHoverParticipant);\nexport { InlineCompletionsHoverParticipant };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ShiftCommand } from '../../../common/commands/shiftCommand.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService, LanguageConfigurationRegistry } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport * as indentUtils from './indentUtils.js';\nimport * as nls from '../../../../nls.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { normalizeIndentation } from '../../../common/core/indentation.js';\nexport function getReindentEditOperations(model, languageConfigurationService, startLineNumber, endLineNumber, inheritedIndent) {\n    if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n        // Model is empty\n        return [];\n    }\n    const indentationRules = languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).indentationRules;\n    if (!indentationRules) {\n        return [];\n    }\n    endLineNumber = Math.min(endLineNumber, model.getLineCount());\n    // Skip `unIndentedLinePattern` lines\n    while (startLineNumber <= endLineNumber) {\n        if (!indentationRules.unIndentedLinePattern) {\n            break;\n        }\n        let text = model.getLineContent(startLineNumber);\n        if (!indentationRules.unIndentedLinePattern.test(text)) {\n            break;\n        }\n        startLineNumber++;\n    }\n    if (startLineNumber > endLineNumber - 1) {\n        return [];\n    }\n    const { tabSize, indentSize, insertSpaces } = model.getOptions();\n    const shiftIndent = (indentation, count) => {\n        count = count || 1;\n        return ShiftCommand.shiftIndent(indentation, indentation.length + count, tabSize, indentSize, insertSpaces);\n    };\n    const unshiftIndent = (indentation, count) => {\n        count = count || 1;\n        return ShiftCommand.unshiftIndent(indentation, indentation.length + count, tabSize, indentSize, insertSpaces);\n    };\n    let indentEdits = [];\n    // indentation being passed to lines below\n    let globalIndent;\n    // Calculate indentation for the first line\n    // If there is no passed-in indentation, we use the indentation of the first line as base.\n    let currentLineText = model.getLineContent(startLineNumber);\n    let adjustedLineContent = currentLineText;\n    if (inheritedIndent !== undefined && inheritedIndent !== null) {\n        globalIndent = inheritedIndent;\n        let oldIndentation = strings.getLeadingWhitespace(currentLineText);\n        adjustedLineContent = globalIndent + currentLineText.substring(oldIndentation.length);\n        if (indentationRules.decreaseIndentPattern && indentationRules.decreaseIndentPattern.test(adjustedLineContent)) {\n            globalIndent = unshiftIndent(globalIndent);\n            adjustedLineContent = globalIndent + currentLineText.substring(oldIndentation.length);\n        }\n        if (currentLineText !== adjustedLineContent) {\n            indentEdits.push(EditOperation.replaceMove(new Selection(startLineNumber, 1, startLineNumber, oldIndentation.length + 1), normalizeIndentation(globalIndent, indentSize, insertSpaces)));\n        }\n    }\n    else {\n        globalIndent = strings.getLeadingWhitespace(currentLineText);\n    }\n    // idealIndentForNextLine doesn't equal globalIndent when there is a line matching `indentNextLinePattern`.\n    let idealIndentForNextLine = globalIndent;\n    if (indentationRules.increaseIndentPattern && indentationRules.increaseIndentPattern.test(adjustedLineContent)) {\n        idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\n        globalIndent = shiftIndent(globalIndent);\n    }\n    else if (indentationRules.indentNextLinePattern && indentationRules.indentNextLinePattern.test(adjustedLineContent)) {\n        idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\n    }\n    startLineNumber++;\n    // Calculate indentation adjustment for all following lines\n    for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n        let text = model.getLineContent(lineNumber);\n        let oldIndentation = strings.getLeadingWhitespace(text);\n        let adjustedLineContent = idealIndentForNextLine + text.substring(oldIndentation.length);\n        if (indentationRules.decreaseIndentPattern && indentationRules.decreaseIndentPattern.test(adjustedLineContent)) {\n            idealIndentForNextLine = unshiftIndent(idealIndentForNextLine);\n            globalIndent = unshiftIndent(globalIndent);\n        }\n        if (oldIndentation !== idealIndentForNextLine) {\n            indentEdits.push(EditOperation.replaceMove(new Selection(lineNumber, 1, lineNumber, oldIndentation.length + 1), normalizeIndentation(idealIndentForNextLine, indentSize, insertSpaces)));\n        }\n        // calculate idealIndentForNextLine\n        if (indentationRules.unIndentedLinePattern && indentationRules.unIndentedLinePattern.test(text)) {\n            // In reindent phase, if the line matches `unIndentedLinePattern` we inherit indentation from above lines\n            // but don't change globalIndent and idealIndentForNextLine.\n            continue;\n        }\n        else if (indentationRules.increaseIndentPattern && indentationRules.increaseIndentPattern.test(adjustedLineContent)) {\n            globalIndent = shiftIndent(globalIndent);\n            idealIndentForNextLine = globalIndent;\n        }\n        else if (indentationRules.indentNextLinePattern && indentationRules.indentNextLinePattern.test(adjustedLineContent)) {\n            idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\n        }\n        else {\n            idealIndentForNextLine = globalIndent;\n        }\n    }\n    return indentEdits;\n}\nexport class IndentationToSpacesAction extends EditorAction {\n    constructor() {\n        super({\n            id: IndentationToSpacesAction.ID,\n            label: nls.localize('indentationToSpaces', \"Convert Indentation to Spaces\"),\n            alias: 'Convert Indentation to Spaces',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        let model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        let modelOpts = model.getOptions();\n        let selection = editor.getSelection();\n        if (!selection) {\n            return;\n        }\n        const command = new IndentationToSpacesCommand(selection, modelOpts.tabSize);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n        model.updateOptions({\n            insertSpaces: true\n        });\n    }\n}\nIndentationToSpacesAction.ID = 'editor.action.indentationToSpaces';\nexport class IndentationToTabsAction extends EditorAction {\n    constructor() {\n        super({\n            id: IndentationToTabsAction.ID,\n            label: nls.localize('indentationToTabs', \"Convert Indentation to Tabs\"),\n            alias: 'Convert Indentation to Tabs',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        let model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        let modelOpts = model.getOptions();\n        let selection = editor.getSelection();\n        if (!selection) {\n            return;\n        }\n        const command = new IndentationToTabsCommand(selection, modelOpts.tabSize);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n        model.updateOptions({\n            insertSpaces: false\n        });\n    }\n}\nIndentationToTabsAction.ID = 'editor.action.indentationToTabs';\nexport class ChangeIndentationSizeAction extends EditorAction {\n    constructor(insertSpaces, opts) {\n        super(opts);\n        this.insertSpaces = insertSpaces;\n    }\n    run(accessor, editor) {\n        const quickInputService = accessor.get(IQuickInputService);\n        const modelService = accessor.get(IModelService);\n        let model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const creationOpts = modelService.getCreationOptions(model.getLanguageId(), model.uri, model.isForSimpleWidget);\n        const picks = [1, 2, 3, 4, 5, 6, 7, 8].map(n => ({\n            id: n.toString(),\n            label: n.toString(),\n            // add description for tabSize value set in the configuration\n            description: n === creationOpts.tabSize ? nls.localize('configuredTabSize', \"Configured Tab Size\") : undefined\n        }));\n        // auto focus the tabSize set for the current editor\n        const autoFocusIndex = Math.min(model.getOptions().tabSize - 1, 7);\n        setTimeout(() => {\n            quickInputService.pick(picks, { placeHolder: nls.localize({ key: 'selectTabWidth', comment: ['Tab corresponds to the tab key'] }, \"Select Tab Size for Current File\"), activeItem: picks[autoFocusIndex] }).then(pick => {\n                if (pick) {\n                    if (model && !model.isDisposed()) {\n                        model.updateOptions({\n                            tabSize: parseInt(pick.label, 10),\n                            insertSpaces: this.insertSpaces\n                        });\n                    }\n                }\n            });\n        }, 50 /* quick input is sensitive to being opened so soon after another */);\n    }\n}\nexport class IndentUsingTabs extends ChangeIndentationSizeAction {\n    constructor() {\n        super(false, {\n            id: IndentUsingTabs.ID,\n            label: nls.localize('indentUsingTabs', \"Indent Using Tabs\"),\n            alias: 'Indent Using Tabs',\n            precondition: undefined\n        });\n    }\n}\nIndentUsingTabs.ID = 'editor.action.indentUsingTabs';\nexport class IndentUsingSpaces extends ChangeIndentationSizeAction {\n    constructor() {\n        super(true, {\n            id: IndentUsingSpaces.ID,\n            label: nls.localize('indentUsingSpaces', \"Indent Using Spaces\"),\n            alias: 'Indent Using Spaces',\n            precondition: undefined\n        });\n    }\n}\nIndentUsingSpaces.ID = 'editor.action.indentUsingSpaces';\nexport class DetectIndentation extends EditorAction {\n    constructor() {\n        super({\n            id: DetectIndentation.ID,\n            label: nls.localize('detectIndentation', \"Detect Indentation from Content\"),\n            alias: 'Detect Indentation from Content',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const modelService = accessor.get(IModelService);\n        let model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const creationOpts = modelService.getCreationOptions(model.getLanguageId(), model.uri, model.isForSimpleWidget);\n        model.detectIndentation(creationOpts.insertSpaces, creationOpts.tabSize);\n    }\n}\nDetectIndentation.ID = 'editor.action.detectIndentation';\nexport class ReindentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.reindentlines',\n            label: nls.localize('editor.reindentlines', \"Reindent Lines\"),\n            alias: 'Reindent Lines',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        let model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        let edits = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n        if (edits.length > 0) {\n            editor.pushUndoStop();\n            editor.executeEdits(this.id, edits);\n            editor.pushUndoStop();\n        }\n    }\n}\nexport class ReindentSelectedLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.reindentselectedlines',\n            label: nls.localize('editor.reindentselectedlines', \"Reindent Selected Lines\"),\n            alias: 'Reindent Selected Lines',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        let model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        let selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        let edits = [];\n        for (let selection of selections) {\n            let startLineNumber = selection.startLineNumber;\n            let endLineNumber = selection.endLineNumber;\n            if (startLineNumber !== endLineNumber && selection.endColumn === 1) {\n                endLineNumber--;\n            }\n            if (startLineNumber === 1) {\n                if (startLineNumber === endLineNumber) {\n                    continue;\n                }\n            }\n            else {\n                startLineNumber--;\n            }\n            let editOperations = getReindentEditOperations(model, languageConfigurationService, startLineNumber, endLineNumber);\n            edits.push(...editOperations);\n        }\n        if (edits.length > 0) {\n            editor.pushUndoStop();\n            editor.executeEdits(this.id, edits);\n            editor.pushUndoStop();\n        }\n    }\n}\nexport class AutoIndentOnPasteCommand {\n    constructor(edits, initialSelection) {\n        this._initialSelection = initialSelection;\n        this._edits = [];\n        this._selectionId = null;\n        for (let edit of edits) {\n            if (edit.range && typeof edit.text === 'string') {\n                this._edits.push(edit);\n            }\n        }\n    }\n    getEditOperations(model, builder) {\n        for (let edit of this._edits) {\n            builder.addEditOperation(Range.lift(edit.range), edit.text);\n        }\n        let selectionIsSet = false;\n        if (Array.isArray(this._edits) && this._edits.length === 1 && this._initialSelection.isEmpty()) {\n            if (this._edits[0].range.startColumn === this._initialSelection.endColumn &&\n                this._edits[0].range.startLineNumber === this._initialSelection.endLineNumber) {\n                selectionIsSet = true;\n                this._selectionId = builder.trackSelection(this._initialSelection, true);\n            }\n            else if (this._edits[0].range.endColumn === this._initialSelection.startColumn &&\n                this._edits[0].range.endLineNumber === this._initialSelection.startLineNumber) {\n                selectionIsSet = true;\n                this._selectionId = builder.trackSelection(this._initialSelection, false);\n            }\n        }\n        if (!selectionIsSet) {\n            this._selectionId = builder.trackSelection(this._initialSelection);\n        }\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this._selectionId);\n    }\n}\nexport class AutoIndentOnPaste {\n    constructor(editor) {\n        this.callOnDispose = new DisposableStore();\n        this.callOnModel = new DisposableStore();\n        this.editor = editor;\n        this.callOnDispose.add(editor.onDidChangeConfiguration(() => this.update()));\n        this.callOnDispose.add(editor.onDidChangeModel(() => this.update()));\n        this.callOnDispose.add(editor.onDidChangeModelLanguage(() => this.update()));\n    }\n    update() {\n        // clean up\n        this.callOnModel.clear();\n        // we are disabled\n        if (this.editor.getOption(9 /* autoIndent */) < 4 /* Full */ || this.editor.getOption(48 /* formatOnPaste */)) {\n            return;\n        }\n        // no model\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        this.callOnModel.add(this.editor.onDidPaste(({ range }) => {\n            this.trigger(range);\n        }));\n    }\n    trigger(range) {\n        let selections = this.editor.getSelections();\n        if (selections === null || selections.length > 1) {\n            return;\n        }\n        const model = this.editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (!model.isCheapToTokenize(range.getStartPosition().lineNumber)) {\n            return;\n        }\n        const autoIndent = this.editor.getOption(9 /* autoIndent */);\n        const { tabSize, indentSize, insertSpaces } = model.getOptions();\n        let textEdits = [];\n        let indentConverter = {\n            shiftIndent: (indentation) => {\n                return ShiftCommand.shiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            },\n            unshiftIndent: (indentation) => {\n                return ShiftCommand.unshiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            }\n        };\n        let startLineNumber = range.startLineNumber;\n        while (startLineNumber <= range.endLineNumber) {\n            if (this.shouldIgnoreLine(model, startLineNumber)) {\n                startLineNumber++;\n                continue;\n            }\n            break;\n        }\n        if (startLineNumber > range.endLineNumber) {\n            return;\n        }\n        let firstLineText = model.getLineContent(startLineNumber);\n        if (!/\\S/.test(firstLineText.substring(0, range.startColumn - 1))) {\n            const indentOfFirstLine = LanguageConfigurationRegistry.getGoodIndentForLine(autoIndent, model, model.getLanguageId(), startLineNumber, indentConverter);\n            if (indentOfFirstLine !== null) {\n                let oldIndentation = strings.getLeadingWhitespace(firstLineText);\n                let newSpaceCnt = indentUtils.getSpaceCnt(indentOfFirstLine, tabSize);\n                let oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                if (newSpaceCnt !== oldSpaceCnt) {\n                    let newIndent = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                    textEdits.push({\n                        range: new Range(startLineNumber, 1, startLineNumber, oldIndentation.length + 1),\n                        text: newIndent\n                    });\n                    firstLineText = newIndent + firstLineText.substr(oldIndentation.length);\n                }\n                else {\n                    let indentMetadata = LanguageConfigurationRegistry.getIndentMetadata(model, startLineNumber);\n                    if (indentMetadata === 0 || indentMetadata === 8 /* UNINDENT_MASK */) {\n                        // we paste content into a line where only contains whitespaces\n                        // after pasting, the indentation of the first line is already correct\n                        // the first line doesn't match any indentation rule\n                        // then no-op.\n                        return;\n                    }\n                }\n            }\n        }\n        const firstLineNumber = startLineNumber;\n        // ignore empty or ignored lines\n        while (startLineNumber < range.endLineNumber) {\n            if (!/\\S/.test(model.getLineContent(startLineNumber + 1))) {\n                startLineNumber++;\n                continue;\n            }\n            break;\n        }\n        if (startLineNumber !== range.endLineNumber) {\n            let virtualModel = {\n                getLineTokens: (lineNumber) => {\n                    return model.getLineTokens(lineNumber);\n                },\n                getLanguageId: () => {\n                    return model.getLanguageId();\n                },\n                getLanguageIdAtPosition: (lineNumber, column) => {\n                    return model.getLanguageIdAtPosition(lineNumber, column);\n                },\n                getLineContent: (lineNumber) => {\n                    if (lineNumber === firstLineNumber) {\n                        return firstLineText;\n                    }\n                    else {\n                        return model.getLineContent(lineNumber);\n                    }\n                }\n            };\n            let indentOfSecondLine = LanguageConfigurationRegistry.getGoodIndentForLine(autoIndent, virtualModel, model.getLanguageId(), startLineNumber + 1, indentConverter);\n            if (indentOfSecondLine !== null) {\n                let newSpaceCntOfSecondLine = indentUtils.getSpaceCnt(indentOfSecondLine, tabSize);\n                let oldSpaceCntOfSecondLine = indentUtils.getSpaceCnt(strings.getLeadingWhitespace(model.getLineContent(startLineNumber + 1)), tabSize);\n                if (newSpaceCntOfSecondLine !== oldSpaceCntOfSecondLine) {\n                    let spaceCntOffset = newSpaceCntOfSecondLine - oldSpaceCntOfSecondLine;\n                    for (let i = startLineNumber + 1; i <= range.endLineNumber; i++) {\n                        let lineContent = model.getLineContent(i);\n                        let originalIndent = strings.getLeadingWhitespace(lineContent);\n                        let originalSpacesCnt = indentUtils.getSpaceCnt(originalIndent, tabSize);\n                        let newSpacesCnt = originalSpacesCnt + spaceCntOffset;\n                        let newIndent = indentUtils.generateIndent(newSpacesCnt, tabSize, insertSpaces);\n                        if (newIndent !== originalIndent) {\n                            textEdits.push({\n                                range: new Range(i, 1, i, originalIndent.length + 1),\n                                text: newIndent\n                            });\n                        }\n                    }\n                }\n            }\n        }\n        if (textEdits.length > 0) {\n            this.editor.pushUndoStop();\n            let cmd = new AutoIndentOnPasteCommand(textEdits, this.editor.getSelection());\n            this.editor.executeCommand('autoIndentOnPaste', cmd);\n            this.editor.pushUndoStop();\n        }\n    }\n    shouldIgnoreLine(model, lineNumber) {\n        model.forceTokenization(lineNumber);\n        let nonWhitespaceColumn = model.getLineFirstNonWhitespaceColumn(lineNumber);\n        if (nonWhitespaceColumn === 0) {\n            return true;\n        }\n        let tokens = model.getLineTokens(lineNumber);\n        if (tokens.getCount() > 0) {\n            let firstNonWhitespaceTokenIndex = tokens.findTokenIndexAtOffset(nonWhitespaceColumn);\n            if (firstNonWhitespaceTokenIndex >= 0 && tokens.getStandardTokenType(firstNonWhitespaceTokenIndex) === 1 /* Comment */) {\n                return true;\n            }\n        }\n        return false;\n    }\n    dispose() {\n        this.callOnDispose.dispose();\n        this.callOnModel.dispose();\n    }\n}\nAutoIndentOnPaste.ID = 'editor.contrib.autoIndentOnPaste';\nfunction getIndentationEditOperations(model, builder, tabSize, tabsToSpaces) {\n    if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n        // Model is empty\n        return;\n    }\n    let spaces = '';\n    for (let i = 0; i < tabSize; i++) {\n        spaces += ' ';\n    }\n    let spacesRegExp = new RegExp(spaces, 'gi');\n    for (let lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\n        let lastIndentationColumn = model.getLineFirstNonWhitespaceColumn(lineNumber);\n        if (lastIndentationColumn === 0) {\n            lastIndentationColumn = model.getLineMaxColumn(lineNumber);\n        }\n        if (lastIndentationColumn === 1) {\n            continue;\n        }\n        const originalIndentationRange = new Range(lineNumber, 1, lineNumber, lastIndentationColumn);\n        const originalIndentation = model.getValueInRange(originalIndentationRange);\n        const newIndentation = (tabsToSpaces\n            ? originalIndentation.replace(/\\t/ig, spaces)\n            : originalIndentation.replace(spacesRegExp, '\\t'));\n        builder.addEditOperation(originalIndentationRange, newIndentation);\n    }\n}\nexport class IndentationToSpacesCommand {\n    constructor(selection, tabSize) {\n        this.selection = selection;\n        this.tabSize = tabSize;\n        this.selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        this.selectionId = builder.trackSelection(this.selection);\n        getIndentationEditOperations(model, builder, this.tabSize, true);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this.selectionId);\n    }\n}\nexport class IndentationToTabsCommand {\n    constructor(selection, tabSize) {\n        this.selection = selection;\n        this.tabSize = tabSize;\n        this.selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        this.selectionId = builder.trackSelection(this.selection);\n        getIndentationEditOperations(model, builder, this.tabSize, false);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this.selectionId);\n    }\n}\nregisterEditorContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\nregisterEditorAction(IndentationToSpacesAction);\nregisterEditorAction(IndentationToTabsAction);\nregisterEditorAction(IndentUsingTabs);\nregisterEditorAction(IndentUsingSpaces);\nregisterEditorAction(DetectIndentation);\nregisterEditorAction(ReindentLinesAction);\nregisterEditorAction(ReindentSelectedLinesAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function getSpaceCnt(str, tabSize) {\n    let spacesCnt = 0;\n    for (let i = 0; i < str.length; i++) {\n        if (str.charAt(i) === '\\t') {\n            spacesCnt += tabSize;\n        }\n        else {\n            spacesCnt++;\n        }\n    }\n    return spacesCnt;\n}\nexport function generateIndent(spacesCnt, tabSize, insertSpaces) {\n    spacesCnt = spacesCnt < 0 ? 0 : spacesCnt;\n    let result = '';\n    if (!insertSpaces) {\n        let tabsCnt = Math.floor(spacesCnt / tabSize);\n        spacesCnt = spacesCnt % tabSize;\n        for (let i = 0; i < tabsCnt; i++) {\n            result += '\\t';\n        }\n    }\n    for (let i = 0; i < spacesCnt; i++) {\n        result += ' ';\n    }\n    return result;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { InlayHintsController } from './inlayHintsController.js';\nimport { InlayHintsHover } from './inlayHintsHover.js';\nregisterEditorContribution(InlayHintsController.ID, InlayHintsController);\nHoverParticipantRegistry.register(InlayHintsHover);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { Range } from '../../../common/core/range.js';\nimport * as languages from '../../../common/languages.js';\nimport { InjectedTextCursorStops } from '../../../common/model.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { InlayHintAnchor, InlayHintsFragments } from './inlayHints.js';\nimport { goToDefinitionWithLocation, showGoToContextMenu } from './inlayHintsLocations.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator, IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport * as colors from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\n// --- hint caching service (per session)\nclass InlayHintsCache {\n    constructor() {\n        this._entries = new LRUCache(50);\n    }\n    get(model) {\n        const key = InlayHintsCache._key(model);\n        return this._entries.get(key);\n    }\n    set(model, value) {\n        const key = InlayHintsCache._key(model);\n        this._entries.set(key, value);\n    }\n    static _key(model) {\n        return `${model.uri.toString()}/${model.getVersionId()}`;\n    }\n}\nconst IInlayHintsCache = createDecorator('IInlayHintsCache');\nregisterSingleton(IInlayHintsCache, InlayHintsCache, true);\n// --- rendered label\nexport class RenderedInlayHintLabelPart {\n    constructor(item, index) {\n        this.item = item;\n        this.index = index;\n    }\n    get part() {\n        const label = this.item.hint.label;\n        if (typeof label === 'string') {\n            return { label };\n        }\n        else {\n            return label[this.index];\n        }\n    }\n}\nclass ActiveInlayHintInfo {\n    constructor(part, hasTriggerModifier) {\n        this.part = part;\n        this.hasTriggerModifier = hasTriggerModifier;\n    }\n}\n// --- controller\nlet InlayHintsController = class InlayHintsController {\n    constructor(_editor, _languageFeaturesService, _featureDebounce, _inlayHintsCache, _commandService, _notificationService, _instaService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._inlayHintsCache = _inlayHintsCache;\n        this._commandService = _commandService;\n        this._notificationService = _notificationService;\n        this._instaService = _instaService;\n        this._disposables = new DisposableStore();\n        this._sessionDisposables = new DisposableStore();\n        this._decorationsMetadata = new Map();\n        this._ruleFactory = new DynamicCssRules(this._editor);\n        this._debounceInfo = _featureDebounce.for(_languageFeaturesService.inlayHintsProvider, 'InlayHint', { min: 25 });\n        this._disposables.add(_languageFeaturesService.inlayHintsProvider.onDidChange(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModel(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\n        this._disposables.add(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(127 /* inlayHints */)) {\n                this._update();\n            }\n        }));\n        this._update();\n    }\n    static get(editor) {\n        var _a;\n        return (_a = editor.getContribution(InlayHintsController.ID)) !== null && _a !== void 0 ? _a : undefined;\n    }\n    dispose() {\n        this._sessionDisposables.dispose();\n        this._removeAllDecorations();\n        this._disposables.dispose();\n    }\n    _update() {\n        this._sessionDisposables.clear();\n        this._removeAllDecorations();\n        if (!this._editor.getOption(127 /* inlayHints */).enabled) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (!model || !this._languageFeaturesService.inlayHintsProvider.has(model)) {\n            return;\n        }\n        // iff possible, quickly update from cache\n        const cached = this._inlayHintsCache.get(model);\n        if (cached) {\n            this._updateHintsDecorators([model.getFullModelRange()], cached);\n        }\n        this._sessionDisposables.add(toDisposable(() => {\n            // cache items when switching files etc\n            if (!model.isDisposed()) {\n                this._cacheHintsForFastRestore(model);\n            }\n        }));\n        let cts;\n        let watchedProviders = new Set();\n        const scheduler = new RunOnceScheduler(() => __awaiter(this, void 0, void 0, function* () {\n            const t1 = Date.now();\n            cts === null || cts === void 0 ? void 0 : cts.dispose(true);\n            cts = new CancellationTokenSource();\n            const listener = model.onWillDispose(() => cts === null || cts === void 0 ? void 0 : cts.cancel());\n            try {\n                const myToken = cts.token;\n                const inlayHints = yield InlayHintsFragments.create(this._languageFeaturesService.inlayHintsProvider, model, this._getHintsRanges(), myToken);\n                scheduler.delay = this._debounceInfo.update(model, Date.now() - t1);\n                if (myToken.isCancellationRequested) {\n                    inlayHints.dispose();\n                    return;\n                }\n                // listen to provider changes\n                for (const provider of inlayHints.provider) {\n                    if (typeof provider.onDidChangeInlayHints === 'function' && !watchedProviders.has(provider)) {\n                        watchedProviders.add(provider);\n                        this._sessionDisposables.add(provider.onDidChangeInlayHints(() => {\n                            if (!scheduler.isScheduled()) { // ignore event when request is already scheduled\n                                scheduler.schedule();\n                            }\n                        }));\n                    }\n                }\n                this._sessionDisposables.add(inlayHints);\n                this._updateHintsDecorators(inlayHints.ranges, inlayHints.items);\n                this._cacheHintsForFastRestore(model);\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                cts.dispose();\n                listener.dispose();\n            }\n        }), this._debounceInfo.get(model));\n        this._sessionDisposables.add(scheduler);\n        this._sessionDisposables.add(toDisposable(() => cts === null || cts === void 0 ? void 0 : cts.dispose(true)));\n        scheduler.schedule(0);\n        this._sessionDisposables.add(this._editor.onDidScrollChange((e) => {\n            // update when scroll position changes\n            // uses scrollTopChanged has weak heuristic to differenatiate between scrolling due to\n            // typing or due to \"actual\" scrolling\n            if (e.scrollTopChanged || !scheduler.isScheduled()) {\n                scheduler.schedule();\n            }\n        }));\n        this._sessionDisposables.add(this._editor.onDidChangeModelContent((e) => {\n            // update less aggressive when typing\n            const delay = Math.max(scheduler.delay, 1250);\n            scheduler.schedule(delay);\n        }));\n        // mouse gestures\n        this._sessionDisposables.add(this._installLinkGesture());\n        this._sessionDisposables.add(this._installDblClickGesture());\n        this._sessionDisposables.add(this._installContextMenu());\n    }\n    _installLinkGesture() {\n        const store = new DisposableStore();\n        const gesture = store.add(new ClickLinkGesture(this._editor));\n        // let removeHighlight = () => { };\n        const sessionStore = new DisposableStore();\n        store.add(sessionStore);\n        store.add(gesture.onMouseMoveOrRelevantKeyDown(e => {\n            const [mouseEvent] = e;\n            const labelPart = this._getInlayHintLabelPart(mouseEvent);\n            const model = this._editor.getModel();\n            if (!labelPart || !model) {\n                sessionStore.clear();\n                return;\n            }\n            // resolve the item\n            const cts = new CancellationTokenSource();\n            sessionStore.add(toDisposable(() => cts.dispose(true)));\n            labelPart.item.resolve(cts.token);\n            // render link => when the modifier is pressed and when there is a command or location\n            this._activeInlayHintPart = labelPart.part.command || labelPart.part.location\n                ? new ActiveInlayHintInfo(labelPart, mouseEvent.hasTriggerModifier)\n                : undefined;\n            const lineNumber = labelPart.item.hint.position.lineNumber;\n            const range = new Range(lineNumber, 1, lineNumber, model.getLineMaxColumn(lineNumber));\n            const lineHints = new Set();\n            for (const data of this._decorationsMetadata.values()) {\n                if (range.containsRange(data.item.anchor.range)) {\n                    lineHints.add(data.item);\n                }\n            }\n            this._updateHintsDecorators([range], Array.from(lineHints));\n            sessionStore.add(toDisposable(() => {\n                this._activeInlayHintPart = undefined;\n                this._updateHintsDecorators([range], Array.from(lineHints));\n            }));\n        }));\n        store.add(gesture.onCancel(() => sessionStore.clear()));\n        store.add(gesture.onExecute((e) => __awaiter(this, void 0, void 0, function* () {\n            const label = this._getInlayHintLabelPart(e);\n            if (label) {\n                const part = label.part;\n                if (part.location) {\n                    // location -> execute go to def\n                    this._instaService.invokeFunction(goToDefinitionWithLocation, e, this._editor, part.location);\n                }\n                else if (languages.Command.is(part.command)) {\n                    // command -> execute it\n                    yield this._invokeCommand(part.command, label.item);\n                }\n            }\n        })));\n        return store;\n    }\n    _installDblClickGesture() {\n        return this._editor.onMouseUp((e) => __awaiter(this, void 0, void 0, function* () {\n            if (e.event.detail !== 2) {\n                return;\n            }\n            const part = this._getInlayHintLabelPart(e);\n            if (!part) {\n                return;\n            }\n            e.event.preventDefault();\n            yield part.item.resolve(CancellationToken.None);\n            if (part.item.hint.command) {\n                yield this._invokeCommand(part.item.hint.command, part.item);\n            }\n        }));\n    }\n    _installContextMenu() {\n        return this._editor.onContextMenu((e) => __awaiter(this, void 0, void 0, function* () {\n            if (!(e.event.target instanceof HTMLElement)) {\n                return;\n            }\n            const part = this._getInlayHintLabelPart(e);\n            if (part) {\n                yield this._instaService.invokeFunction(showGoToContextMenu, this._editor, e.event.target, part);\n            }\n        }));\n    }\n    _getInlayHintLabelPart(e) {\n        var _a;\n        if (e.target.type !== 6 /* CONTENT_TEXT */) {\n            return undefined;\n        }\n        const options = (_a = e.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options;\n        if (options instanceof ModelDecorationInjectedTextOptions && (options === null || options === void 0 ? void 0 : options.attachedData) instanceof RenderedInlayHintLabelPart) {\n            return options.attachedData;\n        }\n        return undefined;\n    }\n    _invokeCommand(command, item) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._commandService.executeCommand(command.id, ...((_a = command.arguments) !== null && _a !== void 0 ? _a : []));\n            }\n            catch (err) {\n                this._notificationService.notify({\n                    severity: Severity.Error,\n                    source: item.provider.displayName,\n                    message: err\n                });\n            }\n        });\n    }\n    _cacheHintsForFastRestore(model) {\n        const items = new Map();\n        for (const [id, obj] of this._decorationsMetadata) {\n            if (items.has(obj.item)) {\n                // an inlay item can be rendered as multiple decorations\n                // but they will all uses the same range\n                continue;\n            }\n            let value = obj.item;\n            const range = model.getDecorationRange(id);\n            if (range) {\n                // update range with whatever the editor has tweaked it to\n                const anchor = new InlayHintAnchor(range, obj.item.anchor.direction);\n                value = obj.item.with({ anchor });\n            }\n            items.set(obj.item, value);\n        }\n        this._inlayHintsCache.set(model, Array.from(items.values()));\n    }\n    _getHintsRanges() {\n        const extra = 30;\n        const model = this._editor.getModel();\n        const visibleRanges = this._editor.getVisibleRangesPlusViewportAboveBelow();\n        const result = [];\n        for (const range of visibleRanges.sort(Range.compareRangesUsingStarts)) {\n            const extendedRange = model.validateRange(new Range(range.startLineNumber - extra, range.startColumn, range.endLineNumber + extra, range.endColumn));\n            if (result.length === 0 || !Range.areIntersectingOrTouching(result[result.length - 1], extendedRange)) {\n                result.push(extendedRange);\n            }\n            else {\n                result[result.length - 1] = Range.plusRange(result[result.length - 1], extendedRange);\n            }\n        }\n        return result;\n    }\n    _updateHintsDecorators(ranges, items) {\n        var _a, _b;\n        // utils to collect/create injected text decorations\n        const newDecorationsData = [];\n        const addInjectedText = (item, ref, content, cursorStops, attachedData) => {\n            newDecorationsData.push({\n                item,\n                classNameRef: ref,\n                decoration: {\n                    range: item.anchor.range,\n                    options: {\n                        // className: \"rangeHighlight\", // DEBUG highlight to see to what range a hint is attached\n                        description: 'InlayHint',\n                        showIfCollapsed: item.anchor.range.isEmpty(),\n                        collapseOnReplaceEdit: !item.anchor.range.isEmpty(),\n                        stickiness: 0 /* AlwaysGrowsWhenTypingAtEdges */,\n                        [item.anchor.direction]: {\n                            content,\n                            inlineClassNameAffectsLetterSpacing: true,\n                            inlineClassName: ref.className,\n                            cursorStops,\n                            attachedData\n                        }\n                    }\n                }\n            });\n        };\n        const addInjectedWhitespace = (item, isLast) => {\n            const marginRule = this._ruleFactory.createClassNameRef({\n                width: `${(fontSize / 3) | 0}px`,\n                display: 'inline-block'\n            });\n            addInjectedText(item, marginRule, '\\u200a', isLast ? InjectedTextCursorStops.Right : InjectedTextCursorStops.None);\n        };\n        //\n        const { fontSize, fontFamily } = this._getLayoutInfo();\n        const fontFamilyVar = '--code-editorInlayHintsFontFamily';\n        this._editor.getContainerDomNode().style.setProperty(fontFamilyVar, fontFamily);\n        for (const item of items) {\n            // whitespace leading the actual label\n            if (item.hint.paddingLeft) {\n                addInjectedWhitespace(item, false);\n            }\n            // the label with its parts\n            const parts = typeof item.hint.label === 'string'\n                ? [{ label: item.hint.label }]\n                : item.hint.label;\n            for (let i = 0; i < parts.length; i++) {\n                const part = parts[i];\n                const isFirst = i === 0;\n                const isLast = i === parts.length - 1;\n                const cssProperties = {\n                    fontSize: `${fontSize}px`,\n                    fontFamily: `var(${fontFamilyVar}), ${EDITOR_FONT_DEFAULTS.fontFamily}`,\n                    verticalAlign: 'middle',\n                };\n                if (item.hint.command) {\n                    // user pointer whenever an inlay hint has a command\n                    cssProperties.cursor = 'pointer';\n                }\n                this._fillInColors(cssProperties, item.hint);\n                if ((part.command || part.location) && ((_a = this._activeInlayHintPart) === null || _a === void 0 ? void 0 : _a.part.item) === item && this._activeInlayHintPart.part.index === i) {\n                    // active link!\n                    cssProperties.textDecoration = 'underline';\n                    if (this._activeInlayHintPart.hasTriggerModifier) {\n                        cssProperties.color = themeColorFromId(colors.editorActiveLinkForeground);\n                        cssProperties.cursor = 'pointer';\n                    }\n                }\n                if (isFirst && isLast) {\n                    // only element\n                    cssProperties.padding = `1px ${Math.max(1, fontSize / 4) | 0}px`;\n                    cssProperties.borderRadius = `${(fontSize / 4) | 0}px`;\n                }\n                else if (isFirst) {\n                    // first element\n                    cssProperties.padding = `1px 0 1px ${Math.max(1, fontSize / 4) | 0}px`;\n                    cssProperties.borderRadius = `${(fontSize / 4) | 0}px 0 0 ${(fontSize / 4) | 0}px`;\n                }\n                else if (isLast) {\n                    // last element\n                    cssProperties.padding = `1px ${Math.max(1, fontSize / 4) | 0}px 1px 0`;\n                    cssProperties.borderRadius = `0 ${(fontSize / 4) | 0}px ${(fontSize / 4) | 0}px 0`;\n                }\n                else {\n                    cssProperties.padding = `1px 0 1px 0`;\n                }\n                addInjectedText(item, this._ruleFactory.createClassNameRef(cssProperties), fixSpace(part.label), isLast && !item.hint.paddingRight ? InjectedTextCursorStops.Right : InjectedTextCursorStops.None, new RenderedInlayHintLabelPart(item, i));\n            }\n            // whitespace trailing the actual label\n            if (item.hint.paddingRight) {\n                addInjectedWhitespace(item, true);\n            }\n            if (newDecorationsData.length > InlayHintsController._MAX_DECORATORS) {\n                break;\n            }\n        }\n        // collect all decoration ids that are affected by the ranges\n        // and only update those decorations\n        const decorationIdsToReplace = [];\n        for (const range of ranges) {\n            for (const { id } of (_b = this._editor.getDecorationsInRange(range)) !== null && _b !== void 0 ? _b : []) {\n                const metadata = this._decorationsMetadata.get(id);\n                if (metadata) {\n                    decorationIdsToReplace.push(id);\n                    metadata.classNameRef.dispose();\n                    this._decorationsMetadata.delete(id);\n                }\n            }\n        }\n        const newDecorationIds = this._editor.deltaDecorations(decorationIdsToReplace, newDecorationsData.map(d => d.decoration));\n        for (let i = 0; i < newDecorationIds.length; i++) {\n            const data = newDecorationsData[i];\n            this._decorationsMetadata.set(newDecorationIds[i], { item: data.item, classNameRef: data.classNameRef });\n        }\n    }\n    _fillInColors(props, hint) {\n        if (hint.kind === languages.InlayHintKind.Parameter) {\n            props.backgroundColor = themeColorFromId(colors.editorInlayHintParameterBackground);\n            props.color = themeColorFromId(colors.editorInlayHintParameterForeground);\n        }\n        else if (hint.kind === languages.InlayHintKind.Type) {\n            props.backgroundColor = themeColorFromId(colors.editorInlayHintTypeBackground);\n            props.color = themeColorFromId(colors.editorInlayHintTypeForeground);\n        }\n        else {\n            props.backgroundColor = themeColorFromId(colors.editorInlayHintBackground);\n            props.color = themeColorFromId(colors.editorInlayHintForeground);\n        }\n    }\n    _getLayoutInfo() {\n        const options = this._editor.getOption(127 /* inlayHints */);\n        const editorFontSize = this._editor.getOption(46 /* fontSize */);\n        let fontSize = options.fontSize;\n        if (!fontSize || fontSize < 5 || fontSize > editorFontSize) {\n            fontSize = (editorFontSize * .9) | 0;\n        }\n        const fontFamily = options.fontFamily || this._editor.getOption(43 /* fontFamily */);\n        return { fontSize, fontFamily };\n    }\n    _removeAllDecorations() {\n        this._editor.deltaDecorations(Array.from(this._decorationsMetadata.keys()), []);\n        for (let obj of this._decorationsMetadata.values()) {\n            obj.classNameRef.dispose();\n        }\n        this._decorationsMetadata.clear();\n    }\n};\nInlayHintsController.ID = 'editor.contrib.InlayHints';\nInlayHintsController._MAX_DECORATORS = 1500;\nInlayHintsController = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageFeatureDebounceService),\n    __param(3, IInlayHintsCache),\n    __param(4, ICommandService),\n    __param(5, INotificationService),\n    __param(6, IInstantiationService)\n], InlayHintsController);\nexport { InlayHintsController };\n// Prevents the view from potentially visible whitespace\nfunction fixSpace(str) {\n    const noBreakWhitespace = '\\xa0';\n    return str.replace(/[ \\t]/g, noBreakWhitespace);\n}\nCommandsRegistry.registerCommand('_executeInlayHintProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, range] = args;\n    assertType(URI.isUri(uri));\n    assertType(Range.isIRange(range));\n    const { inlayHintsProvider } = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const model = yield InlayHintsFragments.create(inlayHintsProvider, ref.object.textEditorModel, [Range.lift(range)], CancellationToken.None);\n        const result = model.items.map(i => i.hint);\n        setTimeout(() => model.dispose(), 0); // dispose after sending to ext host\n        return result;\n    }\n    finally {\n        ref.dispose();\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { URI } from '../../../../base/common/uri.js';\nexport class InlayHintAnchor {\n    constructor(range, direction) {\n        this.range = range;\n        this.direction = direction;\n    }\n}\nexport class InlayHintItem {\n    constructor(hint, anchor, provider) {\n        this.hint = hint;\n        this.anchor = anchor;\n        this.provider = provider;\n        this._isResolved = false;\n    }\n    with(delta) {\n        const result = new InlayHintItem(this.hint, delta.anchor, this.provider);\n        result._isResolved = this._isResolved;\n        result._currentResolve = this._currentResolve;\n        return result;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.provider.resolveInlayHint !== 'function') {\n                return;\n            }\n            if (this._currentResolve) {\n                // wait for an active resolve operation and try again\n                // when that's done.\n                yield this._currentResolve;\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                return this.resolve(token);\n            }\n            if (!this._isResolved) {\n                this._currentResolve = this._doResolve(token)\n                    .finally(() => this._currentResolve = undefined);\n            }\n            yield this._currentResolve;\n        });\n    }\n    _doResolve(token) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const newHint = yield Promise.resolve(this.provider.resolveInlayHint(this.hint, token));\n                this.hint.tooltip = (_a = newHint === null || newHint === void 0 ? void 0 : newHint.tooltip) !== null && _a !== void 0 ? _a : this.hint.tooltip;\n                this.hint.label = (_b = newHint === null || newHint === void 0 ? void 0 : newHint.label) !== null && _b !== void 0 ? _b : this.hint.label;\n                this._isResolved = true;\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n                this._isResolved = false;\n            }\n        });\n    }\n}\nexport class InlayHintsFragments {\n    constructor(ranges, data, model) {\n        this._disposables = new DisposableStore();\n        this.ranges = ranges;\n        this.provider = new Set();\n        const items = [];\n        for (const [list, provider] of data) {\n            this._disposables.add(list);\n            this.provider.add(provider);\n            for (const hint of list.hints) {\n                // compute the range to which the item should be attached to\n                let position = model.validatePosition(hint.position);\n                let direction = 'before';\n                const wordRange = InlayHintsFragments._getRangeAtPosition(model, position);\n                let range;\n                if (wordRange.getStartPosition().isBefore(position)) {\n                    range = Range.fromPositions(wordRange.getStartPosition(), position);\n                    direction = 'after';\n                }\n                else {\n                    range = Range.fromPositions(position, wordRange.getEndPosition());\n                    direction = 'before';\n                }\n                items.push(new InlayHintItem(hint, new InlayHintAnchor(range, direction), provider));\n            }\n        }\n        this.items = items.sort((a, b) => Position.compare(a.hint.position, b.hint.position));\n    }\n    static create(registry, model, ranges, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = [];\n            const promises = registry.ordered(model).reverse().map(provider => ranges.map((range) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const result = yield provider.provideInlayHints(model, range, token);\n                    if (result === null || result === void 0 ? void 0 : result.hints.length) {\n                        data.push([result, provider]);\n                    }\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n            })));\n            yield Promise.all(promises.flat());\n            if (token.isCancellationRequested || model.isDisposed()) {\n                throw new CancellationError();\n            }\n            return new InlayHintsFragments(ranges, data, model);\n        });\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    static _getRangeAtPosition(model, position) {\n        const line = position.lineNumber;\n        const word = model.getWordAtPosition(position);\n        if (word) {\n            // always prefer the word range\n            return new Range(line, word.startColumn, line, word.endColumn);\n        }\n        model.tokenizeIfCheap(line);\n        const tokens = model.getLineTokens(line);\n        const offset = position.column - 1;\n        const idx = tokens.findTokenIndexAtOffset(offset);\n        let start = tokens.getStartOffset(idx);\n        let end = tokens.getEndOffset(idx);\n        if (end - start === 1) {\n            // single character token, when at its end try leading/trailing token instead\n            if (start === offset && idx > 1) {\n                // leading token\n                start = tokens.getStartOffset(idx - 1);\n                end = tokens.getEndOffset(idx - 1);\n            }\n            else if (end === offset && idx < tokens.getCount() - 1) {\n                // trailing token\n                start = tokens.getStartOffset(idx + 1);\n                end = tokens.getEndOffset(idx + 1);\n            }\n        }\n        return new Range(line, start + 1, line, end + 1);\n    }\n}\nexport function asCommandLink(command) {\n    return URI.from({\n        scheme: Schemas.command,\n        path: command.id,\n        query: command.arguments && encodeURIComponent(JSON.stringify(command.arguments))\n    }).toString();\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Action, Separator } from '../../../../base/common/actions.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { EditorExtensionsRegistry } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { DefinitionAction, SymbolNavigationAction, SymbolNavigationAnchor } from '../../gotoSymbol/browser/goToCommands.js';\nimport { PeekContext } from '../../peekView/browser/peekView.js';\nimport { isIMenuItem, MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nexport function showGoToContextMenu(accessor, editor, anchor, part) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const resolverService = accessor.get(ITextModelService);\n        const contextMenuService = accessor.get(IContextMenuService);\n        const commandService = accessor.get(ICommandService);\n        const instaService = accessor.get(IInstantiationService);\n        const notificationService = accessor.get(INotificationService);\n        yield part.item.resolve(CancellationToken.None);\n        if (!part.part.location) {\n            return;\n        }\n        const location = part.part.location;\n        const menuActions = [];\n        // from all registered (not active) context menu actions select those\n        // that are a symbol navigation action\n        const filter = new Set(MenuRegistry.getMenuItems(MenuId.EditorContext)\n            .map(item => isIMenuItem(item) ? item.command.id : ''));\n        for (const delegate of EditorExtensionsRegistry.getEditorActions()) {\n            if (delegate instanceof SymbolNavigationAction && filter.has(delegate.id)) {\n                menuActions.push(new Action(delegate.id, delegate.label, undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                    const ref = yield resolverService.createModelReference(location.uri);\n                    try {\n                        yield instaService.invokeFunction(delegate.run.bind(delegate), editor, new SymbolNavigationAnchor(ref.object.textEditorModel, Range.getStartPosition(location.range)));\n                    }\n                    finally {\n                        ref.dispose();\n                    }\n                })));\n            }\n        }\n        if (part.part.command) {\n            const { command } = part.part;\n            menuActions.push(new Separator());\n            menuActions.push(new Action(command.id, command.title, undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                var _b;\n                try {\n                    yield commandService.executeCommand(command.id, ...((_b = command.arguments) !== null && _b !== void 0 ? _b : []));\n                }\n                catch (err) {\n                    notificationService.notify({\n                        severity: Severity.Error,\n                        source: part.item.provider.displayName,\n                        message: err\n                    });\n                }\n            })));\n        }\n        // show context menu\n        const useShadowDOM = editor.getOption(115 /* useShadowDOM */);\n        contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? (_a = editor.getDomNode()) !== null && _a !== void 0 ? _a : undefined : undefined,\n            getAnchor: () => {\n                const box = dom.getDomNodePagePosition(anchor);\n                return { x: box.left, y: box.top + box.height + 8 };\n            },\n            getActions: () => menuActions,\n            onHide: () => {\n                editor.focus();\n            },\n            autoSelectFirstItem: true,\n        });\n    });\n}\nexport function goToDefinitionWithLocation(accessor, event, editor, location) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const resolverService = accessor.get(ITextModelService);\n        const ref = yield resolverService.createModelReference(location.uri);\n        yield editor.invokeWithinContext((accessor) => __awaiter(this, void 0, void 0, function* () {\n            const openToSide = event.hasSideBySideModifier;\n            const contextKeyService = accessor.get(IContextKeyService);\n            const isInPeek = PeekContext.inPeekEditor.getValue(contextKeyService);\n            const canPeek = !openToSide && editor.getOption(78 /* definitionLinkOpensInPeek */) && !isInPeek;\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { alias: '', label: '', id: '', precondition: undefined });\n            return action.run(accessor, editor, { model: ref.object.textEditorModel, position: Range.getStartPosition(location.range) });\n        }));\n        ref.dispose();\n    });\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { isEmptyMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Position } from '../../../common/core/position.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\nimport { HoverForeignElementAnchor } from '../../hover/browser/hoverTypes.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { getHover } from '../../hover/browser/getHover.js';\nimport { MarkdownHover, MarkdownHoverParticipant } from '../../hover/browser/markdownHoverParticipant.js';\nimport { RenderedInlayHintLabelPart, InlayHintsController } from './inlayHintsController.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { localize } from '../../../../nls.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { asCommandLink } from './inlayHints.js';\nclass InlayHintsHoverAnchor extends HoverForeignElementAnchor {\n    constructor(part, owner) {\n        super(10, owner, part.item.anchor.range);\n        this.part = part;\n    }\n}\nlet InlayHintsHover = class InlayHintsHover extends MarkdownHoverParticipant {\n    constructor(editor, languageService, openerService, configurationService, _resolverService, languageFeaturesService) {\n        super(editor, languageService, openerService, configurationService, languageFeaturesService);\n        this._resolverService = _resolverService;\n        this.hoverOrdinal = 6;\n    }\n    suggestHoverAnchor(mouseEvent) {\n        var _a;\n        const controller = InlayHintsController.get(this._editor);\n        if (!controller) {\n            return null;\n        }\n        if (mouseEvent.target.type !== 6 /* CONTENT_TEXT */) {\n            return null;\n        }\n        const options = (_a = mouseEvent.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options;\n        if (!(options instanceof ModelDecorationInjectedTextOptions && options.attachedData instanceof RenderedInlayHintLabelPart)) {\n            return null;\n        }\n        return new InlayHintsHoverAnchor(options.attachedData, this);\n    }\n    computeSync() {\n        return [];\n    }\n    computeAsync(anchor, _lineDecorations, token) {\n        if (!(anchor instanceof InlayHintsHoverAnchor)) {\n            return AsyncIterableObject.EMPTY;\n        }\n        return new AsyncIterableObject((executor) => __awaiter(this, void 0, void 0, function* () {\n            var e_1, _a;\n            const { part } = anchor;\n            yield part.item.resolve(token);\n            if (token.isCancellationRequested) {\n                return;\n            }\n            // (1) Inlay Tooltip\n            let itemTooltip;\n            if (typeof part.item.hint.tooltip === 'string') {\n                itemTooltip = new MarkdownString().appendText(part.item.hint.tooltip);\n            }\n            else if (part.item.hint.tooltip) {\n                itemTooltip = part.item.hint.tooltip;\n            }\n            if (itemTooltip) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [itemTooltip], 0));\n            }\n            // (2) Inlay Label Part Tooltip\n            let partTooltip;\n            if (typeof part.part.tooltip === 'string') {\n                partTooltip = new MarkdownString().appendText(part.part.tooltip);\n            }\n            else if (part.part.tooltip) {\n                partTooltip = part.part.tooltip;\n            }\n            if (partTooltip) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [partTooltip], 1));\n            }\n            // (2.2) Inlay Label Part Help Hover\n            if (part.part.location || part.part.command) {\n                let linkHint;\n                const useMetaKey = this._editor.getOption(70 /* multiCursorModifier */) === 'altKey';\n                const kb = useMetaKey\n                    ? platform.isMacintosh\n                        ? localize('links.navigate.kb.meta.mac', \"cmd + click\")\n                        : localize('links.navigate.kb.meta', \"ctrl + click\")\n                    : platform.isMacintosh\n                        ? localize('links.navigate.kb.alt.mac', \"option + click\")\n                        : localize('links.navigate.kb.alt', \"alt + click\");\n                if (part.part.location && part.part.command) {\n                    linkHint = new MarkdownString().appendText(localize('hint.defAndCommand', 'Go to Definition ({0}), right click for more', kb));\n                }\n                else if (part.part.location) {\n                    linkHint = new MarkdownString().appendText(localize('hint.def', 'Go to Definition ({0})', kb));\n                }\n                else if (part.part.command) {\n                    linkHint = new MarkdownString(`[${localize('hint.cmd', \"Execute Command\")}](${asCommandLink(part.part.command)} \"${part.part.command.title}\") (${kb})`, { isTrusted: true });\n                }\n                if (linkHint) {\n                    executor.emitOne(new MarkdownHover(this, anchor.range, [linkHint], 10000));\n                }\n            }\n            // (3) Inlay Label Part Location tooltip\n            const iterable = yield this._resolveInlayHintLabelPartHover(part, token);\n            try {\n                for (var iterable_1 = __asyncValues(iterable), iterable_1_1; iterable_1_1 = yield iterable_1.next(), !iterable_1_1.done;) {\n                    let item = iterable_1_1.value;\n                    executor.emitOne(item);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) yield _a.call(iterable_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }));\n    }\n    _resolveInlayHintLabelPartHover(part, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!part.part.location) {\n                return AsyncIterableObject.EMPTY;\n            }\n            const { uri, range } = part.part.location;\n            const ref = yield this._resolverService.createModelReference(uri);\n            try {\n                const model = ref.object.textEditorModel;\n                if (!this._languageFeaturesService.hoverProvider.has(model)) {\n                    return AsyncIterableObject.EMPTY;\n                }\n                return getHover(this._languageFeaturesService.hoverProvider, model, new Position(range.startLineNumber, range.startColumn), token)\n                    .filter(item => !isEmptyMarkdownString(item.hover.contents))\n                    .map(item => new MarkdownHover(this, part.item.anchor.range, item.hover.contents, 2 + item.ordinal));\n            }\n            finally {\n                ref.dispose();\n            }\n        });\n    }\n};\nInlayHintsHover = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService),\n    __param(3, IConfigurationService),\n    __param(4, ITextModelService),\n    __param(5, ILanguageFeaturesService)\n], InlayHintsHover);\nexport { InlayHintsHover };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { CursorMoveCommands } from '../../../common/cursor/cursorMoveCommands.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nexport class ExpandLineSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'expandLineSelection',\n            label: nls.localize('expandLineSelection', \"Expand Line Selection\"),\n            alias: 'Expand Line Selection',\n            precondition: undefined,\n            kbOpts: {\n                weight: 0 /* EditorCore */,\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* CtrlCmd */ | 42 /* KeyL */\n            },\n        });\n    }\n    run(_accessor, editor, args) {\n        args = args || {};\n        if (!editor.hasModel()) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        viewModel.model.pushStackElement();\n        viewModel.setCursorStates(args.source, 3 /* Explicit */, CursorMoveCommands.expandLineSelection(viewModel, viewModel.getCursorStates()));\n        viewModel.revealPrimaryCursor(args.source, true);\n    }\n}\nregisterEditorAction(ExpandLineSelectionAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { CoreEditingCommands } from '../../../browser/coreCommands.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection, ReplaceCommandThatSelectsText } from '../../../common/commands/replaceCommand.js';\nimport { TrimTrailingWhitespaceCommand } from '../../../common/commands/trimTrailingWhitespaceCommand.js';\nimport { TypeOperations } from '../../../common/cursor/cursorTypeOperations.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { CopyLinesCommand } from './copyLinesCommand.js';\nimport { MoveLinesCommand } from './moveLinesCommand.js';\nimport { SortLinesCommand } from './sortLinesCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\n// copy lines\nclass AbstractCopyLinesAction extends EditorAction {\n    constructor(down, opts) {\n        super(opts);\n        this.down = down;\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignore: false }));\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        // Remove selections that would result in copying the same line\n        let prev = selections[0];\n        for (let i = 1; i < selections.length; i++) {\n            const curr = selections[i];\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n                // these two selections would copy the same line\n                if (prev.index < curr.index) {\n                    // prev wins\n                    curr.ignore = true;\n                }\n                else {\n                    // curr wins\n                    prev.ignore = true;\n                    prev = curr;\n                }\n            }\n        }\n        const commands = [];\n        for (const selection of selections) {\n            commands.push(new CopyLinesCommand(selection.selection, this.down, selection.ignore));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass CopyLinesUpAction extends AbstractCopyLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.copyLinesUpAction',\n            label: nls.localize('lines.copyUp', \"Copy Line Up\"),\n            alias: 'Copy Line Up',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* Alt */ | 1024 /* Shift */ | 16 /* UpArrow */,\n                linux: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 1024 /* Shift */ | 16 /* UpArrow */ },\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miCopyLinesUp', comment: ['&& denotes a mnemonic'] }, \"&&Copy Line Up\"),\n                order: 1\n            }\n        });\n    }\n}\nclass CopyLinesDownAction extends AbstractCopyLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.copyLinesDownAction',\n            label: nls.localize('lines.copyDown', \"Copy Line Down\"),\n            alias: 'Copy Line Down',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* Alt */ | 1024 /* Shift */ | 18 /* DownArrow */,\n                linux: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 1024 /* Shift */ | 18 /* DownArrow */ },\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miCopyLinesDown', comment: ['&& denotes a mnemonic'] }, \"Co&&py Line Down\"),\n                order: 2\n            }\n        });\n    }\n}\nexport class DuplicateSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.duplicateSelection',\n            label: nls.localize('duplicateSelection', \"Duplicate Selection\"),\n            alias: 'Duplicate Selection',\n            precondition: EditorContextKeys.writable,\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miDuplicateSelection', comment: ['&& denotes a mnemonic'] }, \"&&Duplicate Selection\"),\n                order: 5\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commands = [];\n        const selections = editor.getSelections();\n        const model = editor.getModel();\n        for (const selection of selections) {\n            if (selection.isEmpty()) {\n                commands.push(new CopyLinesCommand(selection, true));\n            }\n            else {\n                const insertSelection = new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn);\n                commands.push(new ReplaceCommandThatSelectsText(insertSelection, model.getValueInRange(selection)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\n// move lines\nclass AbstractMoveLinesAction extends EditorAction {\n    constructor(down, opts) {\n        super(opts);\n        this.down = down;\n    }\n    run(_accessor, editor) {\n        let commands = [];\n        let selections = editor.getSelections() || [];\n        const autoIndent = editor.getOption(9 /* autoIndent */);\n        for (const selection of selections) {\n            commands.push(new MoveLinesCommand(selection, this.down, autoIndent));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass MoveLinesUpAction extends AbstractMoveLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.moveLinesUpAction',\n            label: nls.localize('lines.moveUp', \"Move Line Up\"),\n            alias: 'Move Line Up',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* Alt */ | 16 /* UpArrow */,\n                linux: { primary: 512 /* Alt */ | 16 /* UpArrow */ },\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miMoveLinesUp', comment: ['&& denotes a mnemonic'] }, \"Mo&&ve Line Up\"),\n                order: 3\n            }\n        });\n    }\n}\nclass MoveLinesDownAction extends AbstractMoveLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.moveLinesDownAction',\n            label: nls.localize('lines.moveDown', \"Move Line Down\"),\n            alias: 'Move Line Down',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* Alt */ | 18 /* DownArrow */,\n                linux: { primary: 512 /* Alt */ | 18 /* DownArrow */ },\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miMoveLinesDown', comment: ['&& denotes a mnemonic'] }, \"Move &&Line Down\"),\n                order: 4\n            }\n        });\n    }\n}\nexport class AbstractSortLinesAction extends EditorAction {\n    constructor(descending, opts) {\n        super(opts);\n        this.descending = descending;\n    }\n    run(_accessor, editor) {\n        const selections = editor.getSelections() || [];\n        for (const selection of selections) {\n            if (!SortLinesCommand.canRun(editor.getModel(), selection, this.descending)) {\n                return;\n            }\n        }\n        let commands = [];\n        for (let i = 0, len = selections.length; i < len; i++) {\n            commands[i] = new SortLinesCommand(selections[i], this.descending);\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class SortLinesAscendingAction extends AbstractSortLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.sortLinesAscending',\n            label: nls.localize('lines.sortAscending', \"Sort Lines Ascending\"),\n            alias: 'Sort Lines Ascending',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class SortLinesDescendingAction extends AbstractSortLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.sortLinesDescending',\n            label: nls.localize('lines.sortDescending', \"Sort Lines Descending\"),\n            alias: 'Sort Lines Descending',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteDuplicateLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.removeDuplicateLines',\n            label: nls.localize('lines.deleteDuplicates', \"Delete Duplicate Lines\"),\n            alias: 'Delete Duplicate Lines',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let model = editor.getModel();\n        if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n            return;\n        }\n        let edits = [];\n        let endCursorState = [];\n        let linesDeleted = 0;\n        for (let selection of editor.getSelections()) {\n            let uniqueLines = new Set();\n            let lines = [];\n            for (let i = selection.startLineNumber; i <= selection.endLineNumber; i++) {\n                let line = model.getLineContent(i);\n                if (uniqueLines.has(line)) {\n                    continue;\n                }\n                lines.push(line);\n                uniqueLines.add(line);\n            }\n            let selectionToReplace = new Selection(selection.startLineNumber, 1, selection.endLineNumber, model.getLineMaxColumn(selection.endLineNumber));\n            let adjustedSelectionStart = selection.startLineNumber - linesDeleted;\n            let finalSelection = new Selection(adjustedSelectionStart, 1, adjustedSelectionStart + lines.length - 1, lines[lines.length - 1].length);\n            edits.push(EditOperation.replace(selectionToReplace, lines.join('\\n')));\n            endCursorState.push(finalSelection);\n            linesDeleted += (selection.endLineNumber - selection.startLineNumber + 1) - lines.length;\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class TrimTrailingWhitespaceAction extends EditorAction {\n    constructor() {\n        super({\n            id: TrimTrailingWhitespaceAction.ID,\n            label: nls.localize('lines.trimTrailingWhitespace', \"Trim Trailing Whitespace\"),\n            alias: 'Trim Trailing Whitespace',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 54 /* KeyX */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        let cursors = [];\n        if (args.reason === 'auto-save') {\n            // See https://github.com/editorconfig/editorconfig-vscode/issues/47\n            // It is very convenient for the editor config extension to invoke this action.\n            // So, if we get a reason:'auto-save' passed in, let's preserve cursor positions.\n            cursors = (editor.getSelections() || []).map(s => new Position(s.positionLineNumber, s.positionColumn));\n        }\n        let selection = editor.getSelection();\n        if (selection === null) {\n            return;\n        }\n        let command = new TrimTrailingWhitespaceCommand(selection, cursors);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n    }\n}\nTrimTrailingWhitespaceAction.ID = 'editor.action.trimTrailingWhitespace';\nexport class DeleteLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.deleteLines',\n            label: nls.localize('lines.delete', \"Delete Line\"),\n            alias: 'Delete Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 41 /* KeyK */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let ops = this._getLinesToRemove(editor);\n        let model = editor.getModel();\n        if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n            // Model is empty\n            return;\n        }\n        let linesDeleted = 0;\n        let edits = [];\n        let cursorState = [];\n        for (let i = 0, len = ops.length; i < len; i++) {\n            const op = ops[i];\n            let startLineNumber = op.startLineNumber;\n            let endLineNumber = op.endLineNumber;\n            let startColumn = 1;\n            let endColumn = model.getLineMaxColumn(endLineNumber);\n            if (endLineNumber < model.getLineCount()) {\n                endLineNumber += 1;\n                endColumn = 1;\n            }\n            else if (startLineNumber > 1) {\n                startLineNumber -= 1;\n                startColumn = model.getLineMaxColumn(startLineNumber);\n            }\n            edits.push(EditOperation.replace(new Selection(startLineNumber, startColumn, endLineNumber, endColumn), ''));\n            cursorState.push(new Selection(startLineNumber - linesDeleted, op.positionColumn, startLineNumber - linesDeleted, op.positionColumn));\n            linesDeleted += (op.endLineNumber - op.startLineNumber + 1);\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, cursorState);\n        editor.pushUndoStop();\n    }\n    _getLinesToRemove(editor) {\n        // Construct delete operations\n        let operations = editor.getSelections().map((s) => {\n            let endLineNumber = s.endLineNumber;\n            if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n                endLineNumber -= 1;\n            }\n            return {\n                startLineNumber: s.startLineNumber,\n                selectionStartColumn: s.selectionStartColumn,\n                endLineNumber: endLineNumber,\n                positionColumn: s.positionColumn\n            };\n        });\n        // Sort delete operations\n        operations.sort((a, b) => {\n            if (a.startLineNumber === b.startLineNumber) {\n                return a.endLineNumber - b.endLineNumber;\n            }\n            return a.startLineNumber - b.startLineNumber;\n        });\n        // Merge delete operations which are adjacent or overlapping\n        let mergedOperations = [];\n        let previousOperation = operations[0];\n        for (let i = 1; i < operations.length; i++) {\n            if (previousOperation.endLineNumber + 1 >= operations[i].startLineNumber) {\n                // Merge current operations into the previous one\n                previousOperation.endLineNumber = operations[i].endLineNumber;\n            }\n            else {\n                // Push previous operation\n                mergedOperations.push(previousOperation);\n                previousOperation = operations[i];\n            }\n        }\n        // Push the last operation\n        mergedOperations.push(previousOperation);\n        return mergedOperations;\n    }\n}\nexport class IndentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.indentLines',\n            label: nls.localize('lines.indent', \"Indent Line\"),\n            alias: 'Indent Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 89 /* BracketRight */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.indent(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n        editor.pushUndoStop();\n    }\n}\nclass OutdentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.outdentLines',\n            label: nls.localize('lines.outdent', \"Outdent Line\"),\n            alias: 'Outdent Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 87 /* BracketLeft */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        CoreEditingCommands.Outdent.runEditorCommand(_accessor, editor, null);\n    }\n}\nexport class InsertLineBeforeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertLineBefore',\n            label: nls.localize('lines.insertBefore', \"Insert Line Above\"),\n            alias: 'Insert Line Above',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 3 /* Enter */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.lineInsertBefore(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n    }\n}\nexport class InsertLineAfterAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertLineAfter',\n            label: nls.localize('lines.insertAfter', \"Insert Line Below\"),\n            alias: 'Insert Line Below',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 3 /* Enter */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.lineInsertAfter(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n    }\n}\nexport class AbstractDeleteAllToBoundaryAction extends EditorAction {\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const primaryCursor = editor.getSelection();\n        let rangesToDelete = this._getRangesToDelete(editor);\n        // merge overlapping selections\n        let effectiveRanges = [];\n        for (let i = 0, count = rangesToDelete.length - 1; i < count; i++) {\n            let range = rangesToDelete[i];\n            let nextRange = rangesToDelete[i + 1];\n            if (Range.intersectRanges(range, nextRange) === null) {\n                effectiveRanges.push(range);\n            }\n            else {\n                rangesToDelete[i + 1] = Range.plusRange(range, nextRange);\n            }\n        }\n        effectiveRanges.push(rangesToDelete[rangesToDelete.length - 1]);\n        let endCursorState = this._getEndCursorState(primaryCursor, effectiveRanges);\n        let edits = effectiveRanges.map(range => {\n            return EditOperation.replace(range, '');\n        });\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class DeleteAllLeftAction extends AbstractDeleteAllToBoundaryAction {\n    constructor() {\n        super({\n            id: 'deleteAllLeft',\n            label: nls.localize('lines.deleteAllLeft', \"Delete All Left\"),\n            alias: 'Delete All Left',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 2048 /* CtrlCmd */ | 1 /* Backspace */ },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    _getEndCursorState(primaryCursor, rangesToDelete) {\n        let endPrimaryCursor = null;\n        let endCursorState = [];\n        let deletedLines = 0;\n        rangesToDelete.forEach(range => {\n            let endCursor;\n            if (range.endColumn === 1 && deletedLines > 0) {\n                let newStartLine = range.startLineNumber - deletedLines;\n                endCursor = new Selection(newStartLine, range.startColumn, newStartLine, range.startColumn);\n            }\n            else {\n                endCursor = new Selection(range.startLineNumber, range.startColumn, range.startLineNumber, range.startColumn);\n            }\n            deletedLines += range.endLineNumber - range.startLineNumber;\n            if (range.intersectRanges(primaryCursor)) {\n                endPrimaryCursor = endCursor;\n            }\n            else {\n                endCursorState.push(endCursor);\n            }\n        });\n        if (endPrimaryCursor) {\n            endCursorState.unshift(endPrimaryCursor);\n        }\n        return endCursorState;\n    }\n    _getRangesToDelete(editor) {\n        let selections = editor.getSelections();\n        if (selections === null) {\n            return [];\n        }\n        let rangesToDelete = selections;\n        let model = editor.getModel();\n        if (model === null) {\n            return [];\n        }\n        rangesToDelete.sort(Range.compareRangesUsingStarts);\n        rangesToDelete = rangesToDelete.map(selection => {\n            if (selection.isEmpty()) {\n                if (selection.startColumn === 1) {\n                    let deleteFromLine = Math.max(1, selection.startLineNumber - 1);\n                    let deleteFromColumn = selection.startLineNumber === 1 ? 1 : model.getLineContent(deleteFromLine).length + 1;\n                    return new Range(deleteFromLine, deleteFromColumn, selection.startLineNumber, 1);\n                }\n                else {\n                    return new Range(selection.startLineNumber, 1, selection.startLineNumber, selection.startColumn);\n                }\n            }\n            else {\n                return new Range(selection.startLineNumber, 1, selection.endLineNumber, selection.endColumn);\n            }\n        });\n        return rangesToDelete;\n    }\n}\nexport class DeleteAllRightAction extends AbstractDeleteAllToBoundaryAction {\n    constructor() {\n        super({\n            id: 'deleteAllRight',\n            label: nls.localize('lines.deleteAllRight', \"Delete All Right\"),\n            alias: 'Delete All Right',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* WinCtrl */ | 41 /* KeyK */, secondary: [2048 /* CtrlCmd */ | 20 /* Delete */] },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    _getEndCursorState(primaryCursor, rangesToDelete) {\n        let endPrimaryCursor = null;\n        let endCursorState = [];\n        for (let i = 0, len = rangesToDelete.length, offset = 0; i < len; i++) {\n            let range = rangesToDelete[i];\n            let endCursor = new Selection(range.startLineNumber - offset, range.startColumn, range.startLineNumber - offset, range.startColumn);\n            if (range.intersectRanges(primaryCursor)) {\n                endPrimaryCursor = endCursor;\n            }\n            else {\n                endCursorState.push(endCursor);\n            }\n        }\n        if (endPrimaryCursor) {\n            endCursorState.unshift(endPrimaryCursor);\n        }\n        return endCursorState;\n    }\n    _getRangesToDelete(editor) {\n        let model = editor.getModel();\n        if (model === null) {\n            return [];\n        }\n        let selections = editor.getSelections();\n        if (selections === null) {\n            return [];\n        }\n        let rangesToDelete = selections.map((sel) => {\n            if (sel.isEmpty()) {\n                const maxColumn = model.getLineMaxColumn(sel.startLineNumber);\n                if (sel.startColumn === maxColumn) {\n                    return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber + 1, 1);\n                }\n                else {\n                    return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber, maxColumn);\n                }\n            }\n            return sel;\n        });\n        rangesToDelete.sort(Range.compareRangesUsingStarts);\n        return rangesToDelete;\n    }\n}\nexport class JoinLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.joinLines',\n            label: nls.localize('lines.joinLines', \"Join Lines\"),\n            alias: 'Join Lines',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 0,\n                mac: { primary: 256 /* WinCtrl */ | 40 /* KeyJ */ },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        let selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        let primaryCursor = editor.getSelection();\n        if (primaryCursor === null) {\n            return;\n        }\n        selections.sort(Range.compareRangesUsingStarts);\n        let reducedSelections = [];\n        let lastSelection = selections.reduce((previousValue, currentValue) => {\n            if (previousValue.isEmpty()) {\n                if (previousValue.endLineNumber === currentValue.startLineNumber) {\n                    if (primaryCursor.equalsSelection(previousValue)) {\n                        primaryCursor = currentValue;\n                    }\n                    return currentValue;\n                }\n                if (currentValue.startLineNumber > previousValue.endLineNumber + 1) {\n                    reducedSelections.push(previousValue);\n                    return currentValue;\n                }\n                else {\n                    return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n                }\n            }\n            else {\n                if (currentValue.startLineNumber > previousValue.endLineNumber) {\n                    reducedSelections.push(previousValue);\n                    return currentValue;\n                }\n                else {\n                    return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n                }\n            }\n        });\n        reducedSelections.push(lastSelection);\n        let model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        let edits = [];\n        let endCursorState = [];\n        let endPrimaryCursor = primaryCursor;\n        let lineOffset = 0;\n        for (let i = 0, len = reducedSelections.length; i < len; i++) {\n            let selection = reducedSelections[i];\n            let startLineNumber = selection.startLineNumber;\n            let startColumn = 1;\n            let columnDeltaOffset = 0;\n            let endLineNumber, endColumn;\n            let selectionEndPositionOffset = model.getLineContent(selection.endLineNumber).length - selection.endColumn;\n            if (selection.isEmpty() || selection.startLineNumber === selection.endLineNumber) {\n                let position = selection.getStartPosition();\n                if (position.lineNumber < model.getLineCount()) {\n                    endLineNumber = startLineNumber + 1;\n                    endColumn = model.getLineMaxColumn(endLineNumber);\n                }\n                else {\n                    endLineNumber = position.lineNumber;\n                    endColumn = model.getLineMaxColumn(position.lineNumber);\n                }\n            }\n            else {\n                endLineNumber = selection.endLineNumber;\n                endColumn = model.getLineMaxColumn(endLineNumber);\n            }\n            let trimmedLinesContent = model.getLineContent(startLineNumber);\n            for (let i = startLineNumber + 1; i <= endLineNumber; i++) {\n                let lineText = model.getLineContent(i);\n                let firstNonWhitespaceIdx = model.getLineFirstNonWhitespaceColumn(i);\n                if (firstNonWhitespaceIdx >= 1) {\n                    let insertSpace = true;\n                    if (trimmedLinesContent === '') {\n                        insertSpace = false;\n                    }\n                    if (insertSpace && (trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === ' ' ||\n                        trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === '\\t')) {\n                        insertSpace = false;\n                        trimmedLinesContent = trimmedLinesContent.replace(/[\\s\\uFEFF\\xA0]+$/g, ' ');\n                    }\n                    let lineTextWithoutIndent = lineText.substr(firstNonWhitespaceIdx - 1);\n                    trimmedLinesContent += (insertSpace ? ' ' : '') + lineTextWithoutIndent;\n                    if (insertSpace) {\n                        columnDeltaOffset = lineTextWithoutIndent.length + 1;\n                    }\n                    else {\n                        columnDeltaOffset = lineTextWithoutIndent.length;\n                    }\n                }\n                else {\n                    columnDeltaOffset = 0;\n                }\n            }\n            let deleteSelection = new Range(startLineNumber, startColumn, endLineNumber, endColumn);\n            if (!deleteSelection.isEmpty()) {\n                let resultSelection;\n                if (selection.isEmpty()) {\n                    edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                    resultSelection = new Selection(deleteSelection.startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1, startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1);\n                }\n                else {\n                    if (selection.startLineNumber === selection.endLineNumber) {\n                        edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                        resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.endLineNumber - lineOffset, selection.endColumn);\n                    }\n                    else {\n                        edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                        resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.startLineNumber - lineOffset, trimmedLinesContent.length - selectionEndPositionOffset);\n                    }\n                }\n                if (Range.intersectRanges(deleteSelection, primaryCursor) !== null) {\n                    endPrimaryCursor = resultSelection;\n                }\n                else {\n                    endCursorState.push(resultSelection);\n                }\n            }\n            lineOffset += deleteSelection.endLineNumber - deleteSelection.startLineNumber;\n        }\n        endCursorState.unshift(endPrimaryCursor);\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class TransposeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.transpose',\n            label: nls.localize('editor.transpose', \"Transpose characters around the cursor\"),\n            alias: 'Transpose characters around the cursor',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(_accessor, editor) {\n        let selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        let model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        let commands = [];\n        for (let i = 0, len = selections.length; i < len; i++) {\n            let selection = selections[i];\n            if (!selection.isEmpty()) {\n                continue;\n            }\n            let cursor = selection.getStartPosition();\n            let maxColumn = model.getLineMaxColumn(cursor.lineNumber);\n            if (cursor.column >= maxColumn) {\n                if (cursor.lineNumber === model.getLineCount()) {\n                    continue;\n                }\n                // The cursor is at the end of current line and current line is not empty\n                // then we transpose the character before the cursor and the line break if there is any following line.\n                let deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1);\n                let chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n                commands.push(new ReplaceCommand(new Selection(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1), chars));\n            }\n            else {\n                let deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber, cursor.column + 1);\n                let chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n                commands.push(new ReplaceCommandThatPreservesSelection(deleteSelection, chars, new Selection(cursor.lineNumber, cursor.column + 1, cursor.lineNumber, cursor.column + 1)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class AbstractCaseAction extends EditorAction {\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const wordSeparators = editor.getOption(117 /* wordSeparators */);\n        const textEdits = [];\n        for (const selection of selections) {\n            if (selection.isEmpty()) {\n                const cursor = selection.getStartPosition();\n                const word = editor.getConfiguredWordAtPosition(cursor);\n                if (!word) {\n                    continue;\n                }\n                const wordRange = new Range(cursor.lineNumber, word.startColumn, cursor.lineNumber, word.endColumn);\n                const text = model.getValueInRange(wordRange);\n                textEdits.push(EditOperation.replace(wordRange, this._modifyText(text, wordSeparators)));\n            }\n            else {\n                const text = model.getValueInRange(selection);\n                textEdits.push(EditOperation.replace(selection, this._modifyText(text, wordSeparators)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, textEdits);\n        editor.pushUndoStop();\n    }\n}\nexport class UpperCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToUppercase',\n            label: nls.localize('editor.transformToUppercase', \"Transform to Uppercase\"),\n            alias: 'Transform to Uppercase',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        return text.toLocaleUpperCase();\n    }\n}\nexport class LowerCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToLowercase',\n            label: nls.localize('editor.transformToLowercase', \"Transform to Lowercase\"),\n            alias: 'Transform to Lowercase',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        return text.toLocaleLowerCase();\n    }\n}\nclass BackwardsCompatibleRegExp {\n    constructor(_pattern, _flags) {\n        this._pattern = _pattern;\n        this._flags = _flags;\n        this._actual = null;\n        this._evaluated = false;\n    }\n    get() {\n        if (!this._evaluated) {\n            this._evaluated = true;\n            try {\n                this._actual = new RegExp(this._pattern, this._flags);\n            }\n            catch (err) {\n                // this browser does not support this regular expression\n            }\n        }\n        return this._actual;\n    }\n    isSupported() {\n        return (this.get() !== null);\n    }\n}\nexport class TitleCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToTitlecase',\n            label: nls.localize('editor.transformToTitlecase', \"Transform to Title Case\"),\n            alias: 'Transform to Title Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        const titleBoundary = TitleCaseAction.titleBoundary.get();\n        if (!titleBoundary) {\n            // cannot support this\n            return text;\n        }\n        return text\n            .toLocaleLowerCase()\n            .replace(titleBoundary, (b) => b.toLocaleUpperCase());\n    }\n}\nTitleCaseAction.titleBoundary = new BackwardsCompatibleRegExp('(^|[^\\\\p{L}\\\\p{N}\\']|((^|\\\\P{L})\\'))\\\\p{L}', 'gmu');\nexport class SnakeCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToSnakecase',\n            label: nls.localize('editor.transformToSnakecase', \"Transform to Snake Case\"),\n            alias: 'Transform to Snake Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        const caseBoundary = SnakeCaseAction.caseBoundary.get();\n        const singleLetters = SnakeCaseAction.singleLetters.get();\n        if (!caseBoundary || !singleLetters) {\n            // cannot support this\n            return text;\n        }\n        return (text\n            .replace(caseBoundary, '$1_$2')\n            .replace(singleLetters, '$1_$2$3')\n            .toLocaleLowerCase());\n    }\n}\nSnakeCaseAction.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\nSnakeCaseAction.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu})(\\\\p{Ll})', 'gmu');\nregisterEditorAction(CopyLinesUpAction);\nregisterEditorAction(CopyLinesDownAction);\nregisterEditorAction(DuplicateSelectionAction);\nregisterEditorAction(MoveLinesUpAction);\nregisterEditorAction(MoveLinesDownAction);\nregisterEditorAction(SortLinesAscendingAction);\nregisterEditorAction(SortLinesDescendingAction);\nregisterEditorAction(DeleteDuplicateLinesAction);\nregisterEditorAction(TrimTrailingWhitespaceAction);\nregisterEditorAction(DeleteLinesAction);\nregisterEditorAction(IndentLinesAction);\nregisterEditorAction(OutdentLinesAction);\nregisterEditorAction(InsertLineBeforeAction);\nregisterEditorAction(InsertLineAfterAction);\nregisterEditorAction(DeleteAllLeftAction);\nregisterEditorAction(DeleteAllRightAction);\nregisterEditorAction(JoinLinesAction);\nregisterEditorAction(TransposeAction);\nregisterEditorAction(UpperCaseAction);\nregisterEditorAction(LowerCaseAction);\nif (SnakeCaseAction.caseBoundary.isSupported() && SnakeCaseAction.singleLetters.isSupported()) {\n    registerEditorAction(SnakeCaseAction);\n}\nif (TitleCaseAction.titleBoundary.isSupported()) {\n    registerEditorAction(TitleCaseAction);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../base/common/strings.js';\nimport { EditOperation } from '../core/editOperation.js';\nimport { Range } from '../core/range.js';\nexport class TrimTrailingWhitespaceCommand {\n    constructor(selection, cursors) {\n        this._selection = selection;\n        this._cursors = cursors;\n        this._selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        const ops = trimTrailingWhitespace(model, this._cursors);\n        for (let i = 0, len = ops.length; i < len; i++) {\n            const op = ops[i];\n            builder.addEditOperation(op.range, op.text);\n        }\n        this._selectionId = builder.trackSelection(this._selection);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this._selectionId);\n    }\n}\n/**\n * Generate commands for trimming trailing whitespace on a model and ignore lines on which cursors are sitting.\n */\nexport function trimTrailingWhitespace(model, cursors) {\n    // Sort cursors ascending\n    cursors.sort((a, b) => {\n        if (a.lineNumber === b.lineNumber) {\n            return a.column - b.column;\n        }\n        return a.lineNumber - b.lineNumber;\n    });\n    // Reduce multiple cursors on the same line and only keep the last one on the line\n    for (let i = cursors.length - 2; i >= 0; i--) {\n        if (cursors[i].lineNumber === cursors[i + 1].lineNumber) {\n            // Remove cursor at `i`\n            cursors.splice(i, 1);\n        }\n    }\n    const r = [];\n    let rLen = 0;\n    let cursorIndex = 0;\n    const cursorLen = cursors.length;\n    for (let lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\n        const lineContent = model.getLineContent(lineNumber);\n        const maxLineColumn = lineContent.length + 1;\n        let minEditColumn = 0;\n        if (cursorIndex < cursorLen && cursors[cursorIndex].lineNumber === lineNumber) {\n            minEditColumn = cursors[cursorIndex].column;\n            cursorIndex++;\n            if (minEditColumn === maxLineColumn) {\n                // The cursor is at the end of the line => no edits for sure on this line\n                continue;\n            }\n        }\n        if (lineContent.length === 0) {\n            continue;\n        }\n        const lastNonWhitespaceIndex = strings.lastNonWhitespaceIndex(lineContent);\n        let fromColumn = 0;\n        if (lastNonWhitespaceIndex === -1) {\n            // Entire line is whitespace\n            fromColumn = 1;\n        }\n        else if (lastNonWhitespaceIndex !== lineContent.length - 1) {\n            // There is trailing whitespace\n            fromColumn = lastNonWhitespaceIndex + 2;\n        }\n        else {\n            // There is no trailing whitespace\n            continue;\n        }\n        fromColumn = Math.max(minEditColumn, fromColumn);\n        r[rLen++] = EditOperation.delete(new Range(lineNumber, fromColumn, lineNumber, maxLineColumn));\n    }\n    return r;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class CopyLinesCommand {\n    constructor(selection, isCopyingDown, noop) {\n        this._selection = selection;\n        this._isCopyingDown = isCopyingDown;\n        this._noop = noop || false;\n        this._selectionDirection = 0 /* LTR */;\n        this._selectionId = null;\n        this._startLineNumberDelta = 0;\n        this._endLineNumberDelta = 0;\n    }\n    getEditOperations(model, builder) {\n        let s = this._selection;\n        this._startLineNumberDelta = 0;\n        this._endLineNumberDelta = 0;\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._endLineNumberDelta = 1;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        let sourceLines = [];\n        for (let i = s.startLineNumber; i <= s.endLineNumber; i++) {\n            sourceLines.push(model.getLineContent(i));\n        }\n        const sourceText = sourceLines.join('\\n');\n        if (sourceText === '') {\n            // Duplicating empty line\n            if (this._isCopyingDown) {\n                this._startLineNumberDelta++;\n                this._endLineNumberDelta++;\n            }\n        }\n        if (this._noop) {\n            builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber + 1, 1), s.endLineNumber === model.getLineCount() ? '' : '\\n');\n        }\n        else {\n            if (!this._isCopyingDown) {\n                builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + sourceText);\n            }\n            else {\n                builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), sourceText + '\\n');\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n        this._selectionDirection = this._selection.getDirection();\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._startLineNumberDelta !== 0 || this._endLineNumberDelta !== 0) {\n            let startLineNumber = result.startLineNumber;\n            let startColumn = result.startColumn;\n            let endLineNumber = result.endLineNumber;\n            let endColumn = result.endColumn;\n            if (this._startLineNumberDelta !== 0) {\n                startLineNumber = startLineNumber + this._startLineNumberDelta;\n                startColumn = 1;\n            }\n            if (this._endLineNumberDelta !== 0) {\n                endLineNumber = endLineNumber + this._endLineNumberDelta;\n                endColumn = 1;\n            }\n            result = Selection.createWithDirection(startLineNumber, startColumn, endLineNumber, endColumn, this._selectionDirection);\n        }\n        return result;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { ShiftCommand } from '../../../common/commands/shiftCommand.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IndentAction } from '../../../common/languages/languageConfiguration.js';\nimport { LanguageConfigurationRegistry } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as indentUtils from '../../indentation/browser/indentUtils.js';\nexport class MoveLinesCommand {\n    constructor(selection, isMovingDown, autoIndent) {\n        this._selection = selection;\n        this._isMovingDown = isMovingDown;\n        this._autoIndent = autoIndent;\n        this._selectionId = null;\n        this._moveEndLineSelectionShrink = false;\n    }\n    getEditOperations(model, builder) {\n        let modelLineCount = model.getLineCount();\n        if (this._isMovingDown && this._selection.endLineNumber === modelLineCount) {\n            this._selectionId = builder.trackSelection(this._selection);\n            return;\n        }\n        if (!this._isMovingDown && this._selection.startLineNumber === 1) {\n            this._selectionId = builder.trackSelection(this._selection);\n            return;\n        }\n        this._moveEndPositionDown = false;\n        let s = this._selection;\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._moveEndPositionDown = true;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const { tabSize, indentSize, insertSpaces } = model.getOptions();\n        let indentConverter = this.buildIndentConverter(tabSize, indentSize, insertSpaces);\n        let virtualModel = {\n            getLineTokens: (lineNumber) => {\n                return model.getLineTokens(lineNumber);\n            },\n            getLanguageId: () => {\n                return model.getLanguageId();\n            },\n            getLanguageIdAtPosition: (lineNumber, column) => {\n                return model.getLanguageIdAtPosition(lineNumber, column);\n            },\n            getLineContent: null,\n        };\n        if (s.startLineNumber === s.endLineNumber && model.getLineMaxColumn(s.startLineNumber) === 1) {\n            // Current line is empty\n            let lineNumber = s.startLineNumber;\n            let otherLineNumber = (this._isMovingDown ? lineNumber + 1 : lineNumber - 1);\n            if (model.getLineMaxColumn(otherLineNumber) === 1) {\n                // Other line number is empty too, so no editing is needed\n                // Add a no-op to force running by the model\n                builder.addEditOperation(new Range(1, 1, 1, 1), null);\n            }\n            else {\n                // Type content from other line number on line number\n                builder.addEditOperation(new Range(lineNumber, 1, lineNumber, 1), model.getLineContent(otherLineNumber));\n                // Remove content from other line number\n                builder.addEditOperation(new Range(otherLineNumber, 1, otherLineNumber, model.getLineMaxColumn(otherLineNumber)), null);\n            }\n            // Track selection at the other line number\n            s = new Selection(otherLineNumber, 1, otherLineNumber, 1);\n        }\n        else {\n            let movingLineNumber;\n            let movingLineText;\n            if (this._isMovingDown) {\n                movingLineNumber = s.endLineNumber + 1;\n                movingLineText = model.getLineContent(movingLineNumber);\n                // Delete line that needs to be moved\n                builder.addEditOperation(new Range(movingLineNumber - 1, model.getLineMaxColumn(movingLineNumber - 1), movingLineNumber, model.getLineMaxColumn(movingLineNumber)), null);\n                let insertingText = movingLineText;\n                if (this.shouldAutoIndent(model, s)) {\n                    let movingLineMatchResult = this.matchEnterRule(model, indentConverter, tabSize, movingLineNumber, s.startLineNumber - 1);\n                    // if s.startLineNumber - 1 matches onEnter rule, we still honor that.\n                    if (movingLineMatchResult !== null) {\n                        let oldIndentation = strings.getLeadingWhitespace(model.getLineContent(movingLineNumber));\n                        let newSpaceCnt = movingLineMatchResult + indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                        let newIndentation = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                        insertingText = newIndentation + this.trimLeft(movingLineText);\n                    }\n                    else {\n                        // no enter rule matches, let's check indentatin rules then.\n                        virtualModel.getLineContent = (lineNumber) => {\n                            if (lineNumber === s.startLineNumber) {\n                                return model.getLineContent(movingLineNumber);\n                            }\n                            else {\n                                return model.getLineContent(lineNumber);\n                            }\n                        };\n                        let indentOfMovingLine = LanguageConfigurationRegistry.getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(movingLineNumber, 1), s.startLineNumber, indentConverter);\n                        if (indentOfMovingLine !== null) {\n                            let oldIndentation = strings.getLeadingWhitespace(model.getLineContent(movingLineNumber));\n                            let newSpaceCnt = indentUtils.getSpaceCnt(indentOfMovingLine, tabSize);\n                            let oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                            if (newSpaceCnt !== oldSpaceCnt) {\n                                let newIndentation = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                                insertingText = newIndentation + this.trimLeft(movingLineText);\n                            }\n                        }\n                    }\n                    // add edit operations for moving line first to make sure it's executed after we make indentation change\n                    // to s.startLineNumber\n                    builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), insertingText + '\\n');\n                    let ret = this.matchEnterRuleMovingDown(model, indentConverter, tabSize, s.startLineNumber, movingLineNumber, insertingText);\n                    // check if the line being moved before matches onEnter rules, if so let's adjust the indentation by onEnter rules.\n                    if (ret !== null) {\n                        if (ret !== 0) {\n                            this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, ret);\n                        }\n                    }\n                    else {\n                        // it doesn't match onEnter rules, let's check indentation rules then.\n                        virtualModel.getLineContent = (lineNumber) => {\n                            if (lineNumber === s.startLineNumber) {\n                                return insertingText;\n                            }\n                            else if (lineNumber >= s.startLineNumber + 1 && lineNumber <= s.endLineNumber + 1) {\n                                return model.getLineContent(lineNumber - 1);\n                            }\n                            else {\n                                return model.getLineContent(lineNumber);\n                            }\n                        };\n                        let newIndentatOfMovingBlock = LanguageConfigurationRegistry.getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(movingLineNumber, 1), s.startLineNumber + 1, indentConverter);\n                        if (newIndentatOfMovingBlock !== null) {\n                            const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(s.startLineNumber));\n                            const newSpaceCnt = indentUtils.getSpaceCnt(newIndentatOfMovingBlock, tabSize);\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                            if (newSpaceCnt !== oldSpaceCnt) {\n                                const spaceCntOffset = newSpaceCnt - oldSpaceCnt;\n                                this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, spaceCntOffset);\n                            }\n                        }\n                    }\n                }\n                else {\n                    // Insert line that needs to be moved before\n                    builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), insertingText + '\\n');\n                }\n            }\n            else {\n                movingLineNumber = s.startLineNumber - 1;\n                movingLineText = model.getLineContent(movingLineNumber);\n                // Delete line that needs to be moved\n                builder.addEditOperation(new Range(movingLineNumber, 1, movingLineNumber + 1, 1), null);\n                // Insert line that needs to be moved after\n                builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + movingLineText);\n                if (this.shouldAutoIndent(model, s)) {\n                    virtualModel.getLineContent = (lineNumber) => {\n                        if (lineNumber === movingLineNumber) {\n                            return model.getLineContent(s.startLineNumber);\n                        }\n                        else {\n                            return model.getLineContent(lineNumber);\n                        }\n                    };\n                    let ret = this.matchEnterRule(model, indentConverter, tabSize, s.startLineNumber, s.startLineNumber - 2);\n                    // check if s.startLineNumber - 2 matches onEnter rules, if so adjust the moving block by onEnter rules.\n                    if (ret !== null) {\n                        if (ret !== 0) {\n                            this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, ret);\n                        }\n                    }\n                    else {\n                        // it doesn't match any onEnter rule, let's check indentation rules then.\n                        let indentOfFirstLine = LanguageConfigurationRegistry.getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(s.startLineNumber, 1), movingLineNumber, indentConverter);\n                        if (indentOfFirstLine !== null) {\n                            // adjust the indentation of the moving block\n                            let oldIndent = strings.getLeadingWhitespace(model.getLineContent(s.startLineNumber));\n                            let newSpaceCnt = indentUtils.getSpaceCnt(indentOfFirstLine, tabSize);\n                            let oldSpaceCnt = indentUtils.getSpaceCnt(oldIndent, tabSize);\n                            if (newSpaceCnt !== oldSpaceCnt) {\n                                let spaceCntOffset = newSpaceCnt - oldSpaceCnt;\n                                this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, spaceCntOffset);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n    }\n    buildIndentConverter(tabSize, indentSize, insertSpaces) {\n        return {\n            shiftIndent: (indentation) => {\n                return ShiftCommand.shiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            },\n            unshiftIndent: (indentation) => {\n                return ShiftCommand.unshiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            }\n        };\n    }\n    parseEnterResult(model, indentConverter, tabSize, line, enter) {\n        if (enter) {\n            let enterPrefix = enter.indentation;\n            if (enter.indentAction === IndentAction.None) {\n                enterPrefix = enter.indentation + enter.appendText;\n            }\n            else if (enter.indentAction === IndentAction.Indent) {\n                enterPrefix = enter.indentation + enter.appendText;\n            }\n            else if (enter.indentAction === IndentAction.IndentOutdent) {\n                enterPrefix = enter.indentation;\n            }\n            else if (enter.indentAction === IndentAction.Outdent) {\n                enterPrefix = indentConverter.unshiftIndent(enter.indentation) + enter.appendText;\n            }\n            let movingLineText = model.getLineContent(line);\n            if (this.trimLeft(movingLineText).indexOf(this.trimLeft(enterPrefix)) >= 0) {\n                let oldIndentation = strings.getLeadingWhitespace(model.getLineContent(line));\n                let newIndentation = strings.getLeadingWhitespace(enterPrefix);\n                let indentMetadataOfMovelingLine = LanguageConfigurationRegistry.getIndentMetadata(model, line);\n                if (indentMetadataOfMovelingLine !== null && indentMetadataOfMovelingLine & 2 /* DECREASE_MASK */) {\n                    newIndentation = indentConverter.unshiftIndent(newIndentation);\n                }\n                let newSpaceCnt = indentUtils.getSpaceCnt(newIndentation, tabSize);\n                let oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                return newSpaceCnt - oldSpaceCnt;\n            }\n        }\n        return null;\n    }\n    /**\n     *\n     * @param model\n     * @param indentConverter\n     * @param tabSize\n     * @param line the line moving down\n     * @param futureAboveLineNumber the line which will be at the `line` position\n     * @param futureAboveLineText\n     */\n    matchEnterRuleMovingDown(model, indentConverter, tabSize, line, futureAboveLineNumber, futureAboveLineText) {\n        if (strings.lastNonWhitespaceIndex(futureAboveLineText) >= 0) {\n            // break\n            let maxColumn = model.getLineMaxColumn(futureAboveLineNumber);\n            let enter = LanguageConfigurationRegistry.getEnterAction(this._autoIndent, model, new Range(futureAboveLineNumber, maxColumn, futureAboveLineNumber, maxColumn));\n            return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n        }\n        else {\n            // go upwards, starting from `line - 1`\n            let validPrecedingLine = line - 1;\n            while (validPrecedingLine >= 1) {\n                let lineContent = model.getLineContent(validPrecedingLine);\n                let nonWhitespaceIdx = strings.lastNonWhitespaceIndex(lineContent);\n                if (nonWhitespaceIdx >= 0) {\n                    break;\n                }\n                validPrecedingLine--;\n            }\n            if (validPrecedingLine < 1 || line > model.getLineCount()) {\n                return null;\n            }\n            let maxColumn = model.getLineMaxColumn(validPrecedingLine);\n            let enter = LanguageConfigurationRegistry.getEnterAction(this._autoIndent, model, new Range(validPrecedingLine, maxColumn, validPrecedingLine, maxColumn));\n            return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n        }\n    }\n    matchEnterRule(model, indentConverter, tabSize, line, oneLineAbove, previousLineText) {\n        let validPrecedingLine = oneLineAbove;\n        while (validPrecedingLine >= 1) {\n            // ship empty lines as empty lines just inherit indentation\n            let lineContent;\n            if (validPrecedingLine === oneLineAbove && previousLineText !== undefined) {\n                lineContent = previousLineText;\n            }\n            else {\n                lineContent = model.getLineContent(validPrecedingLine);\n            }\n            let nonWhitespaceIdx = strings.lastNonWhitespaceIndex(lineContent);\n            if (nonWhitespaceIdx >= 0) {\n                break;\n            }\n            validPrecedingLine--;\n        }\n        if (validPrecedingLine < 1 || line > model.getLineCount()) {\n            return null;\n        }\n        let maxColumn = model.getLineMaxColumn(validPrecedingLine);\n        let enter = LanguageConfigurationRegistry.getEnterAction(this._autoIndent, model, new Range(validPrecedingLine, maxColumn, validPrecedingLine, maxColumn));\n        return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n    }\n    trimLeft(str) {\n        return str.replace(/^\\s+/, '');\n    }\n    shouldAutoIndent(model, selection) {\n        if (this._autoIndent < 4 /* Full */) {\n            return false;\n        }\n        // if it's not easy to tokenize, we stop auto indent.\n        if (!model.isCheapToTokenize(selection.startLineNumber)) {\n            return false;\n        }\n        let languageAtSelectionStart = model.getLanguageIdAtPosition(selection.startLineNumber, 1);\n        let languageAtSelectionEnd = model.getLanguageIdAtPosition(selection.endLineNumber, 1);\n        if (languageAtSelectionStart !== languageAtSelectionEnd) {\n            return false;\n        }\n        if (LanguageConfigurationRegistry.getIndentRulesSupport(languageAtSelectionStart) === null) {\n            return false;\n        }\n        return true;\n    }\n    getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, offset) {\n        for (let i = s.startLineNumber; i <= s.endLineNumber; i++) {\n            let lineContent = model.getLineContent(i);\n            let originalIndent = strings.getLeadingWhitespace(lineContent);\n            let originalSpacesCnt = indentUtils.getSpaceCnt(originalIndent, tabSize);\n            let newSpacesCnt = originalSpacesCnt + offset;\n            let newIndent = indentUtils.generateIndent(newSpacesCnt, tabSize, insertSpaces);\n            if (newIndent !== originalIndent) {\n                builder.addEditOperation(new Range(i, 1, i, originalIndent.length + 1), newIndent);\n                if (i === s.endLineNumber && s.endColumn <= originalIndent.length + 1 && newIndent === '') {\n                    // as users select part of the original indent white spaces\n                    // when we adjust the indentation of endLine, we should adjust the cursor position as well.\n                    this._moveEndLineSelectionShrink = true;\n                }\n            }\n        }\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._moveEndPositionDown) {\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\n        }\n        if (this._moveEndLineSelectionShrink && result.startLineNumber < result.endLineNumber) {\n            result = result.setEndPosition(result.endLineNumber, 2);\n        }\n        return result;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nexport class SortLinesCommand {\n    constructor(selection, descending) {\n        this.selection = selection;\n        this.descending = descending;\n        this.selectionId = null;\n    }\n    static getCollator() {\n        if (!SortLinesCommand._COLLATOR) {\n            SortLinesCommand._COLLATOR = new Intl.Collator();\n        }\n        return SortLinesCommand._COLLATOR;\n    }\n    getEditOperations(model, builder) {\n        let op = sortLines(model, this.selection, this.descending);\n        if (op) {\n            builder.addEditOperation(op.range, op.text);\n        }\n        this.selectionId = builder.trackSelection(this.selection);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this.selectionId);\n    }\n    static canRun(model, selection, descending) {\n        if (model === null) {\n            return false;\n        }\n        let data = getSortData(model, selection, descending);\n        if (!data) {\n            return false;\n        }\n        for (let i = 0, len = data.before.length; i < len; i++) {\n            if (data.before[i] !== data.after[i]) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\nSortLinesCommand._COLLATOR = null;\nfunction getSortData(model, selection, descending) {\n    let startLineNumber = selection.startLineNumber;\n    let endLineNumber = selection.endLineNumber;\n    if (selection.endColumn === 1) {\n        endLineNumber--;\n    }\n    // Nothing to sort if user didn't select anything.\n    if (startLineNumber >= endLineNumber) {\n        return null;\n    }\n    let linesToSort = [];\n    // Get the contents of the selection to be sorted.\n    for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n        linesToSort.push(model.getLineContent(lineNumber));\n    }\n    let sorted = linesToSort.slice(0);\n    sorted.sort(SortLinesCommand.getCollator().compare);\n    // If descending, reverse the order.\n    if (descending === true) {\n        sorted = sorted.reverse();\n    }\n    return {\n        startLineNumber: startLineNumber,\n        endLineNumber: endLineNumber,\n        before: linesToSort,\n        after: sorted\n    };\n}\n/**\n * Generate commands for sorting lines on a model.\n */\nfunction sortLines(model, selection, descending) {\n    let data = getSortData(model, selection, descending);\n    if (!data) {\n        return null;\n    }\n    return EditOperation.replace(new Range(data.startLineNumber, 1, data.endLineNumber, model.getLineMaxColumn(data.endLineNumber)), data.after.join('\\n'));\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, Delayer, first } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { isCancellationError, onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nexport const CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE = new RawContextKey('LinkedEditingInputVisible', false);\nconst DECORATION_CLASS_NAME = 'linked-editing-decoration';\nlet LinkedEditingContribution = class LinkedEditingContribution extends Disposable {\n    constructor(editor, contextKeyService, languageFeaturesService, languageConfigurationService, languageFeatureDebounceService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._localToDispose = this._register(new DisposableStore());\n        this._editor = editor;\n        this._providers = languageFeaturesService.linkedEditingRangeProvider;\n        this._enabled = false;\n        this._visibleContextKey = CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._debounceInformation = languageFeatureDebounceService.for(this._providers, 'Linked Editing', { min: 200 });\n        this._currentDecorations = [];\n        this._languageWordPattern = null;\n        this._currentWordPattern = null;\n        this._ignoreChangeEvent = false;\n        this._localToDispose = this._register(new DisposableStore());\n        this._rangeUpdateTriggerPromise = null;\n        this._rangeSyncTriggerPromise = null;\n        this._currentRequest = null;\n        this._currentRequestPosition = null;\n        this._currentRequestModelVersion = null;\n        this._register(this._editor.onDidChangeModel(() => this.reinitialize(true)));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(62 /* linkedEditing */) || e.hasChanged(82 /* renameOnType */)) {\n                this.reinitialize(false);\n            }\n        }));\n        this._register(this._providers.onDidChange(() => this.reinitialize(false)));\n        this._register(this._editor.onDidChangeModelLanguage(() => this.reinitialize(true)));\n        this.reinitialize(true);\n    }\n    static get(editor) {\n        return editor.getContribution(LinkedEditingContribution.ID);\n    }\n    reinitialize(forceRefresh) {\n        const model = this._editor.getModel();\n        const isEnabled = model !== null && (this._editor.getOption(62 /* linkedEditing */) || this._editor.getOption(82 /* renameOnType */)) && this._providers.has(model);\n        if (isEnabled === this._enabled && !forceRefresh) {\n            return;\n        }\n        this._enabled = isEnabled;\n        this.clearRanges();\n        this._localToDispose.clear();\n        if (!isEnabled || model === null) {\n            return;\n        }\n        this._localToDispose.add(Event.runAndSubscribe(model.onDidChangeLanguageConfiguration, () => {\n            this._languageWordPattern = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n        }));\n        const rangeUpdateScheduler = new Delayer(this._debounceInformation.get(model));\n        const triggerRangeUpdate = () => {\n            var _a;\n            this._rangeUpdateTriggerPromise = rangeUpdateScheduler.trigger(() => this.updateRanges(), (_a = this._debounceDuration) !== null && _a !== void 0 ? _a : this._debounceInformation.get(model));\n        };\n        const rangeSyncScheduler = new Delayer(0);\n        const triggerRangeSync = (decorations) => {\n            this._rangeSyncTriggerPromise = rangeSyncScheduler.trigger(() => this._syncRanges(decorations));\n        };\n        this._localToDispose.add(this._editor.onDidChangeCursorPosition(() => {\n            triggerRangeUpdate();\n        }));\n        this._localToDispose.add(this._editor.onDidChangeModelContent((e) => {\n            if (!this._ignoreChangeEvent) {\n                if (this._currentDecorations.length > 0) {\n                    const referenceRange = model.getDecorationRange(this._currentDecorations[0]);\n                    if (referenceRange && e.changes.every(c => referenceRange.intersectRanges(c.range))) {\n                        triggerRangeSync(this._currentDecorations);\n                        return;\n                    }\n                }\n            }\n            triggerRangeUpdate();\n        }));\n        this._localToDispose.add({\n            dispose: () => {\n                rangeUpdateScheduler.dispose();\n                rangeSyncScheduler.dispose();\n            }\n        });\n        this.updateRanges();\n    }\n    _syncRanges(decorations) {\n        // dalayed invocation, make sure we're still on\n        if (!this._editor.hasModel() || decorations !== this._currentDecorations || decorations.length === 0) {\n            // nothing to do\n            return;\n        }\n        const model = this._editor.getModel();\n        const referenceRange = model.getDecorationRange(decorations[0]);\n        if (!referenceRange || referenceRange.startLineNumber !== referenceRange.endLineNumber) {\n            return this.clearRanges();\n        }\n        const referenceValue = model.getValueInRange(referenceRange);\n        if (this._currentWordPattern) {\n            const match = referenceValue.match(this._currentWordPattern);\n            const matchLength = match ? match[0].length : 0;\n            if (matchLength !== referenceValue.length) {\n                return this.clearRanges();\n            }\n        }\n        let edits = [];\n        for (let i = 1, len = decorations.length; i < len; i++) {\n            const mirrorRange = model.getDecorationRange(decorations[i]);\n            if (!mirrorRange) {\n                continue;\n            }\n            if (mirrorRange.startLineNumber !== mirrorRange.endLineNumber) {\n                edits.push({\n                    range: mirrorRange,\n                    text: referenceValue\n                });\n            }\n            else {\n                let oldValue = model.getValueInRange(mirrorRange);\n                let newValue = referenceValue;\n                let rangeStartColumn = mirrorRange.startColumn;\n                let rangeEndColumn = mirrorRange.endColumn;\n                const commonPrefixLength = strings.commonPrefixLength(oldValue, newValue);\n                rangeStartColumn += commonPrefixLength;\n                oldValue = oldValue.substr(commonPrefixLength);\n                newValue = newValue.substr(commonPrefixLength);\n                const commonSuffixLength = strings.commonSuffixLength(oldValue, newValue);\n                rangeEndColumn -= commonSuffixLength;\n                oldValue = oldValue.substr(0, oldValue.length - commonSuffixLength);\n                newValue = newValue.substr(0, newValue.length - commonSuffixLength);\n                if (rangeStartColumn !== rangeEndColumn || newValue.length !== 0) {\n                    edits.push({\n                        range: new Range(mirrorRange.startLineNumber, rangeStartColumn, mirrorRange.endLineNumber, rangeEndColumn),\n                        text: newValue\n                    });\n                }\n            }\n        }\n        if (edits.length === 0) {\n            return;\n        }\n        try {\n            this._editor.popUndoStop();\n            this._ignoreChangeEvent = true;\n            const prevEditOperationType = this._editor._getViewModel().getPrevEditOperationType();\n            this._editor.executeEdits('linkedEditing', edits);\n            this._editor._getViewModel().setPrevEditOperationType(prevEditOperationType);\n        }\n        finally {\n            this._ignoreChangeEvent = false;\n        }\n    }\n    dispose() {\n        this.clearRanges();\n        super.dispose();\n    }\n    clearRanges() {\n        this._visibleContextKey.set(false);\n        this._currentDecorations = this._editor.deltaDecorations(this._currentDecorations, []);\n        if (this._currentRequest) {\n            this._currentRequest.cancel();\n            this._currentRequest = null;\n            this._currentRequestPosition = null;\n        }\n    }\n    updateRanges(force = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                this.clearRanges();\n                return;\n            }\n            const position = this._editor.getPosition();\n            if (!this._enabled && !force || this._editor.getSelections().length > 1) {\n                // disabled or multicursor\n                this.clearRanges();\n                return;\n            }\n            const model = this._editor.getModel();\n            const modelVersionId = model.getVersionId();\n            if (this._currentRequestPosition && this._currentRequestModelVersion === modelVersionId) {\n                if (position.equals(this._currentRequestPosition)) {\n                    return; // same position\n                }\n                if (this._currentDecorations && this._currentDecorations.length > 0) {\n                    const range = model.getDecorationRange(this._currentDecorations[0]);\n                    if (range && range.containsPosition(position)) {\n                        return; // just moving inside the existing primary range\n                    }\n                }\n            }\n            this._currentRequestPosition = position;\n            this._currentRequestModelVersion = modelVersionId;\n            const request = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const sw = new StopWatch(false);\n                    const response = yield getLinkedEditingRanges(this._providers, model, position, token);\n                    this._debounceInformation.update(model, sw.elapsed());\n                    if (request !== this._currentRequest) {\n                        return;\n                    }\n                    this._currentRequest = null;\n                    if (modelVersionId !== model.getVersionId()) {\n                        return;\n                    }\n                    let ranges = [];\n                    if (response === null || response === void 0 ? void 0 : response.ranges) {\n                        ranges = response.ranges;\n                    }\n                    this._currentWordPattern = (response === null || response === void 0 ? void 0 : response.wordPattern) || this._languageWordPattern;\n                    let foundReferenceRange = false;\n                    for (let i = 0, len = ranges.length; i < len; i++) {\n                        if (Range.containsPosition(ranges[i], position)) {\n                            foundReferenceRange = true;\n                            if (i !== 0) {\n                                const referenceRange = ranges[i];\n                                ranges.splice(i, 1);\n                                ranges.unshift(referenceRange);\n                            }\n                            break;\n                        }\n                    }\n                    if (!foundReferenceRange) {\n                        // Cannot do linked editing if the ranges are not where the cursor is...\n                        this.clearRanges();\n                        return;\n                    }\n                    const decorations = ranges.map(range => ({ range: range, options: LinkedEditingContribution.DECORATION }));\n                    this._visibleContextKey.set(true);\n                    this._currentDecorations = this._editor.deltaDecorations(this._currentDecorations, decorations);\n                }\n                catch (err) {\n                    if (!isCancellationError(err)) {\n                        onUnexpectedError(err);\n                    }\n                    if (this._currentRequest === request || !this._currentRequest) {\n                        // stop if we are still the latest request\n                        this.clearRanges();\n                    }\n                }\n            }));\n            this._currentRequest = request;\n            return request;\n        });\n    }\n};\nLinkedEditingContribution.ID = 'editor.contrib.linkedEditing';\nLinkedEditingContribution.DECORATION = ModelDecorationOptions.register({\n    description: 'linked-editing',\n    stickiness: 0 /* AlwaysGrowsWhenTypingAtEdges */,\n    className: DECORATION_CLASS_NAME\n});\nLinkedEditingContribution = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeatureDebounceService)\n], LinkedEditingContribution);\nexport { LinkedEditingContribution };\nexport class LinkedEditingAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.linkedEditing',\n            label: nls.localize('linkedEditing.label', \"Start Linked Editing\"),\n            alias: 'Start Linked Editing',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 60 /* F2 */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    runCommand(accessor, args) {\n        const editorService = accessor.get(ICodeEditorService);\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n                if (!editor) {\n                    return;\n                }\n                editor.setPosition(pos);\n                editor.invokeWithinContext(accessor => {\n                    this.reportTelemetry(accessor, editor);\n                    return this.run(accessor, editor);\n                });\n            }, onUnexpectedError);\n        }\n        return super.runCommand(accessor, args);\n    }\n    run(_accessor, editor) {\n        const controller = LinkedEditingContribution.get(editor);\n        if (controller) {\n            return Promise.resolve(controller.updateRanges(true));\n        }\n        return Promise.resolve();\n    }\n}\nconst LinkedEditingCommand = EditorCommand.bindToContribution(LinkedEditingContribution.get);\nregisterEditorCommand(new LinkedEditingCommand({\n    id: 'cancelLinkedEditingInput',\n    precondition: CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE,\n    handler: x => x.clearRanges(),\n    kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        weight: 100 /* EditorContrib */ + 99,\n        primary: 9 /* Escape */,\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\n    }\n}));\nfunction getLinkedEditingRanges(providers, model, position, token) {\n    const orderedByScore = providers.ordered(model);\n    // in order of score ask the linked editing range provider\n    // until someone response with a good result\n    // (good = not null)\n    return first(orderedByScore.map(provider => () => __awaiter(this, void 0, void 0, function* () {\n        try {\n            return yield provider.provideLinkedEditingRanges(model, position, token);\n        }\n        catch (e) {\n            onUnexpectedExternalError(e);\n            return undefined;\n        }\n    })), result => !!result && arrays.isNonEmptyArray(result === null || result === void 0 ? void 0 : result.ranges));\n}\nexport const editorLinkedEditingBackground = registerColor('editor.linkedEditingBackground', { dark: Color.fromHex('#f00').transparent(0.3), light: Color.fromHex('#f00').transparent(0.3), hc: Color.fromHex('#f00').transparent(0.3) }, nls.localize('editorLinkedEditingBackground', 'Background color when the editor auto renames on type.'));\nregisterThemingParticipant((theme, collector) => {\n    const editorLinkedEditingBackgroundColor = theme.getColor(editorLinkedEditingBackground);\n    if (editorLinkedEditingBackgroundColor) {\n        collector.addRule(`.monaco-editor .${DECORATION_CLASS_NAME} { background: ${editorLinkedEditingBackgroundColor}; border-left-color: ${editorLinkedEditingBackgroundColor}; }`);\n    }\n});\nregisterModelAndPositionCommand('_executeLinkedEditingProvider', (_accessor, model, position) => {\n    const { linkedEditingRangeProvider } = _accessor.get(ILanguageFeaturesService);\n    return getLinkedEditingRanges(linkedEditingRangeProvider, model, position, CancellationToken.None);\n});\nregisterEditorContribution(LinkedEditingContribution.ID, LinkedEditingContribution);\nregisterEditorAction(LinkedEditingAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as resources from '../../../../base/common/resources.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport './links.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { getLinks } from './getLinks.js';\nimport * as nls from '../../../../nls.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { editorActiveLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nlet LinkDetector = class LinkDetector extends Disposable {\n    constructor(editor, openerService, notificationService, languageFeaturesService, languageFeatureDebounceService) {\n        super();\n        this.editor = editor;\n        this.openerService = openerService;\n        this.notificationService = notificationService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.providers = this.languageFeaturesService.linkProvider;\n        this.debounceInformation = languageFeatureDebounceService.for(this.providers, 'Links', { min: 1000, max: 4000 });\n        this.computeLinks = this._register(new RunOnceScheduler(() => this.computeLinksNow(), 1000));\n        this.computePromise = null;\n        this.activeLinksList = null;\n        this.currentOccurrences = {};\n        this.activeLinkDecorationId = null;\n        const clickLinkGesture = this._register(new ClickLinkGesture(editor));\n        this._register(clickLinkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n            this._onEditorMouseMove(mouseEvent, keyboardEvent);\n        }));\n        this._register(clickLinkGesture.onExecute((e) => {\n            this.onEditorMouseUp(e);\n        }));\n        this._register(clickLinkGesture.onCancel((e) => {\n            this.cleanUpActiveLinkDecoration();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (!e.hasChanged(63 /* links */)) {\n                return;\n            }\n            // Remove any links (for the getting disabled case)\n            this.updateDecorations([]);\n            // Stop any computation (for the getting disabled case)\n            this.stop();\n            // Start computing (for the getting enabled case)\n            this.computeLinks.schedule(0);\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            if (!this.editor.hasModel()) {\n                return;\n            }\n            this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()));\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this.currentOccurrences = {};\n            this.activeLinkDecorationId = null;\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this._register(editor.onDidChangeModelLanguage((e) => {\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this._register(this.providers.onDidChange((e) => {\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this.computeLinks.schedule(0);\n    }\n    static get(editor) {\n        return editor.getContribution(LinkDetector.ID);\n    }\n    computeLinksNow() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.editor.hasModel() || !this.editor.getOption(63 /* links */)) {\n                return;\n            }\n            const model = this.editor.getModel();\n            if (!this.providers.has(model)) {\n                return;\n            }\n            if (this.activeLinksList) {\n                this.activeLinksList.dispose();\n                this.activeLinksList = null;\n            }\n            this.computePromise = createCancelablePromise(token => getLinks(this.providers, model, token));\n            try {\n                const sw = new StopWatch(false);\n                this.activeLinksList = yield this.computePromise;\n                this.debounceInformation.update(model, sw.elapsed());\n                if (model.isDisposed()) {\n                    return;\n                }\n                this.updateDecorations(this.activeLinksList.links);\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                this.computePromise = null;\n            }\n        });\n    }\n    updateDecorations(links) {\n        const useMetaKey = (this.editor.getOption(70 /* multiCursorModifier */) === 'altKey');\n        const oldDecorations = [];\n        const keys = Object.keys(this.currentOccurrences);\n        for (const decorationId of keys) {\n            const occurence = this.currentOccurrences[decorationId];\n            oldDecorations.push(occurence.decorationId);\n        }\n        const newDecorations = [];\n        if (links) {\n            // Not sure why this is sometimes null\n            for (const link of links) {\n                newDecorations.push(LinkOccurrence.decoration(link, useMetaKey));\n            }\n        }\n        const decorations = this.editor.deltaDecorations(oldDecorations, newDecorations);\n        this.currentOccurrences = {};\n        this.activeLinkDecorationId = null;\n        for (let i = 0, len = decorations.length; i < len; i++) {\n            const occurence = new LinkOccurrence(links[i], decorations[i]);\n            this.currentOccurrences[occurence.decorationId] = occurence;\n        }\n    }\n    _onEditorMouseMove(mouseEvent, withKey) {\n        const useMetaKey = (this.editor.getOption(70 /* multiCursorModifier */) === 'altKey');\n        if (this.isEnabled(mouseEvent, withKey)) {\n            this.cleanUpActiveLinkDecoration(); // always remove previous link decoration as their can only be one\n            const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n            if (occurrence) {\n                this.editor.changeDecorations((changeAccessor) => {\n                    occurrence.activate(changeAccessor, useMetaKey);\n                    this.activeLinkDecorationId = occurrence.decorationId;\n                });\n            }\n        }\n        else {\n            this.cleanUpActiveLinkDecoration();\n        }\n    }\n    cleanUpActiveLinkDecoration() {\n        const useMetaKey = (this.editor.getOption(70 /* multiCursorModifier */) === 'altKey');\n        if (this.activeLinkDecorationId) {\n            const occurrence = this.currentOccurrences[this.activeLinkDecorationId];\n            if (occurrence) {\n                this.editor.changeDecorations((changeAccessor) => {\n                    occurrence.deactivate(changeAccessor, useMetaKey);\n                });\n            }\n            this.activeLinkDecorationId = null;\n        }\n    }\n    onEditorMouseUp(mouseEvent) {\n        if (!this.isEnabled(mouseEvent)) {\n            return;\n        }\n        const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n        if (!occurrence) {\n            return;\n        }\n        this.openLinkOccurrence(occurrence, mouseEvent.hasSideBySideModifier, true /* from user gesture */);\n    }\n    openLinkOccurrence(occurrence, openToSide, fromUserGesture = false) {\n        if (!this.openerService) {\n            return;\n        }\n        const { link } = occurrence;\n        link.resolve(CancellationToken.None).then(uri => {\n            // Support for relative file URIs of the shape file://./relativeFile.txt or file:///./relativeFile.txt\n            if (typeof uri === 'string' && this.editor.hasModel()) {\n                const modelUri = this.editor.getModel().uri;\n                if (modelUri.scheme === Schemas.file && uri.startsWith(`${Schemas.file}:`)) {\n                    const parsedUri = URI.parse(uri);\n                    if (parsedUri.scheme === Schemas.file) {\n                        const fsPath = resources.originalFSPath(parsedUri);\n                        let relativePath = null;\n                        if (fsPath.startsWith('/./')) {\n                            relativePath = `.${fsPath.substr(1)}`;\n                        }\n                        else if (fsPath.startsWith('//./')) {\n                            relativePath = `.${fsPath.substr(2)}`;\n                        }\n                        if (relativePath) {\n                            uri = resources.joinPath(modelUri, relativePath);\n                        }\n                    }\n                }\n            }\n            return this.openerService.open(uri, { openToSide, fromUserGesture, allowContributedOpeners: true, allowCommands: true });\n        }, err => {\n            const messageOrError = err instanceof Error ? err.message : err;\n            // different error cases\n            if (messageOrError === 'invalid') {\n                this.notificationService.warn(nls.localize('invalid.url', 'Failed to open this link because it is not well-formed: {0}', link.url.toString()));\n            }\n            else if (messageOrError === 'missing') {\n                this.notificationService.warn(nls.localize('missing.url', 'Failed to open this link because its target is missing.'));\n            }\n            else {\n                onUnexpectedError(err);\n            }\n        });\n    }\n    getLinkOccurrence(position) {\n        if (!this.editor.hasModel() || !position) {\n            return null;\n        }\n        const decorations = this.editor.getModel().getDecorationsInRange({\n            startLineNumber: position.lineNumber,\n            startColumn: position.column,\n            endLineNumber: position.lineNumber,\n            endColumn: position.column\n        }, 0, true);\n        for (const decoration of decorations) {\n            const currentOccurrence = this.currentOccurrences[decoration.id];\n            if (currentOccurrence) {\n                return currentOccurrence;\n            }\n        }\n        return null;\n    }\n    isEnabled(mouseEvent, withKey) {\n        return Boolean((mouseEvent.target.type === 6 /* CONTENT_TEXT */)\n            && (mouseEvent.hasTriggerModifier || (withKey && withKey.keyCodeIsTriggerKey)));\n    }\n    stop() {\n        var _a;\n        this.computeLinks.cancel();\n        if (this.activeLinksList) {\n            (_a = this.activeLinksList) === null || _a === void 0 ? void 0 : _a.dispose();\n            this.activeLinksList = null;\n        }\n        if (this.computePromise) {\n            this.computePromise.cancel();\n            this.computePromise = null;\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.stop();\n    }\n};\nLinkDetector.ID = 'editor.linkDetector';\nLinkDetector = __decorate([\n    __param(1, IOpenerService),\n    __param(2, INotificationService),\n    __param(3, ILanguageFeaturesService),\n    __param(4, ILanguageFeatureDebounceService)\n], LinkDetector);\nexport { LinkDetector };\nconst decoration = {\n    general: ModelDecorationOptions.register({\n        description: 'detected-link',\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n        collapseOnReplaceEdit: true,\n        inlineClassName: 'detected-link'\n    }),\n    active: ModelDecorationOptions.register({\n        description: 'detected-link-active',\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n        collapseOnReplaceEdit: true,\n        inlineClassName: 'detected-link-active'\n    })\n};\nclass LinkOccurrence {\n    constructor(link, decorationId) {\n        this.link = link;\n        this.decorationId = decorationId;\n    }\n    static decoration(link, useMetaKey) {\n        return {\n            range: link.range,\n            options: LinkOccurrence._getOptions(link, useMetaKey, false)\n        };\n    }\n    static _getOptions(link, useMetaKey, isActive) {\n        const options = Object.assign({}, (isActive ? decoration.active : decoration.general));\n        options.hoverMessage = getHoverMessage(link, useMetaKey);\n        return options;\n    }\n    activate(changeAccessor, useMetaKey) {\n        changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, true));\n    }\n    deactivate(changeAccessor, useMetaKey) {\n        changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, false));\n    }\n}\nfunction getHoverMessage(link, useMetaKey) {\n    const executeCmd = link.url && /^command:/i.test(link.url.toString());\n    const label = link.tooltip\n        ? link.tooltip\n        : executeCmd\n            ? nls.localize('links.navigate.executeCmd', 'Execute command')\n            : nls.localize('links.navigate.follow', 'Follow link');\n    const kb = useMetaKey\n        ? platform.isMacintosh\n            ? nls.localize('links.navigate.kb.meta.mac', \"cmd + click\")\n            : nls.localize('links.navigate.kb.meta', \"ctrl + click\")\n        : platform.isMacintosh\n            ? nls.localize('links.navigate.kb.alt.mac', \"option + click\")\n            : nls.localize('links.navigate.kb.alt', \"alt + click\");\n    if (link.url) {\n        let nativeLabel = '';\n        if (/^command:/i.test(link.url.toString())) {\n            // Don't show complete command arguments in the native tooltip\n            const match = link.url.toString().match(/^command:([^?#]+)/);\n            if (match) {\n                const commandId = match[1];\n                const nativeLabelText = nls.localize('tooltip.explanation', \"Execute command {0}\", commandId);\n                nativeLabel = ` \"${nativeLabelText}\"`;\n            }\n        }\n        const hoverMessage = new MarkdownString('', true).appendMarkdown(`[${label}](${link.url.toString(true).replace(/ /g, '%20')}${nativeLabel}) (${kb})`);\n        return hoverMessage;\n    }\n    else {\n        return new MarkdownString().appendText(`${label} (${kb})`);\n    }\n}\nclass OpenLinkAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.openLink',\n            label: nls.localize('label', \"Open Link\"),\n            alias: 'Open Link',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const linkDetector = LinkDetector.get(editor);\n        if (!linkDetector) {\n            return;\n        }\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        for (const sel of selections) {\n            const link = linkDetector.getLinkOccurrence(sel.getEndPosition());\n            if (link) {\n                linkDetector.openLinkOccurrence(link, false);\n            }\n        }\n    }\n}\nregisterEditorContribution(LinkDetector.ID, LinkDetector);\nregisterEditorAction(OpenLinkAction);\nregisterThemingParticipant((theme, collector) => {\n    const activeLinkForeground = theme.getColor(editorActiveLinkForeground);\n    if (activeLinkForeground) {\n        collector.addRule(`.monaco-editor .detected-link-active { color: ${activeLinkForeground} !important; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class Link {\n    constructor(link, provider) {\n        this._link = link;\n        this._provider = provider;\n    }\n    toJSON() {\n        return {\n            range: this.range,\n            url: this.url,\n            tooltip: this.tooltip\n        };\n    }\n    get range() {\n        return this._link.range;\n    }\n    get url() {\n        return this._link.url;\n    }\n    get tooltip() {\n        return this._link.tooltip;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._link.url) {\n                return this._link.url;\n            }\n            if (typeof this._provider.resolveLink === 'function') {\n                return Promise.resolve(this._provider.resolveLink(this._link, token)).then(value => {\n                    this._link = value || this._link;\n                    if (this._link.url) {\n                        // recurse\n                        return this.resolve(token);\n                    }\n                    return Promise.reject(new Error('missing'));\n                });\n            }\n            return Promise.reject(new Error('missing'));\n        });\n    }\n}\nexport class LinksList {\n    constructor(tuples) {\n        this._disposables = new DisposableStore();\n        let links = [];\n        for (const [list, provider] of tuples) {\n            // merge all links\n            const newLinks = list.links.map(link => new Link(link, provider));\n            links = LinksList._union(links, newLinks);\n            // register disposables\n            if (isDisposable(list)) {\n                this._disposables.add(list);\n            }\n        }\n        this.links = links;\n    }\n    dispose() {\n        this._disposables.dispose();\n        this.links.length = 0;\n    }\n    static _union(oldLinks, newLinks) {\n        // reunite oldLinks with newLinks and remove duplicates\n        let result = [];\n        let oldIndex;\n        let oldLen;\n        let newIndex;\n        let newLen;\n        for (oldIndex = 0, newIndex = 0, oldLen = oldLinks.length, newLen = newLinks.length; oldIndex < oldLen && newIndex < newLen;) {\n            const oldLink = oldLinks[oldIndex];\n            const newLink = newLinks[newIndex];\n            if (Range.areIntersectingOrTouching(oldLink.range, newLink.range)) {\n                // Remove the oldLink\n                oldIndex++;\n                continue;\n            }\n            const comparisonResult = Range.compareRangesUsingStarts(oldLink.range, newLink.range);\n            if (comparisonResult < 0) {\n                // oldLink is before\n                result.push(oldLink);\n                oldIndex++;\n            }\n            else {\n                // newLink is before\n                result.push(newLink);\n                newIndex++;\n            }\n        }\n        for (; oldIndex < oldLen; oldIndex++) {\n            result.push(oldLinks[oldIndex]);\n        }\n        for (; newIndex < newLen; newIndex++) {\n            result.push(newLinks[newIndex]);\n        }\n        return result;\n    }\n}\nexport function getLinks(providers, model, token) {\n    const lists = [];\n    // ask all providers for links in parallel\n    const promises = providers.ordered(model).reverse().map((provider, i) => {\n        return Promise.resolve(provider.provideLinks(model, token)).then(result => {\n            if (result) {\n                lists[i] = [result, provider];\n            }\n        }, onUnexpectedExternalError);\n    });\n    return Promise.all(promises).then(() => {\n        const result = new LinksList(coalesce(lists));\n        if (!token.isCancellationRequested) {\n            return result;\n        }\n        result.dispose();\n        return new LinksList([]);\n    });\n}\nCommandsRegistry.registerCommand('_executeLinkProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    let [uri, resolveCount] = args;\n    assertType(uri instanceof URI);\n    if (typeof resolveCount !== 'number') {\n        resolveCount = 0;\n    }\n    const { linkProvider } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        return [];\n    }\n    const list = yield getLinks(linkProvider, model, CancellationToken.None);\n    if (!list) {\n        return [];\n    }\n    // resolve links\n    for (let i = 0; i < Math.min(resolveCount, list.links.length); i++) {\n        yield list.links[i].resolve(CancellationToken.None);\n    }\n    const result = list.links.slice(0);\n    list.dispose();\n    return result;\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { CursorMoveCommands } from '../../../common/cursor/cursorMoveCommands.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane, MinimapPosition } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { CommonFindController } from '../../find/browser/findController.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { overviewRulerSelectionHighlightForeground, minimapSelectionOccurrenceHighlight } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nfunction announceCursorChange(previousCursorState, cursorState) {\n    const cursorDiff = cursorState.filter(cs => !previousCursorState.find(pcs => pcs.equals(cs)));\n    if (cursorDiff.length >= 1) {\n        const cursorPositions = cursorDiff.map(cs => `line ${cs.viewState.position.lineNumber} column ${cs.viewState.position.column}`).join(', ');\n        const msg = cursorDiff.length === 1 ? nls.localize('cursorAdded', \"Cursor added: {0}\", cursorPositions) : nls.localize('cursorsAdded', \"Cursors added: {0}\", cursorPositions);\n        status(msg);\n    }\n}\nexport class InsertCursorAbove extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorAbove',\n            label: nls.localize('mutlicursor.insertAbove', \"Add Cursor Above\"),\n            alias: 'Add Cursor Above',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 16 /* UpArrow */,\n                linux: {\n                    primary: 1024 /* Shift */ | 512 /* Alt */ | 16 /* UpArrow */,\n                    secondary: [2048 /* CtrlCmd */ | 1024 /* Shift */ | 16 /* UpArrow */]\n                },\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorAbove', comment: ['&& denotes a mnemonic'] }, \"&&Add Cursor Above\"),\n                order: 2\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let useLogicalLine = true;\n        if (args && args.logicalLine === false) {\n            useLogicalLine = false;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = viewModel.getCursorStates();\n        viewModel.setCursorStates(args.source, 3 /* Explicit */, CursorMoveCommands.addCursorUp(viewModel, previousCursorState, useLogicalLine));\n        viewModel.revealTopMostCursor(args.source);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class InsertCursorBelow extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorBelow',\n            label: nls.localize('mutlicursor.insertBelow', \"Add Cursor Below\"),\n            alias: 'Add Cursor Below',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 18 /* DownArrow */,\n                linux: {\n                    primary: 1024 /* Shift */ | 512 /* Alt */ | 18 /* DownArrow */,\n                    secondary: [2048 /* CtrlCmd */ | 1024 /* Shift */ | 18 /* DownArrow */]\n                },\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorBelow', comment: ['&& denotes a mnemonic'] }, \"A&&dd Cursor Below\"),\n                order: 3\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let useLogicalLine = true;\n        if (args && args.logicalLine === false) {\n            useLogicalLine = false;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = viewModel.getCursorStates();\n        viewModel.setCursorStates(args.source, 3 /* Explicit */, CursorMoveCommands.addCursorDown(viewModel, previousCursorState, useLogicalLine));\n        viewModel.revealBottomMostCursor(args.source);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtEndOfEachLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorAtEndOfEachLineSelected',\n            label: nls.localize('mutlicursor.insertAtEndOfEachLineSelected', \"Add Cursors to Line Ends\"),\n            alias: 'Add Cursors to Line Ends',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 39 /* KeyI */,\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorAtEndOfEachLineSelected', comment: ['&& denotes a mnemonic'] }, \"Add C&&ursors to Line Ends\"),\n                order: 4\n            }\n        });\n    }\n    getCursorsForSelection(selection, model, result) {\n        if (selection.isEmpty()) {\n            return;\n        }\n        for (let i = selection.startLineNumber; i < selection.endLineNumber; i++) {\n            let currentLineMaxColumn = model.getLineMaxColumn(i);\n            result.push(new Selection(i, currentLineMaxColumn, i, currentLineMaxColumn));\n        }\n        if (selection.endColumn > 1) {\n            result.push(new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn));\n        }\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        let newSelections = [];\n        selections.forEach((sel) => this.getCursorsForSelection(sel, model, newSelections));\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtEndOfLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.addCursorsToBottom',\n            label: nls.localize('mutlicursor.addCursorsToBottom', \"Add Cursors To Bottom\"),\n            alias: 'Add Cursors To Bottom',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        const lineCount = editor.getModel().getLineCount();\n        let newSelections = [];\n        for (let i = selections[0].startLineNumber; i <= lineCount; i++) {\n            newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n        }\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtTopOfLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.addCursorsToTop',\n            label: nls.localize('mutlicursor.addCursorsToTop', \"Add Cursors To Top\"),\n            alias: 'Add Cursors To Top',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        let newSelections = [];\n        for (let i = selections[0].startLineNumber; i >= 1; i--) {\n            newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n        }\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class MultiCursorSessionResult {\n    constructor(selections, revealRange, revealScrollType) {\n        this.selections = selections;\n        this.revealRange = revealRange;\n        this.revealScrollType = revealScrollType;\n    }\n}\nexport class MultiCursorSession {\n    constructor(_editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch) {\n        this._editor = _editor;\n        this.findController = findController;\n        this.isDisconnectedFromFindController = isDisconnectedFromFindController;\n        this.searchText = searchText;\n        this.wholeWord = wholeWord;\n        this.matchCase = matchCase;\n        this.currentMatch = currentMatch;\n    }\n    static create(editor, findController) {\n        if (!editor.hasModel()) {\n            return null;\n        }\n        const findState = findController.getState();\n        // Find widget owns entirely what we search for if:\n        //  - focus is not in the editor (i.e. it is in the find widget)\n        //  - and the search widget is visible\n        //  - and the search string is non-empty\n        if (!editor.hasTextFocus() && findState.isRevealed && findState.searchString.length > 0) {\n            // Find widget owns what is searched for\n            return new MultiCursorSession(editor, findController, false, findState.searchString, findState.wholeWord, findState.matchCase, null);\n        }\n        // Otherwise, the selection gives the search text, and the find widget gives the search settings\n        // The exception is the find state disassociation case: when beginning with a single, collapsed selection\n        let isDisconnectedFromFindController = false;\n        let wholeWord;\n        let matchCase;\n        const selections = editor.getSelections();\n        if (selections.length === 1 && selections[0].isEmpty()) {\n            isDisconnectedFromFindController = true;\n            wholeWord = true;\n            matchCase = true;\n        }\n        else {\n            wholeWord = findState.wholeWord;\n            matchCase = findState.matchCase;\n        }\n        // Selection owns what is searched for\n        const s = editor.getSelection();\n        let searchText;\n        let currentMatch = null;\n        if (s.isEmpty()) {\n            // selection is empty => expand to current word\n            const word = editor.getConfiguredWordAtPosition(s.getStartPosition());\n            if (!word) {\n                return null;\n            }\n            searchText = word.word;\n            currentMatch = new Selection(s.startLineNumber, word.startColumn, s.startLineNumber, word.endColumn);\n        }\n        else {\n            searchText = editor.getModel().getValueInRange(s).replace(/\\r\\n/g, '\\n');\n        }\n        return new MultiCursorSession(editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch);\n    }\n    addSelectionToNextFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const nextMatch = this._getNextMatch();\n        if (!nextMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.concat(nextMatch), nextMatch, 0 /* Smooth */);\n    }\n    moveSelectionToNextFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const nextMatch = this._getNextMatch();\n        if (!nextMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(nextMatch), nextMatch, 0 /* Smooth */);\n    }\n    _getNextMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (this.currentMatch) {\n            const result = this.currentMatch;\n            this.currentMatch = null;\n            return result;\n        }\n        this.findController.highlightFindOptions();\n        const allSelections = this._editor.getSelections();\n        const lastAddedSelection = allSelections[allSelections.length - 1];\n        const nextMatch = this._editor.getModel().findNextMatch(this.searchText, lastAddedSelection.getEndPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(117 /* wordSeparators */) : null, false);\n        if (!nextMatch) {\n            return null;\n        }\n        return new Selection(nextMatch.range.startLineNumber, nextMatch.range.startColumn, nextMatch.range.endLineNumber, nextMatch.range.endColumn);\n    }\n    addSelectionToPreviousFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const previousMatch = this._getPreviousMatch();\n        if (!previousMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.concat(previousMatch), previousMatch, 0 /* Smooth */);\n    }\n    moveSelectionToPreviousFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const previousMatch = this._getPreviousMatch();\n        if (!previousMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(previousMatch), previousMatch, 0 /* Smooth */);\n    }\n    _getPreviousMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (this.currentMatch) {\n            const result = this.currentMatch;\n            this.currentMatch = null;\n            return result;\n        }\n        this.findController.highlightFindOptions();\n        const allSelections = this._editor.getSelections();\n        const lastAddedSelection = allSelections[allSelections.length - 1];\n        const previousMatch = this._editor.getModel().findPreviousMatch(this.searchText, lastAddedSelection.getStartPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(117 /* wordSeparators */) : null, false);\n        if (!previousMatch) {\n            return null;\n        }\n        return new Selection(previousMatch.range.startLineNumber, previousMatch.range.startColumn, previousMatch.range.endLineNumber, previousMatch.range.endColumn);\n    }\n    selectAll() {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        this.findController.highlightFindOptions();\n        return this._editor.getModel().findMatches(this.searchText, true, false, this.matchCase, this.wholeWord ? this._editor.getOption(117 /* wordSeparators */) : null, false, 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\n    }\n}\nexport class MultiCursorSelectionController extends Disposable {\n    constructor(editor) {\n        super();\n        this._sessionDispose = this._register(new DisposableStore());\n        this._editor = editor;\n        this._ignoreSelectionChange = false;\n        this._session = null;\n    }\n    static get(editor) {\n        return editor.getContribution(MultiCursorSelectionController.ID);\n    }\n    dispose() {\n        this._endSession();\n        super.dispose();\n    }\n    _beginSessionIfNeeded(findController) {\n        if (!this._session) {\n            // Create a new session\n            const session = MultiCursorSession.create(this._editor, findController);\n            if (!session) {\n                return;\n            }\n            this._session = session;\n            const newState = { searchString: this._session.searchText };\n            if (this._session.isDisconnectedFromFindController) {\n                newState.wholeWordOverride = 1 /* True */;\n                newState.matchCaseOverride = 1 /* True */;\n                newState.isRegexOverride = 2 /* False */;\n            }\n            findController.getState().change(newState, false);\n            this._sessionDispose.add(this._editor.onDidChangeCursorSelection((e) => {\n                if (this._ignoreSelectionChange) {\n                    return;\n                }\n                this._endSession();\n            }));\n            this._sessionDispose.add(this._editor.onDidBlurEditorText(() => {\n                this._endSession();\n            }));\n            this._sessionDispose.add(findController.getState().onFindReplaceStateChange((e) => {\n                if (e.matchCase || e.wholeWord) {\n                    this._endSession();\n                }\n            }));\n        }\n    }\n    _endSession() {\n        this._sessionDispose.clear();\n        if (this._session && this._session.isDisconnectedFromFindController) {\n            const newState = {\n                wholeWordOverride: 0 /* NotSet */,\n                matchCaseOverride: 0 /* NotSet */,\n                isRegexOverride: 0 /* NotSet */,\n            };\n            this._session.findController.getState().change(newState, false);\n        }\n        this._session = null;\n    }\n    _setSelections(selections) {\n        this._ignoreSelectionChange = true;\n        this._editor.setSelections(selections);\n        this._ignoreSelectionChange = false;\n    }\n    _expandEmptyToWord(model, selection) {\n        if (!selection.isEmpty()) {\n            return selection;\n        }\n        const word = this._editor.getConfiguredWordAtPosition(selection.getStartPosition());\n        if (!word) {\n            return selection;\n        }\n        return new Selection(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n    }\n    _applySessionResult(result) {\n        if (!result) {\n            return;\n        }\n        this._setSelections(result.selections);\n        if (result.revealRange) {\n            this._editor.revealRangeInCenterIfOutsideViewport(result.revealRange, result.revealScrollType);\n        }\n    }\n    getSession(findController) {\n        return this._session;\n    }\n    addSelectionToNextFindMatch(findController) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._session) {\n            // If there are multiple cursors, handle the case where they do not all select the same text.\n            const allSelections = this._editor.getSelections();\n            if (allSelections.length > 1) {\n                const findState = findController.getState();\n                const matchCase = findState.matchCase;\n                const selectionsContainSameText = modelRangesContainSameText(this._editor.getModel(), allSelections, matchCase);\n                if (!selectionsContainSameText) {\n                    const model = this._editor.getModel();\n                    let resultingSelections = [];\n                    for (let i = 0, len = allSelections.length; i < len; i++) {\n                        resultingSelections[i] = this._expandEmptyToWord(model, allSelections[i]);\n                    }\n                    this._editor.setSelections(resultingSelections);\n                    return;\n                }\n            }\n        }\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.addSelectionToNextFindMatch());\n        }\n    }\n    addSelectionToPreviousFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.addSelectionToPreviousFindMatch());\n        }\n    }\n    moveSelectionToNextFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.moveSelectionToNextFindMatch());\n        }\n    }\n    moveSelectionToPreviousFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.moveSelectionToPreviousFindMatch());\n        }\n    }\n    selectAll(findController) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        let matches = null;\n        const findState = findController.getState();\n        // Special case: find widget owns entirely what we search for if:\n        // - focus is not in the editor (i.e. it is in the find widget)\n        // - and the search widget is visible\n        // - and the search string is non-empty\n        // - and we're searching for a regex\n        if (findState.isRevealed && findState.searchString.length > 0 && findState.isRegex) {\n            matches = this._editor.getModel().findMatches(findState.searchString, true, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(117 /* wordSeparators */) : null, false, 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\n        }\n        else {\n            this._beginSessionIfNeeded(findController);\n            if (!this._session) {\n                return;\n            }\n            matches = this._session.selectAll();\n        }\n        if (findState.searchScope) {\n            const states = findState.searchScope;\n            let inSelection = [];\n            matches.forEach((match) => {\n                states.forEach((state) => {\n                    if (match.range.endLineNumber <= state.endLineNumber && match.range.startLineNumber >= state.startLineNumber) {\n                        inSelection.push(match);\n                    }\n                });\n            });\n            matches = inSelection;\n        }\n        if (matches.length > 0) {\n            const editorSelection = this._editor.getSelection();\n            // Have the primary cursor remain the one where the action was invoked\n            for (let i = 0, len = matches.length; i < len; i++) {\n                const match = matches[i];\n                const intersection = match.range.intersectRanges(editorSelection);\n                if (intersection) {\n                    // bingo!\n                    matches[i] = matches[0];\n                    matches[0] = match;\n                    break;\n                }\n            }\n            this._setSelections(matches.map(m => new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn)));\n        }\n    }\n}\nMultiCursorSelectionController.ID = 'editor.contrib.multiCursorController';\nexport class MultiCursorSelectionControllerAction extends EditorAction {\n    run(accessor, editor) {\n        const multiCursorController = MultiCursorSelectionController.get(editor);\n        if (!multiCursorController) {\n            return;\n        }\n        const findController = CommonFindController.get(editor);\n        if (!findController) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel) {\n            const previousCursorState = viewModel.getCursorStates();\n            this._run(multiCursorController, findController);\n            announceCursorChange(previousCursorState, viewModel.getCursorStates());\n        }\n    }\n}\nexport class AddSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.addSelectionToNextFindMatch',\n            label: nls.localize('addSelectionToNextFindMatch', \"Add Selection To Next Find Match\"),\n            alias: 'Add Selection To Next Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* CtrlCmd */ | 34 /* KeyD */,\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miAddSelectionToNextFindMatch', comment: ['&& denotes a mnemonic'] }, \"Add &&Next Occurrence\"),\n                order: 5\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.addSelectionToNextFindMatch(findController);\n    }\n}\nexport class AddSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.addSelectionToPreviousFindMatch',\n            label: nls.localize('addSelectionToPreviousFindMatch', \"Add Selection To Previous Find Match\"),\n            alias: 'Add Selection To Previous Find Match',\n            precondition: undefined,\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miAddSelectionToPreviousFindMatch', comment: ['&& denotes a mnemonic'] }, \"Add P&&revious Occurrence\"),\n                order: 6\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.addSelectionToPreviousFindMatch(findController);\n    }\n}\nexport class MoveSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.moveSelectionToNextFindMatch',\n            label: nls.localize('moveSelectionToNextFindMatch', \"Move Last Selection To Next Find Match\"),\n            alias: 'Move Last Selection To Next Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 34 /* KeyD */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.moveSelectionToNextFindMatch(findController);\n    }\n}\nexport class MoveSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.moveSelectionToPreviousFindMatch',\n            label: nls.localize('moveSelectionToPreviousFindMatch', \"Move Last Selection To Previous Find Match\"),\n            alias: 'Move Last Selection To Previous Find Match',\n            precondition: undefined\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.moveSelectionToPreviousFindMatch(findController);\n    }\n}\nexport class SelectHighlightsAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectHighlights',\n            label: nls.localize('selectAllOccurrencesOfFindMatch', \"Select All Occurrences of Find Match\"),\n            alias: 'Select All Occurrences of Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 42 /* KeyL */,\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miSelectHighlights', comment: ['&& denotes a mnemonic'] }, \"Select All &&Occurrences\"),\n                order: 7\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.selectAll(findController);\n    }\n}\nexport class CompatChangeAll extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.changeAll',\n            label: nls.localize('changeAll.label', \"Change All Occurrences\"),\n            alias: 'Change All Occurrences',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.editorTextFocus),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 60 /* F2 */,\n                weight: 100 /* EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.2\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.selectAll(findController);\n    }\n}\nclass SelectionHighlighterState {\n    constructor(_model, _searchText, _matchCase, _wordSeparators, prevState) {\n        this._model = _model;\n        this._searchText = _searchText;\n        this._matchCase = _matchCase;\n        this._wordSeparators = _wordSeparators;\n        this._modelVersionId = this._model.getVersionId();\n        this._cachedFindMatches = null;\n        if (prevState\n            && this._model === prevState._model\n            && this._searchText === prevState._searchText\n            && this._matchCase === prevState._matchCase\n            && this._wordSeparators === prevState._wordSeparators\n            && this._modelVersionId === prevState._modelVersionId) {\n            this._cachedFindMatches = prevState._cachedFindMatches;\n        }\n    }\n    findMatches() {\n        if (this._cachedFindMatches === null) {\n            this._cachedFindMatches = this._model.findMatches(this._searchText, true, false, this._matchCase, this._wordSeparators, false).map(m => m.range);\n            this._cachedFindMatches.sort(Range.compareRangesUsingStarts);\n        }\n        return this._cachedFindMatches;\n    }\n}\nlet SelectionHighlighter = class SelectionHighlighter extends Disposable {\n    constructor(editor, _languageFeaturesService) {\n        super();\n        this._languageFeaturesService = _languageFeaturesService;\n        this.editor = editor;\n        this._isEnabled = editor.getOption(97 /* selectionHighlight */);\n        this.decorations = [];\n        this.updateSoon = this._register(new RunOnceScheduler(() => this._update(), 300));\n        this.state = null;\n        this._register(editor.onDidChangeConfiguration((e) => {\n            this._isEnabled = editor.getOption(97 /* selectionHighlight */);\n        }));\n        this._register(editor.onDidChangeCursorSelection((e) => {\n            if (!this._isEnabled) {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            if (e.selection.isEmpty()) {\n                if (e.reason === 3 /* Explicit */) {\n                    if (this.state) {\n                        // no longer valid\n                        this._setState(null);\n                    }\n                    this.updateSoon.schedule();\n                }\n                else {\n                    this._setState(null);\n                }\n            }\n            else {\n                this._update();\n            }\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._setState(null);\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            if (this._isEnabled) {\n                this.updateSoon.schedule();\n            }\n        }));\n        const findController = CommonFindController.get(editor);\n        if (findController) {\n            this._register(findController.getState().onFindReplaceStateChange((e) => {\n                this._update();\n            }));\n        }\n    }\n    _update() {\n        this._setState(SelectionHighlighter._createState(this.state, this._isEnabled, this.editor));\n    }\n    static _createState(oldState, isEnabled, editor) {\n        if (!isEnabled) {\n            return null;\n        }\n        if (!editor.hasModel()) {\n            return null;\n        }\n        const s = editor.getSelection();\n        if (s.startLineNumber !== s.endLineNumber) {\n            // multiline forbidden for perf reasons\n            return null;\n        }\n        const multiCursorController = MultiCursorSelectionController.get(editor);\n        if (!multiCursorController) {\n            return null;\n        }\n        const findController = CommonFindController.get(editor);\n        if (!findController) {\n            return null;\n        }\n        let r = multiCursorController.getSession(findController);\n        if (!r) {\n            const allSelections = editor.getSelections();\n            if (allSelections.length > 1) {\n                const findState = findController.getState();\n                const matchCase = findState.matchCase;\n                const selectionsContainSameText = modelRangesContainSameText(editor.getModel(), allSelections, matchCase);\n                if (!selectionsContainSameText) {\n                    return null;\n                }\n            }\n            r = MultiCursorSession.create(editor, findController);\n        }\n        if (!r) {\n            return null;\n        }\n        if (r.currentMatch) {\n            // This is an empty selection\n            // Do not interfere with semantic word highlighting in the no selection case\n            return null;\n        }\n        if (/^[ \\t]+$/.test(r.searchText)) {\n            // whitespace only selection\n            return null;\n        }\n        if (r.searchText.length > 200) {\n            // very long selection\n            return null;\n        }\n        // TODO: better handling of this case\n        const findState = findController.getState();\n        const caseSensitive = findState.matchCase;\n        // Return early if the find widget shows the exact same matches\n        if (findState.isRevealed) {\n            let findStateSearchString = findState.searchString;\n            if (!caseSensitive) {\n                findStateSearchString = findStateSearchString.toLowerCase();\n            }\n            let mySearchString = r.searchText;\n            if (!caseSensitive) {\n                mySearchString = mySearchString.toLowerCase();\n            }\n            if (findStateSearchString === mySearchString && r.matchCase === findState.matchCase && r.wholeWord === findState.wholeWord && !findState.isRegex) {\n                return null;\n            }\n        }\n        return new SelectionHighlighterState(editor.getModel(), r.searchText, r.matchCase, r.wholeWord ? editor.getOption(117 /* wordSeparators */) : null, oldState);\n    }\n    _setState(newState) {\n        this.state = newState;\n        if (!this.state) {\n            this.decorations = this.editor.deltaDecorations(this.decorations, []);\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const model = this.editor.getModel();\n        if (model.isTooLargeForTokenization()) {\n            // the file is too large, so searching word under cursor in the whole document would be blocking the UI.\n            return;\n        }\n        const allMatches = this.state.findMatches();\n        const selections = this.editor.getSelections();\n        selections.sort(Range.compareRangesUsingStarts);\n        // do not overlap with selection (issue #64 and #512)\n        const matches = [];\n        for (let i = 0, j = 0, len = allMatches.length, lenJ = selections.length; i < len;) {\n            const match = allMatches[i];\n            if (j >= lenJ) {\n                // finished all editor selections\n                matches.push(match);\n                i++;\n            }\n            else {\n                const cmp = Range.compareRangesUsingStarts(match, selections[j]);\n                if (cmp < 0) {\n                    // match is before sel\n                    if (selections[j].isEmpty() || !Range.areIntersecting(match, selections[j])) {\n                        matches.push(match);\n                    }\n                    i++;\n                }\n                else if (cmp > 0) {\n                    // sel is before match\n                    j++;\n                }\n                else {\n                    // sel is equal to match\n                    i++;\n                    j++;\n                }\n            }\n        }\n        const hasFindOccurrences = this._languageFeaturesService.documentHighlightProvider.has(model) && this.editor.getOption(72 /* occurrencesHighlight */);\n        const decorations = matches.map(r => {\n            return {\n                range: r,\n                // Show in overviewRuler only if model has no semantic highlighting\n                options: (hasFindOccurrences ? SelectionHighlighter._SELECTION_HIGHLIGHT : SelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW)\n            };\n        });\n        this.decorations = this.editor.deltaDecorations(this.decorations, decorations);\n    }\n    dispose() {\n        this._setState(null);\n        super.dispose();\n    }\n};\nSelectionHighlighter.ID = 'editor.contrib.selectionHighlighter';\nSelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW = ModelDecorationOptions.register({\n    description: 'selection-highlight-overview',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight',\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerSelectionHighlightForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nSelectionHighlighter._SELECTION_HIGHLIGHT = ModelDecorationOptions.register({\n    description: 'selection-highlight',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight',\n});\nSelectionHighlighter = __decorate([\n    __param(1, ILanguageFeaturesService)\n], SelectionHighlighter);\nexport { SelectionHighlighter };\nfunction modelRangesContainSameText(model, ranges, matchCase) {\n    const selectedText = getValueInRange(model, ranges[0], !matchCase);\n    for (let i = 1, len = ranges.length; i < len; i++) {\n        const range = ranges[i];\n        if (range.isEmpty()) {\n            return false;\n        }\n        const thisSelectedText = getValueInRange(model, range, !matchCase);\n        if (selectedText !== thisSelectedText) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction getValueInRange(model, range, toLowerCase) {\n    const text = model.getValueInRange(range);\n    return (toLowerCase ? text.toLowerCase() : text);\n}\nregisterEditorContribution(MultiCursorSelectionController.ID, MultiCursorSelectionController);\nregisterEditorContribution(SelectionHighlighter.ID, SelectionHighlighter);\nregisterEditorAction(InsertCursorAbove);\nregisterEditorAction(InsertCursorBelow);\nregisterEditorAction(InsertCursorAtEndOfEachLineSelected);\nregisterEditorAction(AddSelectionToNextFindMatchAction);\nregisterEditorAction(AddSelectionToPreviousFindMatchAction);\nregisterEditorAction(MoveSelectionToNextFindMatchAction);\nregisterEditorAction(MoveSelectionToPreviousFindMatchAction);\nregisterEditorAction(SelectHighlightsAction);\nregisterEditorAction(CompatChangeAll);\nregisterEditorAction(InsertCursorAtEndOfLineSelected);\nregisterEditorAction(InsertCursorAtTopOfLineSelected);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as languages from '../../../common/languages.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ParameterHintsWidget } from './parameterHintsWidget.js';\nlet ParameterHintsController = class ParameterHintsController extends Disposable {\n    constructor(editor, instantiationService) {\n        super();\n        this.editor = editor;\n        this.widget = this._register(instantiationService.createInstance(ParameterHintsWidget, this.editor));\n    }\n    static get(editor) {\n        return editor.getContribution(ParameterHintsController.ID);\n    }\n    cancel() {\n        this.widget.cancel();\n    }\n    previous() {\n        this.widget.previous();\n    }\n    next() {\n        this.widget.next();\n    }\n    trigger(context) {\n        this.widget.trigger(context);\n    }\n};\nParameterHintsController.ID = 'editor.controller.parameterHints';\nParameterHintsController = __decorate([\n    __param(1, IInstantiationService)\n], ParameterHintsController);\nexport class TriggerParameterHintsAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.triggerParameterHints',\n            label: nls.localize('parameterHints.trigger.label', \"Trigger Parameter Hints\"),\n            alias: 'Trigger Parameter Hints',\n            precondition: EditorContextKeys.hasSignatureHelpProvider,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 10 /* Space */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = ParameterHintsController.get(editor);\n        if (controller) {\n            controller.trigger({\n                triggerKind: languages.SignatureHelpTriggerKind.Invoke\n            });\n        }\n    }\n}\nregisterEditorContribution(ParameterHintsController.ID, ParameterHintsController);\nregisterEditorAction(TriggerParameterHintsAction);\nconst weight = 100 /* EditorContrib */ + 75;\nconst ParameterHintsCommand = EditorCommand.bindToContribution(ParameterHintsController.get);\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'closeParameterHints',\n    precondition: Context.Visible,\n    handler: x => x.cancel(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* Escape */,\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\n    }\n}));\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'showPrevParameterHint',\n    precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\n    handler: x => x.previous(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 16 /* UpArrow */,\n        secondary: [512 /* Alt */ | 16 /* UpArrow */],\n        mac: { primary: 16 /* UpArrow */, secondary: [512 /* Alt */ | 16 /* UpArrow */, 256 /* WinCtrl */ | 46 /* KeyP */] }\n    }\n}));\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'showNextParameterHint',\n    precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\n    handler: x => x.next(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 18 /* DownArrow */,\n        secondary: [512 /* Alt */ | 18 /* DownArrow */],\n        mac: { primary: 18 /* DownArrow */, secondary: [512 /* Alt */ | 18 /* DownArrow */, 256 /* WinCtrl */ | 44 /* KeyN */] }\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport * as languages from '../../../common/languages.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport const Context = {\n    Visible: new RawContextKey('parameterHintsVisible', false),\n    MultipleSignatures: new RawContextKey('parameterHintsMultipleSignatures', false),\n};\nexport function provideSignatureHelp(registry, model, position, context, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const supports = registry.ordered(model);\n        for (const support of supports) {\n            try {\n                const result = yield support.provideSignatureHelp(model, position, token, context);\n                if (result) {\n                    return result;\n                }\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n            }\n        }\n        return undefined;\n    });\n}\nCommandsRegistry.registerCommand('_executeSignatureHelpProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, position, triggerCharacter] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = yield provideSignatureHelp(languageFeaturesService.signatureHelpProvider, ref.object.textEditorModel, Position.lift(position), {\n            triggerKind: languages.SignatureHelpTriggerKind.Invoke,\n            isRetrigger: false,\n            triggerCharacter,\n        }, CancellationToken.None);\n        if (!result) {\n            return undefined;\n        }\n        setTimeout(() => result.dispose(), 0);\n        return result.value;\n    }\n    finally {\n        ref.dispose();\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport './parameterHints.css';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { ParameterHintsModel } from './parameterHintsModel.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground, registerColor, textCodeBlockBackground, textLinkActiveForeground, textLinkForeground, listHighlightForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { ColorScheme } from '../../../../platform/theme/common/theme.js';\nimport { registerThemingParticipant, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nconst $ = dom.$;\nconst parameterHintsNextIcon = registerIcon('parameter-hints-next', Codicon.chevronDown, nls.localize('parameterHintsNextIcon', 'Icon for show next parameter hint.'));\nconst parameterHintsPreviousIcon = registerIcon('parameter-hints-previous', Codicon.chevronUp, nls.localize('parameterHintsPreviousIcon', 'Icon for show previous parameter hint.'));\nlet ParameterHintsWidget = class ParameterHintsWidget extends Disposable {\n    constructor(editor, contextKeyService, openerService, languageService, languageFeaturesService) {\n        super();\n        this.editor = editor;\n        this.renderDisposeables = this._register(new DisposableStore());\n        this.visible = false;\n        this.announcedLabel = null;\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this.markdownRenderer = this._register(new MarkdownRenderer({ editor }, languageService, openerService));\n        this.model = this._register(new ParameterHintsModel(editor, languageFeaturesService.signatureHelpProvider));\n        this.keyVisible = Context.Visible.bindTo(contextKeyService);\n        this.keyMultipleSignatures = Context.MultipleSignatures.bindTo(contextKeyService);\n        this._register(this.model.onChangedHints(newParameterHints => {\n            if (newParameterHints) {\n                this.show();\n                this.render(newParameterHints);\n            }\n            else {\n                this.hide();\n            }\n        }));\n    }\n    createParameterHintDOMNodes() {\n        const element = $('.editor-widget.parameter-hints-widget');\n        const wrapper = dom.append(element, $('.phwrapper'));\n        wrapper.tabIndex = -1;\n        const controls = dom.append(wrapper, $('.controls'));\n        const previous = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsPreviousIcon)));\n        const overloads = dom.append(controls, $('.overloads'));\n        const next = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsNextIcon)));\n        this._register(dom.addDisposableListener(previous, 'click', e => {\n            dom.EventHelper.stop(e);\n            this.previous();\n        }));\n        this._register(dom.addDisposableListener(next, 'click', e => {\n            dom.EventHelper.stop(e);\n            this.next();\n        }));\n        const body = $('.body');\n        const scrollbar = new DomScrollableElement(body, {});\n        this._register(scrollbar);\n        wrapper.appendChild(scrollbar.getDomNode());\n        const signature = dom.append(body, $('.signature'));\n        const docs = dom.append(body, $('.docs'));\n        element.style.userSelect = 'text';\n        this.domNodes = {\n            element,\n            signature,\n            overloads,\n            docs,\n            scrollbar,\n        };\n        this.editor.addContentWidget(this);\n        this.hide();\n        this._register(this.editor.onDidChangeCursorSelection(e => {\n            if (this.visible) {\n                this.editor.layoutContentWidget(this);\n            }\n        }));\n        const updateFont = () => {\n            if (!this.domNodes) {\n                return;\n            }\n            const fontInfo = this.editor.getOption(44 /* fontInfo */);\n            this.domNodes.element.style.fontSize = `${fontInfo.fontSize}px`;\n            this.domNodes.element.style.lineHeight = `${fontInfo.lineHeight / fontInfo.fontSize}`;\n        };\n        updateFont();\n        this._register(Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor))\n            .filter(e => e.hasChanged(44 /* fontInfo */))\n            .on(updateFont, null));\n        this._register(this.editor.onDidLayoutChange(e => this.updateMaxHeight()));\n        this.updateMaxHeight();\n    }\n    show() {\n        if (this.visible) {\n            return;\n        }\n        if (!this.domNodes) {\n            this.createParameterHintDOMNodes();\n        }\n        this.keyVisible.set(true);\n        this.visible = true;\n        setTimeout(() => {\n            if (this.domNodes) {\n                this.domNodes.element.classList.add('visible');\n            }\n        }, 100);\n        this.editor.layoutContentWidget(this);\n    }\n    hide() {\n        this.renderDisposeables.clear();\n        if (!this.visible) {\n            return;\n        }\n        this.keyVisible.reset();\n        this.visible = false;\n        this.announcedLabel = null;\n        if (this.domNodes) {\n            this.domNodes.element.classList.remove('visible');\n        }\n        this.editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this.visible) {\n            return {\n                position: this.editor.getPosition(),\n                preference: [1 /* ABOVE */, 2 /* BELOW */]\n            };\n        }\n        return null;\n    }\n    render(hints) {\n        var _a;\n        this.renderDisposeables.clear();\n        if (!this.domNodes) {\n            return;\n        }\n        const multiple = hints.signatures.length > 1;\n        this.domNodes.element.classList.toggle('multiple', multiple);\n        this.keyMultipleSignatures.set(multiple);\n        this.domNodes.signature.innerText = '';\n        this.domNodes.docs.innerText = '';\n        const signature = hints.signatures[hints.activeSignature];\n        if (!signature) {\n            return;\n        }\n        const code = dom.append(this.domNodes.signature, $('.code'));\n        const fontInfo = this.editor.getOption(44 /* fontInfo */);\n        code.style.fontSize = `${fontInfo.fontSize}px`;\n        code.style.fontFamily = fontInfo.fontFamily;\n        const hasParameters = signature.parameters.length > 0;\n        const activeParameterIndex = (_a = signature.activeParameter) !== null && _a !== void 0 ? _a : hints.activeParameter;\n        if (!hasParameters) {\n            const label = dom.append(code, $('span'));\n            label.textContent = signature.label;\n        }\n        else {\n            this.renderParameters(code, signature, activeParameterIndex);\n        }\n        const activeParameter = signature.parameters[activeParameterIndex];\n        if (activeParameter === null || activeParameter === void 0 ? void 0 : activeParameter.documentation) {\n            const documentation = $('span.documentation');\n            if (typeof activeParameter.documentation === 'string') {\n                documentation.textContent = activeParameter.documentation;\n            }\n            else {\n                const renderedContents = this.renderMarkdownDocs(activeParameter.documentation);\n                documentation.appendChild(renderedContents.element);\n            }\n            dom.append(this.domNodes.docs, $('p', {}, documentation));\n        }\n        if (signature.documentation === undefined) {\n            /** no op */\n        }\n        else if (typeof signature.documentation === 'string') {\n            dom.append(this.domNodes.docs, $('p', {}, signature.documentation));\n        }\n        else {\n            const renderedContents = this.renderMarkdownDocs(signature.documentation);\n            dom.append(this.domNodes.docs, renderedContents.element);\n        }\n        const hasDocs = this.hasDocs(signature, activeParameter);\n        this.domNodes.signature.classList.toggle('has-docs', hasDocs);\n        this.domNodes.docs.classList.toggle('empty', !hasDocs);\n        this.domNodes.overloads.textContent =\n            String(hints.activeSignature + 1).padStart(hints.signatures.length.toString().length, '0') + '/' + hints.signatures.length;\n        if (activeParameter) {\n            let labelToAnnounce = '';\n            const param = signature.parameters[activeParameterIndex];\n            if (Array.isArray(param.label)) {\n                labelToAnnounce = signature.label.substring(param.label[0], param.label[1]);\n            }\n            else {\n                labelToAnnounce = param.label;\n            }\n            if (param.documentation) {\n                labelToAnnounce += typeof param.documentation === 'string' ? `, ${param.documentation}` : `, ${param.documentation.value}`;\n            }\n            if (signature.documentation) {\n                labelToAnnounce += typeof signature.documentation === 'string' ? `, ${signature.documentation}` : `, ${signature.documentation.value}`;\n            }\n            // Select method gets called on every user type while parameter hints are visible.\n            // We do not want to spam the user with same announcements, so we only announce if the current parameter changed.\n            if (this.announcedLabel !== labelToAnnounce) {\n                aria.alert(nls.localize('hint', \"{0}, hint\", labelToAnnounce));\n                this.announcedLabel = labelToAnnounce;\n            }\n        }\n        this.editor.layoutContentWidget(this);\n        this.domNodes.scrollbar.scanDomNode();\n    }\n    renderMarkdownDocs(markdown) {\n        const renderedContents = this.renderDisposeables.add(this.markdownRenderer.render(markdown, {\n            asyncRenderCallback: () => {\n                var _a;\n                (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.scrollbar.scanDomNode();\n            }\n        }));\n        renderedContents.element.classList.add('markdown-docs');\n        return renderedContents;\n    }\n    hasDocs(signature, activeParameter) {\n        if (activeParameter && typeof activeParameter.documentation === 'string' && assertIsDefined(activeParameter.documentation).length > 0) {\n            return true;\n        }\n        if (activeParameter && typeof activeParameter.documentation === 'object' && assertIsDefined(activeParameter.documentation).value.length > 0) {\n            return true;\n        }\n        if (signature.documentation && typeof signature.documentation === 'string' && assertIsDefined(signature.documentation).length > 0) {\n            return true;\n        }\n        if (signature.documentation && typeof signature.documentation === 'object' && assertIsDefined(signature.documentation.value).length > 0) {\n            return true;\n        }\n        return false;\n    }\n    renderParameters(parent, signature, activeParameterIndex) {\n        const [start, end] = this.getParameterLabelOffsets(signature, activeParameterIndex);\n        const beforeSpan = document.createElement('span');\n        beforeSpan.textContent = signature.label.substring(0, start);\n        const paramSpan = document.createElement('span');\n        paramSpan.textContent = signature.label.substring(start, end);\n        paramSpan.className = 'parameter active';\n        const afterSpan = document.createElement('span');\n        afterSpan.textContent = signature.label.substring(end);\n        dom.append(parent, beforeSpan, paramSpan, afterSpan);\n    }\n    getParameterLabelOffsets(signature, paramIdx) {\n        const param = signature.parameters[paramIdx];\n        if (!param) {\n            return [0, 0];\n        }\n        else if (Array.isArray(param.label)) {\n            return param.label;\n        }\n        else if (!param.label.length) {\n            return [0, 0];\n        }\n        else {\n            const regex = new RegExp(`(\\\\W|^)${escapeRegExpCharacters(param.label)}(?=\\\\W|$)`, 'g');\n            regex.test(signature.label);\n            const idx = regex.lastIndex - param.label.length;\n            return idx >= 0\n                ? [idx, regex.lastIndex]\n                : [0, 0];\n        }\n    }\n    next() {\n        this.editor.focus();\n        this.model.next();\n    }\n    previous() {\n        this.editor.focus();\n        this.model.previous();\n    }\n    cancel() {\n        this.model.cancel();\n    }\n    getDomNode() {\n        if (!this.domNodes) {\n            this.createParameterHintDOMNodes();\n        }\n        return this.domNodes.element;\n    }\n    getId() {\n        return ParameterHintsWidget.ID;\n    }\n    trigger(context) {\n        this.model.trigger(context, 0);\n    }\n    updateMaxHeight() {\n        if (!this.domNodes) {\n            return;\n        }\n        const height = Math.max(this.editor.getLayoutInfo().height / 4, 250);\n        const maxHeight = `${height}px`;\n        this.domNodes.element.style.maxHeight = maxHeight;\n        const wrapper = this.domNodes.element.getElementsByClassName('phwrapper');\n        if (wrapper.length) {\n            wrapper[0].style.maxHeight = maxHeight;\n        }\n    }\n};\nParameterHintsWidget.ID = 'editor.widget.parameterHintsWidget';\nParameterHintsWidget = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IOpenerService),\n    __param(3, ILanguageService),\n    __param(4, ILanguageFeaturesService)\n], ParameterHintsWidget);\nexport { ParameterHintsWidget };\nexport const editorHoverWidgetHighlightForeground = registerColor('editorHoverWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hc: listHighlightForeground }, nls.localize('editorHoverWidgetHighlightForeground', 'Foreground color of the active item in the parameter hint.'));\nregisterThemingParticipant((theme, collector) => {\n    const border = theme.getColor(editorHoverBorder);\n    if (border) {\n        const borderWidth = theme.type === ColorScheme.HIGH_CONTRAST ? 2 : 1;\n        collector.addRule(`.monaco-editor .parameter-hints-widget { border: ${borderWidth}px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${border.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${border.transparent(0.5)}; }`);\n    }\n    const background = theme.getColor(editorHoverBackground);\n    if (background) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${background}; }`);\n    }\n    const link = theme.getColor(textLinkForeground);\n    if (link) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget a { color: ${link}; }`);\n    }\n    const linkHover = theme.getColor(textLinkActiveForeground);\n    if (linkHover) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${linkHover}; }`);\n    }\n    const foreground = theme.getColor(editorHoverForeground);\n    if (foreground) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget { color: ${foreground}; }`);\n    }\n    const codeBackground = theme.getColor(textCodeBlockBackground);\n    if (codeBackground) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${codeBackground}; }`);\n    }\n    const parameterHighlightColor = theme.getColor(editorHoverWidgetHighlightForeground);\n    if (parameterHighlightColor) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${parameterHighlightColor}}`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, Delayer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport * as languages from '../../../common/languages.js';\nimport { provideSignatureHelp } from './provideSignatureHelp.js';\nvar ParameterHintState;\n(function (ParameterHintState) {\n    ParameterHintState.Default = { type: 0 /* Default */ };\n    class Pending {\n        constructor(request, previouslyActiveHints) {\n            this.request = request;\n            this.previouslyActiveHints = previouslyActiveHints;\n            this.type = 2 /* Pending */;\n        }\n    }\n    ParameterHintState.Pending = Pending;\n    class Active {\n        constructor(hints) {\n            this.hints = hints;\n            this.type = 1 /* Active */;\n        }\n    }\n    ParameterHintState.Active = Active;\n})(ParameterHintState || (ParameterHintState = {}));\nexport class ParameterHintsModel extends Disposable {\n    constructor(editor, providers, delay = ParameterHintsModel.DEFAULT_DELAY) {\n        super();\n        this._onChangedHints = this._register(new Emitter());\n        this.onChangedHints = this._onChangedHints.event;\n        this.triggerOnType = false;\n        this._state = ParameterHintState.Default;\n        this._pendingTriggers = [];\n        this._lastSignatureHelpResult = this._register(new MutableDisposable());\n        this.triggerChars = new CharacterSet();\n        this.retriggerChars = new CharacterSet();\n        this.triggerId = 0;\n        this.editor = editor;\n        this.providers = providers;\n        this.throttledDelayer = new Delayer(delay);\n        this._register(this.editor.onDidBlurEditorWidget(() => this.cancel()));\n        this._register(this.editor.onDidChangeConfiguration(() => this.onEditorConfigurationChange()));\n        this._register(this.editor.onDidChangeModel(e => this.onModelChanged()));\n        this._register(this.editor.onDidChangeModelLanguage(_ => this.onModelChanged()));\n        this._register(this.editor.onDidChangeCursorSelection(e => this.onCursorChange(e)));\n        this._register(this.editor.onDidChangeModelContent(e => this.onModelContentChange()));\n        this._register(this.providers.onDidChange(this.onModelChanged, this));\n        this._register(this.editor.onDidType(text => this.onDidType(text)));\n        this.onEditorConfigurationChange();\n        this.onModelChanged();\n    }\n    get state() { return this._state; }\n    set state(value) {\n        if (this._state.type === 2 /* Pending */) {\n            this._state.request.cancel();\n        }\n        this._state = value;\n    }\n    cancel(silent = false) {\n        this.state = ParameterHintState.Default;\n        this.throttledDelayer.cancel();\n        if (!silent) {\n            this._onChangedHints.fire(undefined);\n        }\n    }\n    trigger(context, delay) {\n        const model = this.editor.getModel();\n        if (!model || !this.providers.has(model)) {\n            return;\n        }\n        const triggerId = ++this.triggerId;\n        this._pendingTriggers.push(context);\n        this.throttledDelayer.trigger(() => {\n            return this.doTrigger(triggerId);\n        }, delay)\n            .catch(onUnexpectedError);\n    }\n    next() {\n        if (this.state.type !== 1 /* Active */) {\n            return;\n        }\n        const length = this.state.hints.signatures.length;\n        const activeSignature = this.state.hints.activeSignature;\n        const last = (activeSignature % length) === (length - 1);\n        const cycle = this.editor.getOption(76 /* parameterHints */).cycle;\n        // If there is only one signature, or we're on last signature of list\n        if ((length < 2 || last) && !cycle) {\n            this.cancel();\n            return;\n        }\n        this.updateActiveSignature(last && cycle ? 0 : activeSignature + 1);\n    }\n    previous() {\n        if (this.state.type !== 1 /* Active */) {\n            return;\n        }\n        const length = this.state.hints.signatures.length;\n        const activeSignature = this.state.hints.activeSignature;\n        const first = activeSignature === 0;\n        const cycle = this.editor.getOption(76 /* parameterHints */).cycle;\n        // If there is only one signature, or we're on first signature of list\n        if ((length < 2 || first) && !cycle) {\n            this.cancel();\n            return;\n        }\n        this.updateActiveSignature(first && cycle ? length - 1 : activeSignature - 1);\n    }\n    updateActiveSignature(activeSignature) {\n        if (this.state.type !== 1 /* Active */) {\n            return;\n        }\n        this.state = new ParameterHintState.Active(Object.assign(Object.assign({}, this.state.hints), { activeSignature }));\n        this._onChangedHints.fire(this.state.hints);\n    }\n    doTrigger(triggerId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const isRetrigger = this.state.type === 1 /* Active */ || this.state.type === 2 /* Pending */;\n            const activeSignatureHelp = this.getLastActiveHints();\n            this.cancel(true);\n            if (this._pendingTriggers.length === 0) {\n                return false;\n            }\n            const context = this._pendingTriggers.reduce(mergeTriggerContexts);\n            this._pendingTriggers = [];\n            const triggerContext = {\n                triggerKind: context.triggerKind,\n                triggerCharacter: context.triggerCharacter,\n                isRetrigger: isRetrigger,\n                activeSignatureHelp: activeSignatureHelp\n            };\n            if (!this.editor.hasModel()) {\n                return false;\n            }\n            const model = this.editor.getModel();\n            const position = this.editor.getPosition();\n            this.state = new ParameterHintState.Pending(createCancelablePromise(token => provideSignatureHelp(this.providers, model, position, triggerContext, token)), activeSignatureHelp);\n            try {\n                const result = yield this.state.request;\n                // Check that we are still resolving the correct signature help\n                if (triggerId !== this.triggerId) {\n                    result === null || result === void 0 ? void 0 : result.dispose();\n                    return false;\n                }\n                if (!result || !result.value.signatures || result.value.signatures.length === 0) {\n                    result === null || result === void 0 ? void 0 : result.dispose();\n                    this._lastSignatureHelpResult.clear();\n                    this.cancel();\n                    return false;\n                }\n                else {\n                    this.state = new ParameterHintState.Active(result.value);\n                    this._lastSignatureHelpResult.value = result;\n                    this._onChangedHints.fire(this.state.hints);\n                    return true;\n                }\n            }\n            catch (error) {\n                if (triggerId === this.triggerId) {\n                    this.state = ParameterHintState.Default;\n                }\n                onUnexpectedError(error);\n                return false;\n            }\n        });\n    }\n    getLastActiveHints() {\n        switch (this.state.type) {\n            case 1 /* Active */: return this.state.hints;\n            case 2 /* Pending */: return this.state.previouslyActiveHints;\n            default: return undefined;\n        }\n    }\n    get isTriggered() {\n        return this.state.type === 1 /* Active */\n            || this.state.type === 2 /* Pending */\n            || this.throttledDelayer.isTriggered();\n    }\n    onModelChanged() {\n        this.cancel();\n        // Update trigger characters\n        this.triggerChars = new CharacterSet();\n        this.retriggerChars = new CharacterSet();\n        const model = this.editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const support of this.providers.ordered(model)) {\n            for (const ch of support.signatureHelpTriggerCharacters || []) {\n                this.triggerChars.add(ch.charCodeAt(0));\n                // All trigger characters are also considered retrigger characters\n                this.retriggerChars.add(ch.charCodeAt(0));\n            }\n            for (const ch of support.signatureHelpRetriggerCharacters || []) {\n                this.retriggerChars.add(ch.charCodeAt(0));\n            }\n        }\n    }\n    onDidType(text) {\n        if (!this.triggerOnType) {\n            return;\n        }\n        const lastCharIndex = text.length - 1;\n        const triggerCharCode = text.charCodeAt(lastCharIndex);\n        if (this.triggerChars.has(triggerCharCode) || this.isTriggered && this.retriggerChars.has(triggerCharCode)) {\n            this.trigger({\n                triggerKind: languages.SignatureHelpTriggerKind.TriggerCharacter,\n                triggerCharacter: text.charAt(lastCharIndex),\n            });\n        }\n    }\n    onCursorChange(e) {\n        if (e.source === 'mouse') {\n            this.cancel();\n        }\n        else if (this.isTriggered) {\n            this.trigger({ triggerKind: languages.SignatureHelpTriggerKind.ContentChange });\n        }\n    }\n    onModelContentChange() {\n        if (this.isTriggered) {\n            this.trigger({ triggerKind: languages.SignatureHelpTriggerKind.ContentChange });\n        }\n    }\n    onEditorConfigurationChange() {\n        this.triggerOnType = this.editor.getOption(76 /* parameterHints */).enabled;\n        if (!this.triggerOnType) {\n            this.cancel();\n        }\n    }\n    dispose() {\n        this.cancel(true);\n        super.dispose();\n    }\n}\nParameterHintsModel.DEFAULT_DELAY = 120; // ms\nfunction mergeTriggerContexts(previous, current) {\n    switch (current.triggerKind) {\n        case languages.SignatureHelpTriggerKind.Invoke:\n            // Invoke overrides previous triggers.\n            return current;\n        case languages.SignatureHelpTriggerKind.ContentChange:\n            // Ignore content changes triggers\n            return previous;\n        case languages.SignatureHelpTriggerKind.TriggerCharacter:\n        default:\n            return current;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { IdleValue, raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ITextResourceConfigurationService } from '../../../common/services/textResourceConfiguration.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { CONTEXT_RENAME_INPUT_VISIBLE, RenameInputField } from './renameInputField.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nclass RenameSkeleton {\n    constructor(model, position, registry) {\n        this.model = model;\n        this.position = position;\n        this._providerRenameIdx = 0;\n        this._providers = registry.ordered(model);\n    }\n    hasProvider() {\n        return this._providers.length > 0;\n    }\n    resolveRenameLocation(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const rejects = [];\n            for (this._providerRenameIdx = 0; this._providerRenameIdx < this._providers.length; this._providerRenameIdx++) {\n                const provider = this._providers[this._providerRenameIdx];\n                if (!provider.resolveRenameLocation) {\n                    break;\n                }\n                let res = yield provider.resolveRenameLocation(this.model, this.position, token);\n                if (!res) {\n                    continue;\n                }\n                if (res.rejectReason) {\n                    rejects.push(res.rejectReason);\n                    continue;\n                }\n                return res;\n            }\n            const word = this.model.getWordAtPosition(this.position);\n            if (!word) {\n                return {\n                    range: Range.fromPositions(this.position),\n                    text: '',\n                    rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n                };\n            }\n            return {\n                range: new Range(this.position.lineNumber, word.startColumn, this.position.lineNumber, word.endColumn),\n                text: word.word,\n                rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n            };\n        });\n    }\n    provideRenameEdits(newName, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this._provideRenameEdits(newName, this._providerRenameIdx, [], token);\n        });\n    }\n    _provideRenameEdits(newName, i, rejects, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const provider = this._providers[i];\n            if (!provider) {\n                return {\n                    edits: [],\n                    rejectReason: rejects.join('\\n')\n                };\n            }\n            const result = yield provider.provideRenameEdits(this.model, this.position, newName, token);\n            if (!result) {\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(nls.localize('no result', \"No result.\")), token);\n            }\n            else if (result.rejectReason) {\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(result.rejectReason), token);\n            }\n            return result;\n        });\n    }\n}\nexport function rename(registry, model, position, newName) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const skeleton = new RenameSkeleton(model, position, registry);\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n            return { edits: [], rejectReason: loc.rejectReason };\n        }\n        return skeleton.provideRenameEdits(newName, CancellationToken.None);\n    });\n}\n// ---  register actions and commands\nlet RenameController = class RenameController {\n    constructor(editor, _instaService, _notificationService, _bulkEditService, _progressService, _logService, _configService, _languageFeaturesService) {\n        this.editor = editor;\n        this._instaService = _instaService;\n        this._notificationService = _notificationService;\n        this._bulkEditService = _bulkEditService;\n        this._progressService = _progressService;\n        this._logService = _logService;\n        this._configService = _configService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._dispoableStore = new DisposableStore();\n        this._cts = new CancellationTokenSource();\n        this._renameInputField = this._dispoableStore.add(new IdleValue(() => this._dispoableStore.add(this._instaService.createInstance(RenameInputField, this.editor, ['acceptRenameInput', 'acceptRenameInputWithPreview']))));\n    }\n    static get(editor) {\n        return editor.getContribution(RenameController.ID);\n    }\n    dispose() {\n        this._dispoableStore.dispose();\n        this._cts.dispose(true);\n    }\n    run() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            this._cts.dispose(true);\n            if (!this.editor.hasModel()) {\n                return undefined;\n            }\n            const position = this.editor.getPosition();\n            const skeleton = new RenameSkeleton(this.editor.getModel(), position, this._languageFeaturesService.renameProvider);\n            if (!skeleton.hasProvider()) {\n                return undefined;\n            }\n            this._cts = new EditorStateCancellationTokenSource(this.editor, 4 /* Position */ | 1 /* Value */);\n            // resolve rename location\n            let loc;\n            try {\n                const resolveLocationOperation = skeleton.resolveRenameLocation(this._cts.token);\n                this._progressService.showWhile(resolveLocationOperation, 250);\n                loc = yield resolveLocationOperation;\n            }\n            catch (e) {\n                (_a = MessageController.get(this.editor)) === null || _a === void 0 ? void 0 : _a.showMessage(e || nls.localize('resolveRenameLocationFailed', \"An unknown error occurred while resolving rename location\"), position);\n                return undefined;\n            }\n            if (!loc) {\n                return undefined;\n            }\n            if (loc.rejectReason) {\n                (_b = MessageController.get(this.editor)) === null || _b === void 0 ? void 0 : _b.showMessage(loc.rejectReason, position);\n                return undefined;\n            }\n            if (this._cts.token.isCancellationRequested) {\n                return undefined;\n            }\n            this._cts.dispose();\n            this._cts = new EditorStateCancellationTokenSource(this.editor, 4 /* Position */ | 1 /* Value */, loc.range);\n            // do rename at location\n            let selection = this.editor.getSelection();\n            let selectionStart = 0;\n            let selectionEnd = loc.text.length;\n            if (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(loc.range, selection)) {\n                selectionStart = Math.max(0, selection.startColumn - loc.range.startColumn);\n                selectionEnd = Math.min(loc.range.endColumn, selection.endColumn) - loc.range.startColumn;\n            }\n            const supportPreview = this._bulkEditService.hasPreviewHandler() && this._configService.getValue(this.editor.getModel().uri, 'editor.rename.enablePreview');\n            const inputFieldResult = yield this._renameInputField.value.getInput(loc.range, loc.text, selectionStart, selectionEnd, supportPreview, this._cts.token);\n            // no result, only hint to focus the editor or not\n            if (typeof inputFieldResult === 'boolean') {\n                if (inputFieldResult) {\n                    this.editor.focus();\n                }\n                return undefined;\n            }\n            this.editor.focus();\n            const renameOperation = raceCancellation(skeleton.provideRenameEdits(inputFieldResult.newName, this._cts.token), this._cts.token).then((renameResult) => __awaiter(this, void 0, void 0, function* () {\n                if (!renameResult || !this.editor.hasModel()) {\n                    return;\n                }\n                if (renameResult.rejectReason) {\n                    this._notificationService.info(renameResult.rejectReason);\n                    return;\n                }\n                // collapse selection to active end\n                this.editor.setSelection(Range.fromPositions(this.editor.getSelection().getPosition()));\n                this._bulkEditService.apply(ResourceEdit.convert(renameResult), {\n                    editor: this.editor,\n                    showPreview: inputFieldResult.wantsPreview,\n                    label: nls.localize('label', \"Renaming '{0}'\", loc === null || loc === void 0 ? void 0 : loc.text),\n                    quotableLabel: nls.localize('quotableLabel', \"Renaming {0}\", loc === null || loc === void 0 ? void 0 : loc.text),\n                }).then(result => {\n                    if (result.ariaSummary) {\n                        alert(nls.localize('aria', \"Successfully renamed '{0}' to '{1}'. Summary: {2}\", loc.text, inputFieldResult.newName, result.ariaSummary));\n                    }\n                }).catch(err => {\n                    this._notificationService.error(nls.localize('rename.failedApply', \"Rename failed to apply edits\"));\n                    this._logService.error(err);\n                });\n            }), err => {\n                this._notificationService.error(nls.localize('rename.failed', \"Rename failed to compute edits\"));\n                this._logService.error(err);\n            });\n            this._progressService.showWhile(renameOperation, 250);\n            return renameOperation;\n        });\n    }\n    acceptRenameInput(wantsPreview) {\n        this._renameInputField.value.acceptInput(wantsPreview);\n    }\n    cancelRenameInput() {\n        this._renameInputField.value.cancelInput(true);\n    }\n};\nRenameController.ID = 'editor.contrib.renameController';\nRenameController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, INotificationService),\n    __param(3, IBulkEditService),\n    __param(4, IEditorProgressService),\n    __param(5, ILogService),\n    __param(6, ITextResourceConfigurationService),\n    __param(7, ILanguageFeaturesService)\n], RenameController);\n// ---- action implementation\nexport class RenameAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.rename',\n            label: nls.localize('rename.label', \"Rename Symbol\"),\n            alias: 'Rename Symbol',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 60 /* F2 */,\n                weight: 100 /* EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.1\n            }\n        });\n    }\n    runCommand(accessor, args) {\n        const editorService = accessor.get(ICodeEditorService);\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n                if (!editor) {\n                    return;\n                }\n                editor.setPosition(pos);\n                editor.invokeWithinContext(accessor => {\n                    this.reportTelemetry(accessor, editor);\n                    return this.run(accessor, editor);\n                });\n            }, onUnexpectedError);\n        }\n        return super.runCommand(accessor, args);\n    }\n    run(accessor, editor) {\n        const controller = RenameController.get(editor);\n        if (controller) {\n            return controller.run();\n        }\n        return Promise.resolve();\n    }\n}\nregisterEditorContribution(RenameController.ID, RenameController);\nregisterEditorAction(RenameAction);\nconst RenameCommand = EditorCommand.bindToContribution(RenameController.get);\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.acceptRenameInput(false),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 3 /* Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInputWithPreview',\n    precondition: ContextKeyExpr.and(CONTEXT_RENAME_INPUT_VISIBLE, ContextKeyExpr.has('config.editor.rename.enablePreview')),\n    handler: x => x.acceptRenameInput(true),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 1024 /* Shift */ + 3 /* Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'cancelRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.cancelRenameInput(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* Escape */,\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\n    }\n}));\n// ---- api bridge command\nregisterModelAndPositionCommand('_executeDocumentRenameProvider', function (accessor, model, position, ...args) {\n    const [newName] = args;\n    assertType(typeof newName === 'string');\n    const { renameProvider } = accessor.get(ILanguageFeaturesService);\n    return rename(renameProvider, model, position, newName);\n});\nregisterModelAndPositionCommand('_executePrepareRename', function (accessor, model, position) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const { renameProvider } = accessor.get(ILanguageFeaturesService);\n        const skeleton = new RenameSkeleton(model, position, renameProvider);\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n            throw new Error(loc.rejectReason);\n        }\n        return loc;\n    });\n});\n//todo@jrieken use editor options world\nRegistry.as(Extensions.Configuration).registerConfiguration({\n    id: 'editor',\n    properties: {\n        'editor.rename.enablePreview': {\n            scope: 5 /* LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('enablePreview', \"Enable/disable the ability to preview changes before renaming\"),\n            default: true,\n            type: 'boolean'\n        }\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport './renameInputField.css';\nimport { Position } from '../../../common/core/position.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { editorWidgetBackground, inputBackground, inputBorder, inputForeground, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport const CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey('renameInputVisible', false, localize('renameInputVisible', \"Whether the rename input widget is visible\"));\nlet RenameInputField = class RenameInputField {\n    constructor(_editor, _acceptKeybindings, _themeService, _keybindingService, contextKeyService) {\n        this._editor = _editor;\n        this._acceptKeybindings = _acceptKeybindings;\n        this._themeService = _themeService;\n        this._keybindingService = _keybindingService;\n        this._disposables = new DisposableStore();\n        this.allowEditorOverflow = true;\n        this._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._editor.addContentWidget(this);\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(44 /* fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles, this));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return '__renameInputWidget';\n    }\n    getDomNode() {\n        if (!this._domNode) {\n            this._domNode = document.createElement('div');\n            this._domNode.className = 'monaco-editor rename-box';\n            this._input = document.createElement('input');\n            this._input.className = 'rename-input';\n            this._input.type = 'text';\n            this._input.setAttribute('aria-label', localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\n            this._domNode.appendChild(this._input);\n            this._label = document.createElement('div');\n            this._label.className = 'rename-label';\n            this._domNode.appendChild(this._label);\n            const updateLabel = () => {\n                var _a, _b;\n                const [accept, preview] = this._acceptKeybindings;\n                this._keybindingService.lookupKeybinding(accept);\n                this._label.innerText = localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Rename, Shift+F2 to Preview\"'] }, \"{0} to Rename, {1} to Preview\", (_a = this._keybindingService.lookupKeybinding(accept)) === null || _a === void 0 ? void 0 : _a.getLabel(), (_b = this._keybindingService.lookupKeybinding(preview)) === null || _b === void 0 ? void 0 : _b.getLabel());\n            };\n            updateLabel();\n            this._disposables.add(this._keybindingService.onDidUpdateKeybindings(updateLabel));\n            this._updateFont();\n            this._updateStyles(this._themeService.getColorTheme());\n        }\n        return this._domNode;\n    }\n    _updateStyles(theme) {\n        var _a, _b, _c, _d;\n        if (!this._input || !this._domNode) {\n            return;\n        }\n        const widgetShadowColor = theme.getColor(widgetShadow);\n        this._domNode.style.backgroundColor = String((_a = theme.getColor(editorWidgetBackground)) !== null && _a !== void 0 ? _a : '');\n        this._domNode.style.boxShadow = widgetShadowColor ? ` 0 0 8px 2px ${widgetShadowColor}` : '';\n        this._domNode.style.color = String((_b = theme.getColor(inputForeground)) !== null && _b !== void 0 ? _b : '');\n        this._input.style.backgroundColor = String((_c = theme.getColor(inputBackground)) !== null && _c !== void 0 ? _c : '');\n        // this._input.style.color = String(theme.getColor(inputForeground) ?? '');\n        const border = theme.getColor(inputBorder);\n        this._input.style.borderWidth = border ? '1px' : '0px';\n        this._input.style.borderStyle = border ? 'solid' : 'none';\n        this._input.style.borderColor = (_d = border === null || border === void 0 ? void 0 : border.toString()) !== null && _d !== void 0 ? _d : 'none';\n    }\n    _updateFont() {\n        if (!this._input || !this._label) {\n            return;\n        }\n        const fontInfo = this._editor.getOption(44 /* fontInfo */);\n        this._input.style.fontFamily = fontInfo.fontFamily;\n        this._input.style.fontWeight = fontInfo.fontWeight;\n        this._input.style.fontSize = `${fontInfo.fontSize}px`;\n        this._label.style.fontSize = `${fontInfo.fontSize * 0.8}px`;\n    }\n    getPosition() {\n        if (!this._visible) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [2 /* BELOW */, 1 /* ABOVE */]\n        };\n    }\n    afterRender(position) {\n        if (!position) {\n            // cancel rename when input widget isn't rendered anymore\n            this.cancelInput(true);\n        }\n    }\n    acceptInput(wantsPreview) {\n        if (this._currentAcceptInput) {\n            this._currentAcceptInput(wantsPreview);\n        }\n    }\n    cancelInput(focusEditor) {\n        if (this._currentCancelInput) {\n            this._currentCancelInput(focusEditor);\n        }\n    }\n    getInput(where, value, selectionStart, selectionEnd, supportPreview, token) {\n        this._domNode.classList.toggle('preview', supportPreview);\n        this._position = new Position(where.startLineNumber, where.startColumn);\n        this._input.value = value;\n        this._input.setAttribute('selectionStart', selectionStart.toString());\n        this._input.setAttribute('selectionEnd', selectionEnd.toString());\n        this._input.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20);\n        const disposeOnDone = new DisposableStore();\n        return new Promise(resolve => {\n            this._currentCancelInput = (focusEditor) => {\n                this._currentAcceptInput = undefined;\n                this._currentCancelInput = undefined;\n                resolve(focusEditor);\n                return true;\n            };\n            this._currentAcceptInput = (wantsPreview) => {\n                if (this._input.value.trim().length === 0 || this._input.value === value) {\n                    // empty or whitespace only or not changed\n                    this.cancelInput(true);\n                    return;\n                }\n                this._currentAcceptInput = undefined;\n                this._currentCancelInput = undefined;\n                resolve({\n                    newName: this._input.value,\n                    wantsPreview: supportPreview && wantsPreview\n                });\n            };\n            disposeOnDone.add(token.onCancellationRequested(() => this.cancelInput(true)));\n            disposeOnDone.add(this._editor.onDidBlurEditorWidget(() => this.cancelInput(false)));\n            this._show();\n        }).finally(() => {\n            disposeOnDone.dispose();\n            this._hide();\n        });\n    }\n    _show() {\n        this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber, 0 /* Smooth */);\n        this._visible = true;\n        this._visibleContextKey.set(true);\n        this._editor.layoutContentWidget(this);\n        setTimeout(() => {\n            this._input.focus();\n            this._input.setSelectionRange(parseInt(this._input.getAttribute('selectionStart')), parseInt(this._input.getAttribute('selectionEnd')));\n        }, 100);\n    }\n    _hide() {\n        this._visible = false;\n        this._visibleContextKey.reset();\n        this._editor.layoutContentWidget(this);\n    }\n};\nRenameInputField = __decorate([\n    __param(2, IThemeService),\n    __param(3, IKeybindingService),\n    __param(4, IContextKeyService)\n], RenameInputField);\nexport { RenameInputField };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { BracketSelectionRangeProvider } from './bracketSelections.js';\nimport { WordSelectionRangeProvider } from './wordSelections.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nclass SelectionRanges {\n    constructor(index, ranges) {\n        this.index = index;\n        this.ranges = ranges;\n    }\n    mov(fwd) {\n        let index = this.index + (fwd ? 1 : -1);\n        if (index < 0 || index >= this.ranges.length) {\n            return this;\n        }\n        const res = new SelectionRanges(index, this.ranges);\n        if (res.ranges[index].equalsRange(this.ranges[this.index])) {\n            // next range equals this range, retry with next-next\n            return res.mov(fwd);\n        }\n        return res;\n    }\n}\nlet SmartSelectController = class SmartSelectController {\n    constructor(_editor, _languageFeaturesService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._ignoreSelection = false;\n    }\n    static get(editor) {\n        return editor.getContribution(SmartSelectController.ID);\n    }\n    dispose() {\n        var _a;\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    run(forward) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const selections = this._editor.getSelections();\n            const model = this._editor.getModel();\n            if (!this._state) {\n                yield provideSelectionRanges(this._languageFeaturesService.selectionRangeProvider, model, selections.map(s => s.getPosition()), this._editor.getOption(102 /* smartSelect */), CancellationToken.None).then(ranges => {\n                    var _a;\n                    if (!arrays.isNonEmptyArray(ranges) || ranges.length !== selections.length) {\n                        // invalid result\n                        return;\n                    }\n                    if (!this._editor.hasModel() || !arrays.equals(this._editor.getSelections(), selections, (a, b) => a.equalsSelection(b))) {\n                        // invalid editor state\n                        return;\n                    }\n                    for (let i = 0; i < ranges.length; i++) {\n                        ranges[i] = ranges[i].filter(range => {\n                            // filter ranges inside the selection\n                            return range.containsPosition(selections[i].getStartPosition()) && range.containsPosition(selections[i].getEndPosition());\n                        });\n                        // prepend current selection\n                        ranges[i].unshift(selections[i]);\n                    }\n                    this._state = ranges.map(ranges => new SelectionRanges(0, ranges));\n                    // listen to caret move and forget about state\n                    (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                    this._selectionListener = this._editor.onDidChangeCursorPosition(() => {\n                        var _a;\n                        if (!this._ignoreSelection) {\n                            (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                            this._state = undefined;\n                        }\n                    });\n                });\n            }\n            if (!this._state) {\n                // no state\n                return;\n            }\n            this._state = this._state.map(state => state.mov(forward));\n            const newSelections = this._state.map(state => Selection.fromPositions(state.ranges[state.index].getStartPosition(), state.ranges[state.index].getEndPosition()));\n            this._ignoreSelection = true;\n            try {\n                this._editor.setSelections(newSelections);\n            }\n            finally {\n                this._ignoreSelection = false;\n            }\n        });\n    }\n};\nSmartSelectController.ID = 'editor.contrib.smartSelectController';\nSmartSelectController = __decorate([\n    __param(1, ILanguageFeaturesService)\n], SmartSelectController);\nclass AbstractSmartSelect extends EditorAction {\n    constructor(forward, opts) {\n        super(opts);\n        this._forward = forward;\n    }\n    run(_accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let controller = SmartSelectController.get(editor);\n            if (controller) {\n                yield controller.run(this._forward);\n            }\n        });\n    }\n}\nclass GrowSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(true, {\n            id: 'editor.action.smartSelect.expand',\n            label: nls.localize('smartSelect.expand', \"Expand Selection\"),\n            alias: 'Expand Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 17 /* RightArrow */,\n                mac: {\n                    primary: 2048 /* CtrlCmd */ | 256 /* WinCtrl */ | 1024 /* Shift */ | 17 /* RightArrow */,\n                    secondary: [256 /* WinCtrl */ | 1024 /* Shift */ | 17 /* RightArrow */],\n                },\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectGrow', comment: ['&& denotes a mnemonic'] }, \"&&Expand Selection\"),\n                order: 2\n            }\n        });\n    }\n}\n// renamed command id\nCommandsRegistry.registerCommandAlias('editor.action.smartSelect.grow', 'editor.action.smartSelect.expand');\nclass ShrinkSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(false, {\n            id: 'editor.action.smartSelect.shrink',\n            label: nls.localize('smartSelect.shrink', \"Shrink Selection\"),\n            alias: 'Shrink Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 15 /* LeftArrow */,\n                mac: {\n                    primary: 2048 /* CtrlCmd */ | 256 /* WinCtrl */ | 1024 /* Shift */ | 15 /* LeftArrow */,\n                    secondary: [256 /* WinCtrl */ | 1024 /* Shift */ | 15 /* LeftArrow */],\n                },\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectShrink', comment: ['&& denotes a mnemonic'] }, \"&&Shrink Selection\"),\n                order: 3\n            }\n        });\n    }\n}\nregisterEditorContribution(SmartSelectController.ID, SmartSelectController);\nregisterEditorAction(GrowSelectionAction);\nregisterEditorAction(ShrinkSelectionAction);\nexport function provideSelectionRanges(registry, model, positions, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = registry.all(model)\n            .concat(new WordSelectionRangeProvider()); // ALWAYS have word based selection range\n        if (providers.length === 1) {\n            // add word selection and bracket selection when no provider exists\n            providers.unshift(new BracketSelectionRangeProvider());\n        }\n        let work = [];\n        let allRawRanges = [];\n        for (const provider of providers) {\n            work.push(Promise.resolve(provider.provideSelectionRanges(model, positions, token)).then(allProviderRanges => {\n                if (arrays.isNonEmptyArray(allProviderRanges) && allProviderRanges.length === positions.length) {\n                    for (let i = 0; i < positions.length; i++) {\n                        if (!allRawRanges[i]) {\n                            allRawRanges[i] = [];\n                        }\n                        for (const oneProviderRanges of allProviderRanges[i]) {\n                            if (Range.isIRange(oneProviderRanges.range) && Range.containsPosition(oneProviderRanges.range, positions[i])) {\n                                allRawRanges[i].push(Range.lift(oneProviderRanges.range));\n                            }\n                        }\n                    }\n                }\n            }, onUnexpectedExternalError));\n        }\n        yield Promise.all(work);\n        return allRawRanges.map(oneRawRanges => {\n            if (oneRawRanges.length === 0) {\n                return [];\n            }\n            // sort all by start/end position\n            oneRawRanges.sort((a, b) => {\n                if (Position.isBefore(a.getStartPosition(), b.getStartPosition())) {\n                    return 1;\n                }\n                else if (Position.isBefore(b.getStartPosition(), a.getStartPosition())) {\n                    return -1;\n                }\n                else if (Position.isBefore(a.getEndPosition(), b.getEndPosition())) {\n                    return -1;\n                }\n                else if (Position.isBefore(b.getEndPosition(), a.getEndPosition())) {\n                    return 1;\n                }\n                else {\n                    return 0;\n                }\n            });\n            // remove ranges that don't contain the former range or that are equal to the\n            // former range\n            let oneRanges = [];\n            let last;\n            for (const range of oneRawRanges) {\n                if (!last || (Range.containsRange(range, last) && !Range.equalsRange(range, last))) {\n                    oneRanges.push(range);\n                    last = range;\n                }\n            }\n            if (!options.selectLeadingAndTrailingWhitespace) {\n                return oneRanges;\n            }\n            // add ranges that expand trivia at line starts and ends whenever a range\n            // wraps onto the a new line\n            let oneRangesWithTrivia = [oneRanges[0]];\n            for (let i = 1; i < oneRanges.length; i++) {\n                const prev = oneRanges[i - 1];\n                const cur = oneRanges[i];\n                if (cur.startLineNumber !== prev.startLineNumber || cur.endLineNumber !== prev.endLineNumber) {\n                    // add line/block range without leading/failing whitespace\n                    const rangeNoWhitespace = new Range(prev.startLineNumber, model.getLineFirstNonWhitespaceColumn(prev.startLineNumber), prev.endLineNumber, model.getLineLastNonWhitespaceColumn(prev.endLineNumber));\n                    if (rangeNoWhitespace.containsRange(prev) && !rangeNoWhitespace.equalsRange(prev) && cur.containsRange(rangeNoWhitespace) && !cur.equalsRange(rangeNoWhitespace)) {\n                        oneRangesWithTrivia.push(rangeNoWhitespace);\n                    }\n                    // add line/block range\n                    const rangeFull = new Range(prev.startLineNumber, 1, prev.endLineNumber, model.getLineMaxColumn(prev.endLineNumber));\n                    if (rangeFull.containsRange(prev) && !rangeFull.equalsRange(rangeNoWhitespace) && cur.containsRange(rangeFull) && !cur.equalsRange(rangeFull)) {\n                        oneRangesWithTrivia.push(rangeFull);\n                    }\n                }\n                oneRangesWithTrivia.push(cur);\n            }\n            return oneRangesWithTrivia;\n        });\n    });\n}\nCommandsRegistry.registerCommand('_executeSelectionRangeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, positions] = args;\n        assertType(URI.isUri(resource));\n        const registry = accessor.get(ILanguageFeaturesService).selectionRangeProvider;\n        const reference = yield accessor.get(ITextModelService).createModelReference(resource);\n        try {\n            return provideSelectionRanges(registry, reference.object.textEditorModel, positions, { selectLeadingAndTrailingWhitespace: true }, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isLowerAsciiLetter, isUpperAsciiLetter } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nexport class WordSelectionRangeProvider {\n    provideSelectionRanges(model, positions) {\n        const result = [];\n        for (const position of positions) {\n            const bucket = [];\n            result.push(bucket);\n            this._addInWordRanges(bucket, model, position);\n            this._addWordRanges(bucket, model, position);\n            this._addWhitespaceLine(bucket, model, position);\n            bucket.push({ range: model.getFullModelRange() });\n        }\n        return result;\n    }\n    _addInWordRanges(bucket, model, pos) {\n        const obj = model.getWordAtPosition(pos);\n        if (!obj) {\n            return;\n        }\n        let { word, startColumn } = obj;\n        let offset = pos.column - startColumn;\n        let start = offset;\n        let end = offset;\n        let lastCh = 0;\n        // LEFT anchor (start)\n        for (; start >= 0; start--) {\n            let ch = word.charCodeAt(start);\n            if ((start !== offset) && (ch === 95 /* Underline */ || ch === 45 /* Dash */)) {\n                // foo-bar OR foo_bar\n                break;\n            }\n            else if (isLowerAsciiLetter(ch) && isUpperAsciiLetter(lastCh)) {\n                // fooBar\n                break;\n            }\n            lastCh = ch;\n        }\n        start += 1;\n        // RIGHT anchor (end)\n        for (; end < word.length; end++) {\n            let ch = word.charCodeAt(end);\n            if (isUpperAsciiLetter(ch) && isLowerAsciiLetter(lastCh)) {\n                // fooBar\n                break;\n            }\n            else if (ch === 95 /* Underline */ || ch === 45 /* Dash */) {\n                // foo-bar OR foo_bar\n                break;\n            }\n            lastCh = ch;\n        }\n        if (start < end) {\n            bucket.push({ range: new Range(pos.lineNumber, startColumn + start, pos.lineNumber, startColumn + end) });\n        }\n    }\n    _addWordRanges(bucket, model, pos) {\n        const word = model.getWordAtPosition(pos);\n        if (word) {\n            bucket.push({ range: new Range(pos.lineNumber, word.startColumn, pos.lineNumber, word.endColumn) });\n        }\n    }\n    _addWhitespaceLine(bucket, model, pos) {\n        if (model.getLineLength(pos.lineNumber) > 0\n            && model.getLineFirstNonWhitespaceColumn(pos.lineNumber) === 0\n            && model.getLineLastNonWhitespaceColumn(pos.lineNumber) === 0) {\n            bucket.push({ range: new Range(pos.lineNumber, 1, pos.lineNumber, model.getLineMaxColumn(pos.lineNumber)) });\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport * as nls from '../../../../nls.js';\nclass ForceRetokenizeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.forceRetokenize',\n            label: nls.localize('forceRetokenize', \"Developer: Force Retokenize\"),\n            alias: 'Developer: Force Retokenize',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        model.resetTokenization();\n        const sw = new StopWatch(true);\n        model.forceTokenization(model.getLineCount());\n        sw.stop();\n        console.log(`tokenization took ${sw.elapsed()}`);\n    }\n}\nregisterEditorAction(ForceRetokenizeAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { InvisibleCharacters } from '../../../../base/common/strings.js';\nimport './unicodeHighlighter.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { inUntrustedWorkspace, unicodeHighlightConfigKeys } from '../../../common/config/editorOptions.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { UnicodeTextModelHighlighter } from '../../../common/services/unicodeTextModelHighlighter.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { isModelDecorationInComment, isModelDecorationInString, isModelDecorationVisible } from '../../../common/viewModel/viewModelDecorations.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { MarkdownHover, renderMarkdownHovers } from '../../hover/browser/markdownHoverParticipant.js';\nimport { BannerController } from './bannerController.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IWorkspaceTrustManagementService } from '../../../../platform/workspace/common/workspaceTrust.js';\nexport const warningIcon = registerIcon('extensions-warning-message', Codicon.warning, nls.localize('warningIcon', 'Icon shown with a warning message in the extensions editor.'));\nlet UnicodeHighlighter = class UnicodeHighlighter extends Disposable {\n    constructor(_editor, _editorWorkerService, _workspaceTrustService, instantiationService) {\n        super();\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._workspaceTrustService = _workspaceTrustService;\n        this._highlighter = null;\n        this._bannerClosed = false;\n        this._updateState = (state) => {\n            if (state && state.hasMore) {\n                if (this._bannerClosed) {\n                    return;\n                }\n                // This document contains many non-basic ASCII characters.\n                const max = Math.max(state.ambiguousCharacterCount, state.nonBasicAsciiCharacterCount, state.invisibleCharacterCount);\n                let data;\n                if (state.nonBasicAsciiCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters', 'This document contains many non-basic ASCII unicode characters'),\n                        command: new DisableHighlightingOfNonBasicAsciiCharactersAction(),\n                    };\n                }\n                else if (state.ambiguousCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters', 'This document contains many ambiguous unicode characters'),\n                        command: new DisableHighlightingOfAmbiguousCharactersAction(),\n                    };\n                }\n                else if (state.invisibleCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters', 'This document contains many invisible unicode characters'),\n                        command: new DisableHighlightingOfInvisibleCharactersAction(),\n                    };\n                }\n                else {\n                    throw new Error('Unreachable');\n                }\n                this._bannerController.show({\n                    id: 'unicodeHighlightBanner',\n                    message: data.message,\n                    icon: warningIcon,\n                    actions: [\n                        {\n                            label: data.command.shortLabel,\n                            href: `command:${data.command.id}`\n                        }\n                    ],\n                    onClose: () => {\n                        this._bannerClosed = true;\n                    },\n                });\n            }\n            else {\n                this._bannerController.hide();\n            }\n        };\n        this._bannerController = this._register(instantiationService.createInstance(BannerController, _editor));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._bannerClosed = false;\n            this._updateHighlighter();\n        }));\n        this._options = _editor.getOption(113 /* unicodeHighlighting */);\n        this._register(_workspaceTrustService.onDidChangeTrust(e => {\n            this._updateHighlighter();\n        }));\n        this._register(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(113 /* unicodeHighlighting */)) {\n                this._options = _editor.getOption(113 /* unicodeHighlighting */);\n                this._updateHighlighter();\n            }\n        }));\n        this._updateHighlighter();\n    }\n    dispose() {\n        if (this._highlighter) {\n            this._highlighter.dispose();\n            this._highlighter = null;\n        }\n        super.dispose();\n    }\n    _updateHighlighter() {\n        this._updateState(null);\n        if (this._highlighter) {\n            this._highlighter.dispose();\n            this._highlighter = null;\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const options = resolveOptions(this._workspaceTrustService.isWorkspaceTrusted(), this._options);\n        if ([\n            options.nonBasicASCII,\n            options.ambiguousCharacters,\n            options.invisibleCharacters,\n        ].every((option) => option === false)) {\n            // Don't do anything if the feature is fully disabled\n            return;\n        }\n        const highlightOptions = {\n            nonBasicASCII: options.nonBasicASCII,\n            ambiguousCharacters: options.ambiguousCharacters,\n            invisibleCharacters: options.invisibleCharacters,\n            includeComments: options.includeComments,\n            includeStrings: options.includeStrings,\n            allowedCodePoints: Object.keys(options.allowedCharacters).map(c => c.codePointAt(0)),\n            allowedLocales: Object.keys(options.allowedLocales).map(locale => {\n                if (locale === '_os') {\n                    let osLocale = new Intl.NumberFormat().resolvedOptions().locale;\n                    return osLocale;\n                }\n                else if (locale === '_vscode') {\n                    return platform.language;\n                }\n                return locale;\n            }),\n        };\n        if (this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)) {\n            this._highlighter = new DocumentUnicodeHighlighter(this._editor, highlightOptions, this._updateState, this._editorWorkerService);\n        }\n        else {\n            this._highlighter = new ViewportUnicodeHighlighter(this._editor, highlightOptions, this._updateState);\n        }\n    }\n    getDecorationInfo(decorationId) {\n        if (this._highlighter) {\n            return this._highlighter.getDecorationInfo(decorationId);\n        }\n        return null;\n    }\n};\nUnicodeHighlighter.ID = 'editor.contrib.unicodeHighlighter';\nUnicodeHighlighter = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IWorkspaceTrustManagementService),\n    __param(3, IInstantiationService)\n], UnicodeHighlighter);\nexport { UnicodeHighlighter };\nfunction resolveOptions(trusted, options) {\n    return {\n        nonBasicASCII: options.nonBasicASCII === inUntrustedWorkspace ? !trusted : options.nonBasicASCII,\n        ambiguousCharacters: options.ambiguousCharacters,\n        invisibleCharacters: options.invisibleCharacters,\n        includeComments: options.includeComments === inUntrustedWorkspace ? !trusted : options.includeComments,\n        includeStrings: options.includeStrings === inUntrustedWorkspace ? !trusted : options.includeStrings,\n        allowedCharacters: options.allowedCharacters,\n        allowedLocales: options.allowedLocales,\n    };\n}\nlet DocumentUnicodeHighlighter = class DocumentUnicodeHighlighter extends Disposable {\n    constructor(_editor, _options, _updateState, _editorWorkerService) {\n        super();\n        this._editor = _editor;\n        this._options = _options;\n        this._updateState = _updateState;\n        this._editorWorkerService = _editorWorkerService;\n        this._model = this._editor.getModel();\n        this._decorationIds = new Set();\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(), 250));\n        this._register(this._editor.onDidChangeModelContent(() => {\n            this._updateSoon.schedule();\n        }));\n        this._updateSoon.schedule();\n    }\n    dispose() {\n        this._decorationIds = new Set(this._model.deltaDecorations(Array.from(this._decorationIds), []));\n        super.dispose();\n    }\n    _update() {\n        if (this._model.isDisposed()) {\n            return;\n        }\n        if (!this._model.mightContainNonBasicASCII()) {\n            this._decorationIds = new Set(this._editor.deltaDecorations(Array.from(this._decorationIds), []));\n            return;\n        }\n        const modelVersionId = this._model.getVersionId();\n        this._editorWorkerService\n            .computedUnicodeHighlights(this._model.uri, this._options)\n            .then((info) => {\n            if (this._model.isDisposed()) {\n                return;\n            }\n            if (this._model.getVersionId() !== modelVersionId) {\n                // model changed in the meantime\n                return;\n            }\n            this._updateState(info);\n            const decorations = [];\n            if (!info.hasMore) {\n                // Don't show decoration if there are too many.\n                // In this case, a banner is shown.\n                for (const range of info.ranges) {\n                    decorations.push({\n                        range: range,\n                        options: Decorations.instance.getDecorationFromOptions(this._options),\n                    });\n                }\n            }\n            this._decorationIds = new Set(this._editor.deltaDecorations(Array.from(this._decorationIds), decorations));\n        });\n    }\n    getDecorationInfo(decorationId) {\n        if (!this._decorationIds.has(decorationId)) {\n            return null;\n        }\n        const model = this._editor.getModel();\n        const range = model.getDecorationRange(decorationId);\n        const decoration = {\n            range: range,\n            options: Decorations.instance.getDecorationFromOptions(this._options),\n            id: decorationId,\n            ownerId: 0,\n        };\n        if (!isModelDecorationVisible(model, decoration)) {\n            return null;\n        }\n        const text = model.getValueInRange(range);\n        return {\n            reason: computeReason(text, this._options),\n            inComment: isModelDecorationInComment(model, decoration),\n            inString: isModelDecorationInString(model, decoration),\n        };\n    }\n};\nDocumentUnicodeHighlighter = __decorate([\n    __param(3, IEditorWorkerService)\n], DocumentUnicodeHighlighter);\nclass ViewportUnicodeHighlighter extends Disposable {\n    constructor(_editor, _options, _updateState) {\n        super();\n        this._editor = _editor;\n        this._options = _options;\n        this._updateState = _updateState;\n        this._model = this._editor.getModel();\n        this._decorationIds = new Set();\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(), 250));\n        this._register(this._editor.onDidLayoutChange(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidScrollChange(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidChangeHiddenAreas(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidChangeModelContent(() => {\n            this._updateSoon.schedule();\n        }));\n        this._updateSoon.schedule();\n    }\n    dispose() {\n        this._decorationIds = new Set(this._model.deltaDecorations(Array.from(this._decorationIds), []));\n        super.dispose();\n    }\n    _update() {\n        if (this._model.isDisposed()) {\n            return;\n        }\n        if (!this._model.mightContainNonBasicASCII()) {\n            this._decorationIds = new Set(this._editor.deltaDecorations(Array.from(this._decorationIds), []));\n            return;\n        }\n        const ranges = this._editor.getVisibleRanges();\n        const decorations = [];\n        const totalResult = {\n            ranges: [],\n            ambiguousCharacterCount: 0,\n            invisibleCharacterCount: 0,\n            nonBasicAsciiCharacterCount: 0,\n            hasMore: false,\n        };\n        for (const range of ranges) {\n            const result = UnicodeTextModelHighlighter.computeUnicodeHighlights(this._model, this._options, range);\n            for (const r of result.ranges) {\n                totalResult.ranges.push(r);\n            }\n            totalResult.ambiguousCharacterCount += totalResult.ambiguousCharacterCount;\n            totalResult.invisibleCharacterCount += totalResult.invisibleCharacterCount;\n            totalResult.nonBasicAsciiCharacterCount += totalResult.nonBasicAsciiCharacterCount;\n            totalResult.hasMore = totalResult.hasMore || result.hasMore;\n        }\n        if (!totalResult.hasMore) {\n            // Don't show decorations if there are too many.\n            // A banner will be shown instead.\n            for (const range of totalResult.ranges) {\n                decorations.push({ range, options: Decorations.instance.getDecorationFromOptions(this._options) });\n            }\n        }\n        this._updateState(totalResult);\n        this._decorationIds = new Set(this._editor.deltaDecorations(Array.from(this._decorationIds), decorations));\n    }\n    getDecorationInfo(decorationId) {\n        if (!this._decorationIds.has(decorationId)) {\n            return null;\n        }\n        const model = this._editor.getModel();\n        const range = model.getDecorationRange(decorationId);\n        const text = model.getValueInRange(range);\n        const decoration = {\n            range: range,\n            options: Decorations.instance.getDecorationFromOptions(this._options),\n            id: decorationId,\n            ownerId: 0,\n        };\n        if (!isModelDecorationVisible(model, decoration)) {\n            return null;\n        }\n        return {\n            reason: computeReason(text, this._options),\n            inComment: isModelDecorationInComment(model, decoration),\n            inString: isModelDecorationInString(model, decoration),\n        };\n    }\n}\nlet UnicodeHighlighterHoverParticipant = class UnicodeHighlighterHoverParticipant {\n    constructor(_editor, _languageService, _openerService) {\n        this._editor = _editor;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this.hoverOrdinal = 4;\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const unicodeHighlighter = this._editor.getContribution(UnicodeHighlighter.ID);\n        if (!unicodeHighlighter) {\n            return [];\n        }\n        const result = [];\n        let index = 300;\n        for (const d of lineDecorations) {\n            const highlightInfo = unicodeHighlighter.getDecorationInfo(d.id);\n            if (!highlightInfo) {\n                continue;\n            }\n            const char = model.getValueInRange(d.range);\n            // text refers to a single character.\n            const codePoint = char.codePointAt(0);\n            const codePointStr = formatCodePointMarkdown(codePoint);\n            let reason;\n            switch (highlightInfo.reason.kind) {\n                case 0 /* Ambiguous */:\n                    reason = nls.localize('unicodeHighlight.characterIsAmbiguous', 'The character {0} could be confused with the character {1}, which is more common in source code.', codePointStr, formatCodePointMarkdown(highlightInfo.reason.confusableWith.codePointAt(0)));\n                    break;\n                case 1 /* Invisible */:\n                    reason = nls.localize('unicodeHighlight.characterIsInvisible', 'The character {0} is invisible.', codePointStr);\n                    break;\n                case 2 /* NonBasicAscii */:\n                    reason = nls.localize('unicodeHighlight.characterIsNonBasicAscii', 'The character {0} is not a basic ASCII character.', codePointStr);\n                    break;\n            }\n            const adjustSettingsArgs = {\n                codePoint: codePoint,\n                reason: highlightInfo.reason,\n                inComment: highlightInfo.inComment,\n                inString: highlightInfo.inString,\n            };\n            const adjustSettings = nls.localize('unicodeHighlight.adjustSettings', 'Adjust settings');\n            const contents = [{\n                    value: `${reason} [${adjustSettings}](command:${ShowExcludeOptions.ID}?${encodeURIComponent(JSON.stringify(adjustSettingsArgs))})`,\n                    isTrusted: true,\n                }];\n            result.push(new MarkdownHover(this, d.range, contents, index++));\n        }\n        return result;\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderMarkdownHovers(context, hoverParts, this._editor, this._languageService, this._openerService);\n    }\n};\nUnicodeHighlighterHoverParticipant = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService)\n], UnicodeHighlighterHoverParticipant);\nexport { UnicodeHighlighterHoverParticipant };\nfunction codePointToHex(codePoint) {\n    return `U+${codePoint.toString(16).padStart(4, '0')}`;\n}\nfunction formatCodePointMarkdown(codePoint) {\n    let value = `\\`${codePointToHex(codePoint)}\\``;\n    if (!InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n        // Don't render any control characters or any invisible characters, as they cannot be seen anyways.\n        value += ` \"${`${renderCodePointAsInlineCode(codePoint)}`}\"`;\n    }\n    return value;\n}\nfunction renderCodePointAsInlineCode(codePoint) {\n    if (codePoint === 96 /* BackTick */) {\n        return '`` ` ``';\n    }\n    return '`' + String.fromCodePoint(codePoint) + '`';\n}\nfunction computeReason(char, options) {\n    return UnicodeTextModelHighlighter.computeUnicodeHighlightReason(char, options);\n}\nclass Decorations {\n    constructor() {\n        this.map = new Map();\n    }\n    getDecorationFromOptions(options) {\n        return this.getDecoration(!options.includeComments, !options.includeStrings);\n    }\n    getDecoration(hideInComments, hideInStrings) {\n        const key = `${hideInComments}${hideInStrings}`;\n        let options = this.map.get(key);\n        if (!options) {\n            options = ModelDecorationOptions.createDynamic({\n                description: 'unicode-highlight',\n                stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n                className: 'unicode-highlight',\n                showIfCollapsed: true,\n                overviewRuler: null,\n                minimap: null,\n                hideInCommentTokens: hideInComments,\n                hideInStringTokens: hideInStrings,\n            });\n            this.map.set(key, options);\n        }\n        return options;\n    }\n}\nDecorations.instance = new Decorations();\nexport class DisableHighlightingInCommentsAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingInComments', 'Disable highlighting of characters in comments'),\n            alias: 'Disable highlighting of characters in comments',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingInComments.shortLabel', 'Disable Highlight In Comments');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.includeComments, false, 1 /* USER */);\n        });\n    }\n}\nexport class DisableHighlightingInStringsAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingInStrings', 'Disable highlighting of characters in strings'),\n            alias: 'Disable highlighting of characters in strings',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingInStrings.shortLabel', 'Disable Highlight In Strings');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.includeStrings, false, 1 /* USER */);\n        });\n    }\n}\nexport class DisableHighlightingOfAmbiguousCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters', 'Disable highlighting of ambiguous characters'),\n            alias: 'Disable highlighting of ambiguous characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel', 'Disable Ambiguous Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.ambiguousCharacters, false, 1 /* USER */);\n        });\n    }\n}\nDisableHighlightingOfAmbiguousCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters';\nexport class DisableHighlightingOfInvisibleCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfInvisibleCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfInvisibleCharacters', 'Disable highlighting of invisible characters'),\n            alias: 'Disable highlighting of invisible characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel', 'Disable Invisible Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.invisibleCharacters, false, 1 /* USER */);\n        });\n    }\n}\nDisableHighlightingOfInvisibleCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters';\nexport class DisableHighlightingOfNonBasicAsciiCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfNonBasicAsciiCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters', 'Disable highlighting of non basic ASCII characters'),\n            alias: 'Disable highlighting of non basic ASCII characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel', 'Disable Non ASCII Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.nonBasicASCII, false, 1 /* USER */);\n        });\n    }\n}\nDisableHighlightingOfNonBasicAsciiCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters';\nexport class ShowExcludeOptions extends EditorAction {\n    constructor() {\n        super({\n            id: ShowExcludeOptions.ID,\n            label: nls.localize('action.unicodeHighlight.showExcludeOptions', \"Show Exclude Options\"),\n            alias: 'Show Exclude Options',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { codePoint, reason, inString, inComment } = args;\n            const char = String.fromCodePoint(codePoint);\n            const quickPickService = accessor.get(IQuickInputService);\n            const configurationService = accessor.get(IConfigurationService);\n            function getExcludeCharFromBeingHighlightedLabel(codePoint) {\n                if (InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n                    return nls.localize('unicodeHighlight.excludeInvisibleCharFromBeingHighlighted', 'Exclude {0} (invisible character) from being highlighted', codePointToHex(codePoint));\n                }\n                return nls.localize('unicodeHighlight.excludeCharFromBeingHighlighted', 'Exclude {0} from being highlighted', `${codePointToHex(codePoint)} \"${char}\"`);\n            }\n            const options = [];\n            if (reason.kind === 0 /* Ambiguous */) {\n                for (const locale of reason.notAmbiguousInLocales) {\n                    options.push({\n                        label: nls.localize(\"unicodeHighlight.allowCommonCharactersInLanguage\", \"Allow unicode characters that are more common in the language \\\"{0}\\\".\", locale),\n                        run: () => __awaiter(this, void 0, void 0, function* () {\n                            excludeLocaleFromBeingHighlighted(configurationService, [locale]);\n                        }),\n                    });\n                }\n            }\n            options.push({\n                label: getExcludeCharFromBeingHighlightedLabel(codePoint),\n                run: () => excludeCharFromBeingHighlighted(configurationService, [codePoint])\n            });\n            if (inComment) {\n                const action = new DisableHighlightingInCommentsAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (inString) {\n                const action = new DisableHighlightingInStringsAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            if (reason.kind === 0 /* Ambiguous */) {\n                const action = new DisableHighlightingOfAmbiguousCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (reason.kind === 1 /* Invisible */) {\n                const action = new DisableHighlightingOfInvisibleCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (reason.kind === 2 /* NonBasicAscii */) {\n                const action = new DisableHighlightingOfNonBasicAsciiCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else {\n                expectNever(reason);\n            }\n            const result = yield quickPickService.pick(options, { title: nls.localize('unicodeHighlight.configureUnicodeHighlightOptions', 'Configure Unicode Highlight Options') });\n            if (result) {\n                yield result.run();\n            }\n        });\n    }\n}\nShowExcludeOptions.ID = 'editor.action.unicodeHighlight.showExcludeOptions';\nfunction excludeCharFromBeingHighlighted(configurationService, charCodes) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const existingValue = configurationService.getValue(unicodeHighlightConfigKeys.allowedCharacters);\n        let value;\n        if ((typeof existingValue === 'object') && existingValue) {\n            value = existingValue;\n        }\n        else {\n            value = {};\n        }\n        for (const charCode of charCodes) {\n            value[String.fromCodePoint(charCode)] = true;\n        }\n        yield configurationService.updateValue(unicodeHighlightConfigKeys.allowedCharacters, value, 1 /* USER */);\n    });\n}\nfunction excludeLocaleFromBeingHighlighted(configurationService, locales) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const existingValue = (_a = configurationService.inspect(unicodeHighlightConfigKeys.allowedLocales).user) === null || _a === void 0 ? void 0 : _a.value;\n        let value;\n        if ((typeof existingValue === 'object') && existingValue) {\n            // Copy value, as the existing value is read only\n            value = Object.assign({}, existingValue);\n        }\n        else {\n            value = {};\n        }\n        for (const locale of locales) {\n            value[locale] = true;\n        }\n        yield configurationService.updateValue(unicodeHighlightConfigKeys.allowedLocales, value, 1 /* USER */);\n    });\n}\nfunction expectNever(value) {\n    throw new Error(`Unexpected value: ${value}`);\n}\nregisterEditorAction(DisableHighlightingOfAmbiguousCharactersAction);\nregisterEditorAction(DisableHighlightingOfInvisibleCharactersAction);\nregisterEditorAction(DisableHighlightingOfNonBasicAsciiCharactersAction);\nregisterEditorAction(ShowExcludeOptions);\nregisterEditorContribution(UnicodeHighlighter.ID, UnicodeHighlighter);\nHoverParticipantRegistry.register(UnicodeHighlighterHoverParticipant);\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './bannerController.css';\nimport { $, append, clearNode } from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Link } from '../../../../platform/opener/browser/link.js';\nimport { widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nconst BANNER_ELEMENT_HEIGHT = 26;\nlet BannerController = class BannerController extends Disposable {\n    constructor(_editor, instantiationService) {\n        super();\n        this._editor = _editor;\n        this.instantiationService = instantiationService;\n        this.banner = this._register(this.instantiationService.createInstance(Banner));\n    }\n    hide() {\n        this._editor.setBanner(null, 0);\n        this.banner.clear();\n    }\n    show(item) {\n        this.banner.show(Object.assign(Object.assign({}, item), { onClose: () => {\n                this.hide();\n                if (item.onClose) {\n                    item.onClose();\n                }\n            } }));\n        this._editor.setBanner(this.banner.element, BANNER_ELEMENT_HEIGHT);\n    }\n};\nBannerController = __decorate([\n    __param(1, IInstantiationService)\n], BannerController);\nexport { BannerController };\n// TODO@hediet: Investigate if this can be reused by the workspace banner (bannerPart.ts).\nlet Banner = class Banner extends Disposable {\n    constructor(instantiationService) {\n        super();\n        this.instantiationService = instantiationService;\n        this.markdownRenderer = this.instantiationService.createInstance(MarkdownRenderer, {});\n        this.element = $('div.editor-banner');\n        this.element.tabIndex = 0;\n    }\n    getAriaLabel(item) {\n        if (item.ariaLabel) {\n            return item.ariaLabel;\n        }\n        if (typeof item.message === 'string') {\n            return item.message;\n        }\n        return undefined;\n    }\n    getBannerMessage(message) {\n        if (typeof message === 'string') {\n            const element = $('span');\n            element.innerText = message;\n            return element;\n        }\n        return this.markdownRenderer.render(message).element;\n    }\n    clear() {\n        clearNode(this.element);\n    }\n    show(item) {\n        // Clear previous item\n        clearNode(this.element);\n        // Banner aria label\n        const ariaLabel = this.getAriaLabel(item);\n        if (ariaLabel) {\n            this.element.setAttribute('aria-label', ariaLabel);\n        }\n        // Icon\n        const iconContainer = append(this.element, $('div.icon-container'));\n        iconContainer.setAttribute('aria-hidden', 'true');\n        if (item.icon) {\n            iconContainer.appendChild($(`div${ThemeIcon.asCSSSelector(item.icon)}`));\n        }\n        // Message\n        const messageContainer = append(this.element, $('div.message-container'));\n        messageContainer.setAttribute('aria-hidden', 'true');\n        messageContainer.appendChild(this.getBannerMessage(item.message));\n        // Message Actions\n        this.messageActionsContainer = append(this.element, $('div.message-actions-container'));\n        if (item.actions) {\n            for (const action of item.actions) {\n                this._register(this.instantiationService.createInstance(Link, this.messageActionsContainer, Object.assign(Object.assign({}, action), { tabIndex: -1 }), {}));\n            }\n        }\n        // Action\n        const actionBarContainer = append(this.element, $('div.action-container'));\n        this.actionBar = this._register(new ActionBar(actionBarContainer));\n        this.actionBar.push(this._register(new Action('banner.close', 'Close Banner', ThemeIcon.asClassName(widgetClose), true, () => {\n            if (typeof item.onClose === 'function') {\n                item.onClose();\n            }\n        })), { icon: true, label: false });\n        this.actionBar.setFocusable(false);\n    }\n};\nBanner = __decorate([\n    __param(0, IInstantiationService)\n], Banner);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { $, append, EventHelper } from '../../../base/browser/dom.js';\nimport { DomEmitter } from '../../../base/browser/event.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { EventType as TouchEventType, Gesture } from '../../../base/browser/touch.js';\nimport { Event } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { IOpenerService } from '../common/opener.js';\nimport { textLinkActiveForeground, textLinkForeground } from '../../theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../theme/common/themeService.js';\nlet Link = class Link extends Disposable {\n    constructor(container, _link, options = {}, openerService) {\n        var _a;\n        super();\n        this._link = _link;\n        this._enabled = true;\n        this.el = append(container, $('a.monaco-link', {\n            tabIndex: (_a = _link.tabIndex) !== null && _a !== void 0 ? _a : 0,\n            href: _link.href,\n            title: _link.title\n        }, _link.label));\n        this.el.setAttribute('role', 'button');\n        const onClickEmitter = this._register(new DomEmitter(this.el, 'click'));\n        const onKeyPress = this._register(new DomEmitter(this.el, 'keypress'));\n        const onEnterPress = Event.chain(onKeyPress.event)\n            .map(e => new StandardKeyboardEvent(e))\n            .filter(e => e.keyCode === 3 /* Enter */)\n            .event;\n        const onTap = this._register(new DomEmitter(this.el, TouchEventType.Tap)).event;\n        this._register(Gesture.addTarget(this.el));\n        const onOpen = Event.any(onClickEmitter.event, onEnterPress, onTap);\n        this._register(onOpen(e => {\n            if (!this.enabled) {\n                return;\n            }\n            EventHelper.stop(e, true);\n            if (options === null || options === void 0 ? void 0 : options.opener) {\n                options.opener(this._link.href);\n            }\n            else {\n                openerService.open(this._link.href, { allowCommands: true });\n            }\n        }));\n        this.enabled = true;\n    }\n    get enabled() {\n        return this._enabled;\n    }\n    set enabled(enabled) {\n        if (enabled) {\n            this.el.setAttribute('aria-disabled', 'false');\n            this.el.tabIndex = 0;\n            this.el.style.pointerEvents = 'auto';\n            this.el.style.opacity = '1';\n            this.el.style.cursor = 'pointer';\n            this._enabled = false;\n        }\n        else {\n            this.el.setAttribute('aria-disabled', 'true');\n            this.el.tabIndex = -1;\n            this.el.style.pointerEvents = 'none';\n            this.el.style.opacity = '0.4';\n            this.el.style.cursor = 'default';\n            this._enabled = true;\n        }\n        this._enabled = enabled;\n    }\n};\nLink = __decorate([\n    __param(3, IOpenerService)\n], Link);\nexport { Link };\nregisterThemingParticipant((theme, collector) => {\n    const textLinkForegroundColor = theme.getColor(textLinkForeground);\n    if (textLinkForegroundColor) {\n        collector.addRule(`.monaco-link { color: ${textLinkForegroundColor}; }`);\n    }\n    const textLinkActiveForegroundColor = theme.getColor(textLinkActiveForeground);\n    if (textLinkActiveForegroundColor) {\n        collector.addRule(`.monaco-link:hover { color: ${textLinkActiveForegroundColor}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport * as nls from '../../../../nls.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nconst ignoreUnusualLineTerminators = 'ignoreUnusualLineTerminators';\nfunction writeIgnoreState(codeEditorService, model, state) {\n    codeEditorService.setModelProperty(model.uri, ignoreUnusualLineTerminators, state);\n}\nfunction readIgnoreState(codeEditorService, model) {\n    return codeEditorService.getModelProperty(model.uri, ignoreUnusualLineTerminators);\n}\nlet UnusualLineTerminatorsDetector = class UnusualLineTerminatorsDetector extends Disposable {\n    constructor(_editor, _dialogService, _codeEditorService) {\n        super();\n        this._editor = _editor;\n        this._dialogService = _dialogService;\n        this._codeEditorService = _codeEditorService;\n        this._config = this._editor.getOption(114 /* unusualLineTerminators */);\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(114 /* unusualLineTerminators */)) {\n                this._config = this._editor.getOption(114 /* unusualLineTerminators */);\n                this._checkForUnusualLineTerminators();\n            }\n        }));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._checkForUnusualLineTerminators();\n        }));\n        this._register(this._editor.onDidChangeModelContent((e) => {\n            if (e.isUndoing) {\n                // skip checking in case of undoing\n                return;\n            }\n            this._checkForUnusualLineTerminators();\n        }));\n    }\n    _checkForUnusualLineTerminators() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._config === 'off') {\n                return;\n            }\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            if (!model.mightContainUnusualLineTerminators()) {\n                return;\n            }\n            const ignoreState = readIgnoreState(this._codeEditorService, model);\n            if (ignoreState === true) {\n                // this model should be ignored\n                return;\n            }\n            if (this._editor.getOption(81 /* readOnly */)) {\n                // read only editor => sorry!\n                return;\n            }\n            if (this._config === 'auto') {\n                // just do it!\n                model.removeUnusualLineTerminators(this._editor.getSelections());\n                return;\n            }\n            const result = yield this._dialogService.confirm({\n                title: nls.localize('unusualLineTerminators.title', \"Unusual Line Terminators\"),\n                message: nls.localize('unusualLineTerminators.message', \"Detected unusual line terminators\"),\n                detail: nls.localize('unusualLineTerminators.detail', \"The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\\n\\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.\", basename(model.uri)),\n                primaryButton: nls.localize('unusualLineTerminators.fix', \"Remove Unusual Line Terminators\"),\n                secondaryButton: nls.localize('unusualLineTerminators.ignore', \"Ignore\")\n            });\n            if (!result.confirmed) {\n                // this model should be ignored\n                writeIgnoreState(this._codeEditorService, model, true);\n                return;\n            }\n            model.removeUnusualLineTerminators(this._editor.getSelections());\n        });\n    }\n};\nUnusualLineTerminatorsDetector.ID = 'editor.contrib.unusualLineTerminatorsDetector';\nUnusualLineTerminatorsDetector = __decorate([\n    __param(1, IDialogService),\n    __param(2, ICodeEditorService)\n], UnusualLineTerminatorsDetector);\nexport { UnusualLineTerminatorsDetector };\nregisterEditorContribution(UnusualLineTerminatorsDetector.ID, UnusualLineTerminatorsDetector);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, first, timeout } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MinimapPosition, OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { DocumentHighlightKind } from '../../../common/languages.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { activeContrastBorder, editorSelectionHighlight, editorSelectionHighlightBorder, minimapSelectionOccurrenceHighlight, overviewRulerSelectionHighlightForeground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nconst editorWordHighlight = registerColor('editor.wordHighlightBackground', { dark: '#575757B8', light: '#57575740', hc: null }, nls.localize('wordHighlight', 'Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst editorWordHighlightStrong = registerColor('editor.wordHighlightStrongBackground', { dark: '#004972B8', light: '#0e639c40', hc: null }, nls.localize('wordHighlightStrong', 'Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst editorWordHighlightBorder = registerColor('editor.wordHighlightBorder', { light: null, dark: null, hc: activeContrastBorder }, nls.localize('wordHighlightBorder', 'Border color of a symbol during read-access, like reading a variable.'));\nconst editorWordHighlightStrongBorder = registerColor('editor.wordHighlightStrongBorder', { light: null, dark: null, hc: activeContrastBorder }, nls.localize('wordHighlightStrongBorder', 'Border color of a symbol during write-access, like writing to a variable.'));\nconst overviewRulerWordHighlightForeground = registerColor('editorOverviewRuler.wordHighlightForeground', { dark: '#A0A0A0CC', light: '#A0A0A0CC', hc: '#A0A0A0CC' }, nls.localize('overviewRulerWordHighlightForeground', 'Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst overviewRulerWordHighlightStrongForeground = registerColor('editorOverviewRuler.wordHighlightStrongForeground', { dark: '#C0A0C0CC', light: '#C0A0C0CC', hc: '#C0A0C0CC' }, nls.localize('overviewRulerWordHighlightStrongForeground', 'Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst ctxHasWordHighlights = new RawContextKey('hasWordHighlights', false);\nexport function getOccurrencesAtPosition(registry, model, position, token) {\n    const orderedByScore = registry.ordered(model);\n    // in order of score ask the occurrences provider\n    // until someone response with a good result\n    // (good = none empty array)\n    return first(orderedByScore.map(provider => () => {\n        return Promise.resolve(provider.provideDocumentHighlights(model, position, token))\n            .then(undefined, onUnexpectedExternalError);\n    }), arrays.isNonEmptyArray);\n}\nclass OccurenceAtPositionRequest {\n    constructor(_model, _selection, _wordSeparators) {\n        this._model = _model;\n        this._selection = _selection;\n        this._wordSeparators = _wordSeparators;\n        this._wordRange = this._getCurrentWordRange(_model, _selection);\n        this._result = null;\n    }\n    get result() {\n        if (!this._result) {\n            this._result = createCancelablePromise(token => this._compute(this._model, this._selection, this._wordSeparators, token));\n        }\n        return this._result;\n    }\n    _getCurrentWordRange(model, selection) {\n        const word = model.getWordAtPosition(selection.getPosition());\n        if (word) {\n            return new Range(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n        }\n        return null;\n    }\n    isValid(model, selection, decorationIds) {\n        const lineNumber = selection.startLineNumber;\n        const startColumn = selection.startColumn;\n        const endColumn = selection.endColumn;\n        const currentWordRange = this._getCurrentWordRange(model, selection);\n        let requestIsValid = Boolean(this._wordRange && this._wordRange.equalsRange(currentWordRange));\n        // Even if we are on a different word, if that word is in the decorations ranges, the request is still valid\n        // (Same symbol)\n        for (let i = 0, len = decorationIds.length; !requestIsValid && i < len; i++) {\n            let range = model.getDecorationRange(decorationIds[i]);\n            if (range && range.startLineNumber === lineNumber) {\n                if (range.startColumn <= startColumn && range.endColumn >= endColumn) {\n                    requestIsValid = true;\n                }\n            }\n        }\n        return requestIsValid;\n    }\n    cancel() {\n        this.result.cancel();\n    }\n}\nclass SemanticOccurenceAtPositionRequest extends OccurenceAtPositionRequest {\n    constructor(model, selection, wordSeparators, providers) {\n        super(model, selection, wordSeparators);\n        this._providers = providers;\n    }\n    _compute(model, selection, wordSeparators, token) {\n        return getOccurrencesAtPosition(this._providers, model, selection.getPosition(), token).then(value => value || []);\n    }\n}\nclass TextualOccurenceAtPositionRequest extends OccurenceAtPositionRequest {\n    constructor(model, selection, wordSeparators) {\n        super(model, selection, wordSeparators);\n        this._selectionIsEmpty = selection.isEmpty();\n    }\n    _compute(model, selection, wordSeparators, token) {\n        return timeout(250, token).then(() => {\n            if (!selection.isEmpty()) {\n                return [];\n            }\n            const word = model.getWordAtPosition(selection.getPosition());\n            if (!word || word.word.length > 1000) {\n                return [];\n            }\n            const matches = model.findMatches(word.word, true, false, true, wordSeparators, false);\n            return matches.map(m => {\n                return {\n                    range: m.range,\n                    kind: DocumentHighlightKind.Text\n                };\n            });\n        });\n    }\n    isValid(model, selection, decorationIds) {\n        const currentSelectionIsEmpty = selection.isEmpty();\n        if (this._selectionIsEmpty !== currentSelectionIsEmpty) {\n            return false;\n        }\n        return super.isValid(model, selection, decorationIds);\n    }\n}\nfunction computeOccurencesAtPosition(registry, model, selection, wordSeparators) {\n    if (registry.has(model)) {\n        return new SemanticOccurenceAtPositionRequest(model, selection, wordSeparators, registry);\n    }\n    return new TextualOccurenceAtPositionRequest(model, selection, wordSeparators);\n}\nregisterModelAndPositionCommand('_executeDocumentHighlights', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    return getOccurrencesAtPosition(languageFeaturesService.documentHighlightProvider, model, position, CancellationToken.None);\n});\nclass WordHighlighter {\n    constructor(editor, providers, contextKeyService) {\n        this.toUnhook = new DisposableStore();\n        this.workerRequestTokenId = 0;\n        this.workerRequestCompleted = false;\n        this.workerRequestValue = [];\n        this.lastCursorPositionChangeTime = 0;\n        this.renderDecorationsTimer = -1;\n        this.editor = editor;\n        this.providers = providers;\n        this._hasWordHighlights = ctxHasWordHighlights.bindTo(contextKeyService);\n        this._ignorePositionChangeEvent = false;\n        this.occurrencesHighlight = this.editor.getOption(72 /* occurrencesHighlight */);\n        this.model = this.editor.getModel();\n        this.toUnhook.add(editor.onDidChangeCursorPosition((e) => {\n            if (this._ignorePositionChangeEvent) {\n                // We are changing the position => ignore this event\n                return;\n            }\n            if (!this.occurrencesHighlight) {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            this._onPositionChanged(e);\n        }));\n        this.toUnhook.add(editor.onDidChangeModelContent((e) => {\n            this._stopAll();\n        }));\n        this.toUnhook.add(editor.onDidChangeConfiguration((e) => {\n            let newValue = this.editor.getOption(72 /* occurrencesHighlight */);\n            if (this.occurrencesHighlight !== newValue) {\n                this.occurrencesHighlight = newValue;\n                this._stopAll();\n            }\n        }));\n        this._decorationIds = [];\n        this.workerRequestTokenId = 0;\n        this.workerRequest = null;\n        this.workerRequestCompleted = false;\n        this.lastCursorPositionChangeTime = 0;\n        this.renderDecorationsTimer = -1;\n    }\n    hasDecorations() {\n        return (this._decorationIds.length > 0);\n    }\n    restore() {\n        if (!this.occurrencesHighlight) {\n            return;\n        }\n        this._run();\n    }\n    _getSortedHighlights() {\n        return arrays.coalesce(this._decorationIds\n            .map((id) => this.model.getDecorationRange(id))\n            .sort(Range.compareRangesUsingStarts));\n    }\n    moveNext() {\n        let highlights = this._getSortedHighlights();\n        let index = highlights.findIndex((range) => range.containsPosition(this.editor.getPosition()));\n        let newIndex = ((index + 1) % highlights.length);\n        let dest = highlights[newIndex];\n        try {\n            this._ignorePositionChangeEvent = true;\n            this.editor.setPosition(dest.getStartPosition());\n            this.editor.revealRangeInCenterIfOutsideViewport(dest);\n            const word = this._getWord();\n            if (word) {\n                const lineContent = this.editor.getModel().getLineContent(dest.startLineNumber);\n                alert(`${lineContent}, ${newIndex + 1} of ${highlights.length} for '${word.word}'`);\n            }\n        }\n        finally {\n            this._ignorePositionChangeEvent = false;\n        }\n    }\n    moveBack() {\n        let highlights = this._getSortedHighlights();\n        let index = highlights.findIndex((range) => range.containsPosition(this.editor.getPosition()));\n        let newIndex = ((index - 1 + highlights.length) % highlights.length);\n        let dest = highlights[newIndex];\n        try {\n            this._ignorePositionChangeEvent = true;\n            this.editor.setPosition(dest.getStartPosition());\n            this.editor.revealRangeInCenterIfOutsideViewport(dest);\n            const word = this._getWord();\n            if (word) {\n                const lineContent = this.editor.getModel().getLineContent(dest.startLineNumber);\n                alert(`${lineContent}, ${newIndex + 1} of ${highlights.length} for '${word.word}'`);\n            }\n        }\n        finally {\n            this._ignorePositionChangeEvent = false;\n        }\n    }\n    _removeDecorations() {\n        if (this._decorationIds.length > 0) {\n            // remove decorations\n            this._decorationIds = this.editor.deltaDecorations(this._decorationIds, []);\n            this._hasWordHighlights.set(false);\n        }\n    }\n    _stopAll() {\n        // Remove any existing decorations\n        this._removeDecorations();\n        // Cancel any renderDecorationsTimer\n        if (this.renderDecorationsTimer !== -1) {\n            clearTimeout(this.renderDecorationsTimer);\n            this.renderDecorationsTimer = -1;\n        }\n        // Cancel any worker request\n        if (this.workerRequest !== null) {\n            this.workerRequest.cancel();\n            this.workerRequest = null;\n        }\n        // Invalidate any worker request callback\n        if (!this.workerRequestCompleted) {\n            this.workerRequestTokenId++;\n            this.workerRequestCompleted = true;\n        }\n    }\n    _onPositionChanged(e) {\n        // disabled\n        if (!this.occurrencesHighlight) {\n            this._stopAll();\n            return;\n        }\n        // ignore typing & other\n        if (e.reason !== 3 /* Explicit */) {\n            this._stopAll();\n            return;\n        }\n        this._run();\n    }\n    _getWord() {\n        let editorSelection = this.editor.getSelection();\n        let lineNumber = editorSelection.startLineNumber;\n        let startColumn = editorSelection.startColumn;\n        return this.model.getWordAtPosition({\n            lineNumber: lineNumber,\n            column: startColumn\n        });\n    }\n    _run() {\n        let editorSelection = this.editor.getSelection();\n        // ignore multiline selection\n        if (editorSelection.startLineNumber !== editorSelection.endLineNumber) {\n            this._stopAll();\n            return;\n        }\n        let startColumn = editorSelection.startColumn;\n        let endColumn = editorSelection.endColumn;\n        const word = this._getWord();\n        // The selection must be inside a word or surround one word at most\n        if (!word || word.startColumn > startColumn || word.endColumn < endColumn) {\n            this._stopAll();\n            return;\n        }\n        // All the effort below is trying to achieve this:\n        // - when cursor is moved to a word, trigger immediately a findOccurrences request\n        // - 250ms later after the last cursor move event, render the occurrences\n        // - no flickering!\n        const workerRequestIsValid = (this.workerRequest && this.workerRequest.isValid(this.model, editorSelection, this._decorationIds));\n        // There are 4 cases:\n        // a) old workerRequest is valid & completed, renderDecorationsTimer fired\n        // b) old workerRequest is valid & completed, renderDecorationsTimer not fired\n        // c) old workerRequest is valid, but not completed\n        // d) old workerRequest is not valid\n        // For a) no action is needed\n        // For c), member 'lastCursorPositionChangeTime' will be used when installing the timer so no action is needed\n        this.lastCursorPositionChangeTime = (new Date()).getTime();\n        if (workerRequestIsValid) {\n            if (this.workerRequestCompleted && this.renderDecorationsTimer !== -1) {\n                // case b)\n                // Delay the firing of renderDecorationsTimer by an extra 250 ms\n                clearTimeout(this.renderDecorationsTimer);\n                this.renderDecorationsTimer = -1;\n                this._beginRenderDecorations();\n            }\n        }\n        else {\n            // case d)\n            // Stop all previous actions and start fresh\n            this._stopAll();\n            let myRequestId = ++this.workerRequestTokenId;\n            this.workerRequestCompleted = false;\n            this.workerRequest = computeOccurencesAtPosition(this.providers, this.model, this.editor.getSelection(), this.editor.getOption(117 /* wordSeparators */));\n            this.workerRequest.result.then(data => {\n                if (myRequestId === this.workerRequestTokenId) {\n                    this.workerRequestCompleted = true;\n                    this.workerRequestValue = data || [];\n                    this._beginRenderDecorations();\n                }\n            }, onUnexpectedError);\n        }\n    }\n    _beginRenderDecorations() {\n        let currentTime = (new Date()).getTime();\n        let minimumRenderTime = this.lastCursorPositionChangeTime + 250;\n        if (currentTime >= minimumRenderTime) {\n            // Synchronous\n            this.renderDecorationsTimer = -1;\n            this.renderDecorations();\n        }\n        else {\n            // Asynchronous\n            this.renderDecorationsTimer = setTimeout(() => {\n                this.renderDecorations();\n            }, (minimumRenderTime - currentTime));\n        }\n    }\n    renderDecorations() {\n        this.renderDecorationsTimer = -1;\n        let decorations = [];\n        for (const info of this.workerRequestValue) {\n            if (info.range) {\n                decorations.push({\n                    range: info.range,\n                    options: WordHighlighter._getDecorationOptions(info.kind)\n                });\n            }\n        }\n        this._decorationIds = this.editor.deltaDecorations(this._decorationIds, decorations);\n        this._hasWordHighlights.set(this.hasDecorations());\n    }\n    static _getDecorationOptions(kind) {\n        if (kind === DocumentHighlightKind.Write) {\n            return this._WRITE_OPTIONS;\n        }\n        else if (kind === DocumentHighlightKind.Text) {\n            return this._TEXT_OPTIONS;\n        }\n        else {\n            return this._REGULAR_OPTIONS;\n        }\n    }\n    dispose() {\n        this._stopAll();\n        this.toUnhook.dispose();\n    }\n}\nWordHighlighter._WRITE_OPTIONS = ModelDecorationOptions.register({\n    description: 'word-highlight-strong',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    className: 'wordHighlightStrong',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerWordHighlightStrongForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n});\nWordHighlighter._TEXT_OPTIONS = ModelDecorationOptions.register({\n    description: 'selection-highlight',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerSelectionHighlightForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n});\nWordHighlighter._REGULAR_OPTIONS = ModelDecorationOptions.register({\n    description: 'word-highlight',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    className: 'wordHighlight',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerWordHighlightForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n});\nlet WordHighlighterContribution = class WordHighlighterContribution extends Disposable {\n    constructor(editor, contextKeyService, languageFeaturesService) {\n        super();\n        this.wordHighlighter = null;\n        const createWordHighlighterIfPossible = () => {\n            if (editor.hasModel()) {\n                this.wordHighlighter = new WordHighlighter(editor, languageFeaturesService.documentHighlightProvider, contextKeyService);\n            }\n        };\n        this._register(editor.onDidChangeModel((e) => {\n            if (this.wordHighlighter) {\n                this.wordHighlighter.dispose();\n                this.wordHighlighter = null;\n            }\n            createWordHighlighterIfPossible();\n        }));\n        createWordHighlighterIfPossible();\n    }\n    static get(editor) {\n        return editor.getContribution(WordHighlighterContribution.ID);\n    }\n    saveViewState() {\n        if (this.wordHighlighter && this.wordHighlighter.hasDecorations()) {\n            return true;\n        }\n        return false;\n    }\n    moveNext() {\n        if (this.wordHighlighter) {\n            this.wordHighlighter.moveNext();\n        }\n    }\n    moveBack() {\n        if (this.wordHighlighter) {\n            this.wordHighlighter.moveBack();\n        }\n    }\n    restoreViewState(state) {\n        if (this.wordHighlighter && state) {\n            this.wordHighlighter.restore();\n        }\n    }\n    dispose() {\n        if (this.wordHighlighter) {\n            this.wordHighlighter.dispose();\n            this.wordHighlighter = null;\n        }\n        super.dispose();\n    }\n};\nWordHighlighterContribution.ID = 'editor.contrib.wordHighlighter';\nWordHighlighterContribution = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ILanguageFeaturesService)\n], WordHighlighterContribution);\nclass WordHighlightNavigationAction extends EditorAction {\n    constructor(next, opts) {\n        super(opts);\n        this._isNext = next;\n    }\n    run(accessor, editor) {\n        const controller = WordHighlighterContribution.get(editor);\n        if (!controller) {\n            return;\n        }\n        if (this._isNext) {\n            controller.moveNext();\n        }\n        else {\n            controller.moveBack();\n        }\n    }\n}\nclass NextWordHighlightAction extends WordHighlightNavigationAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.wordHighlight.next',\n            label: nls.localize('wordHighlight.next.label', \"Go to Next Symbol Highlight\"),\n            alias: 'Go to Next Symbol Highlight',\n            precondition: ctxHasWordHighlights,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 65 /* F7 */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n}\nclass PrevWordHighlightAction extends WordHighlightNavigationAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.wordHighlight.prev',\n            label: nls.localize('wordHighlight.previous.label', \"Go to Previous Symbol Highlight\"),\n            alias: 'Go to Previous Symbol Highlight',\n            precondition: ctxHasWordHighlights,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* Shift */ | 65 /* F7 */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n}\nclass TriggerWordHighlightAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.wordHighlight.trigger',\n            label: nls.localize('wordHighlight.trigger.label', \"Trigger Symbol Highlight\"),\n            alias: 'Trigger Symbol Highlight',\n            precondition: ctxHasWordHighlights.toNegated(),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 0,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        const controller = WordHighlighterContribution.get(editor);\n        if (!controller) {\n            return;\n        }\n        controller.restoreViewState(true);\n    }\n}\nregisterEditorContribution(WordHighlighterContribution.ID, WordHighlighterContribution);\nregisterEditorAction(NextWordHighlightAction);\nregisterEditorAction(PrevWordHighlightAction);\nregisterEditorAction(TriggerWordHighlightAction);\nregisterThemingParticipant((theme, collector) => {\n    const selectionHighlight = theme.getColor(editorSelectionHighlight);\n    if (selectionHighlight) {\n        collector.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${selectionHighlight}; }`);\n        collector.addRule(`.monaco-editor .selectionHighlight { background-color: ${selectionHighlight.transparent(0.5)}; }`);\n    }\n    const wordHighlight = theme.getColor(editorWordHighlight);\n    if (wordHighlight) {\n        collector.addRule(`.monaco-editor .wordHighlight { background-color: ${wordHighlight}; }`);\n    }\n    const wordHighlightStrong = theme.getColor(editorWordHighlightStrong);\n    if (wordHighlightStrong) {\n        collector.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${wordHighlightStrong}; }`);\n    }\n    const selectionHighlightBorder = theme.getColor(editorSelectionHighlightBorder);\n    if (selectionHighlightBorder) {\n        collector.addRule(`.monaco-editor .selectionHighlight { border: 1px ${theme.type === 'hc' ? 'dotted' : 'solid'} ${selectionHighlightBorder}; box-sizing: border-box; }`);\n    }\n    const wordHighlightBorder = theme.getColor(editorWordHighlightBorder);\n    if (wordHighlightBorder) {\n        collector.addRule(`.monaco-editor .wordHighlight { border: 1px ${theme.type === 'hc' ? 'dashed' : 'solid'} ${wordHighlightBorder}; box-sizing: border-box; }`);\n    }\n    const wordHighlightStrongBorder = theme.getColor(editorWordHighlightStrongBorder);\n    if (wordHighlightStrongBorder) {\n        collector.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${theme.type === 'hc' ? 'dashed' : 'solid'} ${wordHighlightStrongBorder}; box-sizing: border-box; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\nimport { EditorOptions } from '../../../common/config/editorOptions.js';\nimport { CursorState } from '../../../common/cursorCommon.js';\nimport { WordOperations } from '../../../common/cursor/cursorWordOperations.js';\nimport { getMapForWordSeparators } from '../../../common/core/wordCharacterClassifier.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { CONTEXT_ACCESSIBILITY_MODE_ENABLED } from '../../../../platform/accessibility/common/accessibility.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IsWindowsContext } from '../../../../platform/contextkey/common/contextkeys.js';\nexport class MoveWordCommand extends EditorCommand {\n    constructor(opts) {\n        super(opts);\n        this._inSelectionMode = opts.inSelectionMode;\n        this._wordNavigationType = opts.wordNavigationType;\n    }\n    runEditorCommand(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const wordSeparators = getMapForWordSeparators(editor.getOption(117 /* wordSeparators */));\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const result = selections.map((sel) => {\n            const inPosition = new Position(sel.positionLineNumber, sel.positionColumn);\n            const outPosition = this._move(wordSeparators, model, inPosition, this._wordNavigationType);\n            return this._moveTo(sel, outPosition, this._inSelectionMode);\n        });\n        model.pushStackElement();\n        editor._getViewModel().setCursorStates('moveWordCommand', 3 /* Explicit */, result.map(r => CursorState.fromModelSelection(r)));\n        if (result.length === 1) {\n            const pos = new Position(result[0].positionLineNumber, result[0].positionColumn);\n            editor.revealPosition(pos, 0 /* Smooth */);\n        }\n    }\n    _moveTo(from, to, inSelectionMode) {\n        if (inSelectionMode) {\n            // move just position\n            return new Selection(from.selectionStartLineNumber, from.selectionStartColumn, to.lineNumber, to.column);\n        }\n        else {\n            // move everything\n            return new Selection(to.lineNumber, to.column, to.lineNumber, to.column);\n        }\n    }\n}\nexport class WordLeftCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordOperations.moveWordLeft(wordSeparators, model, position, wordNavigationType);\n    }\n}\nexport class WordRightCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordOperations.moveWordRight(wordSeparators, model, position, wordNavigationType);\n    }\n}\nexport class CursorWordStartLeft extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 0 /* WordStart */,\n            id: 'cursorWordStartLeft',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndLeft extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordEnd */,\n            id: 'cursorWordEndLeft',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordLeft extends WordLeftCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 1 /* WordStartFast */,\n            id: 'cursorWordLeft',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* CtrlCmd */ | 15 /* LeftArrow */,\n                mac: { primary: 512 /* Alt */ | 15 /* LeftArrow */ },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordStartLeftSelect extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 0 /* WordStart */,\n            id: 'cursorWordStartLeftSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndLeftSelect extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordEnd */,\n            id: 'cursorWordEndLeftSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordLeftSelect extends WordLeftCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 1 /* WordStartFast */,\n            id: 'cursorWordLeftSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 15 /* LeftArrow */,\n                mac: { primary: 512 /* Alt */ | 1024 /* Shift */ | 15 /* LeftArrow */ },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n}\n// Accessibility navigation commands should only be enabled on windows since they are tuned to what NVDA expects\nexport class CursorWordAccessibilityLeft extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 3 /* WordAccessibility */,\n            id: 'cursorWordAccessibilityLeft',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class CursorWordAccessibilityLeftSelect extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 3 /* WordAccessibility */,\n            id: 'cursorWordAccessibilityLeftSelect',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class CursorWordStartRight extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 0 /* WordStart */,\n            id: 'cursorWordStartRight',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndRight extends WordRightCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordEnd */,\n            id: 'cursorWordEndRight',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* CtrlCmd */ | 17 /* RightArrow */,\n                mac: { primary: 512 /* Alt */ | 17 /* RightArrow */ },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordRight extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordEnd */,\n            id: 'cursorWordRight',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordStartRightSelect extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 0 /* WordStart */,\n            id: 'cursorWordStartRightSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndRightSelect extends WordRightCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordEnd */,\n            id: 'cursorWordEndRightSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 17 /* RightArrow */,\n                mac: { primary: 512 /* Alt */ | 1024 /* Shift */ | 17 /* RightArrow */ },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordRightSelect extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordEnd */,\n            id: 'cursorWordRightSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordAccessibilityRight extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 3 /* WordAccessibility */,\n            id: 'cursorWordAccessibilityRight',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class CursorWordAccessibilityRightSelect extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 3 /* WordAccessibility */,\n            id: 'cursorWordAccessibilityRightSelect',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class DeleteWordCommand extends EditorCommand {\n    constructor(opts) {\n        super(opts);\n        this._whitespaceHeuristics = opts.whitespaceHeuristics;\n        this._wordNavigationType = opts.wordNavigationType;\n    }\n    runEditorCommand(accessor, editor, args) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const wordSeparators = getMapForWordSeparators(editor.getOption(117 /* wordSeparators */));\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const autoClosingBrackets = editor.getOption(5 /* autoClosingBrackets */);\n        const autoClosingQuotes = editor.getOption(8 /* autoClosingQuotes */);\n        const autoClosingPairs = languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getAutoClosingPairs();\n        const viewModel = editor._getViewModel();\n        const commands = selections.map((sel) => {\n            const deleteRange = this._delete({\n                wordSeparators,\n                model,\n                selection: sel,\n                whitespaceHeuristics: this._whitespaceHeuristics,\n                autoClosingDelete: editor.getOption(6 /* autoClosingDelete */),\n                autoClosingBrackets,\n                autoClosingQuotes,\n                autoClosingPairs,\n                autoClosedCharacters: viewModel.getCursorAutoClosedCharacters()\n            }, this._wordNavigationType);\n            return new ReplaceCommand(deleteRange, '');\n        });\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class DeleteWordLeftCommand extends DeleteWordCommand {\n    _delete(ctx, wordNavigationType) {\n        let r = WordOperations.deleteWordLeft(ctx, wordNavigationType);\n        if (r) {\n            return r;\n        }\n        return new Range(1, 1, 1, 1);\n    }\n}\nexport class DeleteWordRightCommand extends DeleteWordCommand {\n    _delete(ctx, wordNavigationType) {\n        let r = WordOperations.deleteWordRight(ctx, wordNavigationType);\n        if (r) {\n            return r;\n        }\n        const lineCount = ctx.model.getLineCount();\n        const maxColumn = ctx.model.getLineMaxColumn(lineCount);\n        return new Range(lineCount, maxColumn, lineCount, maxColumn);\n    }\n}\nexport class DeleteWordStartLeft extends DeleteWordLeftCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 0 /* WordStart */,\n            id: 'deleteWordStartLeft',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordEndLeft extends DeleteWordLeftCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 2 /* WordEnd */,\n            id: 'deleteWordEndLeft',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordLeft extends DeleteWordLeftCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 0 /* WordStart */,\n            id: 'deleteWordLeft',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* CtrlCmd */ | 1 /* Backspace */,\n                mac: { primary: 512 /* Alt */ | 1 /* Backspace */ },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n}\nexport class DeleteWordStartRight extends DeleteWordRightCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 0 /* WordStart */,\n            id: 'deleteWordStartRight',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordEndRight extends DeleteWordRightCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 2 /* WordEnd */,\n            id: 'deleteWordEndRight',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordRight extends DeleteWordRightCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 2 /* WordEnd */,\n            id: 'deleteWordRight',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* CtrlCmd */ | 20 /* Delete */,\n                mac: { primary: 512 /* Alt */ | 20 /* Delete */ },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n}\nexport class DeleteInsideWord extends EditorAction {\n    constructor() {\n        super({\n            id: 'deleteInsideWord',\n            precondition: EditorContextKeys.writable,\n            label: nls.localize('deleteInsideWord', \"Delete Word\"),\n            alias: 'Delete Word'\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const wordSeparators = getMapForWordSeparators(editor.getOption(117 /* wordSeparators */));\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const commands = selections.map((sel) => {\n            const deleteRange = WordOperations.deleteInsideWord(wordSeparators, model, sel);\n            return new ReplaceCommand(deleteRange, '');\n        });\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nregisterEditorCommand(new CursorWordStartLeft());\nregisterEditorCommand(new CursorWordEndLeft());\nregisterEditorCommand(new CursorWordLeft());\nregisterEditorCommand(new CursorWordStartLeftSelect());\nregisterEditorCommand(new CursorWordEndLeftSelect());\nregisterEditorCommand(new CursorWordLeftSelect());\nregisterEditorCommand(new CursorWordStartRight());\nregisterEditorCommand(new CursorWordEndRight());\nregisterEditorCommand(new CursorWordRight());\nregisterEditorCommand(new CursorWordStartRightSelect());\nregisterEditorCommand(new CursorWordEndRightSelect());\nregisterEditorCommand(new CursorWordRightSelect());\nregisterEditorCommand(new CursorWordAccessibilityLeft());\nregisterEditorCommand(new CursorWordAccessibilityLeftSelect());\nregisterEditorCommand(new CursorWordAccessibilityRight());\nregisterEditorCommand(new CursorWordAccessibilityRightSelect());\nregisterEditorCommand(new DeleteWordStartLeft());\nregisterEditorCommand(new DeleteWordEndLeft());\nregisterEditorCommand(new DeleteWordLeft());\nregisterEditorCommand(new DeleteWordStartRight());\nregisterEditorCommand(new DeleteWordEndRight());\nregisterEditorCommand(new DeleteWordRight());\nregisterEditorAction(DeleteInsideWord);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { WordPartOperations } from '../../../common/cursor/cursorWordOperations.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { DeleteWordCommand, MoveWordCommand } from '../../wordOperations/browser/wordOperations.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nexport class DeleteWordPartLeft extends DeleteWordCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 0 /* WordStart */,\n            id: 'deleteWordPartLeft',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* WinCtrl */ | 512 /* Alt */ | 1 /* Backspace */ },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    _delete(ctx, wordNavigationType) {\n        let r = WordPartOperations.deleteWordPartLeft(ctx);\n        if (r) {\n            return r;\n        }\n        return new Range(1, 1, 1, 1);\n    }\n}\nexport class DeleteWordPartRight extends DeleteWordCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 2 /* WordEnd */,\n            id: 'deleteWordPartRight',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* WinCtrl */ | 512 /* Alt */ | 20 /* Delete */ },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    _delete(ctx, wordNavigationType) {\n        let r = WordPartOperations.deleteWordPartRight(ctx);\n        if (r) {\n            return r;\n        }\n        const lineCount = ctx.model.getLineCount();\n        const maxColumn = ctx.model.getLineMaxColumn(lineCount);\n        return new Range(lineCount, maxColumn, lineCount, maxColumn);\n    }\n}\nexport class WordPartLeftCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordPartOperations.moveWordPartLeft(wordSeparators, model, position);\n    }\n}\nexport class CursorWordPartLeft extends WordPartLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 0 /* WordStart */,\n            id: 'cursorWordPartLeft',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* WinCtrl */ | 512 /* Alt */ | 15 /* LeftArrow */ },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n}\n// Register previous id for compatibility purposes\nCommandsRegistry.registerCommandAlias('cursorWordPartStartLeft', 'cursorWordPartLeft');\nexport class CursorWordPartLeftSelect extends WordPartLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 0 /* WordStart */,\n            id: 'cursorWordPartLeftSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* WinCtrl */ | 512 /* Alt */ | 1024 /* Shift */ | 15 /* LeftArrow */ },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n}\n// Register previous id for compatibility purposes\nCommandsRegistry.registerCommandAlias('cursorWordPartStartLeftSelect', 'cursorWordPartLeftSelect');\nexport class WordPartRightCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordPartOperations.moveWordPartRight(wordSeparators, model, position);\n    }\n}\nexport class CursorWordPartRight extends WordPartRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordEnd */,\n            id: 'cursorWordPartRight',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* WinCtrl */ | 512 /* Alt */ | 17 /* RightArrow */ },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordPartRightSelect extends WordPartRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordEnd */,\n            id: 'cursorWordPartRightSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* WinCtrl */ | 512 /* Alt */ | 1024 /* Shift */ | 17 /* RightArrow */ },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n}\nregisterEditorCommand(new DeleteWordPartLeft());\nregisterEditorCommand(new DeleteWordPartRight());\nregisterEditorCommand(new CursorWordPartLeft());\nregisterEditorCommand(new CursorWordPartLeftSelect());\nregisterEditorCommand(new CursorWordPartRight());\nregisterEditorCommand(new CursorWordPartRightSelect());\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './iPadShowKeyboard.css';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nexport class IPadShowKeyboard extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this.widget = null;\n        if (isIOS) {\n            this._register(editor.onDidChangeConfiguration(() => this.update()));\n            this.update();\n        }\n    }\n    update() {\n        const shouldHaveWidget = (!this.editor.getOption(81 /* readOnly */));\n        if (!this.widget && shouldHaveWidget) {\n            this.widget = new ShowKeyboardWidget(this.editor);\n        }\n        else if (this.widget && !shouldHaveWidget) {\n            this.widget.dispose();\n            this.widget = null;\n        }\n    }\n    dispose() {\n        super.dispose();\n        if (this.widget) {\n            this.widget.dispose();\n            this.widget = null;\n        }\n    }\n}\nIPadShowKeyboard.ID = 'editor.contrib.iPadShowKeyboard';\nclass ShowKeyboardWidget extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this._domNode = document.createElement('textarea');\n        this._domNode.className = 'iPadShowKeyboard';\n        this._register(dom.addDisposableListener(this._domNode, 'touchstart', (e) => {\n            this.editor.focus();\n        }));\n        this._register(dom.addDisposableListener(this._domNode, 'focus', (e) => {\n            this.editor.focus();\n        }));\n        this.editor.addOverlayWidget(this);\n    }\n    dispose() {\n        this.editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return ShowKeyboardWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            preference: 1 /* BOTTOM_RIGHT_CORNER */\n        };\n    }\n}\nShowKeyboardWidget.ID = 'editor.contrib.ShowKeyboardWidget';\nregisterEditorContribution(IPadShowKeyboard.ID, IPadShowKeyboard);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { QuickCommandNLS } from '../../../common/standaloneStrings.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { AbstractEditorCommandsQuickAccessProvider } from '../../../contrib/quickAccess/browser/commandsQuickAccess.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nlet StandaloneCommandsQuickAccessProvider = class StandaloneCommandsQuickAccessProvider extends AbstractEditorCommandsQuickAccessProvider {\n    constructor(instantiationService, codeEditorService, keybindingService, commandService, telemetryService, dialogService) {\n        super({ showAlias: false }, instantiationService, keybindingService, commandService, telemetryService, dialogService);\n        this.codeEditorService = codeEditorService;\n    }\n    get activeTextEditorControl() { return withNullAsUndefined(this.codeEditorService.getFocusedCodeEditor()); }\n    getCommandPicks() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.getCodeEditorCommandPicks();\n        });\n    }\n};\nStandaloneCommandsQuickAccessProvider = __decorate([\n    __param(0, IInstantiationService),\n    __param(1, ICodeEditorService),\n    __param(2, IKeybindingService),\n    __param(3, ICommandService),\n    __param(4, ITelemetryService),\n    __param(5, IDialogService)\n], StandaloneCommandsQuickAccessProvider);\nexport { StandaloneCommandsQuickAccessProvider };\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: StandaloneCommandsQuickAccessProvider,\n    prefix: StandaloneCommandsQuickAccessProvider.PREFIX,\n    helpEntries: [{ description: QuickCommandNLS.quickCommandHelp, needsEditor: true }]\n});\nexport class GotoLineAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.quickCommand',\n            label: QuickCommandNLS.quickCommandActionLabel,\n            alias: 'Command Palette',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 59 /* F1 */,\n                weight: 100 /* EditorContrib */\n            },\n            contextMenuOpts: {\n                group: 'z_commands',\n                order: 1\n            }\n        });\n    }\n    run(accessor) {\n        accessor.get(IQuickInputService).quickAccess.show(StandaloneCommandsQuickAccessProvider.PREFIX);\n    }\n}\nregisterEditorAction(GotoLineAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as arrays from './arrays.js';\nimport * as types from './types.js';\nimport * as nls from '../../nls.js';\nfunction exceptionToErrorMessage(exception, verbose) {\n    if (verbose && (exception.stack || exception.stacktrace)) {\n        return nls.localize('stackTrace.format', \"{0}: {1}\", detectSystemErrorMessage(exception), stackToString(exception.stack) || stackToString(exception.stacktrace));\n    }\n    return detectSystemErrorMessage(exception);\n}\nfunction stackToString(stack) {\n    if (Array.isArray(stack)) {\n        return stack.join('\\n');\n    }\n    return stack;\n}\nfunction detectSystemErrorMessage(exception) {\n    // See https://nodejs.org/api/errors.html#errors_class_system_error\n    if (typeof exception.code === 'string' && typeof exception.errno === 'number' && typeof exception.syscall === 'string') {\n        return nls.localize('nodeExceptionMessage', \"A system error occurred ({0})\", exception.message);\n    }\n    return exception.message || nls.localize('error.defaultMessage', \"An unknown error occurred. Please consult the log for more details.\");\n}\n/**\n * Tries to generate a human readable error message out of the error. If the verbose parameter\n * is set to true, the error message will include stacktrace details if provided.\n *\n * @returns A string containing the error message.\n */\nexport function toErrorMessage(error = null, verbose = false) {\n    if (!error) {\n        return nls.localize('error.defaultMessage', \"An unknown error occurred. Please consult the log for more details.\");\n    }\n    if (Array.isArray(error)) {\n        const errors = arrays.coalesce(error);\n        const msg = toErrorMessage(errors[0], verbose);\n        if (errors.length > 1) {\n            return nls.localize('error.moreErrors', \"{0} ({1} errors in total)\", msg, errors.length);\n        }\n        return msg;\n    }\n    if (types.isString(error)) {\n        return error;\n    }\n    if (error.detail) {\n        const detail = error.detail;\n        if (detail.error) {\n            return exceptionToErrorMessage(detail.error, verbose);\n        }\n        if (detail.exception) {\n            return exceptionToErrorMessage(detail.exception, verbose);\n        }\n    }\n    if (error.stack) {\n        return exceptionToErrorMessage(error, verbose);\n    }\n    if (error.message) {\n        return error.message;\n    }\n    return nls.localize('error.defaultMessage', \"An unknown error occurred. Please consult the log for more details.\");\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { toErrorMessage } from '../../../base/common/errorMessage.js';\nimport { isCancellationError } from '../../../base/common/errors.js';\nimport { matchesContiguousSubString, matchesPrefix, matchesWords, or } from '../../../base/common/filters.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { LRUCache } from '../../../base/common/map.js';\nimport Severity from '../../../base/common/severity.js';\nimport { withNullAsUndefined } from '../../../base/common/types.js';\nimport { localize } from '../../../nls.js';\nimport { ICommandService } from '../../commands/common/commands.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IDialogService } from '../../dialogs/common/dialogs.js';\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { PickerQuickAccessProvider } from './pickerQuickAccess.js';\nimport { IStorageService } from '../../storage/common/storage.js';\nimport { ITelemetryService } from '../../telemetry/common/telemetry.js';\nlet AbstractCommandsQuickAccessProvider = class AbstractCommandsQuickAccessProvider extends PickerQuickAccessProvider {\n    constructor(options, instantiationService, keybindingService, commandService, telemetryService, dialogService) {\n        super(AbstractCommandsQuickAccessProvider.PREFIX, options);\n        this.instantiationService = instantiationService;\n        this.keybindingService = keybindingService;\n        this.commandService = commandService;\n        this.telemetryService = telemetryService;\n        this.dialogService = dialogService;\n        this.commandsHistory = this._register(this.instantiationService.createInstance(CommandsHistory));\n        this.options = options;\n    }\n    _getPicks(filter, disposables, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Ask subclass for all command picks\n            const allCommandPicks = yield this.getCommandPicks(disposables, token);\n            if (token.isCancellationRequested) {\n                return [];\n            }\n            // Filter\n            const filteredCommandPicks = [];\n            for (const commandPick of allCommandPicks) {\n                const labelHighlights = withNullAsUndefined(AbstractCommandsQuickAccessProvider.WORD_FILTER(filter, commandPick.label));\n                const aliasHighlights = commandPick.commandAlias ? withNullAsUndefined(AbstractCommandsQuickAccessProvider.WORD_FILTER(filter, commandPick.commandAlias)) : undefined;\n                // Add if matching in label or alias\n                if (labelHighlights || aliasHighlights) {\n                    commandPick.highlights = {\n                        label: labelHighlights,\n                        detail: this.options.showAlias ? aliasHighlights : undefined\n                    };\n                    filteredCommandPicks.push(commandPick);\n                }\n                // Also add if we have a 100% command ID match\n                else if (filter === commandPick.commandId) {\n                    filteredCommandPicks.push(commandPick);\n                }\n            }\n            // Add description to commands that have duplicate labels\n            const mapLabelToCommand = new Map();\n            for (const commandPick of filteredCommandPicks) {\n                const existingCommandForLabel = mapLabelToCommand.get(commandPick.label);\n                if (existingCommandForLabel) {\n                    commandPick.description = commandPick.commandId;\n                    existingCommandForLabel.description = existingCommandForLabel.commandId;\n                }\n                else {\n                    mapLabelToCommand.set(commandPick.label, commandPick);\n                }\n            }\n            // Sort by MRU order and fallback to name otherwise\n            filteredCommandPicks.sort((commandPickA, commandPickB) => {\n                const commandACounter = this.commandsHistory.peek(commandPickA.commandId);\n                const commandBCounter = this.commandsHistory.peek(commandPickB.commandId);\n                if (commandACounter && commandBCounter) {\n                    return commandACounter > commandBCounter ? -1 : 1; // use more recently used command before older\n                }\n                if (commandACounter) {\n                    return -1; // first command was used, so it wins over the non used one\n                }\n                if (commandBCounter) {\n                    return 1; // other command was used so it wins over the command\n                }\n                // both commands were never used, so we sort by name\n                return commandPickA.label.localeCompare(commandPickB.label);\n            });\n            const commandPicks = [];\n            let addSeparator = false;\n            for (let i = 0; i < filteredCommandPicks.length; i++) {\n                const commandPick = filteredCommandPicks[i];\n                const keybinding = this.keybindingService.lookupKeybinding(commandPick.commandId);\n                const ariaLabel = keybinding ?\n                    localize('commandPickAriaLabelWithKeybinding', \"{0}, {1}\", commandPick.label, keybinding.getAriaLabel()) :\n                    commandPick.label;\n                // Separator: recently used\n                if (i === 0 && this.commandsHistory.peek(commandPick.commandId)) {\n                    commandPicks.push({ type: 'separator', label: localize('recentlyUsed', \"recently used\") });\n                    addSeparator = true;\n                }\n                // Separator: other commands\n                if (i !== 0 && addSeparator && !this.commandsHistory.peek(commandPick.commandId)) {\n                    commandPicks.push({ type: 'separator', label: localize('morecCommands', \"other commands\") });\n                    addSeparator = false; // only once\n                }\n                // Command\n                commandPicks.push(Object.assign(Object.assign({}, commandPick), { ariaLabel, detail: this.options.showAlias && commandPick.commandAlias !== commandPick.label ? commandPick.commandAlias : undefined, keybinding, accept: () => __awaiter(this, void 0, void 0, function* () {\n                        // Add to history\n                        this.commandsHistory.push(commandPick.commandId);\n                        // Telementry\n                        this.telemetryService.publicLog2('workbenchActionExecuted', {\n                            id: commandPick.commandId,\n                            from: 'quick open'\n                        });\n                        // Run\n                        try {\n                            yield this.commandService.executeCommand(commandPick.commandId);\n                        }\n                        catch (error) {\n                            if (!isCancellationError(error)) {\n                                this.dialogService.show(Severity.Error, localize('canNotRun', \"Command '{0}' resulted in an error ({1})\", commandPick.label, toErrorMessage(error)));\n                            }\n                        }\n                    }) }));\n            }\n            return commandPicks;\n        });\n    }\n};\nAbstractCommandsQuickAccessProvider.PREFIX = '>';\nAbstractCommandsQuickAccessProvider.WORD_FILTER = or(matchesPrefix, matchesWords, matchesContiguousSubString);\nAbstractCommandsQuickAccessProvider = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IKeybindingService),\n    __param(3, ICommandService),\n    __param(4, ITelemetryService),\n    __param(5, IDialogService)\n], AbstractCommandsQuickAccessProvider);\nexport { AbstractCommandsQuickAccessProvider };\nlet CommandsHistory = class CommandsHistory extends Disposable {\n    constructor(storageService, configurationService) {\n        super();\n        this.storageService = storageService;\n        this.configurationService = configurationService;\n        this.configuredCommandsHistoryLength = 0;\n        this.updateConfiguration();\n        this.load();\n        this.registerListeners();\n    }\n    registerListeners() {\n        this._register(this.configurationService.onDidChangeConfiguration(() => this.updateConfiguration()));\n    }\n    updateConfiguration() {\n        this.configuredCommandsHistoryLength = CommandsHistory.getConfiguredCommandHistoryLength(this.configurationService);\n        if (CommandsHistory.cache && CommandsHistory.cache.limit !== this.configuredCommandsHistoryLength) {\n            CommandsHistory.cache.limit = this.configuredCommandsHistoryLength;\n            CommandsHistory.saveState(this.storageService);\n        }\n    }\n    load() {\n        const raw = this.storageService.get(CommandsHistory.PREF_KEY_CACHE, 0 /* GLOBAL */);\n        let serializedCache;\n        if (raw) {\n            try {\n                serializedCache = JSON.parse(raw);\n            }\n            catch (error) {\n                // invalid data\n            }\n        }\n        const cache = CommandsHistory.cache = new LRUCache(this.configuredCommandsHistoryLength, 1);\n        if (serializedCache) {\n            let entries;\n            if (serializedCache.usesLRU) {\n                entries = serializedCache.entries;\n            }\n            else {\n                entries = serializedCache.entries.sort((a, b) => a.value - b.value);\n            }\n            entries.forEach(entry => cache.set(entry.key, entry.value));\n        }\n        CommandsHistory.counter = this.storageService.getNumber(CommandsHistory.PREF_KEY_COUNTER, 0 /* GLOBAL */, CommandsHistory.counter);\n    }\n    push(commandId) {\n        if (!CommandsHistory.cache) {\n            return;\n        }\n        CommandsHistory.cache.set(commandId, CommandsHistory.counter++); // set counter to command\n        CommandsHistory.saveState(this.storageService);\n    }\n    peek(commandId) {\n        var _a;\n        return (_a = CommandsHistory.cache) === null || _a === void 0 ? void 0 : _a.peek(commandId);\n    }\n    static saveState(storageService) {\n        if (!CommandsHistory.cache) {\n            return;\n        }\n        const serializedCache = { usesLRU: true, entries: [] };\n        CommandsHistory.cache.forEach((value, key) => serializedCache.entries.push({ key, value }));\n        storageService.store(CommandsHistory.PREF_KEY_CACHE, JSON.stringify(serializedCache), 0 /* GLOBAL */, 0 /* USER */);\n        storageService.store(CommandsHistory.PREF_KEY_COUNTER, CommandsHistory.counter, 0 /* GLOBAL */, 0 /* USER */);\n    }\n    static getConfiguredCommandHistoryLength(configurationService) {\n        var _a, _b;\n        const config = configurationService.getValue();\n        const configuredCommandHistoryLength = (_b = (_a = config.workbench) === null || _a === void 0 ? void 0 : _a.commandPalette) === null || _b === void 0 ? void 0 : _b.history;\n        if (typeof configuredCommandHistoryLength === 'number') {\n            return configuredCommandHistoryLength;\n        }\n        return CommandsHistory.DEFAULT_COMMANDS_HISTORY_LENGTH;\n    }\n};\nCommandsHistory.DEFAULT_COMMANDS_HISTORY_LENGTH = 50;\nCommandsHistory.PREF_KEY_CACHE = 'commandPalette.mru.cache';\nCommandsHistory.PREF_KEY_COUNTER = 'commandPalette.mru.counter';\nCommandsHistory.counter = 1;\nCommandsHistory = __decorate([\n    __param(0, IStorageService),\n    __param(1, IConfigurationService)\n], CommandsHistory);\nexport { CommandsHistory };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { timeout } from '../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { Disposable, DisposableStore, MutableDisposable } from '../../../base/common/lifecycle.js';\nexport var TriggerAction;\n(function (TriggerAction) {\n    /**\n     * Do nothing after the button was clicked.\n     */\n    TriggerAction[TriggerAction[\"NO_ACTION\"] = 0] = \"NO_ACTION\";\n    /**\n     * Close the picker.\n     */\n    TriggerAction[TriggerAction[\"CLOSE_PICKER\"] = 1] = \"CLOSE_PICKER\";\n    /**\n     * Update the results of the picker.\n     */\n    TriggerAction[TriggerAction[\"REFRESH_PICKER\"] = 2] = \"REFRESH_PICKER\";\n    /**\n     * Remove the item from the picker.\n     */\n    TriggerAction[TriggerAction[\"REMOVE_ITEM\"] = 3] = \"REMOVE_ITEM\";\n})(TriggerAction || (TriggerAction = {}));\nfunction isPicksWithActive(obj) {\n    const candidate = obj;\n    return Array.isArray(candidate.items);\n}\nfunction isFastAndSlowPicks(obj) {\n    const candidate = obj;\n    return !!candidate.picks && candidate.additionalPicks instanceof Promise;\n}\nexport class PickerQuickAccessProvider extends Disposable {\n    constructor(prefix, options) {\n        super();\n        this.prefix = prefix;\n        this.options = options;\n    }\n    provide(picker, token) {\n        var _a;\n        const disposables = new DisposableStore();\n        // Apply options if any\n        picker.canAcceptInBackground = !!((_a = this.options) === null || _a === void 0 ? void 0 : _a.canAcceptInBackground);\n        // Disable filtering & sorting, we control the results\n        picker.matchOnLabel = picker.matchOnDescription = picker.matchOnDetail = picker.sortByLabel = false;\n        // Set initial picks and update on type\n        let picksCts = undefined;\n        const picksDisposable = disposables.add(new MutableDisposable());\n        const updatePickerItems = () => __awaiter(this, void 0, void 0, function* () {\n            const picksDisposables = picksDisposable.value = new DisposableStore();\n            // Cancel any previous ask for picks and busy\n            picksCts === null || picksCts === void 0 ? void 0 : picksCts.dispose(true);\n            picker.busy = false;\n            // Create new cancellation source for this run\n            picksCts = new CancellationTokenSource(token);\n            // Collect picks and support both long running and short or combined\n            const picksToken = picksCts.token;\n            const picksFilter = picker.value.substr(this.prefix.length).trim();\n            const providedPicks = this._getPicks(picksFilter, picksDisposables, picksToken);\n            const applyPicks = (picks, skipEmpty) => {\n                var _a;\n                let items;\n                let activeItem = undefined;\n                if (isPicksWithActive(picks)) {\n                    items = picks.items;\n                    activeItem = picks.active;\n                }\n                else {\n                    items = picks;\n                }\n                if (items.length === 0) {\n                    if (skipEmpty) {\n                        return false;\n                    }\n                    if (picksFilter.length > 0 && ((_a = this.options) === null || _a === void 0 ? void 0 : _a.noResultsPick)) {\n                        items = [this.options.noResultsPick];\n                    }\n                }\n                picker.items = items;\n                if (activeItem) {\n                    picker.activeItems = [activeItem];\n                }\n                return true;\n            };\n            // No Picks\n            if (providedPicks === null) {\n                // Ignore\n            }\n            // Fast and Slow Picks\n            else if (isFastAndSlowPicks(providedPicks)) {\n                let fastPicksApplied = false;\n                let slowPicksApplied = false;\n                yield Promise.all([\n                    // Fast Picks: to reduce amount of flicker, we race against\n                    // the slow picks over 500ms and then set the fast picks.\n                    // If the slow picks are faster, we reduce the flicker by\n                    // only setting the items once.\n                    (() => __awaiter(this, void 0, void 0, function* () {\n                        yield timeout(PickerQuickAccessProvider.FAST_PICKS_RACE_DELAY);\n                        if (picksToken.isCancellationRequested) {\n                            return;\n                        }\n                        if (!slowPicksApplied) {\n                            fastPicksApplied = applyPicks(providedPicks.picks, true /* skip over empty to reduce flicker */);\n                        }\n                    }))(),\n                    // Slow Picks: we await the slow picks and then set them at\n                    // once together with the fast picks, but only if we actually\n                    // have additional results.\n                    (() => __awaiter(this, void 0, void 0, function* () {\n                        picker.busy = true;\n                        try {\n                            const awaitedAdditionalPicks = yield providedPicks.additionalPicks;\n                            if (picksToken.isCancellationRequested) {\n                                return;\n                            }\n                            let picks;\n                            let activePick = undefined;\n                            if (isPicksWithActive(providedPicks.picks)) {\n                                picks = providedPicks.picks.items;\n                                activePick = providedPicks.picks.active;\n                            }\n                            else {\n                                picks = providedPicks.picks;\n                            }\n                            let additionalPicks;\n                            let additionalActivePick = undefined;\n                            if (isPicksWithActive(awaitedAdditionalPicks)) {\n                                additionalPicks = awaitedAdditionalPicks.items;\n                                additionalActivePick = awaitedAdditionalPicks.active;\n                            }\n                            else {\n                                additionalPicks = awaitedAdditionalPicks;\n                            }\n                            if (additionalPicks.length > 0 || !fastPicksApplied) {\n                                // If we do not have any activePick or additionalActivePick\n                                // we try to preserve the currently active pick from the\n                                // fast results. This fixes an issue where the user might\n                                // have made a pick active before the additional results\n                                // kick in.\n                                // See https://github.com/microsoft/vscode/issues/102480\n                                let fallbackActivePick = undefined;\n                                if (!activePick && !additionalActivePick) {\n                                    const fallbackActivePickCandidate = picker.activeItems[0];\n                                    if (fallbackActivePickCandidate && picks.indexOf(fallbackActivePickCandidate) !== -1) {\n                                        fallbackActivePick = fallbackActivePickCandidate;\n                                    }\n                                }\n                                applyPicks({\n                                    items: [...picks, ...additionalPicks],\n                                    active: activePick || additionalActivePick || fallbackActivePick\n                                });\n                            }\n                        }\n                        finally {\n                            if (!picksToken.isCancellationRequested) {\n                                picker.busy = false;\n                            }\n                            slowPicksApplied = true;\n                        }\n                    }))()\n                ]);\n            }\n            // Fast Picks\n            else if (!(providedPicks instanceof Promise)) {\n                applyPicks(providedPicks);\n            }\n            // Slow Picks\n            else {\n                picker.busy = true;\n                try {\n                    const awaitedPicks = yield providedPicks;\n                    if (picksToken.isCancellationRequested) {\n                        return;\n                    }\n                    applyPicks(awaitedPicks);\n                }\n                finally {\n                    if (!picksToken.isCancellationRequested) {\n                        picker.busy = false;\n                    }\n                }\n            }\n        });\n        disposables.add(picker.onDidChangeValue(() => updatePickerItems()));\n        updatePickerItems();\n        // Accept the pick on accept and hide picker\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (typeof (item === null || item === void 0 ? void 0 : item.accept) === 'function') {\n                if (!event.inBackground) {\n                    picker.hide(); // hide picker unless we accept in background\n                }\n                item.accept(picker.keyMods, event);\n            }\n        }));\n        // Trigger the pick with button index if button triggered\n        disposables.add(picker.onDidTriggerItemButton(({ button, item }) => __awaiter(this, void 0, void 0, function* () {\n            var _b, _c;\n            if (typeof item.trigger === 'function') {\n                const buttonIndex = (_c = (_b = item.buttons) === null || _b === void 0 ? void 0 : _b.indexOf(button)) !== null && _c !== void 0 ? _c : -1;\n                if (buttonIndex >= 0) {\n                    const result = item.trigger(buttonIndex, picker.keyMods);\n                    const action = (typeof result === 'number') ? result : yield result;\n                    if (token.isCancellationRequested) {\n                        return;\n                    }\n                    switch (action) {\n                        case TriggerAction.NO_ACTION:\n                            break;\n                        case TriggerAction.CLOSE_PICKER:\n                            picker.hide();\n                            break;\n                        case TriggerAction.REFRESH_PICKER:\n                            updatePickerItems();\n                            break;\n                        case TriggerAction.REMOVE_ITEM: {\n                            const index = picker.items.indexOf(item);\n                            if (index !== -1) {\n                                const items = picker.items.slice();\n                                const removed = items.splice(index, 1);\n                                const activeItems = picker.activeItems.filter(activeItem => activeItem !== removed[0]);\n                                const keepScrollPositionBefore = picker.keepScrollPosition;\n                                picker.keepScrollPosition = true;\n                                picker.items = items;\n                                if (activeItems) {\n                                    picker.activeItems = activeItems;\n                                }\n                                picker.keepScrollPosition = keepScrollPositionBefore;\n                            }\n                            break;\n                        }\n                    }\n                }\n            }\n        })));\n        return disposables;\n    }\n}\nPickerQuickAccessProvider.FAST_PICKS_RACE_DELAY = 200; // timeout before we accept fast results before slow results are present\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { stripIcons } from '../../../../base/common/iconLabels.js';\nimport { AbstractCommandsQuickAccessProvider } from '../../../../platform/quickinput/browser/commandsQuickAccess.js';\nexport class AbstractEditorCommandsQuickAccessProvider extends AbstractCommandsQuickAccessProvider {\n    constructor(options, instantiationService, keybindingService, commandService, telemetryService, dialogService) {\n        super(options, instantiationService, keybindingService, commandService, telemetryService, dialogService);\n    }\n    getCodeEditorCommandPicks() {\n        const activeTextEditorControl = this.activeTextEditorControl;\n        if (!activeTextEditorControl) {\n            return [];\n        }\n        const editorCommandPicks = [];\n        for (const editorAction of activeTextEditorControl.getSupportedActions()) {\n            editorCommandPicks.push({\n                commandId: editorAction.id,\n                commandAlias: editorAction.alias,\n                label: stripIcons(editorAction.label) || editorAction.id,\n            });\n        }\n        return editorCommandPicks;\n    }\n}\n", "const r=\"SharedWorker\"in globalThis;class e{ActualWorker;constructor(e,t){this.ActualWorker=r?new SharedWorker(e,t):new Worker(e,t)}get onmessage(){return r?this.ActualWorker?.port.onmessage:this.ActualWorker.onmessage}set onmessage(e){r?this.ActualWorker.port.onmessage=e:this.ActualWorker.onmessage=e}get onmessageerror(){return r?this.ActualWorker?.port.onmessageerror:this.ActualWorker.onmessageerror}set onmessageerror(e){r?this.ActualWorker.port.onmessageerror=e:this.ActualWorker.onmessageerror=e}start(){if(r)return this.ActualWorker?.port.start()}postMessage(e,t){return r?this.ActualWorker?.port.postMessage(e,t):this.ActualWorker.postMessage(e,t)}terminate(){return r?this.ActualWorker?.port.close():this.ActualWorker.terminate()}close(){return this.terminate()}get port(){return r?this.ActualWorker.port:this.ActualWorker}get onerror(){return this.ActualWorker.onerror}set onerror(r){this.ActualWorker.onerror=r}addEventListener(e,t,o){return r&&\"error\"!==e?this.ActualWorker?.port.addEventListener(e,t,o):this.ActualWorker.addEventListener(e,t,o)}removeEventListener(e,t,o){return r&&\"error\"!==e?this.ActualWorker?.port.removeEventListener(e,t,o):this.ActualWorker.removeEventListener(e,t,o)}dispatchEvent(r){return this.ActualWorker.dispatchEvent(r)}}export{e as SharedWorkerPolyfill,r as SharedWorkerSupported,e as default};\n", "var o=class{constructor(e){this.map=new Map(e)}getMap(){return this.map}get(e){return this.map.get(e)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(e,t){return this.map.set(e,t),this}add(e){let n=this.size;return this.set(n,e),this}get size(){return this.map.size}get length(){return this.map.size}last(e=1){let t=this.keys()[this.size-e];return this.get(t)}delete(e){return this.map.delete(e)}remove(e){return this.map.delete(e),this}clear(){return this.map.clear(),this}has(e){return this.map.has(e)}entries(){return this.map.entries()}forEach(e,t){return this.map.forEach(e,t),this}[Symbol.iterator](){return this.entries()}},b=(p,e,...t)=>{p.forEach(n=>{n[e](...t)})};var h=({callback:p=()=>{},scope:e=null,name:t=\"event\"})=>({callback:p,scope:e,name:t}),c=class extends o{constructor(e=\"event\"){super();this.name=e}},y=class extends o{constructor(){super()}getEvent(e){let t=this.get(e);return t instanceof c?t:(this.set(e,new c(e)),this.get(e))}newListener(e,t,n){let r=this.getEvent(e);return r.add(h({name:e,callback:t,scope:n})),r}on(e,t,n){if(typeof e==\"undefined\"||e==null)return this;typeof e==\"string\"&&(e=e.trim().split(/\\s/g));let r,i,a=typeof e==\"object\"&&!Array.isArray(e),l=a?t:n;return a||(i=t),Object.keys(e).forEach(s=>{r=a?s:e[s],a&&(i=e[s]),this.newListener(r,i,l)},this),this}removeListener(e,t,n){let r=this.get(e);if(r instanceof c&&t){let i=h({name:e,callback:t,scope:n});r.forEach((a,l)=>{if(a.callback===i.callback&&a.scope===i.scope)return r.remove(l)})}return r}off(e,t,n){if(typeof e==\"undefined\"||e==null)return this;typeof e==\"string\"&&(e=e.trim().split(/\\s/g));let r,i,a=typeof e==\"object\"&&!Array.isArray(e),l=a?t:n;return a||(i=t),Object.keys(e).forEach(s=>{r=a?s:e[s],a&&(i=e[s]),typeof i==\"function\"?this.removeListener(r,i,l):this.remove(r)},this),this}once(e,t,n){if(typeof e==\"undefined\"||e==null)return this;typeof e==\"string\"&&(e=e.trim().split(/\\s/g));let r=typeof e==\"object\"&&!Array.isArray(e);return Object.keys(e).forEach(i=>{let a=r?i:e[i],l=r?e[i]:t,s=r?t:n,u=(...f)=>{l.apply(s,f),this.removeListener(a,u,s)};this.newListener(a,u,s)},this),this}emit(e,...t){return typeof e==\"undefined\"||e==null?this:(typeof e==\"string\"&&(e=e.trim().split(/\\s/g)),e.forEach(n=>{let r=this.get(n);r instanceof c&&r.forEach(i=>{let{callback:a,scope:l}=i;a.apply(l,t)})},this),this)}clear(){return b(this,\"clear\"),super.clear(),this}},d=y;export{c as Event,y as EventEmitter,d as default,h as newListener};\n", "\n// This file is generated by esbuild to expose the worker script as a class, like Webpack's worker-loader\nexport default \"/play/workers/empty.worker.js\"", "\n// This file is generated by esbuild to expose the worker script as a class, like Webpack's worker-loader\nexport default \"/play/workers/build.worker.js\"", "// Based on https://github.com/okikio/bundle/blob/main/src/ts/util/WebWorker.ts\nimport { EventEmitter } from '@okikio/emitter';\nimport {\n    SharedWorkerPolyfill as WebWorker,\n    SharedWorkerSupported,\n} from \"@okikio/sharedworker\";\n\nimport EMPTY_WORKER_URL from \"worker:../editor/workers/empty.ts\";\n\n// https://stackoverflow.com/questions/62954570/javascript-feature-detect-module-support-for-web-workers\nexport const ModuleWorkerTest = () => {\n    let support = false;\n    const test = {\n        get type() {\n            support = true;\n            return \"module\";\n        },\n    };\n\n    try {\n        // We use \"blob://\" as url to avoid an useless network request.\n        // This will either throw in Chrome\n        // either fire an error event in Firefox\n        // which is perfect since\n        // we don't need the worker to actually start,\n        // checking for the type of the script is done before trying to load it.\n\n        // @ts-ignore\n        // `data:application/javascript;base64,${Buffer.from(\"export {};\").toString('base64')}`\n        // const worker = new Worker(`blob://`, test);\n\n        // Use an empty worker file, to avoid \n        const worker = new Worker(\n            EMPTY_WORKER_URL.replace(/\\.js$/, \".mjs\"),\n            test as WorkerOptions\n        );\n\n        worker?.terminate();\n        return support;\n    } catch (e) {\n        console.log(e);\n    }\n\n    return false;\n};\n\nexport let ModuleWorkerSupported = ModuleWorkerTest();\nexport const WorkerType: WorkerOptions[\"type\"] = ModuleWorkerSupported\n    ? \"module\"\n    : \"classic\";\n\nexport const WorkerConfig = (url: URL | string, name?: WorkerOptions[\"name\"]) => {\n    return [url.toString().replace(/\\.js$/, WorkerType == \"module\" ? \".mjs\" : \".js\"), {\n        name,\n        type: WorkerType\n    }] as [string | URL, WorkerOptions];\n}; \n\nconsole.log(\n    `This browser supports ${WorkerType} workers!`\n);\nconsole.log(\n    `This browser supports ${SharedWorkerSupported ? \"Shared Web Workers\" : \"Normal Web Workers\"\n    }!`\n);\n\nimport BUILD_WORKER_URL from 'worker:../editor/workers/build.ts';\nexport const WorkerEvents = new EventEmitter(); \nexport const BuildWorkerOptions = { \n    name: 'build-worker',\n    type: WorkerType\n} as WorkerOptions;\n\nexport const BuildWorker = new WebWorker(BUILD_WORKER_URL, BuildWorkerOptions); \nBuildWorker?.start?.();\n\nexport { WebWorker };\nexport default WebWorker;\n\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/abap/abap.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"abap\",\n  extensions: [\".abap\"],\n  aliases: [\"abap\", \"ABAP\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/abap/abap\"], resolve, reject);\n      });\n    } else {\n      return import(\"./abap.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/apex/apex.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"apex\",\n  extensions: [\".cls\"],\n  aliases: [\"Apex\", \"apex\"],\n  mimetypes: [\"text/x-apex-source\", \"text/x-apex\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/apex/apex\"], resolve, reject);\n      });\n    } else {\n      return import(\"./apex.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/azcli/azcli.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"azcli\",\n  extensions: [\".azcli\"],\n  aliases: [\"Azure CLI\", \"azcli\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/azcli/azcli\"], resolve, reject);\n      });\n    } else {\n      return import(\"./azcli.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/bat/bat.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"bat\",\n  extensions: [\".bat\", \".cmd\"],\n  aliases: [\"Batch\", \"bat\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/bat/bat\"], resolve, reject);\n      });\n    } else {\n      return import(\"./bat.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/bicep/bicep.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"bicep\",\n  extensions: [\".bicep\"],\n  aliases: [\"Bicep\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/bicep/bicep\"], resolve, reject);\n      });\n    } else {\n      return import(\"./bicep.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/cameligo/cameligo.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"cameligo\",\n  extensions: [\".mligo\"],\n  aliases: [\"Cameligo\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/cameligo/cameligo\"], resolve, reject);\n      });\n    } else {\n      return import(\"./cameligo.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/clojure/clojure.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"clojure\",\n  extensions: [\".clj\", \".cljs\", \".cljc\", \".edn\"],\n  aliases: [\"clojure\", \"Clojure\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/clojure/clojure\"], resolve, reject);\n      });\n    } else {\n      return import(\"./clojure.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/coffee/coffee.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"coffeescript\",\n  extensions: [\".coffee\"],\n  aliases: [\"CoffeeScript\", \"coffeescript\", \"coffee\"],\n  mimetypes: [\"text/x-coffeescript\", \"text/coffeescript\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/coffee/coffee\"], resolve, reject);\n      });\n    } else {\n      return import(\"./coffee.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/cpp/cpp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"c\",\n  extensions: [\".c\", \".h\"],\n  aliases: [\"C\", \"c\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/cpp/cpp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./cpp.js\");\n    }\n  }\n});\nregisterLanguage({\n  id: \"cpp\",\n  extensions: [\".cpp\", \".cc\", \".cxx\", \".hpp\", \".hh\", \".hxx\"],\n  aliases: [\"C++\", \"Cpp\", \"cpp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/cpp/cpp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./cpp.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/csharp/csharp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"csharp\",\n  extensions: [\".cs\", \".csx\", \".cake\"],\n  aliases: [\"C#\", \"csharp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/csharp/csharp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./csharp.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/csp/csp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"csp\",\n  extensions: [],\n  aliases: [\"CSP\", \"csp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/csp/csp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./csp.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/css/css.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"css\",\n  extensions: [\".css\"],\n  aliases: [\"CSS\", \"css\"],\n  mimetypes: [\"text/css\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/css/css\"], resolve, reject);\n      });\n    } else {\n      return import(\"./css.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/dart/dart.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"dart\",\n  extensions: [\".dart\"],\n  aliases: [\"Dart\", \"dart\"],\n  mimetypes: [\"text/x-dart-source\", \"text/x-dart\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/dart/dart\"], resolve, reject);\n      });\n    } else {\n      return import(\"./dart.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/dockerfile/dockerfile.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"dockerfile\",\n  extensions: [\".dockerfile\"],\n  filenames: [\"Dockerfile\"],\n  aliases: [\"Dockerfile\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/dockerfile/dockerfile\"], resolve, reject);\n      });\n    } else {\n      return import(\"./dockerfile.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/ecl/ecl.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"ecl\",\n  extensions: [\".ecl\"],\n  aliases: [\"ECL\", \"Ecl\", \"ecl\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/ecl/ecl\"], resolve, reject);\n      });\n    } else {\n      return import(\"./ecl.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/elixir/elixir.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"elixir\",\n  extensions: [\".ex\", \".exs\"],\n  aliases: [\"Elixir\", \"elixir\", \"ex\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/elixir/elixir\"], resolve, reject);\n      });\n    } else {\n      return import(\"./elixir.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/flow9/flow9.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"flow9\",\n  extensions: [\".flow\"],\n  aliases: [\"Flow9\", \"Flow\", \"flow9\", \"flow\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/flow9/flow9\"], resolve, reject);\n      });\n    } else {\n      return import(\"./flow9.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/fsharp/fsharp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"fsharp\",\n  extensions: [\".fs\", \".fsi\", \".ml\", \".mli\", \".fsx\", \".fsscript\"],\n  aliases: [\"F#\", \"FSharp\", \"fsharp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/fsharp/fsharp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./fsharp.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/freemarker2/freemarker2.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"freemarker2\",\n  extensions: [\".ftl\", \".ftlh\", \".ftlx\"],\n  aliases: [\"FreeMarker2\", \"Apache FreeMarker2\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagAngleInterpolationDollar);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagAutoInterpolationDollar);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-angle.interpolation-dollar\",\n  aliases: [\"FreeMarker2 (Angle/Dollar)\", \"Apache FreeMarker2 (Angle/Dollar)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagAngleInterpolationDollar);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagAngleInterpolationDollar);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-bracket.interpolation-dollar\",\n  aliases: [\"FreeMarker2 (Bracket/Dollar)\", \"Apache FreeMarker2 (Bracket/Dollar)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagBracketInterpolationDollar);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagBracketInterpolationDollar);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-angle.interpolation-bracket\",\n  aliases: [\"FreeMarker2 (Angle/Bracket)\", \"Apache FreeMarker2 (Angle/Bracket)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagAngleInterpolationBracket);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagAngleInterpolationBracket);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-bracket.interpolation-bracket\",\n  aliases: [\"FreeMarker2 (Bracket/Bracket)\", \"Apache FreeMarker2 (Bracket/Bracket)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagBracketInterpolationBracket);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagBracketInterpolationBracket);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-auto.interpolation-dollar\",\n  aliases: [\"FreeMarker2 (Auto/Dollar)\", \"Apache FreeMarker2 (Auto/Dollar)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagAutoInterpolationDollar);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagAutoInterpolationDollar);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-auto.interpolation-bracket\",\n  aliases: [\"FreeMarker2 (Auto/Bracket)\", \"Apache FreeMarker2 (Auto/Bracket)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagAutoInterpolationBracket);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagAutoInterpolationBracket);\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/go/go.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"go\",\n  extensions: [\".go\"],\n  aliases: [\"Go\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/go/go\"], resolve, reject);\n      });\n    } else {\n      return import(\"./go.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/graphql/graphql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"graphql\",\n  extensions: [\".graphql\", \".gql\"],\n  aliases: [\"GraphQL\", \"graphql\", \"gql\"],\n  mimetypes: [\"application/graphql\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/graphql/graphql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./graphql.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/handlebars/handlebars.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"handlebars\",\n  extensions: [\".handlebars\", \".hbs\"],\n  aliases: [\"Handlebars\", \"handlebars\", \"hbs\"],\n  mimetypes: [\"text/x-handlebars-template\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/handlebars/handlebars\"], resolve, reject);\n      });\n    } else {\n      return import(\"./handlebars.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/hcl/hcl.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"hcl\",\n  extensions: [\".tf\", \".tfvars\", \".hcl\"],\n  aliases: [\"Terraform\", \"tf\", \"HCL\", \"hcl\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/hcl/hcl\"], resolve, reject);\n      });\n    } else {\n      return import(\"./hcl.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/html/html.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"html\",\n  extensions: [\".html\", \".htm\", \".shtml\", \".xhtml\", \".mdoc\", \".jsp\", \".asp\", \".aspx\", \".jshtm\"],\n  aliases: [\"HTML\", \"htm\", \"html\", \"xhtml\"],\n  mimetypes: [\"text/html\", \"text/x-jshtm\", \"text/template\", \"text/ng-template\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/html/html\"], resolve, reject);\n      });\n    } else {\n      return import(\"./html.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/ini/ini.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"ini\",\n  extensions: [\".ini\", \".properties\", \".gitconfig\"],\n  filenames: [\"config\", \".gitattributes\", \".gitconfig\", \".editorconfig\"],\n  aliases: [\"Ini\", \"ini\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/ini/ini\"], resolve, reject);\n      });\n    } else {\n      return import(\"./ini.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/java/java.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"java\",\n  extensions: [\".java\", \".jav\"],\n  aliases: [\"Java\", \"java\"],\n  mimetypes: [\"text/x-java-source\", \"text/x-java\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/java/java\"], resolve, reject);\n      });\n    } else {\n      return import(\"./java.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/javascript/javascript.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"javascript\",\n  extensions: [\".js\", \".es6\", \".jsx\", \".mjs\", \".cjs\"],\n  firstLine: \"^#!.*\\\\bnode\",\n  filenames: [\"jakefile\"],\n  aliases: [\"JavaScript\", \"javascript\", \"js\"],\n  mimetypes: [\"text/javascript\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/javascript/javascript\"], resolve, reject);\n      });\n    } else {\n      return import(\"./javascript.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/julia/julia.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"julia\",\n  extensions: [\".jl\"],\n  aliases: [\"julia\", \"Julia\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/julia/julia\"], resolve, reject);\n      });\n    } else {\n      return import(\"./julia.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/kotlin/kotlin.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"kotlin\",\n  extensions: [\".kt\"],\n  aliases: [\"Kotlin\", \"kotlin\"],\n  mimetypes: [\"text/x-kotlin-source\", \"text/x-kotlin\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/kotlin/kotlin\"], resolve, reject);\n      });\n    } else {\n      return import(\"./kotlin.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/less/less.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"less\",\n  extensions: [\".less\"],\n  aliases: [\"Less\", \"less\"],\n  mimetypes: [\"text/x-less\", \"text/less\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/less/less\"], resolve, reject);\n      });\n    } else {\n      return import(\"./less.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/lexon/lexon.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"lexon\",\n  extensions: [\".lex\"],\n  aliases: [\"Lexon\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/lexon/lexon\"], resolve, reject);\n      });\n    } else {\n      return import(\"./lexon.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/lua/lua.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"lua\",\n  extensions: [\".lua\"],\n  aliases: [\"Lua\", \"lua\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/lua/lua\"], resolve, reject);\n      });\n    } else {\n      return import(\"./lua.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/liquid/liquid.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"liquid\",\n  extensions: [\".liquid\", \".html.liquid\"],\n  aliases: [\"Liquid\", \"liquid\"],\n  mimetypes: [\"application/liquid\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/liquid/liquid\"], resolve, reject);\n      });\n    } else {\n      return import(\"./liquid.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/m3/m3.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"m3\",\n  extensions: [\".m3\", \".i3\", \".mg\", \".ig\"],\n  aliases: [\"Modula-3\", \"Modula3\", \"modula3\", \"m3\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/m3/m3\"], resolve, reject);\n      });\n    } else {\n      return import(\"./m3.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/markdown/markdown.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"markdown\",\n  extensions: [\".md\", \".markdown\", \".mdown\", \".mkdn\", \".mkd\", \".mdwn\", \".mdtxt\", \".mdtext\"],\n  aliases: [\"Markdown\", \"markdown\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/markdown/markdown\"], resolve, reject);\n      });\n    } else {\n      return import(\"./markdown.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/mips/mips.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"mips\",\n  extensions: [\".s\"],\n  aliases: [\"MIPS\", \"MIPS-V\"],\n  mimetypes: [\"text/x-mips\", \"text/mips\", \"text/plaintext\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/mips/mips\"], resolve, reject);\n      });\n    } else {\n      return import(\"./mips.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/msdax/msdax.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"msdax\",\n  extensions: [\".dax\", \".msdax\"],\n  aliases: [\"DAX\", \"MSDAX\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/msdax/msdax\"], resolve, reject);\n      });\n    } else {\n      return import(\"./msdax.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/mysql/mysql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"mysql\",\n  extensions: [],\n  aliases: [\"MySQL\", \"mysql\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/mysql/mysql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./mysql.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/objective-c/objective-c.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"objective-c\",\n  extensions: [\".m\"],\n  aliases: [\"Objective-C\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/objective-c/objective-c\"], resolve, reject);\n      });\n    } else {\n      return import(\"./objective-c.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pascal/pascal.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pascal\",\n  extensions: [\".pas\", \".p\", \".pp\"],\n  aliases: [\"Pascal\", \"pas\"],\n  mimetypes: [\"text/x-pascal-source\", \"text/x-pascal\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pascal/pascal\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pascal.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pascaligo/pascaligo.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pascaligo\",\n  extensions: [\".ligo\"],\n  aliases: [\"Pascaligo\", \"ligo\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pascaligo/pascaligo\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pascaligo.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/perl/perl.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"perl\",\n  extensions: [\".pl\"],\n  aliases: [\"Perl\", \"pl\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/perl/perl\"], resolve, reject);\n      });\n    } else {\n      return import(\"./perl.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pgsql/pgsql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pgsql\",\n  extensions: [],\n  aliases: [\"PostgreSQL\", \"postgres\", \"pg\", \"postgre\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pgsql/pgsql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pgsql.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/php/php.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"php\",\n  extensions: [\".php\", \".php4\", \".php5\", \".phtml\", \".ctp\"],\n  aliases: [\"PHP\", \"php\"],\n  mimetypes: [\"application/x-php\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/php/php\"], resolve, reject);\n      });\n    } else {\n      return import(\"./php.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pla/pla.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pla\",\n  extensions: [\".pla\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pla/pla\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pla.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/postiats/postiats.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"postiats\",\n  extensions: [\".dats\", \".sats\", \".hats\"],\n  aliases: [\"ATS\", \"ATS/Postiats\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/postiats/postiats\"], resolve, reject);\n      });\n    } else {\n      return import(\"./postiats.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/powerquery/powerquery.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"powerquery\",\n  extensions: [\".pq\", \".pqm\"],\n  aliases: [\"PQ\", \"M\", \"Power Query\", \"Power Query M\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/powerquery/powerquery\"], resolve, reject);\n      });\n    } else {\n      return import(\"./powerquery.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/powershell/powershell.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"powershell\",\n  extensions: [\".ps1\", \".psm1\", \".psd1\"],\n  aliases: [\"PowerShell\", \"powershell\", \"ps\", \"ps1\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/powershell/powershell\"], resolve, reject);\n      });\n    } else {\n      return import(\"./powershell.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/protobuf/protobuf.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"proto\",\n  extensions: [\".proto\"],\n  aliases: [\"protobuf\", \"Protocol Buffers\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/protobuf/protobuf\"], resolve, reject);\n      });\n    } else {\n      return import(\"./protobuf.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pug/pug.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pug\",\n  extensions: [\".jade\", \".pug\"],\n  aliases: [\"Pug\", \"Jade\", \"jade\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pug/pug\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pug.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/python/python.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"python\",\n  extensions: [\".py\", \".rpy\", \".pyw\", \".cpy\", \".gyp\", \".gypi\"],\n  aliases: [\"Python\", \"py\"],\n  firstLine: \"^#!/.*\\\\bpython[0-9.-]*\\\\b\",\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/python/python\"], resolve, reject);\n      });\n    } else {\n      return import(\"./python.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/qsharp/qsharp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"qsharp\",\n  extensions: [\".qs\"],\n  aliases: [\"Q#\", \"qsharp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/qsharp/qsharp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./qsharp.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/r/r.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"r\",\n  extensions: [\".r\", \".rhistory\", \".rmd\", \".rprofile\", \".rt\"],\n  aliases: [\"R\", \"r\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/r/r\"], resolve, reject);\n      });\n    } else {\n      return import(\"./r.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/razor/razor.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"razor\",\n  extensions: [\".cshtml\"],\n  aliases: [\"Razor\", \"razor\"],\n  mimetypes: [\"text/x-cshtml\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/razor/razor\"], resolve, reject);\n      });\n    } else {\n      return import(\"./razor.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/redis/redis.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"redis\",\n  extensions: [\".redis\"],\n  aliases: [\"redis\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/redis/redis\"], resolve, reject);\n      });\n    } else {\n      return import(\"./redis.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/redshift/redshift.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"redshift\",\n  extensions: [],\n  aliases: [\"Redshift\", \"redshift\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/redshift/redshift\"], resolve, reject);\n      });\n    } else {\n      return import(\"./redshift.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/restructuredtext/restructuredtext.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"restructuredtext\",\n  extensions: [\".rst\"],\n  aliases: [\"reStructuredText\", \"restructuredtext\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/restructuredtext/restructuredtext\"], resolve, reject);\n      });\n    } else {\n      return import(\"./restructuredtext.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/ruby/ruby.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"ruby\",\n  extensions: [\".rb\", \".rbx\", \".rjs\", \".gemspec\", \".pp\"],\n  filenames: [\"rakefile\", \"Gemfile\"],\n  aliases: [\"Ruby\", \"rb\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/ruby/ruby\"], resolve, reject);\n      });\n    } else {\n      return import(\"./ruby.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/rust/rust.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"rust\",\n  extensions: [\".rs\", \".rlib\"],\n  aliases: [\"Rust\", \"rust\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/rust/rust\"], resolve, reject);\n      });\n    } else {\n      return import(\"./rust.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/sb/sb.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"sb\",\n  extensions: [\".sb\"],\n  aliases: [\"Small Basic\", \"sb\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/sb/sb\"], resolve, reject);\n      });\n    } else {\n      return import(\"./sb.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/scala/scala.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"scala\",\n  extensions: [\".scala\", \".sc\", \".sbt\"],\n  aliases: [\"Scala\", \"scala\", \"SBT\", \"Sbt\", \"sbt\", \"Dotty\", \"dotty\"],\n  mimetypes: [\"text/x-scala-source\", \"text/x-scala\", \"text/x-sbt\", \"text/x-dotty\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/scala/scala\"], resolve, reject);\n      });\n    } else {\n      return import(\"./scala.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/scheme/scheme.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"scheme\",\n  extensions: [\".scm\", \".ss\", \".sch\", \".rkt\"],\n  aliases: [\"scheme\", \"Scheme\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/scheme/scheme\"], resolve, reject);\n      });\n    } else {\n      return import(\"./scheme.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/scss/scss.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"scss\",\n  extensions: [\".scss\"],\n  aliases: [\"Sass\", \"sass\", \"scss\"],\n  mimetypes: [\"text/x-scss\", \"text/scss\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/scss/scss\"], resolve, reject);\n      });\n    } else {\n      return import(\"./scss.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/shell/shell.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"shell\",\n  extensions: [\".sh\", \".bash\"],\n  aliases: [\"Shell\", \"sh\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/shell/shell\"], resolve, reject);\n      });\n    } else {\n      return import(\"./shell.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/solidity/solidity.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"sol\",\n  extensions: [\".sol\"],\n  aliases: [\"sol\", \"solidity\", \"Solidity\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/solidity/solidity\"], resolve, reject);\n      });\n    } else {\n      return import(\"./solidity.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/sophia/sophia.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"aes\",\n  extensions: [\".aes\"],\n  aliases: [\"aes\", \"sophia\", \"Sophia\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/sophia/sophia\"], resolve, reject);\n      });\n    } else {\n      return import(\"./sophia.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/sparql/sparql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"sparql\",\n  extensions: [\".rq\"],\n  aliases: [\"sparql\", \"SPARQL\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/sparql/sparql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./sparql.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/sql/sql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"sql\",\n  extensions: [\".sql\"],\n  aliases: [\"SQL\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/sql/sql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./sql.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/st/st.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"st\",\n  extensions: [\".st\", \".iecst\", \".iecplc\", \".lc3lib\"],\n  aliases: [\"StructuredText\", \"scl\", \"stl\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/st/st\"], resolve, reject);\n      });\n    } else {\n      return import(\"./st.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/swift/swift.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"swift\",\n  aliases: [\"Swift\", \"swift\"],\n  extensions: [\".swift\"],\n  mimetypes: [\"text/swift\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/swift/swift\"], resolve, reject);\n      });\n    } else {\n      return import(\"./swift.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/systemverilog/systemverilog.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"systemverilog\",\n  extensions: [\".sv\", \".svh\"],\n  aliases: [\"SV\", \"sv\", \"SystemVerilog\", \"systemverilog\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/systemverilog/systemverilog\"], resolve, reject);\n      });\n    } else {\n      return import(\"./systemverilog.js\");\n    }\n  }\n});\nregisterLanguage({\n  id: \"verilog\",\n  extensions: [\".v\", \".vh\"],\n  aliases: [\"V\", \"v\", \"Verilog\", \"verilog\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/systemverilog/systemverilog\"], resolve, reject);\n      });\n    } else {\n      return import(\"./systemverilog.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/tcl/tcl.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"tcl\",\n  extensions: [\".tcl\"],\n  aliases: [\"tcl\", \"Tcl\", \"tcltk\", \"TclTk\", \"tcl/tk\", \"Tcl/Tk\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/tcl/tcl\"], resolve, reject);\n      });\n    } else {\n      return import(\"./tcl.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/twig/twig.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"twig\",\n  extensions: [\".twig\"],\n  aliases: [\"Twig\", \"twig\"],\n  mimetypes: [\"text/x-twig\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/twig/twig\"], resolve, reject);\n      });\n    } else {\n      return import(\"./twig.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/vb/vb.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"vb\",\n  extensions: [\".vb\"],\n  aliases: [\"Visual Basic\", \"vb\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/vb/vb\"], resolve, reject);\n      });\n    } else {\n      return import(\"./vb.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/xml/xml.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"xml\",\n  extensions: [\n    \".xml\",\n    \".dtd\",\n    \".ascx\",\n    \".csproj\",\n    \".config\",\n    \".wxi\",\n    \".wxl\",\n    \".wxs\",\n    \".xaml\",\n    \".svg\",\n    \".svgz\",\n    \".opf\",\n    \".xsl\"\n  ],\n  firstLine: \"(\\\\<\\\\?xml.*)|(\\\\<svg)|(\\\\<\\\\!doctype\\\\s+svg)\",\n  aliases: [\"XML\", \"xml\"],\n  mimetypes: [\"text/xml\", \"application/xml\", \"application/xaml+xml\", \"application/xml-dtd\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/xml/xml\"], resolve, reject);\n      });\n    } else {\n      return import(\"./xml.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/yaml/yaml.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"yaml\",\n  extensions: [\".yaml\", \".yml\"],\n  aliases: [\"YAML\", \"yaml\", \"YML\", \"yml\"],\n  mimetypes: [\"application/x-yaml\", \"text/x-yaml\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/yaml/yaml\"], resolve, reject);\n      });\n    } else {\n      return import(\"./yaml.js\");\n    }\n  }\n});\n", "import '../editor/editor.api.js';\n/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/monaco.contribution.ts\nimport \"./abap/abap.contribution.js\";\nimport \"./apex/apex.contribution.js\";\nimport \"./azcli/azcli.contribution.js\";\nimport \"./bat/bat.contribution.js\";\nimport \"./bicep/bicep.contribution.js\";\nimport \"./cameligo/cameligo.contribution.js\";\nimport \"./clojure/clojure.contribution.js\";\nimport \"./coffee/coffee.contribution.js\";\nimport \"./cpp/cpp.contribution.js\";\nimport \"./csharp/csharp.contribution.js\";\nimport \"./csp/csp.contribution.js\";\nimport \"./css/css.contribution.js\";\nimport \"./dart/dart.contribution.js\";\nimport \"./dockerfile/dockerfile.contribution.js\";\nimport \"./ecl/ecl.contribution.js\";\nimport \"./elixir/elixir.contribution.js\";\nimport \"./flow9/flow9.contribution.js\";\nimport \"./fsharp/fsharp.contribution.js\";\nimport \"./freemarker2/freemarker2.contribution.js\";\nimport \"./go/go.contribution.js\";\nimport \"./graphql/graphql.contribution.js\";\nimport \"./handlebars/handlebars.contribution.js\";\nimport \"./hcl/hcl.contribution.js\";\nimport \"./html/html.contribution.js\";\nimport \"./ini/ini.contribution.js\";\nimport \"./java/java.contribution.js\";\nimport \"./javascript/javascript.contribution.js\";\nimport \"./julia/julia.contribution.js\";\nimport \"./kotlin/kotlin.contribution.js\";\nimport \"./less/less.contribution.js\";\nimport \"./lexon/lexon.contribution.js\";\nimport \"./lua/lua.contribution.js\";\nimport \"./liquid/liquid.contribution.js\";\nimport \"./m3/m3.contribution.js\";\nimport \"./markdown/markdown.contribution.js\";\nimport \"./mips/mips.contribution.js\";\nimport \"./msdax/msdax.contribution.js\";\nimport \"./mysql/mysql.contribution.js\";\nimport \"./objective-c/objective-c.contribution.js\";\nimport \"./pascal/pascal.contribution.js\";\nimport \"./pascaligo/pascaligo.contribution.js\";\nimport \"./perl/perl.contribution.js\";\nimport \"./pgsql/pgsql.contribution.js\";\nimport \"./php/php.contribution.js\";\nimport \"./pla/pla.contribution.js\";\nimport \"./postiats/postiats.contribution.js\";\nimport \"./powerquery/powerquery.contribution.js\";\nimport \"./powershell/powershell.contribution.js\";\nimport \"./protobuf/protobuf.contribution.js\";\nimport \"./pug/pug.contribution.js\";\nimport \"./python/python.contribution.js\";\nimport \"./qsharp/qsharp.contribution.js\";\nimport \"./r/r.contribution.js\";\nimport \"./razor/razor.contribution.js\";\nimport \"./redis/redis.contribution.js\";\nimport \"./redshift/redshift.contribution.js\";\nimport \"./restructuredtext/restructuredtext.contribution.js\";\nimport \"./ruby/ruby.contribution.js\";\nimport \"./rust/rust.contribution.js\";\nimport \"./sb/sb.contribution.js\";\nimport \"./scala/scala.contribution.js\";\nimport \"./scheme/scheme.contribution.js\";\nimport \"./scss/scss.contribution.js\";\nimport \"./shell/shell.contribution.js\";\nimport \"./solidity/solidity.contribution.js\";\nimport \"./sophia/sophia.contribution.js\";\nimport \"./sparql/sparql.contribution.js\";\nimport \"./sql/sql.contribution.js\";\nimport \"./st/st.contribution.js\";\nimport \"./swift/swift.contribution.js\";\nimport \"./systemverilog/systemverilog.contribution.js\";\nimport \"./tcl/tcl.contribution.js\";\nimport \"./twig/twig.contribution.js\";\nimport \"./typescript/typescript.contribution.js\";\nimport \"./vb/vb.contribution.js\";\nimport \"./xml/xml.contribution.js\";\nimport \"./yaml/yaml.contribution.js\";\n", "import '../../editor/editor.api.js';\n/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __reExport = (target, module, copyDefault, desc) => {\n  if (module && typeof module === \"object\" || typeof module === \"function\") {\n    for (let key of __getOwnPropNames(module))\n      if (!__hasOwnProp.call(target, key) && (copyDefault || key !== \"default\"))\n        __defProp(target, key, { get: () => module[key], enumerable: !(desc = __getOwnPropDesc(module, key)) || desc.enumerable });\n  }\n  return target;\n};\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\n\n// src/language/css/monaco.contribution.ts\nvar LanguageServiceDefaultsImpl = class {\n  _onDidChange = new monaco_editor_core_exports.Emitter();\n  _options;\n  _modeConfiguration;\n  _languageId;\n  constructor(languageId, options, modeConfiguration) {\n    this._languageId = languageId;\n    this.setOptions(options);\n    this.setModeConfiguration(modeConfiguration);\n  }\n  get onDidChange() {\n    return this._onDidChange.event;\n  }\n  get languageId() {\n    return this._languageId;\n  }\n  get modeConfiguration() {\n    return this._modeConfiguration;\n  }\n  get diagnosticsOptions() {\n    return this.options;\n  }\n  get options() {\n    return this._options;\n  }\n  setOptions(options) {\n    this._options = options || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n  setDiagnosticsOptions(options) {\n    this.setOptions(options);\n  }\n  setModeConfiguration(modeConfiguration) {\n    this._modeConfiguration = modeConfiguration || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n};\nvar optionsDefault = {\n  validate: true,\n  lint: {\n    compatibleVendorPrefixes: \"ignore\",\n    vendorPrefix: \"warning\",\n    duplicateProperties: \"warning\",\n    emptyRules: \"warning\",\n    importStatement: \"ignore\",\n    boxModel: \"ignore\",\n    universalSelector: \"ignore\",\n    zeroUnits: \"ignore\",\n    fontFaceProperties: \"warning\",\n    hexColorLength: \"error\",\n    argumentsInColorFunction: \"error\",\n    unknownProperties: \"warning\",\n    ieHack: \"ignore\",\n    unknownVendorSpecificProperties: \"ignore\",\n    propertyIgnoredDueToDisplay: \"warning\",\n    important: \"ignore\",\n    float: \"ignore\",\n    idSelector: \"ignore\"\n  },\n  data: { useDefaultDataProvider: true }\n};\nvar modeConfigurationDefault = {\n  completionItems: true,\n  hovers: true,\n  documentSymbols: true,\n  definitions: true,\n  references: true,\n  documentHighlights: true,\n  rename: true,\n  colors: true,\n  foldingRanges: true,\n  diagnostics: true,\n  selectionRanges: true\n};\nvar cssDefaults = new LanguageServiceDefaultsImpl(\"css\", optionsDefault, modeConfigurationDefault);\nvar scssDefaults = new LanguageServiceDefaultsImpl(\"scss\", optionsDefault, modeConfigurationDefault);\nvar lessDefaults = new LanguageServiceDefaultsImpl(\"less\", optionsDefault, modeConfigurationDefault);\nmonaco_editor_core_exports.languages.css = { cssDefaults, lessDefaults, scssDefaults };\nfunction getMode() {\n  if (false) {\n    return new Promise((resolve, reject) => {\n      __require([\"vs/language/css/cssMode\"], resolve, reject);\n    });\n  } else {\n    return import(\"./cssMode.js\");\n  }\n}\nmonaco_editor_core_exports.languages.onLanguage(\"less\", () => {\n  getMode().then((mode) => mode.setupMode(lessDefaults));\n});\nmonaco_editor_core_exports.languages.onLanguage(\"scss\", () => {\n  getMode().then((mode) => mode.setupMode(scssDefaults));\n});\nmonaco_editor_core_exports.languages.onLanguage(\"css\", () => {\n  getMode().then((mode) => mode.setupMode(cssDefaults));\n});\nexport {\n  cssDefaults,\n  lessDefaults,\n  scssDefaults\n};\n", "import '../../editor/editor.api.js';\n/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __reExport = (target, module, copyDefault, desc) => {\n  if (module && typeof module === \"object\" || typeof module === \"function\") {\n    for (let key of __getOwnPropNames(module))\n      if (!__hasOwnProp.call(target, key) && (copyDefault || key !== \"default\"))\n        __defProp(target, key, { get: () => module[key], enumerable: !(desc = __getOwnPropDesc(module, key)) || desc.enumerable });\n  }\n  return target;\n};\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\n\n// src/language/html/monaco.contribution.ts\nvar LanguageServiceDefaultsImpl = class {\n  _onDidChange = new monaco_editor_core_exports.Emitter();\n  _options;\n  _modeConfiguration;\n  _languageId;\n  constructor(languageId, options, modeConfiguration) {\n    this._languageId = languageId;\n    this.setOptions(options);\n    this.setModeConfiguration(modeConfiguration);\n  }\n  get onDidChange() {\n    return this._onDidChange.event;\n  }\n  get languageId() {\n    return this._languageId;\n  }\n  get options() {\n    return this._options;\n  }\n  get modeConfiguration() {\n    return this._modeConfiguration;\n  }\n  setOptions(options) {\n    this._options = options || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n  setModeConfiguration(modeConfiguration) {\n    this._modeConfiguration = modeConfiguration || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n};\nvar formatDefaults = {\n  tabSize: 4,\n  insertSpaces: false,\n  wrapLineLength: 120,\n  unformatted: 'default\": \"a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',\n  contentUnformatted: \"pre\",\n  indentInnerHtml: false,\n  preserveNewLines: true,\n  maxPreserveNewLines: void 0,\n  indentHandlebars: false,\n  endWithNewline: false,\n  extraLiners: \"head, body, /html\",\n  wrapAttributes: \"auto\"\n};\nvar optionsDefault = {\n  format: formatDefaults,\n  suggest: {},\n  data: { useDefaultDataProvider: true }\n};\nfunction getConfigurationDefault(languageId) {\n  return {\n    completionItems: true,\n    hovers: true,\n    documentSymbols: true,\n    links: true,\n    documentHighlights: true,\n    rename: true,\n    colors: true,\n    foldingRanges: true,\n    selectionRanges: true,\n    diagnostics: languageId === htmlLanguageId,\n    documentFormattingEdits: languageId === htmlLanguageId,\n    documentRangeFormattingEdits: languageId === htmlLanguageId\n  };\n}\nvar htmlLanguageId = \"html\";\nvar handlebarsLanguageId = \"handlebars\";\nvar razorLanguageId = \"razor\";\nvar htmlLanguageService = registerHTMLLanguageService(htmlLanguageId, optionsDefault, getConfigurationDefault(htmlLanguageId));\nvar htmlDefaults = htmlLanguageService.defaults;\nvar handlebarLanguageService = registerHTMLLanguageService(handlebarsLanguageId, optionsDefault, getConfigurationDefault(handlebarsLanguageId));\nvar handlebarDefaults = handlebarLanguageService.defaults;\nvar razorLanguageService = registerHTMLLanguageService(razorLanguageId, optionsDefault, getConfigurationDefault(razorLanguageId));\nvar razorDefaults = razorLanguageService.defaults;\nmonaco_editor_core_exports.languages.html = {\n  htmlDefaults,\n  razorDefaults,\n  handlebarDefaults,\n  htmlLanguageService,\n  handlebarLanguageService,\n  razorLanguageService,\n  registerHTMLLanguageService\n};\nfunction getMode() {\n  if (false) {\n    return new Promise((resolve, reject) => {\n      __require([\"vs/language/html/htmlMode\"], resolve, reject);\n    });\n  } else {\n    return import(\"./htmlMode.js\");\n  }\n}\nfunction registerHTMLLanguageService(languageId, options = optionsDefault, modeConfiguration = getConfigurationDefault(languageId)) {\n  const defaults = new LanguageServiceDefaultsImpl(languageId, options, modeConfiguration);\n  let mode;\n  const onLanguageListener = monaco_editor_core_exports.languages.onLanguage(languageId, async () => {\n    mode = (await getMode()).setupMode(defaults);\n  });\n  return {\n    defaults,\n    dispose() {\n      onLanguageListener.dispose();\n      mode?.dispose();\n      mode = void 0;\n    }\n  };\n}\nexport {\n  handlebarDefaults,\n  handlebarLanguageService,\n  htmlDefaults,\n  htmlLanguageService,\n  razorDefaults,\n  razorLanguageService,\n  registerHTMLLanguageService\n};\n", "import '../../editor/editor.api.js';\n/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __reExport = (target, module, copyDefault, desc) => {\n  if (module && typeof module === \"object\" || typeof module === \"function\") {\n    for (let key of __getOwnPropNames(module))\n      if (!__hasOwnProp.call(target, key) && (copyDefault || key !== \"default\"))\n        __defProp(target, key, { get: () => module[key], enumerable: !(desc = __getOwnPropDesc(module, key)) || desc.enumerable });\n  }\n  return target;\n};\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\n\n// src/language/json/monaco.contribution.ts\nvar LanguageServiceDefaultsImpl = class {\n  _onDidChange = new monaco_editor_core_exports.Emitter();\n  _diagnosticsOptions;\n  _modeConfiguration;\n  _languageId;\n  constructor(languageId, diagnosticsOptions, modeConfiguration) {\n    this._languageId = languageId;\n    this.setDiagnosticsOptions(diagnosticsOptions);\n    this.setModeConfiguration(modeConfiguration);\n  }\n  get onDidChange() {\n    return this._onDidChange.event;\n  }\n  get languageId() {\n    return this._languageId;\n  }\n  get modeConfiguration() {\n    return this._modeConfiguration;\n  }\n  get diagnosticsOptions() {\n    return this._diagnosticsOptions;\n  }\n  setDiagnosticsOptions(options) {\n    this._diagnosticsOptions = options || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n  setModeConfiguration(modeConfiguration) {\n    this._modeConfiguration = modeConfiguration || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n};\nvar diagnosticDefault = {\n  validate: true,\n  allowComments: true,\n  schemas: [],\n  enableSchemaRequest: false,\n  schemaRequest: \"warning\",\n  schemaValidation: \"warning\",\n  comments: \"error\",\n  trailingCommas: \"error\"\n};\nvar modeConfigurationDefault = {\n  documentFormattingEdits: true,\n  documentRangeFormattingEdits: true,\n  completionItems: true,\n  hovers: true,\n  documentSymbols: true,\n  tokens: true,\n  colors: true,\n  foldingRanges: true,\n  diagnostics: true,\n  selectionRanges: true\n};\nvar jsonDefaults = new LanguageServiceDefaultsImpl(\"json\", diagnosticDefault, modeConfigurationDefault);\nmonaco_editor_core_exports.languages.json = { jsonDefaults };\nfunction getMode() {\n  if (false) {\n    return new Promise((resolve, reject) => {\n      __require([\"vs/language/json/jsonMode\"], resolve, reject);\n    });\n  } else {\n    return import(\"./jsonMode.js\");\n  }\n}\nmonaco_editor_core_exports.languages.register({\n  id: \"json\",\n  extensions: [\".json\", \".bowerrc\", \".jshintrc\", \".jscsrc\", \".eslintrc\", \".babelrc\", \".har\"],\n  aliases: [\"JSON\", \"json\"],\n  mimetypes: [\"application/json\"]\n});\nmonaco_editor_core_exports.languages.onLanguage(\"json\", () => {\n  getMode().then((mode) => mode.setupMode(jsonDefaults));\n});\nexport {\n  jsonDefaults\n};\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './editor.all.js';\nimport './standalone/browser/accessibilityHelp/accessibilityHelp.js';\nimport './standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js';\nimport './standalone/browser/inspectTokens/inspectTokens.js';\nimport './standalone/browser/quickAccess/standaloneHelpQuickAccess.js';\nimport './standalone/browser/quickAccess/standaloneGotoLineQuickAccess.js';\nimport './standalone/browser/quickAccess/standaloneGotoSymbolQuickAccess.js';\nimport './standalone/browser/quickAccess/standaloneCommandsQuickAccess.js';\nimport './standalone/browser/referenceSearch/standaloneReferenceSearch.js';\nimport './standalone/browser/toggleHighContrast/toggleHighContrast.js';\nexport * from './editor.api.js';\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { QuickHelpNLS } from '../../../common/standaloneStrings.js';\nimport { HelpQuickAccessProvider } from '../../../../platform/quickinput/browser/helpQuickAccess.js';\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: HelpQuickAccessProvider,\n    prefix: '',\n    helpEntries: [{ description: QuickHelpNLS.helpQuickAccessActionLabel, needsEditor: true }]\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { localize } from '../../../nls.js';\nimport { Extensions } from '../common/quickAccess.js';\nimport { IQuickInputService } from '../common/quickInput.js';\nimport { Registry } from '../../registry/common/platform.js';\nlet HelpQuickAccessProvider = class HelpQuickAccessProvider {\n    constructor(quickInputService) {\n        this.quickInputService = quickInputService;\n        this.registry = Registry.as(Extensions.Quickaccess);\n    }\n    provide(picker) {\n        const disposables = new DisposableStore();\n        // Open a picker with the selected value if picked\n        disposables.add(picker.onDidAccept(() => {\n            const [item] = picker.selectedItems;\n            if (item) {\n                this.quickInputService.quickAccess.show(item.prefix, { preserveValue: true });\n            }\n        }));\n        // Also open a picker when we detect the user typed the exact\n        // name of a provider (e.g. `?term` for terminals)\n        disposables.add(picker.onDidChangeValue(value => {\n            const providerDescriptor = this.registry.getQuickAccessProvider(value.substr(HelpQuickAccessProvider.PREFIX.length));\n            if (providerDescriptor && providerDescriptor.prefix && providerDescriptor.prefix !== HelpQuickAccessProvider.PREFIX) {\n                this.quickInputService.quickAccess.show(providerDescriptor.prefix, { preserveValue: true });\n            }\n        }));\n        // Fill in all providers separated by editor/global scope\n        const { editorProviders, globalProviders } = this.getQuickAccessProviders();\n        picker.items = editorProviders.length === 0 || globalProviders.length === 0 ?\n            // Without groups\n            [\n                ...(editorProviders.length === 0 ? globalProviders : editorProviders)\n            ] :\n            // With groups\n            [\n                { label: localize('globalCommands', \"global commands\"), type: 'separator' },\n                ...globalProviders,\n                { label: localize('editorCommands', \"editor commands\"), type: 'separator' },\n                ...editorProviders\n            ];\n        return disposables;\n    }\n    getQuickAccessProviders() {\n        const globalProviders = [];\n        const editorProviders = [];\n        for (const provider of this.registry.getQuickAccessProviders().sort((providerA, providerB) => providerA.prefix.localeCompare(providerB.prefix))) {\n            if (provider.prefix === HelpQuickAccessProvider.PREFIX) {\n                continue; // exclude help which is already active\n            }\n            for (const helpEntry of provider.helpEntries) {\n                const prefix = helpEntry.prefix || provider.prefix;\n                const label = prefix || '\\u2026' /* ... */;\n                (helpEntry.needsEditor ? editorProviders : globalProviders).push({\n                    prefix,\n                    label,\n                    ariaLabel: localize('helpPickAriaLabel', \"{0}, {1}\", label, helpEntry.description),\n                    description: helpEntry.description\n                });\n            }\n        }\n        return { editorProviders, globalProviders };\n    }\n};\nHelpQuickAccessProvider.PREFIX = '?';\nHelpQuickAccessProvider = __decorate([\n    __param(0, IQuickInputService)\n], HelpQuickAccessProvider);\nexport { HelpQuickAccessProvider };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { getCodeEditor } from '../../../browser/editorBrowser.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nexport class AbstractGotoLineQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    constructor() {\n        super({ canAcceptInBackground: true });\n    }\n    provideWithoutTextEditor(picker) {\n        const label = localize('cannotRunGotoLine', \"Open a text editor first to go to a line.\");\n        picker.items = [{ label }];\n        picker.ariaLabel = label;\n        return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n        const editor = context.editor;\n        const disposables = new DisposableStore();\n        // Goto line once picked\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (item) {\n                if (!this.isValidLineNumber(editor, item.lineNumber)) {\n                    return;\n                }\n                this.gotoLocation(context, { range: this.toRange(item.lineNumber, item.column), keyMods: picker.keyMods, preserveFocus: event.inBackground });\n                if (!event.inBackground) {\n                    picker.hide();\n                }\n            }\n        }));\n        // React to picker changes\n        const updatePickerAndEditor = () => {\n            const position = this.parsePosition(editor, picker.value.trim().substr(AbstractGotoLineQuickAccessProvider.PREFIX.length));\n            const label = this.getPickLabel(editor, position.lineNumber, position.column);\n            // Picker\n            picker.items = [{\n                    lineNumber: position.lineNumber,\n                    column: position.column,\n                    label\n                }];\n            // ARIA Label\n            picker.ariaLabel = label;\n            // Clear decorations for invalid range\n            if (!this.isValidLineNumber(editor, position.lineNumber)) {\n                this.clearDecorations(editor);\n                return;\n            }\n            // Reveal\n            const range = this.toRange(position.lineNumber, position.column);\n            editor.revealRangeInCenter(range, 0 /* Smooth */);\n            // Decorate\n            this.addDecorations(editor, range);\n        };\n        updatePickerAndEditor();\n        disposables.add(picker.onDidChangeValue(() => updatePickerAndEditor()));\n        // Adjust line number visibility as needed\n        const codeEditor = getCodeEditor(editor);\n        if (codeEditor) {\n            const options = codeEditor.getOptions();\n            const lineNumbers = options.get(60 /* lineNumbers */);\n            if (lineNumbers.renderType === 2 /* Relative */) {\n                codeEditor.updateOptions({ lineNumbers: 'on' });\n                disposables.add(toDisposable(() => codeEditor.updateOptions({ lineNumbers: 'relative' })));\n            }\n        }\n        return disposables;\n    }\n    toRange(lineNumber = 1, column = 1) {\n        return {\n            startLineNumber: lineNumber,\n            startColumn: column,\n            endLineNumber: lineNumber,\n            endColumn: column\n        };\n    }\n    parsePosition(editor, value) {\n        // Support line-col formats of `line,col`, `line:col`, `line#col`\n        const numbers = value.split(/,|:|#/).map(part => parseInt(part, 10)).filter(part => !isNaN(part));\n        const endLine = this.lineCount(editor) + 1;\n        return {\n            lineNumber: numbers[0] > 0 ? numbers[0] : endLine + numbers[0],\n            column: numbers[1]\n        };\n    }\n    getPickLabel(editor, lineNumber, column) {\n        // Location valid: indicate this as picker label\n        if (this.isValidLineNumber(editor, lineNumber)) {\n            if (this.isValidColumn(editor, lineNumber, column)) {\n                return localize('gotoLineColumnLabel', \"Go to line {0} and character {1}.\", lineNumber, column);\n            }\n            return localize('gotoLineLabel', \"Go to line {0}.\", lineNumber);\n        }\n        // Location invalid: show generic label\n        const position = editor.getPosition() || { lineNumber: 1, column: 1 };\n        const lineCount = this.lineCount(editor);\n        if (lineCount > 1) {\n            return localize('gotoLineLabelEmptyWithLimit', \"Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.\", position.lineNumber, position.column, lineCount);\n        }\n        return localize('gotoLineLabelEmpty', \"Current Line: {0}, Character: {1}. Type a line number to navigate to.\", position.lineNumber, position.column);\n    }\n    isValidLineNumber(editor, lineNumber) {\n        if (!lineNumber || typeof lineNumber !== 'number') {\n            return false;\n        }\n        return lineNumber > 0 && lineNumber <= this.lineCount(editor);\n    }\n    isValidColumn(editor, lineNumber, column) {\n        if (!column || typeof column !== 'number') {\n            return false;\n        }\n        const model = this.getModel(editor);\n        if (!model) {\n            return false;\n        }\n        const positionCandidate = { lineNumber, column };\n        return model.validatePosition(positionCandidate).equals(positionCandidate);\n    }\n    lineCount(editor) {\n        var _a, _b;\n        return (_b = (_a = this.getModel(editor)) === null || _a === void 0 ? void 0 : _a.getLineCount()) !== null && _b !== void 0 ? _b : 0;\n    }\n}\nAbstractGotoLineQuickAccessProvider.PREFIX = ':';\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { once } from '../../../../base/common/functional.js';\nimport { DisposableStore, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { getCodeEditor, isDiffEditor } from '../../../browser/editorBrowser.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { overviewRulerRangeHighlight } from '../../../common/core/editorColorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\n/**\n * A reusable quick access provider for the editor with support\n * for adding decorations for navigating in the currently active file\n * (for example \"Go to line\", \"Go to symbol\").\n */\nexport class AbstractEditorNavigationQuickAccessProvider {\n    constructor(options) {\n        this.options = options;\n        //#endregion\n        //#region Decorations Utils\n        this.rangeHighlightDecorationId = undefined;\n    }\n    //#region Provider methods\n    provide(picker, token) {\n        var _a;\n        const disposables = new DisposableStore();\n        // Apply options if any\n        picker.canAcceptInBackground = !!((_a = this.options) === null || _a === void 0 ? void 0 : _a.canAcceptInBackground);\n        // Disable filtering & sorting, we control the results\n        picker.matchOnLabel = picker.matchOnDescription = picker.matchOnDetail = picker.sortByLabel = false;\n        // Provide based on current active editor\n        const pickerDisposable = disposables.add(new MutableDisposable());\n        pickerDisposable.value = this.doProvide(picker, token);\n        // Re-create whenever the active editor changes\n        disposables.add(this.onDidActiveTextEditorControlChange(() => {\n            // Clear old\n            pickerDisposable.value = undefined;\n            // Add new\n            pickerDisposable.value = this.doProvide(picker, token);\n        }));\n        return disposables;\n    }\n    doProvide(picker, token) {\n        const disposables = new DisposableStore();\n        // With text control\n        const editor = this.activeTextEditorControl;\n        if (editor && this.canProvideWithTextEditor(editor)) {\n            const context = { editor };\n            // Restore any view state if this picker was closed\n            // without actually going to a line\n            const codeEditor = getCodeEditor(editor);\n            if (codeEditor) {\n                // Remember view state and update it when the cursor position\n                // changes even later because it could be that the user has\n                // configured quick access to remain open when focus is lost and\n                // we always want to restore the current location.\n                let lastKnownEditorViewState = withNullAsUndefined(editor.saveViewState());\n                disposables.add(codeEditor.onDidChangeCursorPosition(() => {\n                    lastKnownEditorViewState = withNullAsUndefined(editor.saveViewState());\n                }));\n                context.restoreViewState = () => {\n                    if (lastKnownEditorViewState && editor === this.activeTextEditorControl) {\n                        editor.restoreViewState(lastKnownEditorViewState);\n                    }\n                };\n                disposables.add(once(token.onCancellationRequested)(() => { var _a; return (_a = context.restoreViewState) === null || _a === void 0 ? void 0 : _a.call(context); }));\n            }\n            // Clean up decorations on dispose\n            disposables.add(toDisposable(() => this.clearDecorations(editor)));\n            // Ask subclass for entries\n            disposables.add(this.provideWithTextEditor(context, picker, token));\n        }\n        // Without text control\n        else {\n            disposables.add(this.provideWithoutTextEditor(picker, token));\n        }\n        return disposables;\n    }\n    /**\n     * Subclasses to implement if they can operate on the text editor.\n     */\n    canProvideWithTextEditor(editor) {\n        return true;\n    }\n    gotoLocation({ editor }, options) {\n        editor.setSelection(options.range);\n        editor.revealRangeInCenter(options.range, 0 /* Smooth */);\n        if (!options.preserveFocus) {\n            editor.focus();\n        }\n    }\n    getModel(editor) {\n        var _a;\n        return isDiffEditor(editor) ?\n            (_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.modified :\n            editor.getModel();\n    }\n    addDecorations(editor, range) {\n        editor.changeDecorations(changeAccessor => {\n            // Reset old decorations if any\n            const deleteDecorations = [];\n            if (this.rangeHighlightDecorationId) {\n                deleteDecorations.push(this.rangeHighlightDecorationId.overviewRulerDecorationId);\n                deleteDecorations.push(this.rangeHighlightDecorationId.rangeHighlightId);\n                this.rangeHighlightDecorationId = undefined;\n            }\n            // Add new decorations for the range\n            const newDecorations = [\n                // highlight the entire line on the range\n                {\n                    range,\n                    options: {\n                        description: 'quick-access-range-highlight',\n                        className: 'rangeHighlight',\n                        isWholeLine: true\n                    }\n                },\n                // also add overview ruler highlight\n                {\n                    range,\n                    options: {\n                        description: 'quick-access-range-highlight-overview',\n                        overviewRuler: {\n                            color: themeColorFromId(overviewRulerRangeHighlight),\n                            position: OverviewRulerLane.Full\n                        }\n                    }\n                }\n            ];\n            const [rangeHighlightId, overviewRulerDecorationId] = changeAccessor.deltaDecorations(deleteDecorations, newDecorations);\n            this.rangeHighlightDecorationId = { rangeHighlightId, overviewRulerDecorationId };\n        });\n    }\n    clearDecorations(editor) {\n        const rangeHighlightDecorationId = this.rangeHighlightDecorationId;\n        if (rangeHighlightDecorationId) {\n            editor.changeDecorations(changeAccessor => {\n                changeAccessor.deltaDecorations([\n                    rangeHighlightDecorationId.overviewRulerDecorationId,\n                    rangeHighlightDecorationId.rangeHighlightId\n                ], []);\n            });\n            this.rangeHighlightDecorationId = undefined;\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { AbstractGotoLineQuickAccessProvider } from '../../../contrib/quickAccess/browser/gotoLineQuickAccess.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { GoToLineNLS } from '../../../common/standaloneStrings.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nlet StandaloneGotoLineQuickAccessProvider = class StandaloneGotoLineQuickAccessProvider extends AbstractGotoLineQuickAccessProvider {\n    constructor(editorService) {\n        super();\n        this.editorService = editorService;\n        this.onDidActiveTextEditorControlChange = Event.None;\n    }\n    get activeTextEditorControl() {\n        return withNullAsUndefined(this.editorService.getFocusedCodeEditor());\n    }\n};\nStandaloneGotoLineQuickAccessProvider = __decorate([\n    __param(0, ICodeEditorService)\n], StandaloneGotoLineQuickAccessProvider);\nexport { StandaloneGotoLineQuickAccessProvider };\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: StandaloneGotoLineQuickAccessProvider,\n    prefix: StandaloneGotoLineQuickAccessProvider.PREFIX,\n    helpEntries: [{ description: GoToLineNLS.gotoLineActionLabel, needsEditor: true }]\n});\nexport class GotoLineAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.gotoLine',\n            label: GoToLineNLS.gotoLineActionLabel,\n            alias: 'Go to Line/Column...',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* CtrlCmd */ | 37 /* KeyG */,\n                mac: { primary: 256 /* WinCtrl */ | 37 /* KeyG */ },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor) {\n        accessor.get(IQuickInputService).quickAccess.show(StandaloneGotoLineQuickAccessProvider.PREFIX);\n    }\n}\nregisterEditorAction(GotoLineAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DeferredPromise } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { pieceToQuery, prepareQuery, scoreFuzzy2 } from '../../../../base/common/fuzzyScorer.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { format, trim } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SymbolKinds } from '../../../common/languages.js';\nimport { IOutlineModelService } from '../../documentSymbols/browser/outlineModel.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet AbstractGotoSymbolQuickAccessProvider = class AbstractGotoSymbolQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    constructor(_languageFeaturesService, _outlineModelService, options = Object.create(null)) {\n        super(options);\n        this._languageFeaturesService = _languageFeaturesService;\n        this._outlineModelService = _outlineModelService;\n        this.options = options;\n        this.options.canAcceptInBackground = true;\n    }\n    provideWithoutTextEditor(picker) {\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutEditor', \"To go to a symbol, first open a text editor with symbol information.\"));\n        return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n        const editor = context.editor;\n        const model = this.getModel(editor);\n        if (!model) {\n            return Disposable.None;\n        }\n        // Provide symbols from model if available in registry\n        if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n            return this.doProvideWithEditorSymbols(context, model, picker, token);\n        }\n        // Otherwise show an entry for a model without registry\n        // But give a chance to resolve the symbols at a later\n        // point if possible\n        return this.doProvideWithoutEditorSymbols(context, model, picker, token);\n    }\n    doProvideWithoutEditorSymbols(context, model, picker, token) {\n        const disposables = new DisposableStore();\n        // Generic pick for not having any symbol information\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutSymbolProvider', \"The active text editor does not provide symbol information.\"));\n        // Wait for changes to the registry and see if eventually\n        // we do get symbols. This can happen if the picker is opened\n        // very early after the model has loaded but before the\n        // language registry is ready.\n        // https://github.com/microsoft/vscode/issues/70607\n        (() => __awaiter(this, void 0, void 0, function* () {\n            const result = yield this.waitForLanguageSymbolRegistry(model, disposables);\n            if (!result || token.isCancellationRequested) {\n                return;\n            }\n            disposables.add(this.doProvideWithEditorSymbols(context, model, picker, token));\n        }))();\n        return disposables;\n    }\n    provideLabelPick(picker, label) {\n        picker.items = [{ label, index: 0, kind: 14 /* String */ }];\n        picker.ariaLabel = label;\n    }\n    waitForLanguageSymbolRegistry(model, disposables) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n                return true;\n            }\n            const symbolProviderRegistryPromise = new DeferredPromise();\n            // Resolve promise when registry knows model\n            const symbolProviderListener = disposables.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => {\n                if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n                    symbolProviderListener.dispose();\n                    symbolProviderRegistryPromise.complete(true);\n                }\n            }));\n            // Resolve promise when we get disposed too\n            disposables.add(toDisposable(() => symbolProviderRegistryPromise.complete(false)));\n            return symbolProviderRegistryPromise.p;\n        });\n    }\n    doProvideWithEditorSymbols(context, model, picker, token) {\n        const editor = context.editor;\n        const disposables = new DisposableStore();\n        // Goto symbol once picked\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (item && item.range) {\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, preserveFocus: event.inBackground });\n                if (!event.inBackground) {\n                    picker.hide();\n                }\n            }\n        }));\n        // Goto symbol side by side if enabled\n        disposables.add(picker.onDidTriggerItemButton(({ item }) => {\n            if (item && item.range) {\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, forceSideBySide: true });\n                picker.hide();\n            }\n        }));\n        // Resolve symbols from document once and reuse this\n        // request for all filtering and typing then on\n        const symbolsPromise = this.getDocumentSymbols(model, token);\n        // Set initial picks and update on type\n        let picksCts = undefined;\n        const updatePickerItems = () => __awaiter(this, void 0, void 0, function* () {\n            // Cancel any previous ask for picks and busy\n            picksCts === null || picksCts === void 0 ? void 0 : picksCts.dispose(true);\n            picker.busy = false;\n            // Create new cancellation source for this run\n            picksCts = new CancellationTokenSource(token);\n            // Collect symbol picks\n            picker.busy = true;\n            try {\n                const query = prepareQuery(picker.value.substr(AbstractGotoSymbolQuickAccessProvider.PREFIX.length).trim());\n                const items = yield this.doGetSymbolPicks(symbolsPromise, query, undefined, picksCts.token);\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                if (items.length > 0) {\n                    picker.items = items;\n                }\n                else {\n                    if (query.original.length > 0) {\n                        this.provideLabelPick(picker, localize('noMatchingSymbolResults', \"No matching editor symbols\"));\n                    }\n                    else {\n                        this.provideLabelPick(picker, localize('noSymbolResults', \"No editor symbols\"));\n                    }\n                }\n            }\n            finally {\n                if (!token.isCancellationRequested) {\n                    picker.busy = false;\n                }\n            }\n        });\n        disposables.add(picker.onDidChangeValue(() => updatePickerItems()));\n        updatePickerItems();\n        // Reveal and decorate when active item changes\n        // However, ignore the very first event so that\n        // opening the picker is not immediately revealing\n        // and decorating the first entry.\n        let ignoreFirstActiveEvent = true;\n        disposables.add(picker.onDidChangeActive(() => {\n            const [item] = picker.activeItems;\n            if (item && item.range) {\n                if (ignoreFirstActiveEvent) {\n                    ignoreFirstActiveEvent = false;\n                    return;\n                }\n                // Reveal\n                editor.revealRangeInCenter(item.range.selection, 0 /* Smooth */);\n                // Decorate\n                this.addDecorations(editor, item.range.decoration);\n            }\n        }));\n        return disposables;\n    }\n    doGetSymbolPicks(symbolsPromise, query, options, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const symbols = yield symbolsPromise;\n            if (token.isCancellationRequested) {\n                return [];\n            }\n            const filterBySymbolKind = query.original.indexOf(AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX) === 0;\n            const filterPos = filterBySymbolKind ? 1 : 0;\n            // Split between symbol and container query\n            let symbolQuery;\n            let containerQuery;\n            if (query.values && query.values.length > 1) {\n                symbolQuery = pieceToQuery(query.values[0]); // symbol: only match on first part\n                containerQuery = pieceToQuery(query.values.slice(1)); // container: match on all but first parts\n            }\n            else {\n                symbolQuery = query;\n            }\n            // Convert to symbol picks and apply filtering\n            const filteredSymbolPicks = [];\n            for (let index = 0; index < symbols.length; index++) {\n                const symbol = symbols[index];\n                const symbolLabel = trim(symbol.name);\n                const symbolLabelWithIcon = `$(${SymbolKinds.toIcon(symbol.kind).id}) ${symbolLabel}`;\n                const symbolLabelIconOffset = symbolLabelWithIcon.length - symbolLabel.length;\n                let containerLabel = symbol.containerName;\n                if (options === null || options === void 0 ? void 0 : options.extraContainerLabel) {\n                    if (containerLabel) {\n                        containerLabel = `${options.extraContainerLabel} \u2022 ${containerLabel}`;\n                    }\n                    else {\n                        containerLabel = options.extraContainerLabel;\n                    }\n                }\n                let symbolScore = undefined;\n                let symbolMatches = undefined;\n                let containerScore = undefined;\n                let containerMatches = undefined;\n                if (query.original.length > filterPos) {\n                    // First: try to score on the entire query, it is possible that\n                    // the symbol matches perfectly (e.g. searching for \"change log\"\n                    // can be a match on a markdown symbol \"change log\"). In that\n                    // case we want to skip the container query altogether.\n                    let skipContainerQuery = false;\n                    if (symbolQuery !== query) {\n                        [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, Object.assign(Object.assign({}, query), { values: undefined /* disable multi-query support */ }), filterPos, symbolLabelIconOffset);\n                        if (typeof symbolScore === 'number') {\n                            skipContainerQuery = true; // since we consumed the query, skip any container matching\n                        }\n                    }\n                    // Otherwise: score on the symbol query and match on the container later\n                    if (typeof symbolScore !== 'number') {\n                        [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, symbolQuery, filterPos, symbolLabelIconOffset);\n                        if (typeof symbolScore !== 'number') {\n                            continue;\n                        }\n                    }\n                    // Score by container if specified\n                    if (!skipContainerQuery && containerQuery) {\n                        if (containerLabel && containerQuery.original.length > 0) {\n                            [containerScore, containerMatches] = scoreFuzzy2(containerLabel, containerQuery);\n                        }\n                        if (typeof containerScore !== 'number') {\n                            continue;\n                        }\n                        if (typeof symbolScore === 'number') {\n                            symbolScore += containerScore; // boost symbolScore by containerScore\n                        }\n                    }\n                }\n                const deprecated = symbol.tags && symbol.tags.indexOf(1 /* Deprecated */) >= 0;\n                filteredSymbolPicks.push({\n                    index,\n                    kind: symbol.kind,\n                    score: symbolScore,\n                    label: symbolLabelWithIcon,\n                    ariaLabel: symbolLabel,\n                    description: containerLabel,\n                    highlights: deprecated ? undefined : {\n                        label: symbolMatches,\n                        description: containerMatches\n                    },\n                    range: {\n                        selection: Range.collapseToStart(symbol.selectionRange),\n                        decoration: symbol.range\n                    },\n                    strikethrough: deprecated,\n                    buttons: (() => {\n                        var _a, _b;\n                        const openSideBySideDirection = ((_a = this.options) === null || _a === void 0 ? void 0 : _a.openSideBySideDirection) ? (_b = this.options) === null || _b === void 0 ? void 0 : _b.openSideBySideDirection() : undefined;\n                        if (!openSideBySideDirection) {\n                            return undefined;\n                        }\n                        return [\n                            {\n                                iconClass: openSideBySideDirection === 'right' ? Codicon.splitHorizontal.classNames : Codicon.splitVertical.classNames,\n                                tooltip: openSideBySideDirection === 'right' ? localize('openToSide', \"Open to the Side\") : localize('openToBottom', \"Open to the Bottom\")\n                            }\n                        ];\n                    })()\n                });\n            }\n            // Sort by score\n            const sortedFilteredSymbolPicks = filteredSymbolPicks.sort((symbolA, symbolB) => filterBySymbolKind ?\n                this.compareByKindAndScore(symbolA, symbolB) :\n                this.compareByScore(symbolA, symbolB));\n            // Add separator for types\n            // - @  only total number of symbols\n            // - @: grouped by symbol kind\n            let symbolPicks = [];\n            if (filterBySymbolKind) {\n                let lastSymbolKind = undefined;\n                let lastSeparator = undefined;\n                let lastSymbolKindCounter = 0;\n                function updateLastSeparatorLabel() {\n                    if (lastSeparator && typeof lastSymbolKind === 'number' && lastSymbolKindCounter > 0) {\n                        lastSeparator.label = format(NLS_SYMBOL_KIND_CACHE[lastSymbolKind] || FALLBACK_NLS_SYMBOL_KIND, lastSymbolKindCounter);\n                    }\n                }\n                for (const symbolPick of sortedFilteredSymbolPicks) {\n                    // Found new kind\n                    if (lastSymbolKind !== symbolPick.kind) {\n                        // Update last separator with number of symbols we found for kind\n                        updateLastSeparatorLabel();\n                        lastSymbolKind = symbolPick.kind;\n                        lastSymbolKindCounter = 1;\n                        // Add new separator for new kind\n                        lastSeparator = { type: 'separator' };\n                        symbolPicks.push(lastSeparator);\n                    }\n                    // Existing kind, keep counting\n                    else {\n                        lastSymbolKindCounter++;\n                    }\n                    // Add to final result\n                    symbolPicks.push(symbolPick);\n                }\n                // Update last separator with number of symbols we found for kind\n                updateLastSeparatorLabel();\n            }\n            else if (sortedFilteredSymbolPicks.length > 0) {\n                symbolPicks = [\n                    { label: localize('symbols', \"symbols ({0})\", filteredSymbolPicks.length), type: 'separator' },\n                    ...sortedFilteredSymbolPicks\n                ];\n            }\n            return symbolPicks;\n        });\n    }\n    compareByScore(symbolA, symbolB) {\n        if (typeof symbolA.score !== 'number' && typeof symbolB.score === 'number') {\n            return 1;\n        }\n        else if (typeof symbolA.score === 'number' && typeof symbolB.score !== 'number') {\n            return -1;\n        }\n        if (typeof symbolA.score === 'number' && typeof symbolB.score === 'number') {\n            if (symbolA.score > symbolB.score) {\n                return -1;\n            }\n            else if (symbolA.score < symbolB.score) {\n                return 1;\n            }\n        }\n        if (symbolA.index < symbolB.index) {\n            return -1;\n        }\n        else if (symbolA.index > symbolB.index) {\n            return 1;\n        }\n        return 0;\n    }\n    compareByKindAndScore(symbolA, symbolB) {\n        const kindA = NLS_SYMBOL_KIND_CACHE[symbolA.kind] || FALLBACK_NLS_SYMBOL_KIND;\n        const kindB = NLS_SYMBOL_KIND_CACHE[symbolB.kind] || FALLBACK_NLS_SYMBOL_KIND;\n        // Sort by type first if scoped search\n        const result = kindA.localeCompare(kindB);\n        if (result === 0) {\n            return this.compareByScore(symbolA, symbolB);\n        }\n        return result;\n    }\n    getDocumentSymbols(document, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const model = yield this._outlineModelService.getOrCreate(document, token);\n            return token.isCancellationRequested ? [] : model.asListOfDocumentSymbols();\n        });\n    }\n};\nAbstractGotoSymbolQuickAccessProvider.PREFIX = '@';\nAbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX = ':';\nAbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY = `${AbstractGotoSymbolQuickAccessProvider.PREFIX}${AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX}`;\nAbstractGotoSymbolQuickAccessProvider = __decorate([\n    __param(0, ILanguageFeaturesService),\n    __param(1, IOutlineModelService)\n], AbstractGotoSymbolQuickAccessProvider);\nexport { AbstractGotoSymbolQuickAccessProvider };\n// #region NLS Helpers\nconst FALLBACK_NLS_SYMBOL_KIND = localize('property', \"properties ({0})\");\nconst NLS_SYMBOL_KIND_CACHE = {\n    [5 /* Method */]: localize('method', \"methods ({0})\"),\n    [11 /* Function */]: localize('function', \"functions ({0})\"),\n    [8 /* Constructor */]: localize('_constructor', \"constructors ({0})\"),\n    [12 /* Variable */]: localize('variable', \"variables ({0})\"),\n    [4 /* Class */]: localize('class', \"classes ({0})\"),\n    [22 /* Struct */]: localize('struct', \"structs ({0})\"),\n    [23 /* Event */]: localize('event', \"events ({0})\"),\n    [24 /* Operator */]: localize('operator', \"operators ({0})\"),\n    [10 /* Interface */]: localize('interface', \"interfaces ({0})\"),\n    [2 /* Namespace */]: localize('namespace', \"namespaces ({0})\"),\n    [3 /* Package */]: localize('package', \"packages ({0})\"),\n    [25 /* TypeParameter */]: localize('typeParameter', \"type parameters ({0})\"),\n    [1 /* Module */]: localize('modules', \"modules ({0})\"),\n    [6 /* Property */]: localize('property', \"properties ({0})\"),\n    [9 /* Enum */]: localize('enum', \"enumerations ({0})\"),\n    [21 /* EnumMember */]: localize('enumMember', \"enumeration members ({0})\"),\n    [14 /* String */]: localize('string', \"strings ({0})\"),\n    [0 /* File */]: localize('file', \"files ({0})\"),\n    [17 /* Array */]: localize('array', \"arrays ({0})\"),\n    [15 /* Number */]: localize('number', \"numbers ({0})\"),\n    [16 /* Boolean */]: localize('boolean', \"booleans ({0})\"),\n    [18 /* Object */]: localize('object', \"objects ({0})\"),\n    [19 /* Key */]: localize('key', \"keys ({0})\"),\n    [7 /* Field */]: localize('field', \"fields ({0})\"),\n    [13 /* Constant */]: localize('constant', \"constants ({0})\")\n};\n//#endregion\n", "import { createMatches as createFuzzyMatches, fuzzyScore } from './filters.js';\nimport { sep } from './path.js';\nimport { isWindows } from './platform.js';\nimport { stripWildcards } from './strings.js';\nconst NO_SCORE2 = [undefined, []];\nexport function scoreFuzzy2(target, query, patternStart = 0, wordStart = 0) {\n    // Score: multiple inputs\n    const preparedQuery = query;\n    if (preparedQuery.values && preparedQuery.values.length > 1) {\n        return doScoreFuzzy2Multiple(target, preparedQuery.values, patternStart, wordStart);\n    }\n    // Score: single input\n    return doScoreFuzzy2Single(target, query, patternStart, wordStart);\n}\nfunction doScoreFuzzy2Multiple(target, query, patternStart, wordStart) {\n    let totalScore = 0;\n    const totalMatches = [];\n    for (const queryPiece of query) {\n        const [score, matches] = doScoreFuzzy2Single(target, queryPiece, patternStart, wordStart);\n        if (typeof score !== 'number') {\n            // if a single query value does not match, return with\n            // no score entirely, we require all queries to match\n            return NO_SCORE2;\n        }\n        totalScore += score;\n        totalMatches.push(...matches);\n    }\n    // if we have a score, ensure that the positions are\n    // sorted in ascending order and distinct\n    return [totalScore, normalizeMatches(totalMatches)];\n}\nfunction doScoreFuzzy2Single(target, query, patternStart, wordStart) {\n    const score = fuzzyScore(query.original, query.originalLowercase, patternStart, target, target.toLowerCase(), wordStart, true);\n    if (!score) {\n        return NO_SCORE2;\n    }\n    return [score[0], createFuzzyMatches(score)];\n}\nconst NO_ITEM_SCORE = Object.freeze({ score: 0 });\nfunction normalizeMatches(matches) {\n    // sort matches by start to be able to normalize\n    const sortedMatches = matches.sort((matchA, matchB) => {\n        return matchA.start - matchB.start;\n    });\n    // merge matches that overlap\n    const normalizedMatches = [];\n    let currentMatch = undefined;\n    for (const match of sortedMatches) {\n        // if we have no current match or the matches\n        // do not overlap, we take it as is and remember\n        // it for future merging\n        if (!currentMatch || !matchOverlaps(currentMatch, match)) {\n            currentMatch = match;\n            normalizedMatches.push(match);\n        }\n        // otherwise we merge the matches\n        else {\n            currentMatch.start = Math.min(currentMatch.start, match.start);\n            currentMatch.end = Math.max(currentMatch.end, match.end);\n        }\n    }\n    return normalizedMatches;\n}\nfunction matchOverlaps(matchA, matchB) {\n    if (matchA.end < matchB.start) {\n        return false; // A ends before B starts\n    }\n    if (matchB.end < matchA.start) {\n        return false; // B ends before A starts\n    }\n    return true;\n}\n/*\n * If a query is wrapped in quotes, the user does not want to\n * use fuzzy search for this query.\n */\nfunction queryExpectsExactMatch(query) {\n    return query.startsWith('\"') && query.endsWith('\"');\n}\n/**\n * Helper function to prepare a search value for scoring by removing unwanted characters\n * and allowing to score on multiple pieces separated by whitespace character.\n */\nconst MULTIPLE_QUERY_VALUES_SEPARATOR = ' ';\nexport function prepareQuery(original) {\n    if (typeof original !== 'string') {\n        original = '';\n    }\n    const originalLowercase = original.toLowerCase();\n    const { pathNormalized, normalized, normalizedLowercase } = normalizeQuery(original);\n    const containsPathSeparator = pathNormalized.indexOf(sep) >= 0;\n    const expectExactMatch = queryExpectsExactMatch(original);\n    let values = undefined;\n    const originalSplit = original.split(MULTIPLE_QUERY_VALUES_SEPARATOR);\n    if (originalSplit.length > 1) {\n        for (const originalPiece of originalSplit) {\n            const expectExactMatchPiece = queryExpectsExactMatch(originalPiece);\n            const { pathNormalized: pathNormalizedPiece, normalized: normalizedPiece, normalizedLowercase: normalizedLowercasePiece } = normalizeQuery(originalPiece);\n            if (normalizedPiece) {\n                if (!values) {\n                    values = [];\n                }\n                values.push({\n                    original: originalPiece,\n                    originalLowercase: originalPiece.toLowerCase(),\n                    pathNormalized: pathNormalizedPiece,\n                    normalized: normalizedPiece,\n                    normalizedLowercase: normalizedLowercasePiece,\n                    expectContiguousMatch: expectExactMatchPiece\n                });\n            }\n        }\n    }\n    return { original, originalLowercase, pathNormalized, normalized, normalizedLowercase, values, containsPathSeparator, expectContiguousMatch: expectExactMatch };\n}\nfunction normalizeQuery(original) {\n    let pathNormalized;\n    if (isWindows) {\n        pathNormalized = original.replace(/\\//g, sep); // Help Windows users to search for paths when using slash\n    }\n    else {\n        pathNormalized = original.replace(/\\\\/g, sep); // Help macOS/Linux users to search for paths when using backslash\n    }\n    // we remove quotes here because quotes are used for exact match search\n    const normalized = stripWildcards(pathNormalized).replace(/\\s|\"/g, '');\n    return {\n        pathNormalized,\n        normalized,\n        normalizedLowercase: normalized.toLowerCase()\n    };\n}\nexport function pieceToQuery(arg1) {\n    if (Array.isArray(arg1)) {\n        return prepareQuery(arg1.map(piece => piece.original).join(MULTIPLE_QUERY_VALUES_SEPARATOR));\n    }\n    return prepareQuery(arg1.original);\n}\n//#endregion\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport '../../../contrib/symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport { AbstractGotoSymbolQuickAccessProvider } from '../../../contrib/quickAccess/browser/gotoSymbolQuickAccess.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { QuickOutlineNLS } from '../../../common/standaloneStrings.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IOutlineModelService } from '../../../contrib/documentSymbols/browser/outlineModel.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet StandaloneGotoSymbolQuickAccessProvider = class StandaloneGotoSymbolQuickAccessProvider extends AbstractGotoSymbolQuickAccessProvider {\n    constructor(editorService, languageFeaturesService, outlineModelService) {\n        super(languageFeaturesService, outlineModelService);\n        this.editorService = editorService;\n        this.onDidActiveTextEditorControlChange = Event.None;\n    }\n    get activeTextEditorControl() {\n        return withNullAsUndefined(this.editorService.getFocusedCodeEditor());\n    }\n};\nStandaloneGotoSymbolQuickAccessProvider = __decorate([\n    __param(0, ICodeEditorService),\n    __param(1, ILanguageFeaturesService),\n    __param(2, IOutlineModelService)\n], StandaloneGotoSymbolQuickAccessProvider);\nexport { StandaloneGotoSymbolQuickAccessProvider };\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: StandaloneGotoSymbolQuickAccessProvider,\n    prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX,\n    helpEntries: [\n        { description: QuickOutlineNLS.quickOutlineActionLabel, prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX, needsEditor: true },\n        { description: QuickOutlineNLS.quickOutlineByCategoryActionLabel, prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY, needsEditor: true }\n    ]\n});\nexport class GotoLineAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.quickOutline',\n            label: QuickOutlineNLS.quickOutlineActionLabel,\n            alias: 'Go to Symbol...',\n            precondition: EditorContextKeys.hasDocumentSymbolProvider,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 45 /* KeyO */,\n                weight: 100 /* EditorContrib */\n            },\n            contextMenuOpts: {\n                group: 'navigation',\n                order: 3\n            }\n        });\n    }\n    run(accessor) {\n        accessor.get(IQuickInputService).quickAccess.show(AbstractGotoSymbolQuickAccessProvider.PREFIX);\n    }\n}\nregisterEditorAction(GotoLineAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { ReferencesController } from '../../../contrib/gotoSymbol/browser/peek/referencesController.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nlet StandaloneReferencesController = class StandaloneReferencesController extends ReferencesController {\n    constructor(editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService) {\n        super(true, editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService);\n    }\n};\nStandaloneReferencesController = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ICodeEditorService),\n    __param(3, INotificationService),\n    __param(4, IInstantiationService),\n    __param(5, IStorageService),\n    __param(6, IConfigurationService)\n], StandaloneReferencesController);\nexport { StandaloneReferencesController };\nregisterEditorContribution(ReferencesController.ID, StandaloneReferencesController);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\nimport { ToggleHighContrastNLS } from '../../../common/standaloneStrings.js';\nclass ToggleHighContrast extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.toggleHighContrast',\n            label: ToggleHighContrastNLS.toggleHighContrast,\n            alias: 'Toggle High Contrast Theme',\n            precondition: undefined\n        });\n        this._originalThemeName = null;\n    }\n    run(accessor, editor) {\n        const standaloneThemeService = accessor.get(IStandaloneThemeService);\n        if (this._originalThemeName) {\n            // We must toggle back to the integrator's theme\n            standaloneThemeService.setTheme(this._originalThemeName);\n            this._originalThemeName = null;\n        }\n        else {\n            this._originalThemeName = standaloneThemeService.getColorTheme().themeName;\n            standaloneThemeService.setTheme('hc-black');\n        }\n    }\n}\nregisterEditorAction(ToggleHighContrast);\n"],
  "mappings": "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",
  "names": []
}
